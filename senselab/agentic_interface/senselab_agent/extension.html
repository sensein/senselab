<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.4"/>
    <title>senselab.agentic_interface.senselab_agent.extension API documentation</title>
            <link rel="icon" href="https://readthedocs.org/favicon.ico"/>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');body{font-family:'Roboto', sans-serif;}pre{line-height:1.5;font-family:'Roboto', sans-serif;}span.linenos{color:inherit;background-color:transparent;padding-left:5px;padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc;}.pdoc-code{background:#f5f5f5;font-family:'Roboto Mono', monospace;}.pdoc-code .c{color:#6a737d;font-style:italic;}.pdoc-code .err{border:1px solid #ff0000;}.pdoc-code .k{color:#d73a49;font-weight:bold;}.pdoc-code .o{color:#6a737d;}.pdoc-code .ch{color:#6a737d;font-style:italic;}.pdoc-code .cm{color:#6a737d;font-style:italic;}.pdoc-code .cp{color:#999988;}.pdoc-code .cpf{color:#6a737d;font-style:italic;}.pdoc-code .c1{color:#6a737d;font-style:italic;}.pdoc-code .cs{color:#6a737d;font-style:italic;}.pdoc-code .gd{color:#a00000;}.pdoc-code .ge{font-style:italic;}.pdoc-code .gr{color:#e40000;}.pdoc-code .gh{color:#005cc5;font-weight:bold;}.pdoc-code .gi{color:#22863a;}.pdoc-code .go{color:#6a737d;}.pdoc-code .gp{color:#005cc5;font-weight:bold;}.pdoc-code .gs{font-weight:bold;}.pdoc-code .gu{color:#005cc5;font-weight:bold;}.pdoc-code .gt{color:#d73a49;}.pdoc-code .kc{color:#d73a49;font-weight:bold;}.pdoc-code .kd{color:#d73a49;font-weight:bold;}.pdoc-code .kn{color:#d73a49;font-weight:bold;}.pdoc-code .kp{color:#d73a49;}.pdoc-code .kr{color:#d73a49;font-weight:bold;}.pdoc-code .kt{color:#b31d28;}.pdoc-code .m{color:#005cc5;}.pdoc-code .s{color:#032f62;}.pdoc-code .na{color:#6f42c1;}.pdoc-code .nb{color:#d73a49;}.pdoc-code .nc{color:#005cc5;font-weight:bold;}.pdoc-code .no{color:#d73a49;}.pdoc-code .nd{color:#6f42c1;}.pdoc-code .ni{color:#6a737d;font-weight:bold;}.pdoc-code .ne{color:#e36209;font-weight:bold;}.pdoc-code .nf{color:#005cc5;}.pdoc-code .nl{color:#6a737d;}.pdoc-code .nn{color:#005cc5;font-weight:bold;}.pdoc-code .nt{color:#22863a;font-weight:bold;}.pdoc-code .nv{color:#e36209;}.pdoc-code .ow{color:#d73a49;font-weight:bold;}.pdoc-code .w{color:#bbbbbb;}.pdoc-code .mb{color:#005cc5;}.pdoc-code .mf{color:#005cc5;}.pdoc-code .mh{color:#005cc5;}.pdoc-code .mi{color:#005cc5;}.pdoc-code .mo{color:#005cc5;}.pdoc-code .sa{color:#032f62;}.pdoc-code .sb{color:#032f62;}.pdoc-code .sc{color:#032f62;}.pdoc-code .dl{color:#032f62;}.pdoc-code .sd{color:#032f62;font-style:italic;}.pdoc-code .s2{color:#032f62;}.pdoc-code .se{color:#005cc5;font-weight:bold;}.pdoc-code .sh{color:#032f62;}.pdoc-code .si{color:#6a737d;font-weight:bold;}.pdoc-code .sx{color:#22863a;}.pdoc-code .sr{color:#6a737d;}.pdoc-code .s1{color:#032f62;}.pdoc-code .ss{color:#22863a;}.pdoc-code .bp{color:#d73a49;}.pdoc-code .fm{color:#005cc5;}.pdoc-code .vc{color:#e36209;}.pdoc-code .vg{color:#e36209;}.pdoc-code .vi{color:#e36209;}.pdoc-code .vm{color:#e36209;}.pdoc-code .il{color:#005cc5;}.tutorial-button{background-color:#3660a5;border:1px solid #3660a5;color:white;padding:5px 10px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;cursor:pointer;border-radius:12px;transition-duration:0.4s;}.tutorial-button:hover{background-color:white;color:black;border:1px solid #3660a5;}@media (prefers-color-scheme:dark){pre{line-height:1.5;font-family:'Roboto', sans-serif;}span.linenos{color:inherit;background-color:transparent;padding-left:5px;padding-right:20px;}.pdoc-code .hll{background-color:#49483e;}.pdoc-code{background:#272822;color:#f8f8f2;font-family:'Roboto Mono', monospace;}.pdoc-code .c{color:#75715e;}.pdoc-code .err{color:#960050;background-color:#1e0010;}.pdoc-code .esc{color:#f8f8f2;}.pdoc-code .g{color:#f8f8f2;}.pdoc-code .k{color:#66d9ef;}.pdoc-code .l{color:#ae81ff;}.pdoc-code .n{color:#f8f8f2;}.pdoc-code .o{color:#f92672;}.pdoc-code .x{color:#f8f8f2;}.pdoc-code .p{color:#f8f8f2;}.pdoc-code .ch{color:#75715e;}.pdoc-code .cm{color:#75715e;}.pdoc-code .cp{color:#75715e;}.pdoc-code .cpf{color:#75715e;}.pdoc-code .c1{color:#75715e;}.pdoc-code .cs{color:#75715e;}.pdoc-code .gd{color:#f92672;}.pdoc-code .ge{color:#f8f8f2;font-style:italic;}.pdoc-code .gr{color:#f8f8f2;}.pdoc-code .gh{color:#f8f8f2;}.pdoc-code .gi{color:#a6e22e;}.pdoc-code .go{color:#66d9ef;}.pdoc-code .gp{color:#f92672;font-weight:bold;}.pdoc-code .gs{color:#f8f8f2;font-weight:bold;}.pdoc-code .gu{color:#75715e;}.pdoc-code .gt{color:#f8f8f2;}.pdoc-code .kc{color:#66d9ef;}.pdoc-code .kd{color:#66d9ef;}.pdoc-code .kn{color:#f92672;}.pdoc-code .kp{color:#66d9ef;}.pdoc-code .kr{color:#66d9ef;}.pdoc-code .kt{color:#66d9ef;}.pdoc-code .ld{color:#e6db74;}.pdoc-code .m{color:#ae81ff;}.pdoc-code .s{color:#e6db74;}.pdoc-code .na{color:#a6e22e;}.pdoc-code .nb{color:#f8f8f2;}.pdoc-code .nc{color:#a6e22e;}.pdoc-code .no{color:#66d9ef;}.pdoc-code .nd{color:#a6e22e;}.pdoc-code .ni{color:#f8f8f2;}.pdoc-code .ne{color:#a6e22e;}.pdoc-code .nf{color:#a6e22e;}.pdoc-code .nl{color:#f8f8f2;}.pdoc-code .nn{color:#f8f8f2;}.pdoc-code .nx{color:#a6e22e;}.pdoc-code .py{color:#f8f8f2;}.pdoc-code .nt{color:#f92672;}.pdoc-code .nv{color:#f8f8f2;}.pdoc-code .ow{color:#f92672;}.pdoc-code .w{color:#f8f8f2;}.pdoc-code .mb{color:#ae81ff;}.pdoc-code .mf{color:#ae81ff;}.pdoc-code .mh{color:#ae81ff;}.pdoc-code .mi{color:#ae81ff;}.pdoc-code .mo{color:#ae81ff;}.pdoc-code .sa{color:#e6db74;}.pdoc-code .sb{color:#e6db74;}.pdoc-code .sc{color:#e6db74;}.pdoc-code .dl{color:#e6db74;}.pdoc-code .sd{color:#e6db74;font-style:italic;}.pdoc-code .s2{color:#e6db74;}.pdoc-code .se{color:#ae81ff;}.pdoc-code .sh{color:#e6db74;}.pdoc-code .si{color:#e6db74;}.pdoc-code .sx{color:#e6db74;}.pdoc-code .sr{color:#e6db74;}.pdoc-code .s1{color:#e6db74;}.pdoc-code .ss{color:#e6db74;}.pdoc-code .bp{color:#f8f8f2;}.pdoc-code .fm{color:#a6e22e;}.pdoc-code .vc{color:#f8f8f2;}.pdoc-code .vg{color:#f8f8f2;}.pdoc-code .vi{color:#f8f8f2;}.pdoc-code .vm{color:#f8f8f2;}}.pdoc-button.module-list-button{background-color:#0072b2;color:#ffffff !important;border:2px solid #0072b2;padding:10px 20px;font-size:16px;font-weight:500;text-align:center;cursor:pointer;transition:background-color 0.3s ease, border-color 0.3s ease;border-radius:20px; box-shadow:none; }.pdoc-button.module-list-button:hover{background-color:#005ea6;border-color:#005ea6;}</style>
    <style>/*! theme.css */:root{--pdoc-background:#ffffff;}.pdoc{--text:#000000; --muted:#6d6d6d; --link:#0072b2; --link-hover:#004d80; --code:#f5f5f5; --active:#ffd700; --accent:#3989b529; --accent2:#b3b3b3; --nav-hover:rgba(245, 245, 245, 0.5); --name:#d55e00; --def:#009e73; --annotation:#cc79a7; }@media (prefers-color-scheme:dark){:root{--pdoc-background:#202020; }.pdoc{--text:#e0e0e0; --muted:#a0a0a0; --link:#56b4e9; --link-hover:#1f78b4; --code:#2a2a2a; --active:#ffd700; --accent:#3a3a3a; --accent2:#555555; --nav-hover:rgba(50, 50, 50, 0.5); --name:#e69f00; --def:#009e73; --annotation:#f0e442; }}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../senselab_agent.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;senselab.agentic_interface.senselab_agent</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#PARTICIPANT_ICON_URL">PARTICIPANT_ICON_URL</a>
            </li>
            <li>
                    <a class="variable" href="#log">log</a>
            </li>
            <li>
                    <a class="class" href="#CreateNewNotebookTool">CreateNewNotebookTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CreateNewNotebookTool.__init__">CreateNewNotebookTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#CreateNewNotebookTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#CreateNewNotebookTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#CreateNewNotebookTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#CreateNewNotebookTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#CreateNewNotebookTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#CreateNewNotebookTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#CreateNewNotebookTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AddMarkdownCellToNotebookTool">AddMarkdownCellToNotebookTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AddMarkdownCellToNotebookTool.__init__">AddMarkdownCellToNotebookTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#AddMarkdownCellToNotebookTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#AddMarkdownCellToNotebookTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#AddMarkdownCellToNotebookTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#AddMarkdownCellToNotebookTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#AddMarkdownCellToNotebookTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#AddMarkdownCellToNotebookTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#AddMarkdownCellToNotebookTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AddCodeCellTool">AddCodeCellTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AddCodeCellTool.__init__">AddCodeCellTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#AddCodeCellTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#AddCodeCellTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#AddCodeCellTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#AddCodeCellTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#AddCodeCellTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#AddCodeCellTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#AddCodeCellTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RunCellAtIndexTool">RunCellAtIndexTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RunCellAtIndexTool.__init__">RunCellAtIndexTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunCellAtIndexTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunCellAtIndexTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunCellAtIndexTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunCellAtIndexTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunCellAtIndexTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#RunCellAtIndexTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#RunCellAtIndexTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RenameNotebookTool">RenameNotebookTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RenameNotebookTool.__init__">RenameNotebookTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#RenameNotebookTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#RenameNotebookTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#RenameNotebookTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#RenameNotebookTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#RenameNotebookTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#RenameNotebookTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#RenameNotebookTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GetNumberOfCellsTool">GetNumberOfCellsTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GetNumberOfCellsTool.__init__">GetNumberOfCellsTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetNumberOfCellsTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetNumberOfCellsTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetNumberOfCellsTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetNumberOfCellsTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetNumberOfCellsTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#GetNumberOfCellsTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#GetNumberOfCellsTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GetCellTypeAndSourceTool">GetCellTypeAndSourceTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GetCellTypeAndSourceTool.__init__">GetCellTypeAndSourceTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCellTypeAndSourceTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCellTypeAndSourceTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCellTypeAndSourceTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCellTypeAndSourceTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCellTypeAndSourceTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#GetCellTypeAndSourceTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#GetCellTypeAndSourceTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GetCellOutputTool">GetCellOutputTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GetCellOutputTool.__init__">GetCellOutputTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCellOutputTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCellOutputTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCellOutputTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCellOutputTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCellOutputTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#GetCellOutputTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#GetCellOutputTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SetCellTypeAndSourceTool">SetCellTypeAndSourceTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SetCellTypeAndSourceTool.__init__">SetCellTypeAndSourceTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#SetCellTypeAndSourceTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#SetCellTypeAndSourceTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#SetCellTypeAndSourceTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#SetCellTypeAndSourceTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#SetCellTypeAndSourceTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#SetCellTypeAndSourceTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#SetCellTypeAndSourceTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#DeleteCellAtIndexTool">DeleteCellAtIndexTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#DeleteCellAtIndexTool.__init__">DeleteCellAtIndexTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#DeleteCellAtIndexTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#DeleteCellAtIndexTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#DeleteCellAtIndexTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#DeleteCellAtIndexTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#DeleteCellAtIndexTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#DeleteCellAtIndexTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#DeleteCellAtIndexTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#InsertCellAtIndexTool">InsertCellAtIndexTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#InsertCellAtIndexTool.__init__">InsertCellAtIndexTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#InsertCellAtIndexTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#InsertCellAtIndexTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#InsertCellAtIndexTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#InsertCellAtIndexTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#InsertCellAtIndexTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#InsertCellAtIndexTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#InsertCellAtIndexTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SaveNotebookTool">SaveNotebookTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SaveNotebookTool.__init__">SaveNotebookTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#SaveNotebookTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#SaveNotebookTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#SaveNotebookTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#SaveNotebookTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#SaveNotebookTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#SaveNotebookTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#SaveNotebookTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CreateNewPythonFileTool">CreateNewPythonFileTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CreateNewPythonFileTool.__init__">CreateNewPythonFileTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#CreateNewPythonFileTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#CreateNewPythonFileTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#CreateNewPythonFileTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#CreateNewPythonFileTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#CreateNewPythonFileTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#CreateNewPythonFileTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#CreateNewPythonFileTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GetCurrentFileContentTool">GetCurrentFileContentTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GetCurrentFileContentTool.__init__">GetCurrentFileContentTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCurrentFileContentTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCurrentFileContentTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCurrentFileContentTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCurrentFileContentTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#GetCurrentFileContentTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#GetCurrentFileContentTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#GetCurrentFileContentTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#SetCurrentFileContentTool">SetCurrentFileContentTool</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SetCurrentFileContentTool.__init__">SetCurrentFileContentTool</a>
                        </li>
                        <li>
                                <a class="variable" href="#SetCurrentFileContentTool.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#SetCurrentFileContentTool.title">title</a>
                        </li>
                        <li>
                                <a class="variable" href="#SetCurrentFileContentTool.tags">tags</a>
                        </li>
                        <li>
                                <a class="variable" href="#SetCurrentFileContentTool.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#SetCurrentFileContentTool.schema">schema</a>
                        </li>
                        <li>
                                <a class="function" href="#SetCurrentFileContentTool.pre_invoke">pre_invoke</a>
                        </li>
                        <li>
                                <a class="function" href="#SetCurrentFileContentTool.handle_tool_call">handle_tool_call</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AIAgentChatParticipant">AIAgentChatParticipant</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AIAgentChatParticipant.__init__">AIAgentChatParticipant</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentChatParticipant.PREPROMPT">PREPROMPT</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentChatParticipant.POSTPROMPT">POSTPROMPT</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentChatParticipant.host">host</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentChatParticipant.id">id</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentChatParticipant.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentChatParticipant.description">description</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentChatParticipant.icon_path">icon_path</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentChatParticipant.commands">commands</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentChatParticipant.tools">tools</a>
                        </li>
                        <li>
                                <a class="function" href="#AIAgentChatParticipant.handle_chat_request">handle_chat_request</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AIAgentExtension">AIAgentExtension</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#AIAgentExtension.id">id</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentExtension.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentExtension.provider">provider</a>
                        </li>
                        <li>
                                <a class="variable" href="#AIAgentExtension.url">url</a>
                        </li>
                        <li>
                                <a class="function" href="#AIAgentExtension.activate">activate</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../../senselab.html">senselab</a><wbr>.<a href="./../../agentic_interface.html">agentic_interface</a><wbr>.<a href="./../senselab_agent.html">senselab_agent</a><wbr>.extension    </h1>

                        <div class="docstring"><p>This is the senselab AI agentic interface.</p>
</div>

                        <input id="mod-extension-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-extension-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="sd">&quot;&quot;&quot;This is the senselab AI agentic interface.&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">threading</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="k">try</span><span class="p">:</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">notebook_intelligence</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a>        <span class="n">ChatCommand</span><span class="p">,</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a>        <span class="n">ChatRequest</span><span class="p">,</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a>        <span class="n">ChatResponse</span><span class="p">,</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a>        <span class="n">Host</span><span class="p">,</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a>        <span class="n">MarkdownData</span><span class="p">,</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a>        <span class="n">NotebookIntelligenceExtension</span><span class="p">,</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a>        <span class="n">Tool</span><span class="p">,</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a>        <span class="n">ToolPreInvokeResponse</span><span class="p">,</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a>    <span class="p">)</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">notebook_intelligence.mcp_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">MCPChatParticipant</span><span class="p">,</span> <span class="n">MCPServer</span><span class="p">,</span> <span class="n">MCPServerImpl</span><span class="p">,</span> <span class="n">SSEServerParameters</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">.notebook_share_tool</span><span class="w"> </span><span class="kn">import</span> <span class="n">NotebookShareTool</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a>    <span class="k">raise</span> <span class="ne">ModuleNotFoundError</span><span class="p">(</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a>        <span class="s2">&quot;The &#39;notebook_intelligence&#39; package is not installed. &quot;</span> <span class="s2">&quot;Install with: pip install &#39;senselab[senselab-ai]&#39;&quot;</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a>    <span class="p">)</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="n">PARTICIPANT_ICON_URL</span> <span class="o">=</span> <span class="s2">&quot;https://avatars.githubusercontent.com/u/47326880?s=200&amp;v=4&quot;</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a><span class="k">class</span><span class="w"> </span><span class="nc">CreateNewNotebookTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for creating a new notebook.&quot;&quot;&quot;</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="sd">        Args:</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a>    <span class="nd">@property</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a><span class="sd">        Return:</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a>        <span class="k">return</span> <span class="s2">&quot;create_new_notebook&quot;</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a>    <span class="nd">@property</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="sd">        Return:</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>        <span class="k">return</span> <span class="s2">&quot;Create new notebook with the provided code and markdown cells&quot;</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>    <span class="nd">@property</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a><span class="sd">        Return:</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;creation&quot;</span><span class="p">]</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>    <span class="nd">@property</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="sd">        Return:</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a>        <span class="k">return</span> <span class="s2">&quot;Create a new notebook, then append the provided cells in order.&quot;</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a>    <span class="nd">@property</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a><span class="sd">        Return:</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a>        <span class="c1"># IMPORTANT: include `required` inside the `items` object</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>                        <span class="s2">&quot;cell_sources&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>                            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a>                                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>                                <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>                                    <span class="s2">&quot;cell_type&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>                                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>                                        <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown&quot;</span><span class="p">],</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>                                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Type of the cell to create.&quot;</span><span class="p">,</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>                                    <span class="p">},</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>                                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The content of the cell.&quot;</span><span class="p">},</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>                                <span class="p">},</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>                                <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">],</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>                                <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>                            <span class="p">},</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Ordered list of cells to add to the new notebook.&quot;</span><span class="p">,</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>                        <span class="p">}</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>                    <span class="p">},</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_sources&quot;</span><span class="p">],</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>                <span class="p">},</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>            <span class="p">},</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>        <span class="p">}</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a><span class="sd">        Args:</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a><span class="sd">        Return:</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Are you sure you want to create a new notebook?&quot;</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>        <span class="p">)</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a><span class="sd">        Args:</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a><span class="sd">        Return:</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>        <span class="n">cell_sources</span> <span class="o">=</span> <span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cell_sources&quot;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>        <span class="c1"># Create an empty notebook (the UI command returns its path)</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a>            <span class="s2">&quot;notebook-intelligence:create-new-notebook-from-py&quot;</span><span class="p">,</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a>            <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">},</span>  <span class="c1"># empty python file -&gt; empty notebook</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>        <span class="p">)</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">ui_cmd_response</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a>        <span class="c1"># Append cells in order</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a>        <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">cell_sources</span><span class="p">:</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>            <span class="n">ctype</span> <span class="o">=</span> <span class="n">cell</span><span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">]</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>            <span class="n">src</span> <span class="o">=</span> <span class="n">cell</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>            <span class="k">if</span> <span class="n">ctype</span> <span class="o">==</span> <span class="s2">&quot;markdown&quot;</span><span class="p">:</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>                <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a>                    <span class="s2">&quot;notebook-intelligence:add-markdown-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;markdown&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">}</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>                <span class="p">)</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>            <span class="k">else</span><span class="p">:</span>  <span class="c1"># code</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>                <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>                    <span class="s2">&quot;notebook-intelligence:add-code-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">}</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>                <span class="p">)</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Notebook created successfully at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AddMarkdownCellToNotebookTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for adding a markdown cell to a notebook.&quot;&quot;&quot;</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a><span class="sd">        Args:</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>    <span class="nd">@property</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a><span class="sd">        Return:</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a>        <span class="k">return</span> <span class="s2">&quot;add_markdown_cell_to_notebook&quot;</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>    <span class="nd">@property</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a><span class="sd">        Return:</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>        <span class="k">return</span> <span class="s2">&quot;Add markdown cell to notebook&quot;</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>    <span class="nd">@property</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a><span class="sd">        Return:</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown cell&quot;</span><span class="p">,</span> <span class="s2">&quot;addition&quot;</span><span class="p">]</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>    <span class="nd">@property</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a><span class="sd">        Return:</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>        <span class="k">return</span> <span class="s2">&quot;Append a markdown cell to an existing notebook.&quot;</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>    <span class="nd">@property</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a><span class="sd">        Return:</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>                        <span class="s2">&quot;notebook_file_path&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Absolute or server-root-relative notebook path.&quot;</span><span class="p">,</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>                        <span class="p">},</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>                        <span class="s2">&quot;markdown_cell_source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Markdown to append.&quot;</span><span class="p">},</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>                    <span class="p">},</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown_cell_source&quot;</span><span class="p">],</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>                <span class="p">},</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>            <span class="p">},</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>        <span class="p">}</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a><span class="sd">        Args:</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a><span class="sd">        Return:</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Append markdown to the notebook?&quot;</span><span class="p">)</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a><span class="sd">        Args:</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a><span class="sd">        Return:</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>        <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">]</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>        <span class="n">server_root_dir</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">host</span><span class="o">.</span><span class="n">nbi_config</span><span class="o">.</span><span class="n">server_root_dir</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>        <span class="c1"># Normalize to server-root-relative path if needed</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>        <span class="k">if</span> <span class="n">notebook_file_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">server_root_dir</span><span class="p">):</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>            <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">notebook_file_path</span><span class="p">,</span> <span class="n">server_root_dir</span><span class="p">)</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>        <span class="n">src</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;markdown_cell_source&quot;</span><span class="p">]</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>            <span class="s2">&quot;notebook-intelligence:add-markdown-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;markdown&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">notebook_file_path</span><span class="p">}</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>        <span class="p">)</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>        <span class="k">return</span> <span class="s2">&quot;Added markdown cell to notebook&quot;</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AddCodeCellTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for adding a code cell to a notebook.&quot;&quot;&quot;</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a><span class="sd">        Args:</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve the tool call.</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>    <span class="nd">@property</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a><span class="sd">        Return:</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>        <span class="k">return</span> <span class="s2">&quot;add_code_cell_to_notebook&quot;</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>    <span class="nd">@property</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a><span class="sd">        Return:</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>        <span class="k">return</span> <span class="s2">&quot;Add code cell to notebook&quot;</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>    <span class="nd">@property</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a><span class="sd">        Return:</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;code cell&quot;</span><span class="p">,</span> <span class="s2">&quot;addition&quot;</span><span class="p">]</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>    <span class="nd">@property</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a><span class="sd">        Return:</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>        <span class="k">return</span> <span class="s2">&quot;Append a code cell to an existing notebook.&quot;</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>    <span class="nd">@property</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a><span class="sd">        Return:</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>                        <span class="s2">&quot;notebook_file_path&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Absolute or server-root-relative notebook path.&quot;</span><span class="p">,</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a>                        <span class="p">},</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>                        <span class="s2">&quot;code_cell_source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Code to append.&quot;</span><span class="p">},</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>                    <span class="p">},</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">,</span> <span class="s2">&quot;code_cell_source&quot;</span><span class="p">],</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>                <span class="p">},</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>            <span class="p">},</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a>        <span class="p">}</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a><span class="sd">        Args:</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a><span class="sd">        Return:</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Append code to the notebook?&quot;</span><span class="p">)</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a><span class="sd">        Args:</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a><span class="sd">        Return:</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a>        <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">]</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a>        <span class="n">server_root_dir</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">host</span><span class="o">.</span><span class="n">nbi_config</span><span class="o">.</span><span class="n">server_root_dir</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>        <span class="k">if</span> <span class="n">notebook_file_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">server_root_dir</span><span class="p">):</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>            <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">notebook_file_path</span><span class="p">,</span> <span class="n">server_root_dir</span><span class="p">)</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a>        <span class="n">src</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;code_cell_source&quot;</span><span class="p">]</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>            <span class="s2">&quot;notebook-intelligence:add-code-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">notebook_file_path</span><span class="p">}</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>        <span class="p">)</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>        <span class="k">return</span> <span class="s2">&quot;Added code cell to notebook&quot;</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RunCellAtIndexTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Run cell at index tool.&quot;&quot;&quot;</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a><span class="sd">        Args:</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>    <span class="nd">@property</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a><span class="sd">        Return:</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>        <span class="k">return</span> <span class="s2">&quot;run_cell_at_index&quot;</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>    <span class="nd">@property</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a><span class="sd">        Return:</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>        <span class="k">return</span> <span class="s2">&quot;Run cell at index in the active notebook&quot;</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>    <span class="nd">@property</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a><span class="sd">        Return:</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;code cell&quot;</span><span class="p">,</span> <span class="s2">&quot;execution&quot;</span><span class="p">]</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a>    <span class="nd">@property</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a><span class="sd">        Return:</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>        <span class="k">return</span> <span class="s2">&quot;Execute the cell at the given zero-based index in the ACTIVE notebook.&quot;</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>    <span class="nd">@property</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a><span class="sd">        Return:</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>                            <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell to run in the active notebook.&quot;</span><span class="p">,</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>                        <span class="p">}</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>                    <span class="p">},</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>                <span class="p">},</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>            <span class="p">},</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>        <span class="p">}</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a><span class="sd">        Args:</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a><span class="sd">        Return:</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>            <span class="sa">f</span><span class="s2">&quot;Run cell at index </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> in the active notebook?&quot;</span><span class="p">,</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>        <span class="p">)</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a><span class="sd">        Args:</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a><span class="sd">        Return:</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>        <span class="k">if</span> <span class="n">cell_index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;cell_index must be &gt;= 0&quot;</span><span class="p">)</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>        <span class="c1"># Runs against the ACTIVE notebook (no path needed)</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:run-cell-at-index&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">})</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Ran the cell at index: </span><span class="si">{</span><span class="n">cell_index</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RenameNotebookTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Rename the active notebook tool.&quot;&quot;&quot;</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a><span class="sd">        Args:</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>    <span class="nd">@property</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a><span class="sd">        Return:</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>        <span class="k">return</span> <span class="s2">&quot;rename_notebook&quot;</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>    <span class="nd">@property</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a><span class="sd">        Return:</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>        <span class="k">return</span> <span class="s2">&quot;Rename the active notebook&quot;</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>    <span class="nd">@property</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a><span class="sd">        Return:</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;renaming&quot;</span><span class="p">]</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>    <span class="nd">@property</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a><span class="sd">        Return:</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>        <span class="k">return</span> <span class="s2">&quot;Renames the active notebook to the provided name.&quot;</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>    <span class="nd">@property</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a><span class="sd">        Return:</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>                        <span class="s2">&quot;new_name&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a>                            <span class="s2">&quot;minLength&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;New filename for the notebook (e.g., &#39;analysis.ipynb&#39;).&quot;</span><span class="p">,</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>                        <span class="p">}</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>                    <span class="p">},</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;new_name&quot;</span><span class="p">],</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>                <span class="p">},</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>            <span class="p">},</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a>        <span class="p">}</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">        Args:</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a><span class="sd">        Return:</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>            <span class="sa">f</span><span class="s2">&quot;Rename the active notebook to &#39;</span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;new_name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;?&quot;</span><span class="p">,</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>        <span class="p">)</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a><span class="sd">        Args:</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a><span class="sd">        Return:</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>        <span class="n">new_name</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;new_name&quot;</span><span class="p">]</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:rename-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;newName&quot;</span><span class="p">:</span> <span class="n">new_name</span><span class="p">})</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Successfully renamed notebook to &#39;</span><span class="si">{</span><span class="n">new_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GetNumberOfCellsTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get number of cells tool.&quot;&quot;&quot;</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a><span class="sd">        Args:</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>    <span class="nd">@property</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a><span class="sd">        Return:</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>        <span class="k">return</span> <span class="s2">&quot;get_number_of_cells&quot;</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>    <span class="nd">@property</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a><span class="sd">        Return:</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>        <span class="k">return</span> <span class="s2">&quot;Get number of cells in the active notebook&quot;</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>    <span class="nd">@property</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a><span class="sd">        Return:</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell count&quot;</span><span class="p">]</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>    <span class="nd">@property</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a><span class="sd">        Return:</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the count of cells in the ACTIVE notebook.&quot;</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>    <span class="nd">@property</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a><span class="sd">        Return:</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>            <span class="p">},</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>        <span class="p">}</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a><span class="sd">        Args:</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a><span class="sd">        Return:</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>                <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Get number of cells in the active notebook?&quot;</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>            <span class="p">)</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>        <span class="p">)</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a><span class="sd">        Args:</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a><span class="sd">        Return:</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:get-number-of-cells&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GetCellTypeAndSourceTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get cell type and source tool.&quot;&quot;&quot;</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a><span class="sd">        Args:</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>    <span class="nd">@property</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a><span class="sd">        Return:</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>        <span class="k">return</span> <span class="s2">&quot;get_cell_type_and_source&quot;</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>    <span class="nd">@property</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a><span class="sd">        Return:</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>        <span class="k">return</span> <span class="s2">&quot;Get cell type and source at index&quot;</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>    <span class="nd">@property</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a><span class="sd">        Return:</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">]</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>    <span class="nd">@property</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a><span class="sd">        Return:</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the type (&#39;code&#39; or &#39;markdown&#39;) and the source for the given cell index.&quot;</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>    <span class="nd">@property</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a><span class="sd">        Return:</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell.&quot;</span><span class="p">}</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>                    <span class="p">},</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>                <span class="p">},</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>            <span class="p">},</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>        <span class="p">}</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a><span class="sd">        Args:</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a><span class="sd">        Return:</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>                <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>                <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>                <span class="sa">f</span><span class="s2">&quot;Get type and source for cell </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>            <span class="p">)</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>        <span class="p">)</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a><span class="sd">        Args:</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a><span class="sd">        Return:</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>            <span class="s2">&quot;notebook-intelligence:get-cell-type-and-source&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">}</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>        <span class="p">)</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GetCellOutputTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for getting the output of a cell at a specific index.&quot;&quot;&quot;</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a><span class="sd">        Args:</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>    <span class="nd">@property</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a><span class="sd">        Return:</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>        <span class="k">return</span> <span class="s2">&quot;get_cell_output&quot;</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>    <span class="nd">@property</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a><span class="sd">        Return:</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>        <span class="k">return</span> <span class="s2">&quot;Get output of cell at index&quot;</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>    <span class="nd">@property</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a><span class="sd">        Return:</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell output&quot;</span><span class="p">]</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>    <span class="nd">@property</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a><span class="sd">        Return:</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the output of the cell at the given index.&quot;</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>    <span class="nd">@property</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a><span class="sd">        Return:</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell.&quot;</span><span class="p">}</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>                    <span class="p">},</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>                <span class="p">},</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>            <span class="p">},</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>        <span class="p">}</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a><span class="sd">        Args:</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a><span class="sd">        Return:</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>                <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Get output for cell </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>            <span class="p">)</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>        <span class="p">)</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a><span class="sd">        Args:</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a><span class="sd">        Return:</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>            <span class="s2">&quot;notebook-intelligence:get-cell-output&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">}</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>        <span class="p">)</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a><span class="k">class</span><span class="w"> </span><span class="nc">SetCellTypeAndSourceTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for setting the type and source of a cell at a specific index.&quot;&quot;&quot;</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a><span class="sd">        Args:</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>    <span class="nd">@property</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a><span class="sd">        Return:</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>        <span class="k">return</span> <span class="s2">&quot;set_cell_type_and_source&quot;</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>    <span class="nd">@property</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a><span class="sd">        Return:</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>        <span class="k">return</span> <span class="s2">&quot;Set cell type and source at index&quot;</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>    <span class="nd">@property</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a><span class="sd">        Return:</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">]</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>    <span class="nd">@property</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a><span class="sd">        Return:</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>        <span class="k">return</span> <span class="s2">&quot;Sets the cell&#39;s type (&#39;code&#39; or &#39;markdown&#39;) and its source at the given index.&quot;</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>    <span class="nd">@property</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a><span class="sd">        Return:</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell.&quot;</span><span class="p">},</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>                        <span class="s2">&quot;cell_type&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>                            <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown&quot;</span><span class="p">],</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Cell type to set.&quot;</span><span class="p">,</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>                        <span class="p">},</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Cell content (Python code or Markdown).&quot;</span><span class="p">},</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>                    <span class="p">},</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">,</span> <span class="s2">&quot;cell_type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">],</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>                <span class="p">},</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>            <span class="p">},</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>        <span class="p">}</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a><span class="sd">        Args:</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a><span class="sd">        Return:</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>            <span class="sa">f</span><span class="s2">&quot;Set cell </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> to type </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_type&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>        <span class="p">)</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a><span class="sd">        Args:</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a><span class="sd">        Return:</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>            <span class="s2">&quot;notebook-intelligence:set-cell-type-and-source&quot;</span><span class="p">,</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>            <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span> <span class="s2">&quot;cellType&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">],</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]},</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>        <span class="p">)</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a><span class="k">class</span><span class="w"> </span><span class="nc">DeleteCellAtIndexTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for deleting a cell at a specific index.&quot;&quot;&quot;</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a><span class="sd">        Args:</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>    <span class="nd">@property</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a><span class="sd">        Return:</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>        <span class="k">return</span> <span class="s2">&quot;delete_cell_at_index&quot;</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a>    <span class="nd">@property</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a><span class="sd">        Return:</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>        <span class="k">return</span> <span class="s2">&quot;Delete cell at index&quot;</span>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>    <span class="nd">@property</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a><span class="sd">        Return:</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell deletion&quot;</span><span class="p">]</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>    <span class="nd">@property</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a><span class="sd">        Return:</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>        <span class="k">return</span> <span class="s2">&quot;Deletes the cell at the given index in the ACTIVE notebook.&quot;</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>    <span class="nd">@property</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a><span class="sd">        Return:</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>                            <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell to delete.&quot;</span><span class="p">,</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>                        <span class="p">}</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>                    <span class="p">},</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>                <span class="p">},</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>            <span class="p">},</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>        <span class="p">}</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a><span class="sd">        Args:</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a><span class="sd">        Return:</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Delete the cell at index </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a>        <span class="p">)</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a><span class="sd">        Args:</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a><span class="sd">        Return:</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:delete-cell-at-index&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">})</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Deleted the cell at index: </span><span class="si">{</span><span class="n">cell_index</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a><span class="k">class</span><span class="w"> </span><span class="nc">InsertCellAtIndexTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for inserting a new cell at a specific index.&quot;&quot;&quot;</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a><span class="sd">        Args:</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a>    <span class="nd">@property</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a><span class="sd">        Return:</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a>        <span class="k">return</span> <span class="s2">&quot;insert_cell_at_index&quot;</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>    <span class="nd">@property</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a><span class="sd">        Return:</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>        <span class="k">return</span> <span class="s2">&quot;Insert a cell at index&quot;</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>    <span class="nd">@property</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a><span class="sd">        Return:</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell insertion&quot;</span><span class="p">]</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>    <span class="nd">@property</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a><span class="sd">        Return:</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a>        <span class="k">return</span> <span class="s2">&quot;Inserts a new cell (code or markdown) with given source at the index.&quot;</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a>    <span class="nd">@property</span>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a><span class="sd">        Return:</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a>                            <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index where the new cell will be inserted.&quot;</span><span class="p">,</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a>                        <span class="p">},</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a>                        <span class="s2">&quot;cell_type&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a>                            <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown&quot;</span><span class="p">],</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Type of the new cell.&quot;</span><span class="p">,</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>                        <span class="p">},</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Content for the new cell.&quot;</span><span class="p">},</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a>                    <span class="p">},</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">,</span> <span class="s2">&quot;cell_type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">],</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>                <span class="p">},</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>            <span class="p">},</span>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>        <span class="p">}</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a><span class="sd">        Args:</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a><span class="sd">        Return:</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a>            <span class="sa">f</span><span class="s2">&quot;Insert a </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_type&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> cell at index </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>        <span class="p">)</span>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a><span class="sd">        Args:</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a><span class="sd">        Return:</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a>            <span class="s2">&quot;notebook-intelligence:insert-cell-at-index&quot;</span><span class="p">,</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a>            <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span> <span class="s2">&quot;cellType&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">],</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]},</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>        <span class="p">)</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a><span class="k">class</span><span class="w"> </span><span class="nc">SaveNotebookTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for saving the active notebook.&quot;&quot;&quot;</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a><span class="sd">        Args:</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a>    <span class="nd">@property</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a><span class="sd">        Return:</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a>        <span class="k">return</span> <span class="s2">&quot;save_notebook&quot;</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a>    <span class="nd">@property</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a><span class="sd">        Return:</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a>        <span class="k">return</span> <span class="s2">&quot;Save the active notebook to disk&quot;</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a>    <span class="nd">@property</span>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a><span class="sd">        Return:</span>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;saving&quot;</span><span class="p">]</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a>    <span class="nd">@property</span>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a><span class="sd">        Return:</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a>        <span class="k">return</span> <span class="s2">&quot;Saves changes in the ACTIVE notebook.&quot;</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a>    <span class="nd">@property</span>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a><span class="sd">        Return:</span>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a>            <span class="p">},</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a>        <span class="p">}</span>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a><span class="sd">        Args:</span>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a><span class="sd">        Return:</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Save the active notebook?&quot;</span><span class="p">)</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a>        <span class="p">)</span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a><span class="sd">        Args:</span>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a><span class="sd">        Return:</span>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;docmanager:save&quot;</span><span class="p">)</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a>        <span class="k">return</span> <span class="s2">&quot;Saved the notebook&quot;</span>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a>
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a><span class="k">class</span><span class="w"> </span><span class="nc">CreateNewPythonFileTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for creating a new Python file.&quot;&quot;&quot;</span>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a><span class="sd">        Args:</span>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a>    <span class="nd">@property</span>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a><span class="sd">        Return:</span>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a>        <span class="k">return</span> <span class="s2">&quot;create_new_python_file&quot;</span>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a>    <span class="nd">@property</span>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a><span class="sd">        Return:</span>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a>        <span class="k">return</span> <span class="s2">&quot;Create a new Python (.py) file&quot;</span>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a>    <span class="nd">@property</span>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a><span class="sd">        Return:</span>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;file creation&quot;</span><span class="p">,</span> <span class="s2">&quot;python&quot;</span><span class="p">]</span>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a>    <span class="nd">@property</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a><span class="sd">        Return:</span>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a>        <span class="k">return</span> <span class="s2">&quot;Creates a new Python file with the provided code, returning the file path.&quot;</span>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a>    <span class="nd">@property</span>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a><span class="sd">        Return:</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Python source code for the new file.&quot;</span><span class="p">}},</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a>                <span class="p">},</span>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a>            <span class="p">},</span>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a>        <span class="p">}</span>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a><span class="sd">        Args:</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a><span class="sd">        Return:</span>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Create a new Python file with the provided code?&quot;</span>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a>        <span class="p">)</span>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a>
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a><span class="sd">        Args:</span>
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a><span class="sd">        Return:</span>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a>            <span class="s2">&quot;notebook-intelligence:create-new-file&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">]}</span>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a>        <span class="p">)</span>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">ui_cmd_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Created new Python file at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a>
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GetCurrentFileContentTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for getting the content of the current file.&quot;&quot;&quot;</span>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a>
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a><span class="sd">        Args:</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a>    <span class="nd">@property</span>
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a><span class="sd">        Return:</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a>        <span class="k">return</span> <span class="s2">&quot;get_current_file_content&quot;</span>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a>    <span class="nd">@property</span>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a>
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a><span class="sd">        Return:</span>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a>        <span class="k">return</span> <span class="s2">&quot;Get content of the current file&quot;</span>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a>    <span class="nd">@property</span>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a><span class="sd">        Return:</span>
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">]</span>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a>    <span class="nd">@property</span>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a>
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a><span class="sd">        Return:</span>
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the content of the currently active file (notebook or text).&quot;</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a>    <span class="nd">@property</span>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a><span class="sd">        Return:</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a>            <span class="p">},</span>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a>        <span class="p">}</span>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a>
</span><span id="L-1614"><a href="#L-1614"><span class="linenos">1614</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-1615"><a href="#L-1615"><span class="linenos">1615</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-1616"><a href="#L-1616"><span class="linenos">1616</span></a>
</span><span id="L-1617"><a href="#L-1617"><span class="linenos">1617</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-1618"><a href="#L-1618"><span class="linenos">1618</span></a>
</span><span id="L-1619"><a href="#L-1619"><span class="linenos">1619</span></a><span class="sd">        Args:</span>
</span><span id="L-1620"><a href="#L-1620"><span class="linenos">1620</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1621"><a href="#L-1621"><span class="linenos">1621</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1622"><a href="#L-1622"><span class="linenos">1622</span></a>
</span><span id="L-1623"><a href="#L-1623"><span class="linenos">1623</span></a><span class="sd">        Return:</span>
</span><span id="L-1624"><a href="#L-1624"><span class="linenos">1624</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-1625"><a href="#L-1625"><span class="linenos">1625</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1626"><a href="#L-1626"><span class="linenos">1626</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-1627"><a href="#L-1627"><span class="linenos">1627</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-1628"><a href="#L-1628"><span class="linenos">1628</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="L-1629"><a href="#L-1629"><span class="linenos">1629</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Get content of the current file?&quot;</span><span class="p">)</span>
</span><span id="L-1630"><a href="#L-1630"><span class="linenos">1630</span></a>        <span class="p">)</span>
</span><span id="L-1631"><a href="#L-1631"><span class="linenos">1631</span></a>
</span><span id="L-1632"><a href="#L-1632"><span class="linenos">1632</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-1633"><a href="#L-1633"><span class="linenos">1633</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-1634"><a href="#L-1634"><span class="linenos">1634</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1635"><a href="#L-1635"><span class="linenos">1635</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="L-1636"><a href="#L-1636"><span class="linenos">1636</span></a>
</span><span id="L-1637"><a href="#L-1637"><span class="linenos">1637</span></a><span class="sd">        Args:</span>
</span><span id="L-1638"><a href="#L-1638"><span class="linenos">1638</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1639"><a href="#L-1639"><span class="linenos">1639</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-1640"><a href="#L-1640"><span class="linenos">1640</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-1641"><a href="#L-1641"><span class="linenos">1641</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1642"><a href="#L-1642"><span class="linenos">1642</span></a>
</span><span id="L-1643"><a href="#L-1643"><span class="linenos">1643</span></a><span class="sd">        Return:</span>
</span><span id="L-1644"><a href="#L-1644"><span class="linenos">1644</span></a><span class="sd">            str: The content of the current file.</span>
</span><span id="L-1645"><a href="#L-1645"><span class="linenos">1645</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1646"><a href="#L-1646"><span class="linenos">1646</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:get-current-file-content&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-1647"><a href="#L-1647"><span class="linenos">1647</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span><span id="L-1648"><a href="#L-1648"><span class="linenos">1648</span></a>
</span><span id="L-1649"><a href="#L-1649"><span class="linenos">1649</span></a>
</span><span id="L-1650"><a href="#L-1650"><span class="linenos">1650</span></a><span class="k">class</span><span class="w"> </span><span class="nc">SetCurrentFileContentTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="L-1651"><a href="#L-1651"><span class="linenos">1651</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool to set the content of the current file.&quot;&quot;&quot;</span>
</span><span id="L-1652"><a href="#L-1652"><span class="linenos">1652</span></a>
</span><span id="L-1653"><a href="#L-1653"><span class="linenos">1653</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1654"><a href="#L-1654"><span class="linenos">1654</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tool to set the content of the current file.</span>
</span><span id="L-1655"><a href="#L-1655"><span class="linenos">1655</span></a>
</span><span id="L-1656"><a href="#L-1656"><span class="linenos">1656</span></a><span class="sd">        Args:</span>
</span><span id="L-1657"><a href="#L-1657"><span class="linenos">1657</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve the tool invocation.</span>
</span><span id="L-1658"><a href="#L-1658"><span class="linenos">1658</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1659"><a href="#L-1659"><span class="linenos">1659</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="L-1660"><a href="#L-1660"><span class="linenos">1660</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-1661"><a href="#L-1661"><span class="linenos">1661</span></a>
</span><span id="L-1662"><a href="#L-1662"><span class="linenos">1662</span></a>    <span class="nd">@property</span>
</span><span id="L-1663"><a href="#L-1663"><span class="linenos">1663</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1664"><a href="#L-1664"><span class="linenos">1664</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="L-1665"><a href="#L-1665"><span class="linenos">1665</span></a>
</span><span id="L-1666"><a href="#L-1666"><span class="linenos">1666</span></a><span class="sd">        Return:</span>
</span><span id="L-1667"><a href="#L-1667"><span class="linenos">1667</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="L-1668"><a href="#L-1668"><span class="linenos">1668</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1669"><a href="#L-1669"><span class="linenos">1669</span></a>        <span class="k">return</span> <span class="s2">&quot;set_current_file_content&quot;</span>
</span><span id="L-1670"><a href="#L-1670"><span class="linenos">1670</span></a>
</span><span id="L-1671"><a href="#L-1671"><span class="linenos">1671</span></a>    <span class="nd">@property</span>
</span><span id="L-1672"><a href="#L-1672"><span class="linenos">1672</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1673"><a href="#L-1673"><span class="linenos">1673</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="L-1674"><a href="#L-1674"><span class="linenos">1674</span></a>
</span><span id="L-1675"><a href="#L-1675"><span class="linenos">1675</span></a><span class="sd">        Return:</span>
</span><span id="L-1676"><a href="#L-1676"><span class="linenos">1676</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="L-1677"><a href="#L-1677"><span class="linenos">1677</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1678"><a href="#L-1678"><span class="linenos">1678</span></a>        <span class="k">return</span> <span class="s2">&quot;Set content of the current file&quot;</span>
</span><span id="L-1679"><a href="#L-1679"><span class="linenos">1679</span></a>
</span><span id="L-1680"><a href="#L-1680"><span class="linenos">1680</span></a>    <span class="nd">@property</span>
</span><span id="L-1681"><a href="#L-1681"><span class="linenos">1681</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="L-1682"><a href="#L-1682"><span class="linenos">1682</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="L-1683"><a href="#L-1683"><span class="linenos">1683</span></a>
</span><span id="L-1684"><a href="#L-1684"><span class="linenos">1684</span></a><span class="sd">        Return:</span>
</span><span id="L-1685"><a href="#L-1685"><span class="linenos">1685</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="L-1686"><a href="#L-1686"><span class="linenos">1686</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1687"><a href="#L-1687"><span class="linenos">1687</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">]</span>
</span><span id="L-1688"><a href="#L-1688"><span class="linenos">1688</span></a>
</span><span id="L-1689"><a href="#L-1689"><span class="linenos">1689</span></a>    <span class="nd">@property</span>
</span><span id="L-1690"><a href="#L-1690"><span class="linenos">1690</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1691"><a href="#L-1691"><span class="linenos">1691</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="L-1692"><a href="#L-1692"><span class="linenos">1692</span></a>
</span><span id="L-1693"><a href="#L-1693"><span class="linenos">1693</span></a><span class="sd">        Return:</span>
</span><span id="L-1694"><a href="#L-1694"><span class="linenos">1694</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="L-1695"><a href="#L-1695"><span class="linenos">1695</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1696"><a href="#L-1696"><span class="linenos">1696</span></a>        <span class="k">return</span> <span class="s2">&quot;Sets the content of the currently active file (notebook or text).&quot;</span>
</span><span id="L-1697"><a href="#L-1697"><span class="linenos">1697</span></a>
</span><span id="L-1698"><a href="#L-1698"><span class="linenos">1698</span></a>    <span class="nd">@property</span>
</span><span id="L-1699"><a href="#L-1699"><span class="linenos">1699</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-1700"><a href="#L-1700"><span class="linenos">1700</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool&#39;s parameters.</span>
</span><span id="L-1701"><a href="#L-1701"><span class="linenos">1701</span></a>
</span><span id="L-1702"><a href="#L-1702"><span class="linenos">1702</span></a><span class="sd">        Returns:</span>
</span><span id="L-1703"><a href="#L-1703"><span class="linenos">1703</span></a><span class="sd">            dict: The schema dictionary.</span>
</span><span id="L-1704"><a href="#L-1704"><span class="linenos">1704</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1705"><a href="#L-1705"><span class="linenos">1705</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-1706"><a href="#L-1706"><span class="linenos">1706</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="L-1707"><a href="#L-1707"><span class="linenos">1707</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1708"><a href="#L-1708"><span class="linenos">1708</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="L-1709"><a href="#L-1709"><span class="linenos">1709</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="L-1710"><a href="#L-1710"><span class="linenos">1710</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1711"><a href="#L-1711"><span class="linenos">1711</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1712"><a href="#L-1712"><span class="linenos">1712</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="L-1713"><a href="#L-1713"><span class="linenos">1713</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-1714"><a href="#L-1714"><span class="linenos">1714</span></a>                        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;New content to write into the current file.&quot;</span><span class="p">}</span>
</span><span id="L-1715"><a href="#L-1715"><span class="linenos">1715</span></a>                    <span class="p">},</span>
</span><span id="L-1716"><a href="#L-1716"><span class="linenos">1716</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span>
</span><span id="L-1717"><a href="#L-1717"><span class="linenos">1717</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1718"><a href="#L-1718"><span class="linenos">1718</span></a>                <span class="p">},</span>
</span><span id="L-1719"><a href="#L-1719"><span class="linenos">1719</span></a>            <span class="p">},</span>
</span><span id="L-1720"><a href="#L-1720"><span class="linenos">1720</span></a>        <span class="p">}</span>
</span><span id="L-1721"><a href="#L-1721"><span class="linenos">1721</span></a>
</span><span id="L-1722"><a href="#L-1722"><span class="linenos">1722</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="L-1723"><a href="#L-1723"><span class="linenos">1723</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="L-1724"><a href="#L-1724"><span class="linenos">1724</span></a>
</span><span id="L-1725"><a href="#L-1725"><span class="linenos">1725</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="L-1726"><a href="#L-1726"><span class="linenos">1726</span></a>
</span><span id="L-1727"><a href="#L-1727"><span class="linenos">1727</span></a><span class="sd">        Args:</span>
</span><span id="L-1728"><a href="#L-1728"><span class="linenos">1728</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1729"><a href="#L-1729"><span class="linenos">1729</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1730"><a href="#L-1730"><span class="linenos">1730</span></a>
</span><span id="L-1731"><a href="#L-1731"><span class="linenos">1731</span></a><span class="sd">        Return:</span>
</span><span id="L-1732"><a href="#L-1732"><span class="linenos">1732</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="L-1733"><a href="#L-1733"><span class="linenos">1733</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1734"><a href="#L-1734"><span class="linenos">1734</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="L-1735"><a href="#L-1735"><span class="linenos">1735</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-1736"><a href="#L-1736"><span class="linenos">1736</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Overwrite the current file&#39;s content?&quot;</span><span class="p">)</span>
</span><span id="L-1737"><a href="#L-1737"><span class="linenos">1737</span></a>
</span><span id="L-1738"><a href="#L-1738"><span class="linenos">1738</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="L-1739"><a href="#L-1739"><span class="linenos">1739</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="L-1740"><a href="#L-1740"><span class="linenos">1740</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1741"><a href="#L-1741"><span class="linenos">1741</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call to set the current file content.</span>
</span><span id="L-1742"><a href="#L-1742"><span class="linenos">1742</span></a>
</span><span id="L-1743"><a href="#L-1743"><span class="linenos">1743</span></a><span class="sd">        Args:</span>
</span><span id="L-1744"><a href="#L-1744"><span class="linenos">1744</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="L-1745"><a href="#L-1745"><span class="linenos">1745</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="L-1746"><a href="#L-1746"><span class="linenos">1746</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="L-1747"><a href="#L-1747"><span class="linenos">1747</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="L-1748"><a href="#L-1748"><span class="linenos">1748</span></a>
</span><span id="L-1749"><a href="#L-1749"><span class="linenos">1749</span></a><span class="sd">        Return:</span>
</span><span id="L-1750"><a href="#L-1750"><span class="linenos">1750</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="L-1751"><a href="#L-1751"><span class="linenos">1751</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1752"><a href="#L-1752"><span class="linenos">1752</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="L-1753"><a href="#L-1753"><span class="linenos">1753</span></a>            <span class="s2">&quot;notebook-intelligence:set-current-file-content&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]}</span>
</span><span id="L-1754"><a href="#L-1754"><span class="linenos">1754</span></a>        <span class="p">)</span>
</span><span id="L-1755"><a href="#L-1755"><span class="linenos">1755</span></a>        <span class="k">return</span> <span class="s2">&quot;Set the file content&quot;</span>
</span><span id="L-1756"><a href="#L-1756"><span class="linenos">1756</span></a>
</span><span id="L-1757"><a href="#L-1757"><span class="linenos">1757</span></a>
</span><span id="L-1758"><a href="#L-1758"><span class="linenos">1758</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AIAgentChatParticipant</span><span class="p">(</span><span class="n">MCPChatParticipant</span><span class="p">):</span>
</span><span id="L-1759"><a href="#L-1759"><span class="linenos">1759</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A chat participant representing the senselab AI.&quot;&quot;&quot;</span>
</span><span id="L-1760"><a href="#L-1760"><span class="linenos">1760</span></a>
</span><span id="L-1761"><a href="#L-1761"><span class="linenos">1761</span></a>    <span class="n">PREPROMPT</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;You are senselab AI. Solve every user request using the senselab Python package</span>
</span><span id="L-1762"><a href="#L-1762"><span class="linenos">1762</span></a><span class="s2">    (assume it is installed and importable).</span>
</span><span id="L-1763"><a href="#L-1763"><span class="linenos">1763</span></a><span class="s2">    Before writing ANY import, function call, or data structure,</span>
</span><span id="L-1764"><a href="#L-1764"><span class="linenos">1764</span></a><span class="s2">    first consult the Deepwiki MCP server (sensein/senselab, server name: `deepwiki`)</span>
</span><span id="L-1765"><a href="#L-1765"><span class="linenos">1765</span></a><span class="s2">    to confirm the correct senselab utilities/classes/modules to use.</span>
</span><span id="L-1766"><a href="#L-1766"><span class="linenos">1766</span></a><span class="s2">    Do not invent functions or APIs.</span>
</span><span id="L-1767"><a href="#L-1767"><span class="linenos">1767</span></a><span class="s2">    If anything is unclear or ambiguous, STOP and query Deepwiki before coding.</span>
</span><span id="L-1768"><a href="#L-1768"><span class="linenos">1768</span></a>
</span><span id="L-1769"><a href="#L-1769"><span class="linenos">1769</span></a><span class="s2">    Follow an iterative loop: Think  Act  Observe, repeating as needed.</span>
</span><span id="L-1770"><a href="#L-1770"><span class="linenos">1770</span></a><span class="s2">    1) Plan: briefly state your step-by-step plan for solving the task with senselab.</span>
</span><span id="L-1771"><a href="#L-1771"><span class="linenos">1771</span></a><span class="s2">    2) Act (discovery): call Deepwiki tools to confirm the exact senselab symbols</span>
</span><span id="L-1772"><a href="#L-1772"><span class="linenos">1772</span></a><span class="s2">    (module paths, class/function names, expected arguments, return types) and relevant usage notes.</span>
</span><span id="L-1773"><a href="#L-1773"><span class="linenos">1773</span></a><span class="s2">    3) Observe: summarize what you learned from Deepwiki and update your plan if needed.</span>
</span><span id="L-1774"><a href="#L-1774"><span class="linenos">1774</span></a><span class="s2">    4) Plan II: refine your plan based on the new knowledge.</span>
</span><span id="L-1775"><a href="#L-1775"><span class="linenos">1775</span></a><span class="s2">    5) Coding: write code one Jupyter cell at a time.</span>
</span><span id="L-1776"><a href="#L-1776"><span class="linenos">1776</span></a><span class="s2">    Each cell must be self-contained and minimal (anatomic), with only what is necessary for that step.</span>
</span><span id="L-1777"><a href="#L-1777"><span class="linenos">1777</span></a><span class="s2">    6) Execute: Run immediately after writing each cell.</span>
</span><span id="L-1778"><a href="#L-1778"><span class="linenos">1778</span></a><span class="s2">    7) If it fails, debug IN PLACE until it runs successfully.</span>
</span><span id="L-1779"><a href="#L-1779"><span class="linenos">1779</span></a><span class="s2">    Only then proceed to the next step. If user input is needed (e.g., paths, parameters, assumptions),</span>
</span><span id="L-1780"><a href="#L-1780"><span class="linenos">1780</span></a><span class="s2">    explicitly ask the user before continuing.</span>
</span><span id="L-1781"><a href="#L-1781"><span class="linenos">1781</span></a>
</span><span id="L-1782"><a href="#L-1782"><span class="linenos">1782</span></a><span class="s2">    While acting, always name which Deepwiki tool you used (e.g., ask_question, read_wiki_structure,</span>
</span><span id="L-1783"><a href="#L-1783"><span class="linenos">1783</span></a><span class="s2">    read_wiki_contents) and what you asked. Keep responses concise and action-oriented.&quot;&quot;&quot;</span>
</span><span id="L-1784"><a href="#L-1784"><span class="linenos">1784</span></a>
</span><span id="L-1785"><a href="#L-1785"><span class="linenos">1785</span></a>    <span class="n">POSTPROMPT</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;Output format and discipline:</span>
</span><span id="L-1786"><a href="#L-1786"><span class="linenos">1786</span></a><span class="s2">    - Start with **Plan** (numbered steps).</span>
</span><span id="L-1787"><a href="#L-1787"><span class="linenos">1787</span></a><span class="s2">    - For each discovery step, show **Deepwiki query** (tool + question) and **Observation** (what you learned).</span>
</span><span id="L-1788"><a href="#L-1788"><span class="linenos">1788</span></a><span class="s2">    - For each coding step, output exactly one Jupyter cell, then immediately run it;</span>
</span><span id="L-1789"><a href="#L-1789"><span class="linenos">1789</span></a><span class="s2">    if an error occurs, show the error briefly and fix the SAME cell until it succeeds before moving on.</span>
</span><span id="L-1790"><a href="#L-1790"><span class="linenos">1790</span></a><span class="s2">    - Prefer runnable, minimal snippets over long narratives.</span>
</span><span id="L-1791"><a href="#L-1791"><span class="linenos">1791</span></a><span class="s2">    - Never fabricate senselab APIs; if uncertain, consult Deepwiki again.</span>
</span><span id="L-1792"><a href="#L-1792"><span class="linenos">1792</span></a>
</span><span id="L-1793"><a href="#L-1793"><span class="linenos">1793</span></a><span class="s2">    Finalization:</span>
</span><span id="L-1794"><a href="#L-1794"><span class="linenos">1794</span></a><span class="s2">    - Conclude with a **Methods** and **Results** section in the Notebook,</span>
</span><span id="L-1795"><a href="#L-1795"><span class="linenos">1795</span></a><span class="s2">    as in a scientific report (concise, reproducible).</span>
</span><span id="L-1796"><a href="#L-1796"><span class="linenos">1796</span></a><span class="s2">    - In **Methods**, list senselab components used, key parameters, data handling, and the sequence of steps.</span>
</span><span id="L-1797"><a href="#L-1797"><span class="linenos">1797</span></a><span class="s2">    - In **Results**, report outputs/metrics/artifacts produced and any validations performed.</span>
</span><span id="L-1798"><a href="#L-1798"><span class="linenos">1798</span></a><span class="s2">    - If there are limitations or open questions, include a brief **Discussion/Next steps**.</span>
</span><span id="L-1799"><a href="#L-1799"><span class="linenos">1799</span></a>
</span><span id="L-1800"><a href="#L-1800"><span class="linenos">1800</span></a><span class="s2">    Remember:</span>
</span><span id="L-1801"><a href="#L-1801"><span class="linenos">1801</span></a><span class="s2">    - senselab-first;</span>
</span><span id="L-1802"><a href="#L-1802"><span class="linenos">1802</span></a><span class="s2">    - Deepwiki for confirmation before coding;</span>
</span><span id="L-1803"><a href="#L-1803"><span class="linenos">1803</span></a><span class="s2">    - iterate with thinkactobserve;</span>
</span><span id="L-1804"><a href="#L-1804"><span class="linenos">1804</span></a><span class="s2">    - one self-contained cell at a time;</span>
</span><span id="L-1805"><a href="#L-1805"><span class="linenos">1805</span></a><span class="s2">    - run and fix before proceeding;</span>
</span><span id="L-1806"><a href="#L-1806"><span class="linenos">1806</span></a><span class="s2">    - convert any relative paths to absolute paths before using them with senselab utilities.</span>
</span><span id="L-1807"><a href="#L-1807"><span class="linenos">1807</span></a><span class="s2">    &quot;&quot;&quot;</span>
</span><span id="L-1808"><a href="#L-1808"><span class="linenos">1808</span></a>
</span><span id="L-1809"><a href="#L-1809"><span class="linenos">1809</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="n">Host</span><span class="p">,</span> <span class="n">servers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MCPServer</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1810"><a href="#L-1810"><span class="linenos">1810</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the senselab AI chat participant.</span>
</span><span id="L-1811"><a href="#L-1811"><span class="linenos">1811</span></a>
</span><span id="L-1812"><a href="#L-1812"><span class="linenos">1812</span></a><span class="sd">        Args:</span>
</span><span id="L-1813"><a href="#L-1813"><span class="linenos">1813</span></a><span class="sd">            host (Host): The host of the chat participant.</span>
</span><span id="L-1814"><a href="#L-1814"><span class="linenos">1814</span></a><span class="sd">            servers (list[MCPServer]): The list of MCP servers the participant can access.</span>
</span><span id="L-1815"><a href="#L-1815"><span class="linenos">1815</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1816"><a href="#L-1816"><span class="linenos">1816</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
</span><span id="L-1817"><a href="#L-1817"><span class="linenos">1817</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;senselab-ai&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;senselab AI&quot;</span><span class="p">,</span> <span class="n">servers</span><span class="o">=</span><span class="n">servers</span><span class="p">,</span> <span class="n">nbi_tools</span><span class="o">=</span><span class="p">[])</span>
</span><span id="L-1818"><a href="#L-1818"><span class="linenos">1818</span></a>
</span><span id="L-1819"><a href="#L-1819"><span class="linenos">1819</span></a>    <span class="nd">@property</span>
</span><span id="L-1820"><a href="#L-1820"><span class="linenos">1820</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1821"><a href="#L-1821"><span class="linenos">1821</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The ID of the senselab AI Extension.</span>
</span><span id="L-1822"><a href="#L-1822"><span class="linenos">1822</span></a>
</span><span id="L-1823"><a href="#L-1823"><span class="linenos">1823</span></a><span class="sd">        Return:</span>
</span><span id="L-1824"><a href="#L-1824"><span class="linenos">1824</span></a><span class="sd">            str: The ID of the senselab AI Extension.</span>
</span><span id="L-1825"><a href="#L-1825"><span class="linenos">1825</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1826"><a href="#L-1826"><span class="linenos">1826</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab-ai&quot;</span>
</span><span id="L-1827"><a href="#L-1827"><span class="linenos">1827</span></a>
</span><span id="L-1828"><a href="#L-1828"><span class="linenos">1828</span></a>    <span class="nd">@property</span>
</span><span id="L-1829"><a href="#L-1829"><span class="linenos">1829</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1830"><a href="#L-1830"><span class="linenos">1830</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the senselab AI Extension.</span>
</span><span id="L-1831"><a href="#L-1831"><span class="linenos">1831</span></a>
</span><span id="L-1832"><a href="#L-1832"><span class="linenos">1832</span></a><span class="sd">        Return:</span>
</span><span id="L-1833"><a href="#L-1833"><span class="linenos">1833</span></a><span class="sd">            str: The name of the senselab AI Extension.</span>
</span><span id="L-1834"><a href="#L-1834"><span class="linenos">1834</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1835"><a href="#L-1835"><span class="linenos">1835</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab AI&quot;</span>
</span><span id="L-1836"><a href="#L-1836"><span class="linenos">1836</span></a>
</span><span id="L-1837"><a href="#L-1837"><span class="linenos">1837</span></a>    <span class="nd">@property</span>
</span><span id="L-1838"><a href="#L-1838"><span class="linenos">1838</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1839"><a href="#L-1839"><span class="linenos">1839</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The description of the senselab AI Extension.</span>
</span><span id="L-1840"><a href="#L-1840"><span class="linenos">1840</span></a>
</span><span id="L-1841"><a href="#L-1841"><span class="linenos">1841</span></a><span class="sd">        Return:</span>
</span><span id="L-1842"><a href="#L-1842"><span class="linenos">1842</span></a><span class="sd">            str: The description of the senselab AI Extension.</span>
</span><span id="L-1843"><a href="#L-1843"><span class="linenos">1843</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1844"><a href="#L-1844"><span class="linenos">1844</span></a>        <span class="k">return</span> <span class="s2">&quot;The senselab AI that assists with using senselab for audio, video, and text analysis.&quot;</span>
</span><span id="L-1845"><a href="#L-1845"><span class="linenos">1845</span></a>
</span><span id="L-1846"><a href="#L-1846"><span class="linenos">1846</span></a>    <span class="nd">@property</span>
</span><span id="L-1847"><a href="#L-1847"><span class="linenos">1847</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">icon_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1848"><a href="#L-1848"><span class="linenos">1848</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The icon path of the senselab AI Extension.</span>
</span><span id="L-1849"><a href="#L-1849"><span class="linenos">1849</span></a>
</span><span id="L-1850"><a href="#L-1850"><span class="linenos">1850</span></a><span class="sd">        Return:</span>
</span><span id="L-1851"><a href="#L-1851"><span class="linenos">1851</span></a><span class="sd">            str: The icon path of the senselab AI Extension.</span>
</span><span id="L-1852"><a href="#L-1852"><span class="linenos">1852</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1853"><a href="#L-1853"><span class="linenos">1853</span></a>        <span class="k">return</span> <span class="n">PARTICIPANT_ICON_URL</span>
</span><span id="L-1854"><a href="#L-1854"><span class="linenos">1854</span></a>
</span><span id="L-1855"><a href="#L-1855"><span class="linenos">1855</span></a>    <span class="nd">@property</span>
</span><span id="L-1856"><a href="#L-1856"><span class="linenos">1856</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">commands</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatCommand</span><span class="p">]:</span>
</span><span id="L-1857"><a href="#L-1857"><span class="linenos">1857</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of commands available for the senselab AI Extension.</span>
</span><span id="L-1858"><a href="#L-1858"><span class="linenos">1858</span></a>
</span><span id="L-1859"><a href="#L-1859"><span class="linenos">1859</span></a><span class="sd">        Return:</span>
</span><span id="L-1860"><a href="#L-1860"><span class="linenos">1860</span></a><span class="sd">            list[ChatCommand]: The list of commands available for the senselab AI Extension.</span>
</span><span id="L-1861"><a href="#L-1861"><span class="linenos">1861</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1862"><a href="#L-1862"><span class="linenos">1862</span></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="L-1863"><a href="#L-1863"><span class="linenos">1863</span></a>            <span class="o">*</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">commands</span><span class="p">,</span>  <span class="c1"># keep anything parent exposes</span>
</span><span id="L-1864"><a href="#L-1864"><span class="linenos">1864</span></a>            <span class="n">ChatCommand</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Show help&quot;</span><span class="p">),</span>
</span><span id="L-1865"><a href="#L-1865"><span class="linenos">1865</span></a>        <span class="p">]</span>
</span><span id="L-1866"><a href="#L-1866"><span class="linenos">1866</span></a>
</span><span id="L-1867"><a href="#L-1867"><span class="linenos">1867</span></a>    <span class="nd">@property</span>
</span><span id="L-1868"><a href="#L-1868"><span class="linenos">1868</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tools</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Tool</span><span class="p">]:</span>
</span><span id="L-1869"><a href="#L-1869"><span class="linenos">1869</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of tools available for the senselab AI Extension.</span>
</span><span id="L-1870"><a href="#L-1870"><span class="linenos">1870</span></a>
</span><span id="L-1871"><a href="#L-1871"><span class="linenos">1871</span></a><span class="sd">        Return:</span>
</span><span id="L-1872"><a href="#L-1872"><span class="linenos">1872</span></a><span class="sd">            list[Tool]: The list of tools available for the senselab AI Extension.</span>
</span><span id="L-1873"><a href="#L-1873"><span class="linenos">1873</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1874"><a href="#L-1874"><span class="linenos">1874</span></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="L-1875"><a href="#L-1875"><span class="linenos">1875</span></a>            <span class="o">*</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">tools</span><span class="p">,</span>  <span class="c1"># keep anything parent exposes</span>
</span><span id="L-1876"><a href="#L-1876"><span class="linenos">1876</span></a>            <span class="n">CreateNewNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="L-1877"><a href="#L-1877"><span class="linenos">1877</span></a>            <span class="n">AddMarkdownCellToNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="L-1878"><a href="#L-1878"><span class="linenos">1878</span></a>            <span class="n">AddCodeCellTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="L-1879"><a href="#L-1879"><span class="linenos">1879</span></a>            <span class="n">RunCellAtIndexTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="L-1880"><a href="#L-1880"><span class="linenos">1880</span></a>            <span class="n">RenameNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="L-1881"><a href="#L-1881"><span class="linenos">1881</span></a>            <span class="n">GetNumberOfCellsTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="L-1882"><a href="#L-1882"><span class="linenos">1882</span></a>            <span class="n">GetCellTypeAndSourceTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="L-1883"><a href="#L-1883"><span class="linenos">1883</span></a>            <span class="n">GetCellOutputTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="L-1884"><a href="#L-1884"><span class="linenos">1884</span></a>            <span class="n">SetCellTypeAndSourceTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="L-1885"><a href="#L-1885"><span class="linenos">1885</span></a>            <span class="n">DeleteCellAtIndexTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="L-1886"><a href="#L-1886"><span class="linenos">1886</span></a>            <span class="n">InsertCellAtIndexTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="L-1887"><a href="#L-1887"><span class="linenos">1887</span></a>            <span class="n">SaveNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="L-1888"><a href="#L-1888"><span class="linenos">1888</span></a>            <span class="n">CreateNewPythonFileTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="L-1889"><a href="#L-1889"><span class="linenos">1889</span></a>            <span class="n">GetCurrentFileContentTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="L-1890"><a href="#L-1890"><span class="linenos">1890</span></a>            <span class="n">SetCurrentFileContentTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="L-1891"><a href="#L-1891"><span class="linenos">1891</span></a>            <span class="n">NotebookShareTool</span><span class="p">(),</span>
</span><span id="L-1892"><a href="#L-1892"><span class="linenos">1892</span></a>        <span class="p">]</span>
</span><span id="L-1893"><a href="#L-1893"><span class="linenos">1893</span></a>
</span><span id="L-1894"><a href="#L-1894"><span class="linenos">1894</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_chat_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1895"><a href="#L-1895"><span class="linenos">1895</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This method is responsible for processing incoming chat requests and generating appropriate responses.</span>
</span><span id="L-1896"><a href="#L-1896"><span class="linenos">1896</span></a>
</span><span id="L-1897"><a href="#L-1897"><span class="linenos">1897</span></a><span class="sd">        Args:</span>
</span><span id="L-1898"><a href="#L-1898"><span class="linenos">1898</span></a><span class="sd">            request (ChatRequest): The incoming chat request.</span>
</span><span id="L-1899"><a href="#L-1899"><span class="linenos">1899</span></a><span class="sd">            response (ChatResponse): The chat response to be sent.</span>
</span><span id="L-1900"><a href="#L-1900"><span class="linenos">1900</span></a><span class="sd">            options (dict, optional): Additional options for handling the request.</span>
</span><span id="L-1901"><a href="#L-1901"><span class="linenos">1901</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1902"><a href="#L-1902"><span class="linenos">1902</span></a>        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;help&quot;</span><span class="p">:</span>
</span><span id="L-1903"><a href="#L-1903"><span class="linenos">1903</span></a>            <span class="n">response</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span>
</span><span id="L-1904"><a href="#L-1904"><span class="linenos">1904</span></a>                <span class="n">MarkdownData</span><span class="p">(</span>
</span><span id="L-1905"><a href="#L-1905"><span class="linenos">1905</span></a><span class="w">                    </span><span class="sd">&quot;&quot;&quot;I am the senselab AI. I can help you with audio, text, and video analysis.</span>
</span><span id="L-1906"><a href="#L-1906"><span class="linenos">1906</span></a><span class="sd">                    Here are some example prompts you can try:\n</span>
</span><span id="L-1907"><a href="#L-1907"><span class="linenos">1907</span></a><span class="sd">                    \n```text\n@senselab-ai Read the audio files in &#39;&lt;directory_path&gt;&#39;, make them mono,</span>
</span><span id="L-1908"><a href="#L-1908"><span class="linenos">1908</span></a><span class="sd">                    resample them to 16KHz, and extract audio features.\n```\n</span>
</span><span id="L-1909"><a href="#L-1909"><span class="linenos">1909</span></a><span class="sd">                    \n```text\n@senselab-ai Read the audio files in &#39;&lt;directory_path&gt;&#39;, make them mono,</span>
</span><span id="L-1910"><a href="#L-1910"><span class="linenos">1910</span></a><span class="sd">                    resample them to 16KHz, and transcribe them with word-level timestamps.\n```\n</span>
</span><span id="L-1911"><a href="#L-1911"><span class="linenos">1911</span></a><span class="sd">                    \n```text\n@senselab-ai Share this notebook publicly.\n```\n</span>
</span><span id="L-1912"><a href="#L-1912"><span class="linenos">1912</span></a>
</span><span id="L-1913"><a href="#L-1913"><span class="linenos">1913</span></a>
</span><span id="L-1914"><a href="#L-1914"><span class="linenos">1914</span></a><span class="sd">                    &quot;&quot;&quot;</span>
</span><span id="L-1915"><a href="#L-1915"><span class="linenos">1915</span></a>                <span class="p">)</span>
</span><span id="L-1916"><a href="#L-1916"><span class="linenos">1916</span></a>            <span class="p">)</span>
</span><span id="L-1917"><a href="#L-1917"><span class="linenos">1917</span></a>            <span class="n">response</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</span><span id="L-1918"><a href="#L-1918"><span class="linenos">1918</span></a>            <span class="k">return</span>
</span><span id="L-1919"><a href="#L-1919"><span class="linenos">1919</span></a>
</span><span id="L-1920"><a href="#L-1920"><span class="linenos">1920</span></a>        <span class="n">system_prompt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-1921"><a href="#L-1921"><span class="linenos">1921</span></a><span class="s2">        Try to answer the questions with `senselab` Python package (you can assume it&#39;s installed).</span>
</span><span id="L-1922"><a href="#L-1922"><span class="linenos">1922</span></a><span class="s2">        You **MUST** query the Deepwiki server (`deepwiki`) to verify every class, function,</span>
</span><span id="L-1923"><a href="#L-1923"><span class="linenos">1923</span></a><span class="s2">        or module **BEFORE** writing any code that uses it (repo: sensein/senselab).</span>
</span><span id="L-1924"><a href="#L-1924"><span class="linenos">1924</span></a><span class="s2">        &quot;&quot;&quot;</span>
</span><span id="L-1925"><a href="#L-1925"><span class="linenos">1925</span></a>
</span><span id="L-1926"><a href="#L-1926"><span class="linenos">1926</span></a>        <span class="n">options</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-1927"><a href="#L-1927"><span class="linenos">1927</span></a>        <span class="n">options</span><span class="p">[</span><span class="s2">&quot;system_prompt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">system_prompt</span>
</span><span id="L-1928"><a href="#L-1928"><span class="linenos">1928</span></a>
</span><span id="L-1929"><a href="#L-1929"><span class="linenos">1929</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_chat_request_with_tools</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</span><span id="L-1930"><a href="#L-1930"><span class="linenos">1930</span></a>
</span><span id="L-1931"><a href="#L-1931"><span class="linenos">1931</span></a>
</span><span id="L-1932"><a href="#L-1932"><span class="linenos">1932</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AIAgentExtension</span><span class="p">(</span><span class="n">NotebookIntelligenceExtension</span><span class="p">):</span>
</span><span id="L-1933"><a href="#L-1933"><span class="linenos">1933</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;AI Agent Extension for Jupyter lab.&quot;&quot;&quot;</span>
</span><span id="L-1934"><a href="#L-1934"><span class="linenos">1934</span></a>
</span><span id="L-1935"><a href="#L-1935"><span class="linenos">1935</span></a>    <span class="nd">@property</span>
</span><span id="L-1936"><a href="#L-1936"><span class="linenos">1936</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1937"><a href="#L-1937"><span class="linenos">1937</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The ID of the senselab AI Extension.</span>
</span><span id="L-1938"><a href="#L-1938"><span class="linenos">1938</span></a>
</span><span id="L-1939"><a href="#L-1939"><span class="linenos">1939</span></a><span class="sd">        Return:</span>
</span><span id="L-1940"><a href="#L-1940"><span class="linenos">1940</span></a><span class="sd">            str: The ID of the senselab AI Extension.</span>
</span><span id="L-1941"><a href="#L-1941"><span class="linenos">1941</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1942"><a href="#L-1942"><span class="linenos">1942</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab-agentic-interface-extension&quot;</span>
</span><span id="L-1943"><a href="#L-1943"><span class="linenos">1943</span></a>
</span><span id="L-1944"><a href="#L-1944"><span class="linenos">1944</span></a>    <span class="nd">@property</span>
</span><span id="L-1945"><a href="#L-1945"><span class="linenos">1945</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1946"><a href="#L-1946"><span class="linenos">1946</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the senselab AI Extension.</span>
</span><span id="L-1947"><a href="#L-1947"><span class="linenos">1947</span></a>
</span><span id="L-1948"><a href="#L-1948"><span class="linenos">1948</span></a><span class="sd">        Return:</span>
</span><span id="L-1949"><a href="#L-1949"><span class="linenos">1949</span></a><span class="sd">            str: The name of the senselab AI Extension.</span>
</span><span id="L-1950"><a href="#L-1950"><span class="linenos">1950</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1951"><a href="#L-1951"><span class="linenos">1951</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab AI Extension&quot;</span>
</span><span id="L-1952"><a href="#L-1952"><span class="linenos">1952</span></a>
</span><span id="L-1953"><a href="#L-1953"><span class="linenos">1953</span></a>    <span class="nd">@property</span>
</span><span id="L-1954"><a href="#L-1954"><span class="linenos">1954</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">provider</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1955"><a href="#L-1955"><span class="linenos">1955</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The provider of the senselab AI Extension.</span>
</span><span id="L-1956"><a href="#L-1956"><span class="linenos">1956</span></a>
</span><span id="L-1957"><a href="#L-1957"><span class="linenos">1957</span></a><span class="sd">        Return:</span>
</span><span id="L-1958"><a href="#L-1958"><span class="linenos">1958</span></a><span class="sd">            str: The provider of the senselab AI Extension.</span>
</span><span id="L-1959"><a href="#L-1959"><span class="linenos">1959</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1960"><a href="#L-1960"><span class="linenos">1960</span></a>        <span class="k">return</span> <span class="s2">&quot;sensein/senselab&quot;</span>
</span><span id="L-1961"><a href="#L-1961"><span class="linenos">1961</span></a>
</span><span id="L-1962"><a href="#L-1962"><span class="linenos">1962</span></a>    <span class="nd">@property</span>
</span><span id="L-1963"><a href="#L-1963"><span class="linenos">1963</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1964"><a href="#L-1964"><span class="linenos">1964</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The URL for the senselab AI Extension repository.</span>
</span><span id="L-1965"><a href="#L-1965"><span class="linenos">1965</span></a>
</span><span id="L-1966"><a href="#L-1966"><span class="linenos">1966</span></a><span class="sd">        Return:</span>
</span><span id="L-1967"><a href="#L-1967"><span class="linenos">1967</span></a><span class="sd">            str: The URL for the senselab AI Extension repository.</span>
</span><span id="L-1968"><a href="#L-1968"><span class="linenos">1968</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1969"><a href="#L-1969"><span class="linenos">1969</span></a>        <span class="k">return</span> <span class="s2">&quot;https://github.com/sensein/senselab&quot;</span>
</span><span id="L-1970"><a href="#L-1970"><span class="linenos">1970</span></a>
</span><span id="L-1971"><a href="#L-1971"><span class="linenos">1971</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_make_deepwiki_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MCPServer</span><span class="p">:</span>
</span><span id="L-1972"><a href="#L-1972"><span class="linenos">1972</span></a>        <span class="k">return</span> <span class="n">MCPServerImpl</span><span class="p">(</span>
</span><span id="L-1973"><a href="#L-1973"><span class="linenos">1973</span></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;deepwiki&quot;</span><span class="p">,</span>
</span><span id="L-1974"><a href="#L-1974"><span class="linenos">1974</span></a>            <span class="n">sse_params</span><span class="o">=</span><span class="n">SSEServerParameters</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://mcp.deepwiki.com/sse&quot;</span><span class="p">),</span>
</span><span id="L-1975"><a href="#L-1975"><span class="linenos">1975</span></a>            <span class="n">auto_approve_tools</span><span class="o">=</span><span class="p">[],</span>
</span><span id="L-1976"><a href="#L-1976"><span class="linenos">1976</span></a>        <span class="p">)</span>
</span><span id="L-1977"><a href="#L-1977"><span class="linenos">1977</span></a>
</span><span id="L-1978"><a href="#L-1978"><span class="linenos">1978</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_init_tool_lists_bg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">servers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MCPServer</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1979"><a href="#L-1979"><span class="linenos">1979</span></a>        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_go</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1980"><a href="#L-1980"><span class="linenos">1980</span></a>            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">servers</span><span class="p">:</span>
</span><span id="L-1981"><a href="#L-1981"><span class="linenos">1981</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="L-1982"><a href="#L-1982"><span class="linenos">1982</span></a>                    <span class="k">await</span> <span class="n">s</span><span class="o">.</span><span class="n">update_tool_list</span><span class="p">()</span>
</span><span id="L-1983"><a href="#L-1983"><span class="linenos">1983</span></a>                    <span class="c1"># Optional: log discovered tools for quick inspection</span>
</span><span id="L-1984"><a href="#L-1984"><span class="linenos">1984</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1985"><a href="#L-1985"><span class="linenos">1985</span></a>                        <span class="n">tools</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get_tools</span><span class="p">()</span>
</span><span id="L-1986"><a href="#L-1986"><span class="linenos">1986</span></a>                        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tools</span><span class="p">]</span>
</span><span id="L-1987"><a href="#L-1987"><span class="linenos">1987</span></a>                        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[MCP:</span><span class="si">{</span><span class="n">s</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">] tools discovered: </span><span class="si">{</span><span class="n">names</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-1988"><a href="#L-1988"><span class="linenos">1988</span></a>                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1989"><a href="#L-1989"><span class="linenos">1989</span></a>                        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[MCP:</span><span class="si">{</span><span class="n">s</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">] failed listing tools locally: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-1990"><a href="#L-1990"><span class="linenos">1990</span></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1991"><a href="#L-1991"><span class="linenos">1991</span></a>                    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error initializing tool list for server </span><span class="si">{</span><span class="n">s</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-1992"><a href="#L-1992"><span class="linenos">1992</span></a>
</span><span id="L-1993"><a href="#L-1993"><span class="linenos">1993</span></a>        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">_go</span><span class="p">()),</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="L-1994"><a href="#L-1994"><span class="linenos">1994</span></a>
</span><span id="L-1995"><a href="#L-1995"><span class="linenos">1995</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="n">Host</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1996"><a href="#L-1996"><span class="linenos">1996</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Activate the senselab AI extension.</span>
</span><span id="L-1997"><a href="#L-1997"><span class="linenos">1997</span></a>
</span><span id="L-1998"><a href="#L-1998"><span class="linenos">1998</span></a><span class="sd">        The senselab AI extension includes a custom AI agent chat participant</span>
</span><span id="L-1999"><a href="#L-1999"><span class="linenos">1999</span></a><span class="sd">        that interacts with the user through natural language following</span>
</span><span id="L-2000"><a href="#L-2000"><span class="linenos">2000</span></a><span class="sd">        a predefined prompt and a set of tools, like Deepwiki.</span>
</span><span id="L-2001"><a href="#L-2001"><span class="linenos">2001</span></a>
</span><span id="L-2002"><a href="#L-2002"><span class="linenos">2002</span></a><span class="sd">        Args:</span>
</span><span id="L-2003"><a href="#L-2003"><span class="linenos">2003</span></a><span class="sd">            host (Host): The host environment to activate the extension in.</span>
</span><span id="L-2004"><a href="#L-2004"><span class="linenos">2004</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2005"><a href="#L-2005"><span class="linenos">2005</span></a>        <span class="c1"># Build the single Deepwiki server in code</span>
</span><span id="L-2006"><a href="#L-2006"><span class="linenos">2006</span></a>        <span class="n">deepwiki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_deepwiki_server</span><span class="p">()</span>
</span><span id="L-2007"><a href="#L-2007"><span class="linenos">2007</span></a>        <span class="n">servers</span> <span class="o">=</span> <span class="p">[</span><span class="n">deepwiki</span><span class="p">]</span>
</span><span id="L-2008"><a href="#L-2008"><span class="linenos">2008</span></a>
</span><span id="L-2009"><a href="#L-2009"><span class="linenos">2009</span></a>        <span class="c1"># Create + register your participant</span>
</span><span id="L-2010"><a href="#L-2010"><span class="linenos">2010</span></a>        <span class="n">participant</span> <span class="o">=</span> <span class="n">AIAgentChatParticipant</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">servers</span><span class="o">=</span><span class="n">servers</span><span class="p">)</span>
</span><span id="L-2011"><a href="#L-2011"><span class="linenos">2011</span></a>        <span class="n">host</span><span class="o">.</span><span class="n">register_chat_participant</span><span class="p">(</span><span class="n">participant</span><span class="p">)</span>
</span><span id="L-2012"><a href="#L-2012"><span class="linenos">2012</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">participant</span> <span class="o">=</span> <span class="n">participant</span>
</span><span id="L-2013"><a href="#L-2013"><span class="linenos">2013</span></a>
</span><span id="L-2014"><a href="#L-2014"><span class="linenos">2014</span></a>        <span class="c1"># Populate MCP tool lists in the background so tools appear promptly</span>
</span><span id="L-2015"><a href="#L-2015"><span class="linenos">2015</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_init_tool_lists_bg</span><span class="p">(</span><span class="n">servers</span><span class="p">)</span>
</span><span id="L-2016"><a href="#L-2016"><span class="linenos">2016</span></a>
</span><span id="L-2017"><a href="#L-2017"><span class="linenos">2017</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;senselab AI Extension activated.&quot;</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="PARTICIPANT_ICON_URL">
                    <div class="attr variable">
            <span class="name">PARTICIPANT_ICON_URL</span>        =
<span class="default_value">&#39;https://avatars.githubusercontent.com/u/47326880?s=200&amp;v=4&#39;</span>

        
    </div>
    <a class="headerlink" href="#PARTICIPANT_ICON_URL"></a>
    
    

                </section>
                <section id="log">
                    <div class="attr variable">
            <span class="name">log</span>        =
<span class="default_value">&lt;Logger <a href="">senselab.agentic_interface.senselab_agent.extension</a> (DEBUG)&gt;</span>

        
    </div>
    <a class="headerlink" href="#log"></a>
    
    

                </section>
                <section id="CreateNewNotebookTool">
                            <input id="CreateNewNotebookTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CreateNewNotebookTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="CreateNewNotebookTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewNotebookTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewNotebookTool-35"><a href="#CreateNewNotebookTool-35"><span class="linenos"> 35</span></a><span class="k">class</span><span class="w"> </span><span class="nc">CreateNewNotebookTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="CreateNewNotebookTool-36"><a href="#CreateNewNotebookTool-36"><span class="linenos"> 36</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for creating a new notebook.&quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool-37"><a href="#CreateNewNotebookTool-37"><span class="linenos"> 37</span></a>
</span><span id="CreateNewNotebookTool-38"><a href="#CreateNewNotebookTool-38"><span class="linenos"> 38</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool-39"><a href="#CreateNewNotebookTool-39"><span class="linenos"> 39</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="CreateNewNotebookTool-40"><a href="#CreateNewNotebookTool-40"><span class="linenos"> 40</span></a>
</span><span id="CreateNewNotebookTool-41"><a href="#CreateNewNotebookTool-41"><span class="linenos"> 41</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewNotebookTool-42"><a href="#CreateNewNotebookTool-42"><span class="linenos"> 42</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="CreateNewNotebookTool-43"><a href="#CreateNewNotebookTool-43"><span class="linenos"> 43</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool-44"><a href="#CreateNewNotebookTool-44"><span class="linenos"> 44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="CreateNewNotebookTool-45"><a href="#CreateNewNotebookTool-45"><span class="linenos"> 45</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="CreateNewNotebookTool-46"><a href="#CreateNewNotebookTool-46"><span class="linenos"> 46</span></a>
</span><span id="CreateNewNotebookTool-47"><a href="#CreateNewNotebookTool-47"><span class="linenos"> 47</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewNotebookTool-48"><a href="#CreateNewNotebookTool-48"><span class="linenos"> 48</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool-49"><a href="#CreateNewNotebookTool-49"><span class="linenos"> 49</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="CreateNewNotebookTool-50"><a href="#CreateNewNotebookTool-50"><span class="linenos"> 50</span></a>
</span><span id="CreateNewNotebookTool-51"><a href="#CreateNewNotebookTool-51"><span class="linenos"> 51</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool-52"><a href="#CreateNewNotebookTool-52"><span class="linenos"> 52</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="CreateNewNotebookTool-53"><a href="#CreateNewNotebookTool-53"><span class="linenos"> 53</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool-54"><a href="#CreateNewNotebookTool-54"><span class="linenos"> 54</span></a>        <span class="k">return</span> <span class="s2">&quot;create_new_notebook&quot;</span>
</span><span id="CreateNewNotebookTool-55"><a href="#CreateNewNotebookTool-55"><span class="linenos"> 55</span></a>
</span><span id="CreateNewNotebookTool-56"><a href="#CreateNewNotebookTool-56"><span class="linenos"> 56</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewNotebookTool-57"><a href="#CreateNewNotebookTool-57"><span class="linenos"> 57</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool-58"><a href="#CreateNewNotebookTool-58"><span class="linenos"> 58</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="CreateNewNotebookTool-59"><a href="#CreateNewNotebookTool-59"><span class="linenos"> 59</span></a>
</span><span id="CreateNewNotebookTool-60"><a href="#CreateNewNotebookTool-60"><span class="linenos"> 60</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool-61"><a href="#CreateNewNotebookTool-61"><span class="linenos"> 61</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="CreateNewNotebookTool-62"><a href="#CreateNewNotebookTool-62"><span class="linenos"> 62</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool-63"><a href="#CreateNewNotebookTool-63"><span class="linenos"> 63</span></a>        <span class="k">return</span> <span class="s2">&quot;Create new notebook with the provided code and markdown cells&quot;</span>
</span><span id="CreateNewNotebookTool-64"><a href="#CreateNewNotebookTool-64"><span class="linenos"> 64</span></a>
</span><span id="CreateNewNotebookTool-65"><a href="#CreateNewNotebookTool-65"><span class="linenos"> 65</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewNotebookTool-66"><a href="#CreateNewNotebookTool-66"><span class="linenos"> 66</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="CreateNewNotebookTool-67"><a href="#CreateNewNotebookTool-67"><span class="linenos"> 67</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="CreateNewNotebookTool-68"><a href="#CreateNewNotebookTool-68"><span class="linenos"> 68</span></a>
</span><span id="CreateNewNotebookTool-69"><a href="#CreateNewNotebookTool-69"><span class="linenos"> 69</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool-70"><a href="#CreateNewNotebookTool-70"><span class="linenos"> 70</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="CreateNewNotebookTool-71"><a href="#CreateNewNotebookTool-71"><span class="linenos"> 71</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool-72"><a href="#CreateNewNotebookTool-72"><span class="linenos"> 72</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;creation&quot;</span><span class="p">]</span>
</span><span id="CreateNewNotebookTool-73"><a href="#CreateNewNotebookTool-73"><span class="linenos"> 73</span></a>
</span><span id="CreateNewNotebookTool-74"><a href="#CreateNewNotebookTool-74"><span class="linenos"> 74</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewNotebookTool-75"><a href="#CreateNewNotebookTool-75"><span class="linenos"> 75</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool-76"><a href="#CreateNewNotebookTool-76"><span class="linenos"> 76</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="CreateNewNotebookTool-77"><a href="#CreateNewNotebookTool-77"><span class="linenos"> 77</span></a>
</span><span id="CreateNewNotebookTool-78"><a href="#CreateNewNotebookTool-78"><span class="linenos"> 78</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool-79"><a href="#CreateNewNotebookTool-79"><span class="linenos"> 79</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="CreateNewNotebookTool-80"><a href="#CreateNewNotebookTool-80"><span class="linenos"> 80</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool-81"><a href="#CreateNewNotebookTool-81"><span class="linenos"> 81</span></a>        <span class="k">return</span> <span class="s2">&quot;Create a new notebook, then append the provided cells in order.&quot;</span>
</span><span id="CreateNewNotebookTool-82"><a href="#CreateNewNotebookTool-82"><span class="linenos"> 82</span></a>
</span><span id="CreateNewNotebookTool-83"><a href="#CreateNewNotebookTool-83"><span class="linenos"> 83</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewNotebookTool-84"><a href="#CreateNewNotebookTool-84"><span class="linenos"> 84</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool-85"><a href="#CreateNewNotebookTool-85"><span class="linenos"> 85</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="CreateNewNotebookTool-86"><a href="#CreateNewNotebookTool-86"><span class="linenos"> 86</span></a>
</span><span id="CreateNewNotebookTool-87"><a href="#CreateNewNotebookTool-87"><span class="linenos"> 87</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool-88"><a href="#CreateNewNotebookTool-88"><span class="linenos"> 88</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="CreateNewNotebookTool-89"><a href="#CreateNewNotebookTool-89"><span class="linenos"> 89</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool-90"><a href="#CreateNewNotebookTool-90"><span class="linenos"> 90</span></a>        <span class="c1"># IMPORTANT: include `required` inside the `items` object</span>
</span><span id="CreateNewNotebookTool-91"><a href="#CreateNewNotebookTool-91"><span class="linenos"> 91</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool-92"><a href="#CreateNewNotebookTool-92"><span class="linenos"> 92</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-93"><a href="#CreateNewNotebookTool-93"><span class="linenos"> 93</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool-94"><a href="#CreateNewNotebookTool-94"><span class="linenos"> 94</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-95"><a href="#CreateNewNotebookTool-95"><span class="linenos"> 95</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-96"><a href="#CreateNewNotebookTool-96"><span class="linenos"> 96</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-97"><a href="#CreateNewNotebookTool-97"><span class="linenos"> 97</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool-98"><a href="#CreateNewNotebookTool-98"><span class="linenos"> 98</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-99"><a href="#CreateNewNotebookTool-99"><span class="linenos"> 99</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool-100"><a href="#CreateNewNotebookTool-100"><span class="linenos">100</span></a>                        <span class="s2">&quot;cell_sources&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool-101"><a href="#CreateNewNotebookTool-101"><span class="linenos">101</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-102"><a href="#CreateNewNotebookTool-102"><span class="linenos">102</span></a>                            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool-103"><a href="#CreateNewNotebookTool-103"><span class="linenos">103</span></a>                                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-104"><a href="#CreateNewNotebookTool-104"><span class="linenos">104</span></a>                                <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool-105"><a href="#CreateNewNotebookTool-105"><span class="linenos">105</span></a>                                    <span class="s2">&quot;cell_type&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool-106"><a href="#CreateNewNotebookTool-106"><span class="linenos">106</span></a>                                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-107"><a href="#CreateNewNotebookTool-107"><span class="linenos">107</span></a>                                        <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown&quot;</span><span class="p">],</span>
</span><span id="CreateNewNotebookTool-108"><a href="#CreateNewNotebookTool-108"><span class="linenos">108</span></a>                                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Type of the cell to create.&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-109"><a href="#CreateNewNotebookTool-109"><span class="linenos">109</span></a>                                    <span class="p">},</span>
</span><span id="CreateNewNotebookTool-110"><a href="#CreateNewNotebookTool-110"><span class="linenos">110</span></a>                                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The content of the cell.&quot;</span><span class="p">},</span>
</span><span id="CreateNewNotebookTool-111"><a href="#CreateNewNotebookTool-111"><span class="linenos">111</span></a>                                <span class="p">},</span>
</span><span id="CreateNewNotebookTool-112"><a href="#CreateNewNotebookTool-112"><span class="linenos">112</span></a>                                <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">],</span>
</span><span id="CreateNewNotebookTool-113"><a href="#CreateNewNotebookTool-113"><span class="linenos">113</span></a>                                <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-114"><a href="#CreateNewNotebookTool-114"><span class="linenos">114</span></a>                            <span class="p">},</span>
</span><span id="CreateNewNotebookTool-115"><a href="#CreateNewNotebookTool-115"><span class="linenos">115</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Ordered list of cells to add to the new notebook.&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-116"><a href="#CreateNewNotebookTool-116"><span class="linenos">116</span></a>                        <span class="p">}</span>
</span><span id="CreateNewNotebookTool-117"><a href="#CreateNewNotebookTool-117"><span class="linenos">117</span></a>                    <span class="p">},</span>
</span><span id="CreateNewNotebookTool-118"><a href="#CreateNewNotebookTool-118"><span class="linenos">118</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_sources&quot;</span><span class="p">],</span>
</span><span id="CreateNewNotebookTool-119"><a href="#CreateNewNotebookTool-119"><span class="linenos">119</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-120"><a href="#CreateNewNotebookTool-120"><span class="linenos">120</span></a>                <span class="p">},</span>
</span><span id="CreateNewNotebookTool-121"><a href="#CreateNewNotebookTool-121"><span class="linenos">121</span></a>            <span class="p">},</span>
</span><span id="CreateNewNotebookTool-122"><a href="#CreateNewNotebookTool-122"><span class="linenos">122</span></a>        <span class="p">}</span>
</span><span id="CreateNewNotebookTool-123"><a href="#CreateNewNotebookTool-123"><span class="linenos">123</span></a>
</span><span id="CreateNewNotebookTool-124"><a href="#CreateNewNotebookTool-124"><span class="linenos">124</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool-125"><a href="#CreateNewNotebookTool-125"><span class="linenos">125</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="CreateNewNotebookTool-126"><a href="#CreateNewNotebookTool-126"><span class="linenos">126</span></a>
</span><span id="CreateNewNotebookTool-127"><a href="#CreateNewNotebookTool-127"><span class="linenos">127</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="CreateNewNotebookTool-128"><a href="#CreateNewNotebookTool-128"><span class="linenos">128</span></a>
</span><span id="CreateNewNotebookTool-129"><a href="#CreateNewNotebookTool-129"><span class="linenos">129</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewNotebookTool-130"><a href="#CreateNewNotebookTool-130"><span class="linenos">130</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="CreateNewNotebookTool-131"><a href="#CreateNewNotebookTool-131"><span class="linenos">131</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="CreateNewNotebookTool-132"><a href="#CreateNewNotebookTool-132"><span class="linenos">132</span></a>
</span><span id="CreateNewNotebookTool-133"><a href="#CreateNewNotebookTool-133"><span class="linenos">133</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool-134"><a href="#CreateNewNotebookTool-134"><span class="linenos">134</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="CreateNewNotebookTool-135"><a href="#CreateNewNotebookTool-135"><span class="linenos">135</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool-136"><a href="#CreateNewNotebookTool-136"><span class="linenos">136</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool-137"><a href="#CreateNewNotebookTool-137"><span class="linenos">137</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="CreateNewNotebookTool-138"><a href="#CreateNewNotebookTool-138"><span class="linenos">138</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="CreateNewNotebookTool-139"><a href="#CreateNewNotebookTool-139"><span class="linenos">139</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Are you sure you want to create a new notebook?&quot;</span>
</span><span id="CreateNewNotebookTool-140"><a href="#CreateNewNotebookTool-140"><span class="linenos">140</span></a>        <span class="p">)</span>
</span><span id="CreateNewNotebookTool-141"><a href="#CreateNewNotebookTool-141"><span class="linenos">141</span></a>
</span><span id="CreateNewNotebookTool-142"><a href="#CreateNewNotebookTool-142"><span class="linenos">142</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="CreateNewNotebookTool-143"><a href="#CreateNewNotebookTool-143"><span class="linenos">143</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="CreateNewNotebookTool-144"><a href="#CreateNewNotebookTool-144"><span class="linenos">144</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool-145"><a href="#CreateNewNotebookTool-145"><span class="linenos">145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="CreateNewNotebookTool-146"><a href="#CreateNewNotebookTool-146"><span class="linenos">146</span></a>
</span><span id="CreateNewNotebookTool-147"><a href="#CreateNewNotebookTool-147"><span class="linenos">147</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewNotebookTool-148"><a href="#CreateNewNotebookTool-148"><span class="linenos">148</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="CreateNewNotebookTool-149"><a href="#CreateNewNotebookTool-149"><span class="linenos">149</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="CreateNewNotebookTool-150"><a href="#CreateNewNotebookTool-150"><span class="linenos">150</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="CreateNewNotebookTool-151"><a href="#CreateNewNotebookTool-151"><span class="linenos">151</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="CreateNewNotebookTool-152"><a href="#CreateNewNotebookTool-152"><span class="linenos">152</span></a>
</span><span id="CreateNewNotebookTool-153"><a href="#CreateNewNotebookTool-153"><span class="linenos">153</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool-154"><a href="#CreateNewNotebookTool-154"><span class="linenos">154</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="CreateNewNotebookTool-155"><a href="#CreateNewNotebookTool-155"><span class="linenos">155</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool-156"><a href="#CreateNewNotebookTool-156"><span class="linenos">156</span></a>        <span class="n">cell_sources</span> <span class="o">=</span> <span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cell_sources&quot;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="CreateNewNotebookTool-157"><a href="#CreateNewNotebookTool-157"><span class="linenos">157</span></a>
</span><span id="CreateNewNotebookTool-158"><a href="#CreateNewNotebookTool-158"><span class="linenos">158</span></a>        <span class="c1"># Create an empty notebook (the UI command returns its path)</span>
</span><span id="CreateNewNotebookTool-159"><a href="#CreateNewNotebookTool-159"><span class="linenos">159</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="CreateNewNotebookTool-160"><a href="#CreateNewNotebookTool-160"><span class="linenos">160</span></a>            <span class="s2">&quot;notebook-intelligence:create-new-notebook-from-py&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool-161"><a href="#CreateNewNotebookTool-161"><span class="linenos">161</span></a>            <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">},</span>  <span class="c1"># empty python file -&gt; empty notebook</span>
</span><span id="CreateNewNotebookTool-162"><a href="#CreateNewNotebookTool-162"><span class="linenos">162</span></a>        <span class="p">)</span>
</span><span id="CreateNewNotebookTool-163"><a href="#CreateNewNotebookTool-163"><span class="linenos">163</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">ui_cmd_response</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>
</span><span id="CreateNewNotebookTool-164"><a href="#CreateNewNotebookTool-164"><span class="linenos">164</span></a>
</span><span id="CreateNewNotebookTool-165"><a href="#CreateNewNotebookTool-165"><span class="linenos">165</span></a>        <span class="c1"># Append cells in order</span>
</span><span id="CreateNewNotebookTool-166"><a href="#CreateNewNotebookTool-166"><span class="linenos">166</span></a>        <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">cell_sources</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool-167"><a href="#CreateNewNotebookTool-167"><span class="linenos">167</span></a>            <span class="n">ctype</span> <span class="o">=</span> <span class="n">cell</span><span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">]</span>
</span><span id="CreateNewNotebookTool-168"><a href="#CreateNewNotebookTool-168"><span class="linenos">168</span></a>            <span class="n">src</span> <span class="o">=</span> <span class="n">cell</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span>
</span><span id="CreateNewNotebookTool-169"><a href="#CreateNewNotebookTool-169"><span class="linenos">169</span></a>            <span class="k">if</span> <span class="n">ctype</span> <span class="o">==</span> <span class="s2">&quot;markdown&quot;</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool-170"><a href="#CreateNewNotebookTool-170"><span class="linenos">170</span></a>                <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="CreateNewNotebookTool-171"><a href="#CreateNewNotebookTool-171"><span class="linenos">171</span></a>                    <span class="s2">&quot;notebook-intelligence:add-markdown-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;markdown&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">}</span>
</span><span id="CreateNewNotebookTool-172"><a href="#CreateNewNotebookTool-172"><span class="linenos">172</span></a>                <span class="p">)</span>
</span><span id="CreateNewNotebookTool-173"><a href="#CreateNewNotebookTool-173"><span class="linenos">173</span></a>            <span class="k">else</span><span class="p">:</span>  <span class="c1"># code</span>
</span><span id="CreateNewNotebookTool-174"><a href="#CreateNewNotebookTool-174"><span class="linenos">174</span></a>                <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="CreateNewNotebookTool-175"><a href="#CreateNewNotebookTool-175"><span class="linenos">175</span></a>                    <span class="s2">&quot;notebook-intelligence:add-code-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">}</span>
</span><span id="CreateNewNotebookTool-176"><a href="#CreateNewNotebookTool-176"><span class="linenos">176</span></a>                <span class="p">)</span>
</span><span id="CreateNewNotebookTool-177"><a href="#CreateNewNotebookTool-177"><span class="linenos">177</span></a>
</span><span id="CreateNewNotebookTool-178"><a href="#CreateNewNotebookTool-178"><span class="linenos">178</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Notebook created successfully at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Tool for creating a new notebook.</p>
</div>


                            <div id="CreateNewNotebookTool.__init__" class="classattr">
                                        <input id="CreateNewNotebookTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CreateNewNotebookTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="CreateNewNotebookTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewNotebookTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewNotebookTool.__init__-38"><a href="#CreateNewNotebookTool.__init__-38"><span class="linenos">38</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool.__init__-39"><a href="#CreateNewNotebookTool.__init__-39"><span class="linenos">39</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="CreateNewNotebookTool.__init__-40"><a href="#CreateNewNotebookTool.__init__-40"><span class="linenos">40</span></a>
</span><span id="CreateNewNotebookTool.__init__-41"><a href="#CreateNewNotebookTool.__init__-41"><span class="linenos">41</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewNotebookTool.__init__-42"><a href="#CreateNewNotebookTool.__init__-42"><span class="linenos">42</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="CreateNewNotebookTool.__init__-43"><a href="#CreateNewNotebookTool.__init__-43"><span class="linenos">43</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool.__init__-44"><a href="#CreateNewNotebookTool.__init__-44"><span class="linenos">44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="CreateNewNotebookTool.__init__-45"><a href="#CreateNewNotebookTool.__init__-45"><span class="linenos">45</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="CreateNewNotebookTool.name" class="classattr">
                                        <input id="CreateNewNotebookTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="CreateNewNotebookTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewNotebookTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewNotebookTool.name-47"><a href="#CreateNewNotebookTool.name-47"><span class="linenos">47</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewNotebookTool.name-48"><a href="#CreateNewNotebookTool.name-48"><span class="linenos">48</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool.name-49"><a href="#CreateNewNotebookTool.name-49"><span class="linenos">49</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="CreateNewNotebookTool.name-50"><a href="#CreateNewNotebookTool.name-50"><span class="linenos">50</span></a>
</span><span id="CreateNewNotebookTool.name-51"><a href="#CreateNewNotebookTool.name-51"><span class="linenos">51</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool.name-52"><a href="#CreateNewNotebookTool.name-52"><span class="linenos">52</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="CreateNewNotebookTool.name-53"><a href="#CreateNewNotebookTool.name-53"><span class="linenos">53</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool.name-54"><a href="#CreateNewNotebookTool.name-54"><span class="linenos">54</span></a>        <span class="k">return</span> <span class="s2">&quot;create_new_notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewNotebookTool.title" class="classattr">
                                        <input id="CreateNewNotebookTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="CreateNewNotebookTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewNotebookTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewNotebookTool.title-56"><a href="#CreateNewNotebookTool.title-56"><span class="linenos">56</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewNotebookTool.title-57"><a href="#CreateNewNotebookTool.title-57"><span class="linenos">57</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool.title-58"><a href="#CreateNewNotebookTool.title-58"><span class="linenos">58</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="CreateNewNotebookTool.title-59"><a href="#CreateNewNotebookTool.title-59"><span class="linenos">59</span></a>
</span><span id="CreateNewNotebookTool.title-60"><a href="#CreateNewNotebookTool.title-60"><span class="linenos">60</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool.title-61"><a href="#CreateNewNotebookTool.title-61"><span class="linenos">61</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="CreateNewNotebookTool.title-62"><a href="#CreateNewNotebookTool.title-62"><span class="linenos">62</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool.title-63"><a href="#CreateNewNotebookTool.title-63"><span class="linenos">63</span></a>        <span class="k">return</span> <span class="s2">&quot;Create new notebook with the provided code and markdown cells&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewNotebookTool.tags" class="classattr">
                                        <input id="CreateNewNotebookTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="CreateNewNotebookTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewNotebookTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewNotebookTool.tags-65"><a href="#CreateNewNotebookTool.tags-65"><span class="linenos">65</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewNotebookTool.tags-66"><a href="#CreateNewNotebookTool.tags-66"><span class="linenos">66</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="CreateNewNotebookTool.tags-67"><a href="#CreateNewNotebookTool.tags-67"><span class="linenos">67</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="CreateNewNotebookTool.tags-68"><a href="#CreateNewNotebookTool.tags-68"><span class="linenos">68</span></a>
</span><span id="CreateNewNotebookTool.tags-69"><a href="#CreateNewNotebookTool.tags-69"><span class="linenos">69</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool.tags-70"><a href="#CreateNewNotebookTool.tags-70"><span class="linenos">70</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="CreateNewNotebookTool.tags-71"><a href="#CreateNewNotebookTool.tags-71"><span class="linenos">71</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool.tags-72"><a href="#CreateNewNotebookTool.tags-72"><span class="linenos">72</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;creation&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewNotebookTool.description" class="classattr">
                                        <input id="CreateNewNotebookTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="CreateNewNotebookTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewNotebookTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewNotebookTool.description-74"><a href="#CreateNewNotebookTool.description-74"><span class="linenos">74</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewNotebookTool.description-75"><a href="#CreateNewNotebookTool.description-75"><span class="linenos">75</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool.description-76"><a href="#CreateNewNotebookTool.description-76"><span class="linenos">76</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="CreateNewNotebookTool.description-77"><a href="#CreateNewNotebookTool.description-77"><span class="linenos">77</span></a>
</span><span id="CreateNewNotebookTool.description-78"><a href="#CreateNewNotebookTool.description-78"><span class="linenos">78</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool.description-79"><a href="#CreateNewNotebookTool.description-79"><span class="linenos">79</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="CreateNewNotebookTool.description-80"><a href="#CreateNewNotebookTool.description-80"><span class="linenos">80</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool.description-81"><a href="#CreateNewNotebookTool.description-81"><span class="linenos">81</span></a>        <span class="k">return</span> <span class="s2">&quot;Create a new notebook, then append the provided cells in order.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewNotebookTool.schema" class="classattr">
                                        <input id="CreateNewNotebookTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="CreateNewNotebookTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewNotebookTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewNotebookTool.schema-83"><a href="#CreateNewNotebookTool.schema-83"><span class="linenos"> 83</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewNotebookTool.schema-84"><a href="#CreateNewNotebookTool.schema-84"><span class="linenos"> 84</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool.schema-85"><a href="#CreateNewNotebookTool.schema-85"><span class="linenos"> 85</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="CreateNewNotebookTool.schema-86"><a href="#CreateNewNotebookTool.schema-86"><span class="linenos"> 86</span></a>
</span><span id="CreateNewNotebookTool.schema-87"><a href="#CreateNewNotebookTool.schema-87"><span class="linenos"> 87</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool.schema-88"><a href="#CreateNewNotebookTool.schema-88"><span class="linenos"> 88</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="CreateNewNotebookTool.schema-89"><a href="#CreateNewNotebookTool.schema-89"><span class="linenos"> 89</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool.schema-90"><a href="#CreateNewNotebookTool.schema-90"><span class="linenos"> 90</span></a>        <span class="c1"># IMPORTANT: include `required` inside the `items` object</span>
</span><span id="CreateNewNotebookTool.schema-91"><a href="#CreateNewNotebookTool.schema-91"><span class="linenos"> 91</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool.schema-92"><a href="#CreateNewNotebookTool.schema-92"><span class="linenos"> 92</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-93"><a href="#CreateNewNotebookTool.schema-93"><span class="linenos"> 93</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool.schema-94"><a href="#CreateNewNotebookTool.schema-94"><span class="linenos"> 94</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-95"><a href="#CreateNewNotebookTool.schema-95"><span class="linenos"> 95</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-96"><a href="#CreateNewNotebookTool.schema-96"><span class="linenos"> 96</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-97"><a href="#CreateNewNotebookTool.schema-97"><span class="linenos"> 97</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool.schema-98"><a href="#CreateNewNotebookTool.schema-98"><span class="linenos"> 98</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-99"><a href="#CreateNewNotebookTool.schema-99"><span class="linenos"> 99</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool.schema-100"><a href="#CreateNewNotebookTool.schema-100"><span class="linenos">100</span></a>                        <span class="s2">&quot;cell_sources&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool.schema-101"><a href="#CreateNewNotebookTool.schema-101"><span class="linenos">101</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-102"><a href="#CreateNewNotebookTool.schema-102"><span class="linenos">102</span></a>                            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool.schema-103"><a href="#CreateNewNotebookTool.schema-103"><span class="linenos">103</span></a>                                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-104"><a href="#CreateNewNotebookTool.schema-104"><span class="linenos">104</span></a>                                <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool.schema-105"><a href="#CreateNewNotebookTool.schema-105"><span class="linenos">105</span></a>                                    <span class="s2">&quot;cell_type&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewNotebookTool.schema-106"><a href="#CreateNewNotebookTool.schema-106"><span class="linenos">106</span></a>                                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-107"><a href="#CreateNewNotebookTool.schema-107"><span class="linenos">107</span></a>                                        <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown&quot;</span><span class="p">],</span>
</span><span id="CreateNewNotebookTool.schema-108"><a href="#CreateNewNotebookTool.schema-108"><span class="linenos">108</span></a>                                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Type of the cell to create.&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-109"><a href="#CreateNewNotebookTool.schema-109"><span class="linenos">109</span></a>                                    <span class="p">},</span>
</span><span id="CreateNewNotebookTool.schema-110"><a href="#CreateNewNotebookTool.schema-110"><span class="linenos">110</span></a>                                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The content of the cell.&quot;</span><span class="p">},</span>
</span><span id="CreateNewNotebookTool.schema-111"><a href="#CreateNewNotebookTool.schema-111"><span class="linenos">111</span></a>                                <span class="p">},</span>
</span><span id="CreateNewNotebookTool.schema-112"><a href="#CreateNewNotebookTool.schema-112"><span class="linenos">112</span></a>                                <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">],</span>
</span><span id="CreateNewNotebookTool.schema-113"><a href="#CreateNewNotebookTool.schema-113"><span class="linenos">113</span></a>                                <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-114"><a href="#CreateNewNotebookTool.schema-114"><span class="linenos">114</span></a>                            <span class="p">},</span>
</span><span id="CreateNewNotebookTool.schema-115"><a href="#CreateNewNotebookTool.schema-115"><span class="linenos">115</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Ordered list of cells to add to the new notebook.&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-116"><a href="#CreateNewNotebookTool.schema-116"><span class="linenos">116</span></a>                        <span class="p">}</span>
</span><span id="CreateNewNotebookTool.schema-117"><a href="#CreateNewNotebookTool.schema-117"><span class="linenos">117</span></a>                    <span class="p">},</span>
</span><span id="CreateNewNotebookTool.schema-118"><a href="#CreateNewNotebookTool.schema-118"><span class="linenos">118</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_sources&quot;</span><span class="p">],</span>
</span><span id="CreateNewNotebookTool.schema-119"><a href="#CreateNewNotebookTool.schema-119"><span class="linenos">119</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.schema-120"><a href="#CreateNewNotebookTool.schema-120"><span class="linenos">120</span></a>                <span class="p">},</span>
</span><span id="CreateNewNotebookTool.schema-121"><a href="#CreateNewNotebookTool.schema-121"><span class="linenos">121</span></a>            <span class="p">},</span>
</span><span id="CreateNewNotebookTool.schema-122"><a href="#CreateNewNotebookTool.schema-122"><span class="linenos">122</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Get the schema for the tool's function.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool's function.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewNotebookTool.pre_invoke" class="classattr">
                                        <input id="CreateNewNotebookTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="CreateNewNotebookTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewNotebookTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewNotebookTool.pre_invoke-124"><a href="#CreateNewNotebookTool.pre_invoke-124"><span class="linenos">124</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool.pre_invoke-125"><a href="#CreateNewNotebookTool.pre_invoke-125"><span class="linenos">125</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="CreateNewNotebookTool.pre_invoke-126"><a href="#CreateNewNotebookTool.pre_invoke-126"><span class="linenos">126</span></a>
</span><span id="CreateNewNotebookTool.pre_invoke-127"><a href="#CreateNewNotebookTool.pre_invoke-127"><span class="linenos">127</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="CreateNewNotebookTool.pre_invoke-128"><a href="#CreateNewNotebookTool.pre_invoke-128"><span class="linenos">128</span></a>
</span><span id="CreateNewNotebookTool.pre_invoke-129"><a href="#CreateNewNotebookTool.pre_invoke-129"><span class="linenos">129</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewNotebookTool.pre_invoke-130"><a href="#CreateNewNotebookTool.pre_invoke-130"><span class="linenos">130</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="CreateNewNotebookTool.pre_invoke-131"><a href="#CreateNewNotebookTool.pre_invoke-131"><span class="linenos">131</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="CreateNewNotebookTool.pre_invoke-132"><a href="#CreateNewNotebookTool.pre_invoke-132"><span class="linenos">132</span></a>
</span><span id="CreateNewNotebookTool.pre_invoke-133"><a href="#CreateNewNotebookTool.pre_invoke-133"><span class="linenos">133</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool.pre_invoke-134"><a href="#CreateNewNotebookTool.pre_invoke-134"><span class="linenos">134</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="CreateNewNotebookTool.pre_invoke-135"><a href="#CreateNewNotebookTool.pre_invoke-135"><span class="linenos">135</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool.pre_invoke-136"><a href="#CreateNewNotebookTool.pre_invoke-136"><span class="linenos">136</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool.pre_invoke-137"><a href="#CreateNewNotebookTool.pre_invoke-137"><span class="linenos">137</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="CreateNewNotebookTool.pre_invoke-138"><a href="#CreateNewNotebookTool.pre_invoke-138"><span class="linenos">138</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="CreateNewNotebookTool.pre_invoke-139"><a href="#CreateNewNotebookTool.pre_invoke-139"><span class="linenos">139</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Are you sure you want to create a new notebook?&quot;</span>
</span><span id="CreateNewNotebookTool.pre_invoke-140"><a href="#CreateNewNotebookTool.pre_invoke-140"><span class="linenos">140</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewNotebookTool.handle_tool_call" class="classattr">
                                        <input id="CreateNewNotebookTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="CreateNewNotebookTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewNotebookTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewNotebookTool.handle_tool_call-142"><a href="#CreateNewNotebookTool.handle_tool_call-142"><span class="linenos">142</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-143"><a href="#CreateNewNotebookTool.handle_tool_call-143"><span class="linenos">143</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-144"><a href="#CreateNewNotebookTool.handle_tool_call-144"><span class="linenos">144</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-145"><a href="#CreateNewNotebookTool.handle_tool_call-145"><span class="linenos">145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-146"><a href="#CreateNewNotebookTool.handle_tool_call-146"><span class="linenos">146</span></a>
</span><span id="CreateNewNotebookTool.handle_tool_call-147"><a href="#CreateNewNotebookTool.handle_tool_call-147"><span class="linenos">147</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-148"><a href="#CreateNewNotebookTool.handle_tool_call-148"><span class="linenos">148</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-149"><a href="#CreateNewNotebookTool.handle_tool_call-149"><span class="linenos">149</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-150"><a href="#CreateNewNotebookTool.handle_tool_call-150"><span class="linenos">150</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-151"><a href="#CreateNewNotebookTool.handle_tool_call-151"><span class="linenos">151</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-152"><a href="#CreateNewNotebookTool.handle_tool_call-152"><span class="linenos">152</span></a>
</span><span id="CreateNewNotebookTool.handle_tool_call-153"><a href="#CreateNewNotebookTool.handle_tool_call-153"><span class="linenos">153</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-154"><a href="#CreateNewNotebookTool.handle_tool_call-154"><span class="linenos">154</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-155"><a href="#CreateNewNotebookTool.handle_tool_call-155"><span class="linenos">155</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-156"><a href="#CreateNewNotebookTool.handle_tool_call-156"><span class="linenos">156</span></a>        <span class="n">cell_sources</span> <span class="o">=</span> <span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cell_sources&quot;</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-157"><a href="#CreateNewNotebookTool.handle_tool_call-157"><span class="linenos">157</span></a>
</span><span id="CreateNewNotebookTool.handle_tool_call-158"><a href="#CreateNewNotebookTool.handle_tool_call-158"><span class="linenos">158</span></a>        <span class="c1"># Create an empty notebook (the UI command returns its path)</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-159"><a href="#CreateNewNotebookTool.handle_tool_call-159"><span class="linenos">159</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-160"><a href="#CreateNewNotebookTool.handle_tool_call-160"><span class="linenos">160</span></a>            <span class="s2">&quot;notebook-intelligence:create-new-notebook-from-py&quot;</span><span class="p">,</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-161"><a href="#CreateNewNotebookTool.handle_tool_call-161"><span class="linenos">161</span></a>            <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">},</span>  <span class="c1"># empty python file -&gt; empty notebook</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-162"><a href="#CreateNewNotebookTool.handle_tool_call-162"><span class="linenos">162</span></a>        <span class="p">)</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-163"><a href="#CreateNewNotebookTool.handle_tool_call-163"><span class="linenos">163</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">ui_cmd_response</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-164"><a href="#CreateNewNotebookTool.handle_tool_call-164"><span class="linenos">164</span></a>
</span><span id="CreateNewNotebookTool.handle_tool_call-165"><a href="#CreateNewNotebookTool.handle_tool_call-165"><span class="linenos">165</span></a>        <span class="c1"># Append cells in order</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-166"><a href="#CreateNewNotebookTool.handle_tool_call-166"><span class="linenos">166</span></a>        <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">cell_sources</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-167"><a href="#CreateNewNotebookTool.handle_tool_call-167"><span class="linenos">167</span></a>            <span class="n">ctype</span> <span class="o">=</span> <span class="n">cell</span><span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">]</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-168"><a href="#CreateNewNotebookTool.handle_tool_call-168"><span class="linenos">168</span></a>            <span class="n">src</span> <span class="o">=</span> <span class="n">cell</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-169"><a href="#CreateNewNotebookTool.handle_tool_call-169"><span class="linenos">169</span></a>            <span class="k">if</span> <span class="n">ctype</span> <span class="o">==</span> <span class="s2">&quot;markdown&quot;</span><span class="p">:</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-170"><a href="#CreateNewNotebookTool.handle_tool_call-170"><span class="linenos">170</span></a>                <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-171"><a href="#CreateNewNotebookTool.handle_tool_call-171"><span class="linenos">171</span></a>                    <span class="s2">&quot;notebook-intelligence:add-markdown-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;markdown&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">}</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-172"><a href="#CreateNewNotebookTool.handle_tool_call-172"><span class="linenos">172</span></a>                <span class="p">)</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-173"><a href="#CreateNewNotebookTool.handle_tool_call-173"><span class="linenos">173</span></a>            <span class="k">else</span><span class="p">:</span>  <span class="c1"># code</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-174"><a href="#CreateNewNotebookTool.handle_tool_call-174"><span class="linenos">174</span></a>                <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-175"><a href="#CreateNewNotebookTool.handle_tool_call-175"><span class="linenos">175</span></a>                    <span class="s2">&quot;notebook-intelligence:add-code-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">}</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-176"><a href="#CreateNewNotebookTool.handle_tool_call-176"><span class="linenos">176</span></a>                <span class="p">)</span>
</span><span id="CreateNewNotebookTool.handle_tool_call-177"><a href="#CreateNewNotebookTool.handle_tool_call-177"><span class="linenos">177</span></a>
</span><span id="CreateNewNotebookTool.handle_tool_call-178"><a href="#CreateNewNotebookTool.handle_tool_call-178"><span class="linenos">178</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Notebook created successfully at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="AddMarkdownCellToNotebookTool">
                            <input id="AddMarkdownCellToNotebookTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AddMarkdownCellToNotebookTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="AddMarkdownCellToNotebookTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddMarkdownCellToNotebookTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddMarkdownCellToNotebookTool-181"><a href="#AddMarkdownCellToNotebookTool-181"><span class="linenos">181</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AddMarkdownCellToNotebookTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="AddMarkdownCellToNotebookTool-182"><a href="#AddMarkdownCellToNotebookTool-182"><span class="linenos">182</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for adding a markdown cell to a notebook.&quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-183"><a href="#AddMarkdownCellToNotebookTool-183"><span class="linenos">183</span></a>
</span><span id="AddMarkdownCellToNotebookTool-184"><a href="#AddMarkdownCellToNotebookTool-184"><span class="linenos">184</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool-185"><a href="#AddMarkdownCellToNotebookTool-185"><span class="linenos">185</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool-186"><a href="#AddMarkdownCellToNotebookTool-186"><span class="linenos">186</span></a>
</span><span id="AddMarkdownCellToNotebookTool-187"><a href="#AddMarkdownCellToNotebookTool-187"><span class="linenos">187</span></a><span class="sd">        Args:</span>
</span><span id="AddMarkdownCellToNotebookTool-188"><a href="#AddMarkdownCellToNotebookTool-188"><span class="linenos">188</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="AddMarkdownCellToNotebookTool-189"><a href="#AddMarkdownCellToNotebookTool-189"><span class="linenos">189</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-190"><a href="#AddMarkdownCellToNotebookTool-190"><span class="linenos">190</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="AddMarkdownCellToNotebookTool-191"><a href="#AddMarkdownCellToNotebookTool-191"><span class="linenos">191</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="AddMarkdownCellToNotebookTool-192"><a href="#AddMarkdownCellToNotebookTool-192"><span class="linenos">192</span></a>
</span><span id="AddMarkdownCellToNotebookTool-193"><a href="#AddMarkdownCellToNotebookTool-193"><span class="linenos">193</span></a>    <span class="nd">@property</span>
</span><span id="AddMarkdownCellToNotebookTool-194"><a href="#AddMarkdownCellToNotebookTool-194"><span class="linenos">194</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool-195"><a href="#AddMarkdownCellToNotebookTool-195"><span class="linenos">195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool-196"><a href="#AddMarkdownCellToNotebookTool-196"><span class="linenos">196</span></a>
</span><span id="AddMarkdownCellToNotebookTool-197"><a href="#AddMarkdownCellToNotebookTool-197"><span class="linenos">197</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool-198"><a href="#AddMarkdownCellToNotebookTool-198"><span class="linenos">198</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool-199"><a href="#AddMarkdownCellToNotebookTool-199"><span class="linenos">199</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-200"><a href="#AddMarkdownCellToNotebookTool-200"><span class="linenos">200</span></a>        <span class="k">return</span> <span class="s2">&quot;add_markdown_cell_to_notebook&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-201"><a href="#AddMarkdownCellToNotebookTool-201"><span class="linenos">201</span></a>
</span><span id="AddMarkdownCellToNotebookTool-202"><a href="#AddMarkdownCellToNotebookTool-202"><span class="linenos">202</span></a>    <span class="nd">@property</span>
</span><span id="AddMarkdownCellToNotebookTool-203"><a href="#AddMarkdownCellToNotebookTool-203"><span class="linenos">203</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool-204"><a href="#AddMarkdownCellToNotebookTool-204"><span class="linenos">204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool-205"><a href="#AddMarkdownCellToNotebookTool-205"><span class="linenos">205</span></a>
</span><span id="AddMarkdownCellToNotebookTool-206"><a href="#AddMarkdownCellToNotebookTool-206"><span class="linenos">206</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool-207"><a href="#AddMarkdownCellToNotebookTool-207"><span class="linenos">207</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool-208"><a href="#AddMarkdownCellToNotebookTool-208"><span class="linenos">208</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-209"><a href="#AddMarkdownCellToNotebookTool-209"><span class="linenos">209</span></a>        <span class="k">return</span> <span class="s2">&quot;Add markdown cell to notebook&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-210"><a href="#AddMarkdownCellToNotebookTool-210"><span class="linenos">210</span></a>
</span><span id="AddMarkdownCellToNotebookTool-211"><a href="#AddMarkdownCellToNotebookTool-211"><span class="linenos">211</span></a>    <span class="nd">@property</span>
</span><span id="AddMarkdownCellToNotebookTool-212"><a href="#AddMarkdownCellToNotebookTool-212"><span class="linenos">212</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="AddMarkdownCellToNotebookTool-213"><a href="#AddMarkdownCellToNotebookTool-213"><span class="linenos">213</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool-214"><a href="#AddMarkdownCellToNotebookTool-214"><span class="linenos">214</span></a>
</span><span id="AddMarkdownCellToNotebookTool-215"><a href="#AddMarkdownCellToNotebookTool-215"><span class="linenos">215</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool-216"><a href="#AddMarkdownCellToNotebookTool-216"><span class="linenos">216</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool-217"><a href="#AddMarkdownCellToNotebookTool-217"><span class="linenos">217</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-218"><a href="#AddMarkdownCellToNotebookTool-218"><span class="linenos">218</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown cell&quot;</span><span class="p">,</span> <span class="s2">&quot;addition&quot;</span><span class="p">]</span>
</span><span id="AddMarkdownCellToNotebookTool-219"><a href="#AddMarkdownCellToNotebookTool-219"><span class="linenos">219</span></a>
</span><span id="AddMarkdownCellToNotebookTool-220"><a href="#AddMarkdownCellToNotebookTool-220"><span class="linenos">220</span></a>    <span class="nd">@property</span>
</span><span id="AddMarkdownCellToNotebookTool-221"><a href="#AddMarkdownCellToNotebookTool-221"><span class="linenos">221</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool-222"><a href="#AddMarkdownCellToNotebookTool-222"><span class="linenos">222</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="AddMarkdownCellToNotebookTool-223"><a href="#AddMarkdownCellToNotebookTool-223"><span class="linenos">223</span></a>
</span><span id="AddMarkdownCellToNotebookTool-224"><a href="#AddMarkdownCellToNotebookTool-224"><span class="linenos">224</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool-225"><a href="#AddMarkdownCellToNotebookTool-225"><span class="linenos">225</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="AddMarkdownCellToNotebookTool-226"><a href="#AddMarkdownCellToNotebookTool-226"><span class="linenos">226</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-227"><a href="#AddMarkdownCellToNotebookTool-227"><span class="linenos">227</span></a>        <span class="k">return</span> <span class="s2">&quot;Append a markdown cell to an existing notebook.&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-228"><a href="#AddMarkdownCellToNotebookTool-228"><span class="linenos">228</span></a>
</span><span id="AddMarkdownCellToNotebookTool-229"><a href="#AddMarkdownCellToNotebookTool-229"><span class="linenos">229</span></a>    <span class="nd">@property</span>
</span><span id="AddMarkdownCellToNotebookTool-230"><a href="#AddMarkdownCellToNotebookTool-230"><span class="linenos">230</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool-231"><a href="#AddMarkdownCellToNotebookTool-231"><span class="linenos">231</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="AddMarkdownCellToNotebookTool-232"><a href="#AddMarkdownCellToNotebookTool-232"><span class="linenos">232</span></a>
</span><span id="AddMarkdownCellToNotebookTool-233"><a href="#AddMarkdownCellToNotebookTool-233"><span class="linenos">233</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool-234"><a href="#AddMarkdownCellToNotebookTool-234"><span class="linenos">234</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="AddMarkdownCellToNotebookTool-235"><a href="#AddMarkdownCellToNotebookTool-235"><span class="linenos">235</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-236"><a href="#AddMarkdownCellToNotebookTool-236"><span class="linenos">236</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="AddMarkdownCellToNotebookTool-237"><a href="#AddMarkdownCellToNotebookTool-237"><span class="linenos">237</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool-238"><a href="#AddMarkdownCellToNotebookTool-238"><span class="linenos">238</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddMarkdownCellToNotebookTool-239"><a href="#AddMarkdownCellToNotebookTool-239"><span class="linenos">239</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool-240"><a href="#AddMarkdownCellToNotebookTool-240"><span class="linenos">240</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool-241"><a href="#AddMarkdownCellToNotebookTool-241"><span class="linenos">241</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool-242"><a href="#AddMarkdownCellToNotebookTool-242"><span class="linenos">242</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddMarkdownCellToNotebookTool-243"><a href="#AddMarkdownCellToNotebookTool-243"><span class="linenos">243</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool-244"><a href="#AddMarkdownCellToNotebookTool-244"><span class="linenos">244</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddMarkdownCellToNotebookTool-245"><a href="#AddMarkdownCellToNotebookTool-245"><span class="linenos">245</span></a>                        <span class="s2">&quot;notebook_file_path&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddMarkdownCellToNotebookTool-246"><a href="#AddMarkdownCellToNotebookTool-246"><span class="linenos">246</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool-247"><a href="#AddMarkdownCellToNotebookTool-247"><span class="linenos">247</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Absolute or server-root-relative notebook path.&quot;</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool-248"><a href="#AddMarkdownCellToNotebookTool-248"><span class="linenos">248</span></a>                        <span class="p">},</span>
</span><span id="AddMarkdownCellToNotebookTool-249"><a href="#AddMarkdownCellToNotebookTool-249"><span class="linenos">249</span></a>                        <span class="s2">&quot;markdown_cell_source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Markdown to append.&quot;</span><span class="p">},</span>
</span><span id="AddMarkdownCellToNotebookTool-250"><a href="#AddMarkdownCellToNotebookTool-250"><span class="linenos">250</span></a>                    <span class="p">},</span>
</span><span id="AddMarkdownCellToNotebookTool-251"><a href="#AddMarkdownCellToNotebookTool-251"><span class="linenos">251</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown_cell_source&quot;</span><span class="p">],</span>
</span><span id="AddMarkdownCellToNotebookTool-252"><a href="#AddMarkdownCellToNotebookTool-252"><span class="linenos">252</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool-253"><a href="#AddMarkdownCellToNotebookTool-253"><span class="linenos">253</span></a>                <span class="p">},</span>
</span><span id="AddMarkdownCellToNotebookTool-254"><a href="#AddMarkdownCellToNotebookTool-254"><span class="linenos">254</span></a>            <span class="p">},</span>
</span><span id="AddMarkdownCellToNotebookTool-255"><a href="#AddMarkdownCellToNotebookTool-255"><span class="linenos">255</span></a>        <span class="p">}</span>
</span><span id="AddMarkdownCellToNotebookTool-256"><a href="#AddMarkdownCellToNotebookTool-256"><span class="linenos">256</span></a>
</span><span id="AddMarkdownCellToNotebookTool-257"><a href="#AddMarkdownCellToNotebookTool-257"><span class="linenos">257</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool-258"><a href="#AddMarkdownCellToNotebookTool-258"><span class="linenos">258</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool-259"><a href="#AddMarkdownCellToNotebookTool-259"><span class="linenos">259</span></a>
</span><span id="AddMarkdownCellToNotebookTool-260"><a href="#AddMarkdownCellToNotebookTool-260"><span class="linenos">260</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool-261"><a href="#AddMarkdownCellToNotebookTool-261"><span class="linenos">261</span></a>
</span><span id="AddMarkdownCellToNotebookTool-262"><a href="#AddMarkdownCellToNotebookTool-262"><span class="linenos">262</span></a><span class="sd">        Args:</span>
</span><span id="AddMarkdownCellToNotebookTool-263"><a href="#AddMarkdownCellToNotebookTool-263"><span class="linenos">263</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="AddMarkdownCellToNotebookTool-264"><a href="#AddMarkdownCellToNotebookTool-264"><span class="linenos">264</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="AddMarkdownCellToNotebookTool-265"><a href="#AddMarkdownCellToNotebookTool-265"><span class="linenos">265</span></a>
</span><span id="AddMarkdownCellToNotebookTool-266"><a href="#AddMarkdownCellToNotebookTool-266"><span class="linenos">266</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool-267"><a href="#AddMarkdownCellToNotebookTool-267"><span class="linenos">267</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="AddMarkdownCellToNotebookTool-268"><a href="#AddMarkdownCellToNotebookTool-268"><span class="linenos">268</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-269"><a href="#AddMarkdownCellToNotebookTool-269"><span class="linenos">269</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool-270"><a href="#AddMarkdownCellToNotebookTool-270"><span class="linenos">270</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="AddMarkdownCellToNotebookTool-271"><a href="#AddMarkdownCellToNotebookTool-271"><span class="linenos">271</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Append markdown to the notebook?&quot;</span><span class="p">)</span>
</span><span id="AddMarkdownCellToNotebookTool-272"><a href="#AddMarkdownCellToNotebookTool-272"><span class="linenos">272</span></a>
</span><span id="AddMarkdownCellToNotebookTool-273"><a href="#AddMarkdownCellToNotebookTool-273"><span class="linenos">273</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="AddMarkdownCellToNotebookTool-274"><a href="#AddMarkdownCellToNotebookTool-274"><span class="linenos">274</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="AddMarkdownCellToNotebookTool-275"><a href="#AddMarkdownCellToNotebookTool-275"><span class="linenos">275</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool-276"><a href="#AddMarkdownCellToNotebookTool-276"><span class="linenos">276</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="AddMarkdownCellToNotebookTool-277"><a href="#AddMarkdownCellToNotebookTool-277"><span class="linenos">277</span></a>
</span><span id="AddMarkdownCellToNotebookTool-278"><a href="#AddMarkdownCellToNotebookTool-278"><span class="linenos">278</span></a><span class="sd">        Args:</span>
</span><span id="AddMarkdownCellToNotebookTool-279"><a href="#AddMarkdownCellToNotebookTool-279"><span class="linenos">279</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="AddMarkdownCellToNotebookTool-280"><a href="#AddMarkdownCellToNotebookTool-280"><span class="linenos">280</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="AddMarkdownCellToNotebookTool-281"><a href="#AddMarkdownCellToNotebookTool-281"><span class="linenos">281</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="AddMarkdownCellToNotebookTool-282"><a href="#AddMarkdownCellToNotebookTool-282"><span class="linenos">282</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="AddMarkdownCellToNotebookTool-283"><a href="#AddMarkdownCellToNotebookTool-283"><span class="linenos">283</span></a>
</span><span id="AddMarkdownCellToNotebookTool-284"><a href="#AddMarkdownCellToNotebookTool-284"><span class="linenos">284</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool-285"><a href="#AddMarkdownCellToNotebookTool-285"><span class="linenos">285</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="AddMarkdownCellToNotebookTool-286"><a href="#AddMarkdownCellToNotebookTool-286"><span class="linenos">286</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool-287"><a href="#AddMarkdownCellToNotebookTool-287"><span class="linenos">287</span></a>        <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">]</span>
</span><span id="AddMarkdownCellToNotebookTool-288"><a href="#AddMarkdownCellToNotebookTool-288"><span class="linenos">288</span></a>        <span class="n">server_root_dir</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">host</span><span class="o">.</span><span class="n">nbi_config</span><span class="o">.</span><span class="n">server_root_dir</span>
</span><span id="AddMarkdownCellToNotebookTool-289"><a href="#AddMarkdownCellToNotebookTool-289"><span class="linenos">289</span></a>
</span><span id="AddMarkdownCellToNotebookTool-290"><a href="#AddMarkdownCellToNotebookTool-290"><span class="linenos">290</span></a>        <span class="c1"># Normalize to server-root-relative path if needed</span>
</span><span id="AddMarkdownCellToNotebookTool-291"><a href="#AddMarkdownCellToNotebookTool-291"><span class="linenos">291</span></a>        <span class="k">if</span> <span class="n">notebook_file_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">server_root_dir</span><span class="p">):</span>
</span><span id="AddMarkdownCellToNotebookTool-292"><a href="#AddMarkdownCellToNotebookTool-292"><span class="linenos">292</span></a>            <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">notebook_file_path</span><span class="p">,</span> <span class="n">server_root_dir</span><span class="p">)</span>
</span><span id="AddMarkdownCellToNotebookTool-293"><a href="#AddMarkdownCellToNotebookTool-293"><span class="linenos">293</span></a>
</span><span id="AddMarkdownCellToNotebookTool-294"><a href="#AddMarkdownCellToNotebookTool-294"><span class="linenos">294</span></a>        <span class="n">src</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;markdown_cell_source&quot;</span><span class="p">]</span>
</span><span id="AddMarkdownCellToNotebookTool-295"><a href="#AddMarkdownCellToNotebookTool-295"><span class="linenos">295</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="AddMarkdownCellToNotebookTool-296"><a href="#AddMarkdownCellToNotebookTool-296"><span class="linenos">296</span></a>            <span class="s2">&quot;notebook-intelligence:add-markdown-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;markdown&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">notebook_file_path</span><span class="p">}</span>
</span><span id="AddMarkdownCellToNotebookTool-297"><a href="#AddMarkdownCellToNotebookTool-297"><span class="linenos">297</span></a>        <span class="p">)</span>
</span><span id="AddMarkdownCellToNotebookTool-298"><a href="#AddMarkdownCellToNotebookTool-298"><span class="linenos">298</span></a>        <span class="k">return</span> <span class="s2">&quot;Added markdown cell to notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Tool for adding a markdown cell to a notebook.</p>
</div>


                            <div id="AddMarkdownCellToNotebookTool.__init__" class="classattr">
                                        <input id="AddMarkdownCellToNotebookTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AddMarkdownCellToNotebookTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="AddMarkdownCellToNotebookTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddMarkdownCellToNotebookTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddMarkdownCellToNotebookTool.__init__-184"><a href="#AddMarkdownCellToNotebookTool.__init__-184"><span class="linenos">184</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool.__init__-185"><a href="#AddMarkdownCellToNotebookTool.__init__-185"><span class="linenos">185</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool.__init__-186"><a href="#AddMarkdownCellToNotebookTool.__init__-186"><span class="linenos">186</span></a>
</span><span id="AddMarkdownCellToNotebookTool.__init__-187"><a href="#AddMarkdownCellToNotebookTool.__init__-187"><span class="linenos">187</span></a><span class="sd">        Args:</span>
</span><span id="AddMarkdownCellToNotebookTool.__init__-188"><a href="#AddMarkdownCellToNotebookTool.__init__-188"><span class="linenos">188</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="AddMarkdownCellToNotebookTool.__init__-189"><a href="#AddMarkdownCellToNotebookTool.__init__-189"><span class="linenos">189</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool.__init__-190"><a href="#AddMarkdownCellToNotebookTool.__init__-190"><span class="linenos">190</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="AddMarkdownCellToNotebookTool.__init__-191"><a href="#AddMarkdownCellToNotebookTool.__init__-191"><span class="linenos">191</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="AddMarkdownCellToNotebookTool.name" class="classattr">
                                        <input id="AddMarkdownCellToNotebookTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AddMarkdownCellToNotebookTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddMarkdownCellToNotebookTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddMarkdownCellToNotebookTool.name-193"><a href="#AddMarkdownCellToNotebookTool.name-193"><span class="linenos">193</span></a>    <span class="nd">@property</span>
</span><span id="AddMarkdownCellToNotebookTool.name-194"><a href="#AddMarkdownCellToNotebookTool.name-194"><span class="linenos">194</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool.name-195"><a href="#AddMarkdownCellToNotebookTool.name-195"><span class="linenos">195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool.name-196"><a href="#AddMarkdownCellToNotebookTool.name-196"><span class="linenos">196</span></a>
</span><span id="AddMarkdownCellToNotebookTool.name-197"><a href="#AddMarkdownCellToNotebookTool.name-197"><span class="linenos">197</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool.name-198"><a href="#AddMarkdownCellToNotebookTool.name-198"><span class="linenos">198</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool.name-199"><a href="#AddMarkdownCellToNotebookTool.name-199"><span class="linenos">199</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool.name-200"><a href="#AddMarkdownCellToNotebookTool.name-200"><span class="linenos">200</span></a>        <span class="k">return</span> <span class="s2">&quot;add_markdown_cell_to_notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddMarkdownCellToNotebookTool.title" class="classattr">
                                        <input id="AddMarkdownCellToNotebookTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AddMarkdownCellToNotebookTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddMarkdownCellToNotebookTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddMarkdownCellToNotebookTool.title-202"><a href="#AddMarkdownCellToNotebookTool.title-202"><span class="linenos">202</span></a>    <span class="nd">@property</span>
</span><span id="AddMarkdownCellToNotebookTool.title-203"><a href="#AddMarkdownCellToNotebookTool.title-203"><span class="linenos">203</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool.title-204"><a href="#AddMarkdownCellToNotebookTool.title-204"><span class="linenos">204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool.title-205"><a href="#AddMarkdownCellToNotebookTool.title-205"><span class="linenos">205</span></a>
</span><span id="AddMarkdownCellToNotebookTool.title-206"><a href="#AddMarkdownCellToNotebookTool.title-206"><span class="linenos">206</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool.title-207"><a href="#AddMarkdownCellToNotebookTool.title-207"><span class="linenos">207</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool.title-208"><a href="#AddMarkdownCellToNotebookTool.title-208"><span class="linenos">208</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool.title-209"><a href="#AddMarkdownCellToNotebookTool.title-209"><span class="linenos">209</span></a>        <span class="k">return</span> <span class="s2">&quot;Add markdown cell to notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddMarkdownCellToNotebookTool.tags" class="classattr">
                                        <input id="AddMarkdownCellToNotebookTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="AddMarkdownCellToNotebookTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddMarkdownCellToNotebookTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddMarkdownCellToNotebookTool.tags-211"><a href="#AddMarkdownCellToNotebookTool.tags-211"><span class="linenos">211</span></a>    <span class="nd">@property</span>
</span><span id="AddMarkdownCellToNotebookTool.tags-212"><a href="#AddMarkdownCellToNotebookTool.tags-212"><span class="linenos">212</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="AddMarkdownCellToNotebookTool.tags-213"><a href="#AddMarkdownCellToNotebookTool.tags-213"><span class="linenos">213</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool.tags-214"><a href="#AddMarkdownCellToNotebookTool.tags-214"><span class="linenos">214</span></a>
</span><span id="AddMarkdownCellToNotebookTool.tags-215"><a href="#AddMarkdownCellToNotebookTool.tags-215"><span class="linenos">215</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool.tags-216"><a href="#AddMarkdownCellToNotebookTool.tags-216"><span class="linenos">216</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool.tags-217"><a href="#AddMarkdownCellToNotebookTool.tags-217"><span class="linenos">217</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool.tags-218"><a href="#AddMarkdownCellToNotebookTool.tags-218"><span class="linenos">218</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown cell&quot;</span><span class="p">,</span> <span class="s2">&quot;addition&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddMarkdownCellToNotebookTool.description" class="classattr">
                                        <input id="AddMarkdownCellToNotebookTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AddMarkdownCellToNotebookTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddMarkdownCellToNotebookTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddMarkdownCellToNotebookTool.description-220"><a href="#AddMarkdownCellToNotebookTool.description-220"><span class="linenos">220</span></a>    <span class="nd">@property</span>
</span><span id="AddMarkdownCellToNotebookTool.description-221"><a href="#AddMarkdownCellToNotebookTool.description-221"><span class="linenos">221</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool.description-222"><a href="#AddMarkdownCellToNotebookTool.description-222"><span class="linenos">222</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="AddMarkdownCellToNotebookTool.description-223"><a href="#AddMarkdownCellToNotebookTool.description-223"><span class="linenos">223</span></a>
</span><span id="AddMarkdownCellToNotebookTool.description-224"><a href="#AddMarkdownCellToNotebookTool.description-224"><span class="linenos">224</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool.description-225"><a href="#AddMarkdownCellToNotebookTool.description-225"><span class="linenos">225</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="AddMarkdownCellToNotebookTool.description-226"><a href="#AddMarkdownCellToNotebookTool.description-226"><span class="linenos">226</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool.description-227"><a href="#AddMarkdownCellToNotebookTool.description-227"><span class="linenos">227</span></a>        <span class="k">return</span> <span class="s2">&quot;Append a markdown cell to an existing notebook.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddMarkdownCellToNotebookTool.schema" class="classattr">
                                        <input id="AddMarkdownCellToNotebookTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="AddMarkdownCellToNotebookTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddMarkdownCellToNotebookTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddMarkdownCellToNotebookTool.schema-229"><a href="#AddMarkdownCellToNotebookTool.schema-229"><span class="linenos">229</span></a>    <span class="nd">@property</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-230"><a href="#AddMarkdownCellToNotebookTool.schema-230"><span class="linenos">230</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-231"><a href="#AddMarkdownCellToNotebookTool.schema-231"><span class="linenos">231</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-232"><a href="#AddMarkdownCellToNotebookTool.schema-232"><span class="linenos">232</span></a>
</span><span id="AddMarkdownCellToNotebookTool.schema-233"><a href="#AddMarkdownCellToNotebookTool.schema-233"><span class="linenos">233</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-234"><a href="#AddMarkdownCellToNotebookTool.schema-234"><span class="linenos">234</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-235"><a href="#AddMarkdownCellToNotebookTool.schema-235"><span class="linenos">235</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-236"><a href="#AddMarkdownCellToNotebookTool.schema-236"><span class="linenos">236</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-237"><a href="#AddMarkdownCellToNotebookTool.schema-237"><span class="linenos">237</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-238"><a href="#AddMarkdownCellToNotebookTool.schema-238"><span class="linenos">238</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-239"><a href="#AddMarkdownCellToNotebookTool.schema-239"><span class="linenos">239</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-240"><a href="#AddMarkdownCellToNotebookTool.schema-240"><span class="linenos">240</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-241"><a href="#AddMarkdownCellToNotebookTool.schema-241"><span class="linenos">241</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-242"><a href="#AddMarkdownCellToNotebookTool.schema-242"><span class="linenos">242</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-243"><a href="#AddMarkdownCellToNotebookTool.schema-243"><span class="linenos">243</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-244"><a href="#AddMarkdownCellToNotebookTool.schema-244"><span class="linenos">244</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-245"><a href="#AddMarkdownCellToNotebookTool.schema-245"><span class="linenos">245</span></a>                        <span class="s2">&quot;notebook_file_path&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-246"><a href="#AddMarkdownCellToNotebookTool.schema-246"><span class="linenos">246</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-247"><a href="#AddMarkdownCellToNotebookTool.schema-247"><span class="linenos">247</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Absolute or server-root-relative notebook path.&quot;</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-248"><a href="#AddMarkdownCellToNotebookTool.schema-248"><span class="linenos">248</span></a>                        <span class="p">},</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-249"><a href="#AddMarkdownCellToNotebookTool.schema-249"><span class="linenos">249</span></a>                        <span class="s2">&quot;markdown_cell_source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Markdown to append.&quot;</span><span class="p">},</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-250"><a href="#AddMarkdownCellToNotebookTool.schema-250"><span class="linenos">250</span></a>                    <span class="p">},</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-251"><a href="#AddMarkdownCellToNotebookTool.schema-251"><span class="linenos">251</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown_cell_source&quot;</span><span class="p">],</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-252"><a href="#AddMarkdownCellToNotebookTool.schema-252"><span class="linenos">252</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-253"><a href="#AddMarkdownCellToNotebookTool.schema-253"><span class="linenos">253</span></a>                <span class="p">},</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-254"><a href="#AddMarkdownCellToNotebookTool.schema-254"><span class="linenos">254</span></a>            <span class="p">},</span>
</span><span id="AddMarkdownCellToNotebookTool.schema-255"><a href="#AddMarkdownCellToNotebookTool.schema-255"><span class="linenos">255</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Get the schema for the tool's function.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool's function.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddMarkdownCellToNotebookTool.pre_invoke" class="classattr">
                                        <input id="AddMarkdownCellToNotebookTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="AddMarkdownCellToNotebookTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddMarkdownCellToNotebookTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddMarkdownCellToNotebookTool.pre_invoke-257"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-257"><span class="linenos">257</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-258"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-258"><span class="linenos">258</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-259"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-259"><span class="linenos">259</span></a>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-260"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-260"><span class="linenos">260</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-261"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-261"><span class="linenos">261</span></a>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-262"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-262"><span class="linenos">262</span></a><span class="sd">        Args:</span>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-263"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-263"><span class="linenos">263</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-264"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-264"><span class="linenos">264</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-265"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-265"><span class="linenos">265</span></a>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-266"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-266"><span class="linenos">266</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-267"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-267"><span class="linenos">267</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-268"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-268"><span class="linenos">268</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-269"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-269"><span class="linenos">269</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-270"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-270"><span class="linenos">270</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="AddMarkdownCellToNotebookTool.pre_invoke-271"><a href="#AddMarkdownCellToNotebookTool.pre_invoke-271"><span class="linenos">271</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Append markdown to the notebook?&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddMarkdownCellToNotebookTool.handle_tool_call" class="classattr">
                                        <input id="AddMarkdownCellToNotebookTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="AddMarkdownCellToNotebookTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddMarkdownCellToNotebookTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-273"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-273"><span class="linenos">273</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-274"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-274"><span class="linenos">274</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-275"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-275"><span class="linenos">275</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-276"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-276"><span class="linenos">276</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-277"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-277"><span class="linenos">277</span></a>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-278"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-278"><span class="linenos">278</span></a><span class="sd">        Args:</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-279"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-279"><span class="linenos">279</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-280"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-280"><span class="linenos">280</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-281"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-281"><span class="linenos">281</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-282"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-282"><span class="linenos">282</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-283"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-283"><span class="linenos">283</span></a>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-284"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-284"><span class="linenos">284</span></a><span class="sd">        Return:</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-285"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-285"><span class="linenos">285</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-286"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-286"><span class="linenos">286</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-287"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-287"><span class="linenos">287</span></a>        <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">]</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-288"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-288"><span class="linenos">288</span></a>        <span class="n">server_root_dir</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">host</span><span class="o">.</span><span class="n">nbi_config</span><span class="o">.</span><span class="n">server_root_dir</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-289"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-289"><span class="linenos">289</span></a>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-290"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-290"><span class="linenos">290</span></a>        <span class="c1"># Normalize to server-root-relative path if needed</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-291"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-291"><span class="linenos">291</span></a>        <span class="k">if</span> <span class="n">notebook_file_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">server_root_dir</span><span class="p">):</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-292"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-292"><span class="linenos">292</span></a>            <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">notebook_file_path</span><span class="p">,</span> <span class="n">server_root_dir</span><span class="p">)</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-293"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-293"><span class="linenos">293</span></a>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-294"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-294"><span class="linenos">294</span></a>        <span class="n">src</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;markdown_cell_source&quot;</span><span class="p">]</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-295"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-295"><span class="linenos">295</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-296"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-296"><span class="linenos">296</span></a>            <span class="s2">&quot;notebook-intelligence:add-markdown-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;markdown&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">notebook_file_path</span><span class="p">}</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-297"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-297"><span class="linenos">297</span></a>        <span class="p">)</span>
</span><span id="AddMarkdownCellToNotebookTool.handle_tool_call-298"><a href="#AddMarkdownCellToNotebookTool.handle_tool_call-298"><span class="linenos">298</span></a>        <span class="k">return</span> <span class="s2">&quot;Added markdown cell to notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="AddCodeCellTool">
                            <input id="AddCodeCellTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AddCodeCellTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="AddCodeCellTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddCodeCellTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddCodeCellTool-301"><a href="#AddCodeCellTool-301"><span class="linenos">301</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AddCodeCellTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="AddCodeCellTool-302"><a href="#AddCodeCellTool-302"><span class="linenos">302</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for adding a code cell to a notebook.&quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool-303"><a href="#AddCodeCellTool-303"><span class="linenos">303</span></a>
</span><span id="AddCodeCellTool-304"><a href="#AddCodeCellTool-304"><span class="linenos">304</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AddCodeCellTool-305"><a href="#AddCodeCellTool-305"><span class="linenos">305</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="AddCodeCellTool-306"><a href="#AddCodeCellTool-306"><span class="linenos">306</span></a>
</span><span id="AddCodeCellTool-307"><a href="#AddCodeCellTool-307"><span class="linenos">307</span></a><span class="sd">        Args:</span>
</span><span id="AddCodeCellTool-308"><a href="#AddCodeCellTool-308"><span class="linenos">308</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve the tool call.</span>
</span><span id="AddCodeCellTool-309"><a href="#AddCodeCellTool-309"><span class="linenos">309</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool-310"><a href="#AddCodeCellTool-310"><span class="linenos">310</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="AddCodeCellTool-311"><a href="#AddCodeCellTool-311"><span class="linenos">311</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="AddCodeCellTool-312"><a href="#AddCodeCellTool-312"><span class="linenos">312</span></a>
</span><span id="AddCodeCellTool-313"><a href="#AddCodeCellTool-313"><span class="linenos">313</span></a>    <span class="nd">@property</span>
</span><span id="AddCodeCellTool-314"><a href="#AddCodeCellTool-314"><span class="linenos">314</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddCodeCellTool-315"><a href="#AddCodeCellTool-315"><span class="linenos">315</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="AddCodeCellTool-316"><a href="#AddCodeCellTool-316"><span class="linenos">316</span></a>
</span><span id="AddCodeCellTool-317"><a href="#AddCodeCellTool-317"><span class="linenos">317</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool-318"><a href="#AddCodeCellTool-318"><span class="linenos">318</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="AddCodeCellTool-319"><a href="#AddCodeCellTool-319"><span class="linenos">319</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool-320"><a href="#AddCodeCellTool-320"><span class="linenos">320</span></a>        <span class="k">return</span> <span class="s2">&quot;add_code_cell_to_notebook&quot;</span>
</span><span id="AddCodeCellTool-321"><a href="#AddCodeCellTool-321"><span class="linenos">321</span></a>
</span><span id="AddCodeCellTool-322"><a href="#AddCodeCellTool-322"><span class="linenos">322</span></a>    <span class="nd">@property</span>
</span><span id="AddCodeCellTool-323"><a href="#AddCodeCellTool-323"><span class="linenos">323</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddCodeCellTool-324"><a href="#AddCodeCellTool-324"><span class="linenos">324</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="AddCodeCellTool-325"><a href="#AddCodeCellTool-325"><span class="linenos">325</span></a>
</span><span id="AddCodeCellTool-326"><a href="#AddCodeCellTool-326"><span class="linenos">326</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool-327"><a href="#AddCodeCellTool-327"><span class="linenos">327</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="AddCodeCellTool-328"><a href="#AddCodeCellTool-328"><span class="linenos">328</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool-329"><a href="#AddCodeCellTool-329"><span class="linenos">329</span></a>        <span class="k">return</span> <span class="s2">&quot;Add code cell to notebook&quot;</span>
</span><span id="AddCodeCellTool-330"><a href="#AddCodeCellTool-330"><span class="linenos">330</span></a>
</span><span id="AddCodeCellTool-331"><a href="#AddCodeCellTool-331"><span class="linenos">331</span></a>    <span class="nd">@property</span>
</span><span id="AddCodeCellTool-332"><a href="#AddCodeCellTool-332"><span class="linenos">332</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="AddCodeCellTool-333"><a href="#AddCodeCellTool-333"><span class="linenos">333</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="AddCodeCellTool-334"><a href="#AddCodeCellTool-334"><span class="linenos">334</span></a>
</span><span id="AddCodeCellTool-335"><a href="#AddCodeCellTool-335"><span class="linenos">335</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool-336"><a href="#AddCodeCellTool-336"><span class="linenos">336</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="AddCodeCellTool-337"><a href="#AddCodeCellTool-337"><span class="linenos">337</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool-338"><a href="#AddCodeCellTool-338"><span class="linenos">338</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;code cell&quot;</span><span class="p">,</span> <span class="s2">&quot;addition&quot;</span><span class="p">]</span>
</span><span id="AddCodeCellTool-339"><a href="#AddCodeCellTool-339"><span class="linenos">339</span></a>
</span><span id="AddCodeCellTool-340"><a href="#AddCodeCellTool-340"><span class="linenos">340</span></a>    <span class="nd">@property</span>
</span><span id="AddCodeCellTool-341"><a href="#AddCodeCellTool-341"><span class="linenos">341</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddCodeCellTool-342"><a href="#AddCodeCellTool-342"><span class="linenos">342</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="AddCodeCellTool-343"><a href="#AddCodeCellTool-343"><span class="linenos">343</span></a>
</span><span id="AddCodeCellTool-344"><a href="#AddCodeCellTool-344"><span class="linenos">344</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool-345"><a href="#AddCodeCellTool-345"><span class="linenos">345</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="AddCodeCellTool-346"><a href="#AddCodeCellTool-346"><span class="linenos">346</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool-347"><a href="#AddCodeCellTool-347"><span class="linenos">347</span></a>        <span class="k">return</span> <span class="s2">&quot;Append a code cell to an existing notebook.&quot;</span>
</span><span id="AddCodeCellTool-348"><a href="#AddCodeCellTool-348"><span class="linenos">348</span></a>
</span><span id="AddCodeCellTool-349"><a href="#AddCodeCellTool-349"><span class="linenos">349</span></a>    <span class="nd">@property</span>
</span><span id="AddCodeCellTool-350"><a href="#AddCodeCellTool-350"><span class="linenos">350</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="AddCodeCellTool-351"><a href="#AddCodeCellTool-351"><span class="linenos">351</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="AddCodeCellTool-352"><a href="#AddCodeCellTool-352"><span class="linenos">352</span></a>
</span><span id="AddCodeCellTool-353"><a href="#AddCodeCellTool-353"><span class="linenos">353</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool-354"><a href="#AddCodeCellTool-354"><span class="linenos">354</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="AddCodeCellTool-355"><a href="#AddCodeCellTool-355"><span class="linenos">355</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool-356"><a href="#AddCodeCellTool-356"><span class="linenos">356</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="AddCodeCellTool-357"><a href="#AddCodeCellTool-357"><span class="linenos">357</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="AddCodeCellTool-358"><a href="#AddCodeCellTool-358"><span class="linenos">358</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddCodeCellTool-359"><a href="#AddCodeCellTool-359"><span class="linenos">359</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="AddCodeCellTool-360"><a href="#AddCodeCellTool-360"><span class="linenos">360</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="AddCodeCellTool-361"><a href="#AddCodeCellTool-361"><span class="linenos">361</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="AddCodeCellTool-362"><a href="#AddCodeCellTool-362"><span class="linenos">362</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddCodeCellTool-363"><a href="#AddCodeCellTool-363"><span class="linenos">363</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="AddCodeCellTool-364"><a href="#AddCodeCellTool-364"><span class="linenos">364</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddCodeCellTool-365"><a href="#AddCodeCellTool-365"><span class="linenos">365</span></a>                        <span class="s2">&quot;notebook_file_path&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddCodeCellTool-366"><a href="#AddCodeCellTool-366"><span class="linenos">366</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="AddCodeCellTool-367"><a href="#AddCodeCellTool-367"><span class="linenos">367</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Absolute or server-root-relative notebook path.&quot;</span><span class="p">,</span>
</span><span id="AddCodeCellTool-368"><a href="#AddCodeCellTool-368"><span class="linenos">368</span></a>                        <span class="p">},</span>
</span><span id="AddCodeCellTool-369"><a href="#AddCodeCellTool-369"><span class="linenos">369</span></a>                        <span class="s2">&quot;code_cell_source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Code to append.&quot;</span><span class="p">},</span>
</span><span id="AddCodeCellTool-370"><a href="#AddCodeCellTool-370"><span class="linenos">370</span></a>                    <span class="p">},</span>
</span><span id="AddCodeCellTool-371"><a href="#AddCodeCellTool-371"><span class="linenos">371</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">,</span> <span class="s2">&quot;code_cell_source&quot;</span><span class="p">],</span>
</span><span id="AddCodeCellTool-372"><a href="#AddCodeCellTool-372"><span class="linenos">372</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="AddCodeCellTool-373"><a href="#AddCodeCellTool-373"><span class="linenos">373</span></a>                <span class="p">},</span>
</span><span id="AddCodeCellTool-374"><a href="#AddCodeCellTool-374"><span class="linenos">374</span></a>            <span class="p">},</span>
</span><span id="AddCodeCellTool-375"><a href="#AddCodeCellTool-375"><span class="linenos">375</span></a>        <span class="p">}</span>
</span><span id="AddCodeCellTool-376"><a href="#AddCodeCellTool-376"><span class="linenos">376</span></a>
</span><span id="AddCodeCellTool-377"><a href="#AddCodeCellTool-377"><span class="linenos">377</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="AddCodeCellTool-378"><a href="#AddCodeCellTool-378"><span class="linenos">378</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="AddCodeCellTool-379"><a href="#AddCodeCellTool-379"><span class="linenos">379</span></a>
</span><span id="AddCodeCellTool-380"><a href="#AddCodeCellTool-380"><span class="linenos">380</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="AddCodeCellTool-381"><a href="#AddCodeCellTool-381"><span class="linenos">381</span></a>
</span><span id="AddCodeCellTool-382"><a href="#AddCodeCellTool-382"><span class="linenos">382</span></a><span class="sd">        Args:</span>
</span><span id="AddCodeCellTool-383"><a href="#AddCodeCellTool-383"><span class="linenos">383</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="AddCodeCellTool-384"><a href="#AddCodeCellTool-384"><span class="linenos">384</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="AddCodeCellTool-385"><a href="#AddCodeCellTool-385"><span class="linenos">385</span></a>
</span><span id="AddCodeCellTool-386"><a href="#AddCodeCellTool-386"><span class="linenos">386</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool-387"><a href="#AddCodeCellTool-387"><span class="linenos">387</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="AddCodeCellTool-388"><a href="#AddCodeCellTool-388"><span class="linenos">388</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool-389"><a href="#AddCodeCellTool-389"><span class="linenos">389</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="AddCodeCellTool-390"><a href="#AddCodeCellTool-390"><span class="linenos">390</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="AddCodeCellTool-391"><a href="#AddCodeCellTool-391"><span class="linenos">391</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Append code to the notebook?&quot;</span><span class="p">)</span>
</span><span id="AddCodeCellTool-392"><a href="#AddCodeCellTool-392"><span class="linenos">392</span></a>
</span><span id="AddCodeCellTool-393"><a href="#AddCodeCellTool-393"><span class="linenos">393</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="AddCodeCellTool-394"><a href="#AddCodeCellTool-394"><span class="linenos">394</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="AddCodeCellTool-395"><a href="#AddCodeCellTool-395"><span class="linenos">395</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddCodeCellTool-396"><a href="#AddCodeCellTool-396"><span class="linenos">396</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="AddCodeCellTool-397"><a href="#AddCodeCellTool-397"><span class="linenos">397</span></a>
</span><span id="AddCodeCellTool-398"><a href="#AddCodeCellTool-398"><span class="linenos">398</span></a><span class="sd">        Args:</span>
</span><span id="AddCodeCellTool-399"><a href="#AddCodeCellTool-399"><span class="linenos">399</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="AddCodeCellTool-400"><a href="#AddCodeCellTool-400"><span class="linenos">400</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="AddCodeCellTool-401"><a href="#AddCodeCellTool-401"><span class="linenos">401</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="AddCodeCellTool-402"><a href="#AddCodeCellTool-402"><span class="linenos">402</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="AddCodeCellTool-403"><a href="#AddCodeCellTool-403"><span class="linenos">403</span></a>
</span><span id="AddCodeCellTool-404"><a href="#AddCodeCellTool-404"><span class="linenos">404</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool-405"><a href="#AddCodeCellTool-405"><span class="linenos">405</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="AddCodeCellTool-406"><a href="#AddCodeCellTool-406"><span class="linenos">406</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool-407"><a href="#AddCodeCellTool-407"><span class="linenos">407</span></a>        <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">]</span>
</span><span id="AddCodeCellTool-408"><a href="#AddCodeCellTool-408"><span class="linenos">408</span></a>        <span class="n">server_root_dir</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">host</span><span class="o">.</span><span class="n">nbi_config</span><span class="o">.</span><span class="n">server_root_dir</span>
</span><span id="AddCodeCellTool-409"><a href="#AddCodeCellTool-409"><span class="linenos">409</span></a>
</span><span id="AddCodeCellTool-410"><a href="#AddCodeCellTool-410"><span class="linenos">410</span></a>        <span class="k">if</span> <span class="n">notebook_file_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">server_root_dir</span><span class="p">):</span>
</span><span id="AddCodeCellTool-411"><a href="#AddCodeCellTool-411"><span class="linenos">411</span></a>            <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">notebook_file_path</span><span class="p">,</span> <span class="n">server_root_dir</span><span class="p">)</span>
</span><span id="AddCodeCellTool-412"><a href="#AddCodeCellTool-412"><span class="linenos">412</span></a>
</span><span id="AddCodeCellTool-413"><a href="#AddCodeCellTool-413"><span class="linenos">413</span></a>        <span class="n">src</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;code_cell_source&quot;</span><span class="p">]</span>
</span><span id="AddCodeCellTool-414"><a href="#AddCodeCellTool-414"><span class="linenos">414</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="AddCodeCellTool-415"><a href="#AddCodeCellTool-415"><span class="linenos">415</span></a>            <span class="s2">&quot;notebook-intelligence:add-code-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">notebook_file_path</span><span class="p">}</span>
</span><span id="AddCodeCellTool-416"><a href="#AddCodeCellTool-416"><span class="linenos">416</span></a>        <span class="p">)</span>
</span><span id="AddCodeCellTool-417"><a href="#AddCodeCellTool-417"><span class="linenos">417</span></a>        <span class="k">return</span> <span class="s2">&quot;Added code cell to notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Tool for adding a code cell to a notebook.</p>
</div>


                            <div id="AddCodeCellTool.__init__" class="classattr">
                                        <input id="AddCodeCellTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AddCodeCellTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="AddCodeCellTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddCodeCellTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddCodeCellTool.__init__-304"><a href="#AddCodeCellTool.__init__-304"><span class="linenos">304</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AddCodeCellTool.__init__-305"><a href="#AddCodeCellTool.__init__-305"><span class="linenos">305</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="AddCodeCellTool.__init__-306"><a href="#AddCodeCellTool.__init__-306"><span class="linenos">306</span></a>
</span><span id="AddCodeCellTool.__init__-307"><a href="#AddCodeCellTool.__init__-307"><span class="linenos">307</span></a><span class="sd">        Args:</span>
</span><span id="AddCodeCellTool.__init__-308"><a href="#AddCodeCellTool.__init__-308"><span class="linenos">308</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve the tool call.</span>
</span><span id="AddCodeCellTool.__init__-309"><a href="#AddCodeCellTool.__init__-309"><span class="linenos">309</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool.__init__-310"><a href="#AddCodeCellTool.__init__-310"><span class="linenos">310</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="AddCodeCellTool.__init__-311"><a href="#AddCodeCellTool.__init__-311"><span class="linenos">311</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve the tool call.</li>
</ul>
</div>


                            </div>
                            <div id="AddCodeCellTool.name" class="classattr">
                                        <input id="AddCodeCellTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AddCodeCellTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddCodeCellTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddCodeCellTool.name-313"><a href="#AddCodeCellTool.name-313"><span class="linenos">313</span></a>    <span class="nd">@property</span>
</span><span id="AddCodeCellTool.name-314"><a href="#AddCodeCellTool.name-314"><span class="linenos">314</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddCodeCellTool.name-315"><a href="#AddCodeCellTool.name-315"><span class="linenos">315</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="AddCodeCellTool.name-316"><a href="#AddCodeCellTool.name-316"><span class="linenos">316</span></a>
</span><span id="AddCodeCellTool.name-317"><a href="#AddCodeCellTool.name-317"><span class="linenos">317</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool.name-318"><a href="#AddCodeCellTool.name-318"><span class="linenos">318</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="AddCodeCellTool.name-319"><a href="#AddCodeCellTool.name-319"><span class="linenos">319</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool.name-320"><a href="#AddCodeCellTool.name-320"><span class="linenos">320</span></a>        <span class="k">return</span> <span class="s2">&quot;add_code_cell_to_notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddCodeCellTool.title" class="classattr">
                                        <input id="AddCodeCellTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AddCodeCellTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddCodeCellTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddCodeCellTool.title-322"><a href="#AddCodeCellTool.title-322"><span class="linenos">322</span></a>    <span class="nd">@property</span>
</span><span id="AddCodeCellTool.title-323"><a href="#AddCodeCellTool.title-323"><span class="linenos">323</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddCodeCellTool.title-324"><a href="#AddCodeCellTool.title-324"><span class="linenos">324</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="AddCodeCellTool.title-325"><a href="#AddCodeCellTool.title-325"><span class="linenos">325</span></a>
</span><span id="AddCodeCellTool.title-326"><a href="#AddCodeCellTool.title-326"><span class="linenos">326</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool.title-327"><a href="#AddCodeCellTool.title-327"><span class="linenos">327</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="AddCodeCellTool.title-328"><a href="#AddCodeCellTool.title-328"><span class="linenos">328</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool.title-329"><a href="#AddCodeCellTool.title-329"><span class="linenos">329</span></a>        <span class="k">return</span> <span class="s2">&quot;Add code cell to notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddCodeCellTool.tags" class="classattr">
                                        <input id="AddCodeCellTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="AddCodeCellTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddCodeCellTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddCodeCellTool.tags-331"><a href="#AddCodeCellTool.tags-331"><span class="linenos">331</span></a>    <span class="nd">@property</span>
</span><span id="AddCodeCellTool.tags-332"><a href="#AddCodeCellTool.tags-332"><span class="linenos">332</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="AddCodeCellTool.tags-333"><a href="#AddCodeCellTool.tags-333"><span class="linenos">333</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="AddCodeCellTool.tags-334"><a href="#AddCodeCellTool.tags-334"><span class="linenos">334</span></a>
</span><span id="AddCodeCellTool.tags-335"><a href="#AddCodeCellTool.tags-335"><span class="linenos">335</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool.tags-336"><a href="#AddCodeCellTool.tags-336"><span class="linenos">336</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="AddCodeCellTool.tags-337"><a href="#AddCodeCellTool.tags-337"><span class="linenos">337</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool.tags-338"><a href="#AddCodeCellTool.tags-338"><span class="linenos">338</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;code cell&quot;</span><span class="p">,</span> <span class="s2">&quot;addition&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddCodeCellTool.description" class="classattr">
                                        <input id="AddCodeCellTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AddCodeCellTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddCodeCellTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddCodeCellTool.description-340"><a href="#AddCodeCellTool.description-340"><span class="linenos">340</span></a>    <span class="nd">@property</span>
</span><span id="AddCodeCellTool.description-341"><a href="#AddCodeCellTool.description-341"><span class="linenos">341</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddCodeCellTool.description-342"><a href="#AddCodeCellTool.description-342"><span class="linenos">342</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="AddCodeCellTool.description-343"><a href="#AddCodeCellTool.description-343"><span class="linenos">343</span></a>
</span><span id="AddCodeCellTool.description-344"><a href="#AddCodeCellTool.description-344"><span class="linenos">344</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool.description-345"><a href="#AddCodeCellTool.description-345"><span class="linenos">345</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="AddCodeCellTool.description-346"><a href="#AddCodeCellTool.description-346"><span class="linenos">346</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool.description-347"><a href="#AddCodeCellTool.description-347"><span class="linenos">347</span></a>        <span class="k">return</span> <span class="s2">&quot;Append a code cell to an existing notebook.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddCodeCellTool.schema" class="classattr">
                                        <input id="AddCodeCellTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="AddCodeCellTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddCodeCellTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddCodeCellTool.schema-349"><a href="#AddCodeCellTool.schema-349"><span class="linenos">349</span></a>    <span class="nd">@property</span>
</span><span id="AddCodeCellTool.schema-350"><a href="#AddCodeCellTool.schema-350"><span class="linenos">350</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="AddCodeCellTool.schema-351"><a href="#AddCodeCellTool.schema-351"><span class="linenos">351</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="AddCodeCellTool.schema-352"><a href="#AddCodeCellTool.schema-352"><span class="linenos">352</span></a>
</span><span id="AddCodeCellTool.schema-353"><a href="#AddCodeCellTool.schema-353"><span class="linenos">353</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool.schema-354"><a href="#AddCodeCellTool.schema-354"><span class="linenos">354</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="AddCodeCellTool.schema-355"><a href="#AddCodeCellTool.schema-355"><span class="linenos">355</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool.schema-356"><a href="#AddCodeCellTool.schema-356"><span class="linenos">356</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="AddCodeCellTool.schema-357"><a href="#AddCodeCellTool.schema-357"><span class="linenos">357</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="AddCodeCellTool.schema-358"><a href="#AddCodeCellTool.schema-358"><span class="linenos">358</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddCodeCellTool.schema-359"><a href="#AddCodeCellTool.schema-359"><span class="linenos">359</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="AddCodeCellTool.schema-360"><a href="#AddCodeCellTool.schema-360"><span class="linenos">360</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="AddCodeCellTool.schema-361"><a href="#AddCodeCellTool.schema-361"><span class="linenos">361</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="AddCodeCellTool.schema-362"><a href="#AddCodeCellTool.schema-362"><span class="linenos">362</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddCodeCellTool.schema-363"><a href="#AddCodeCellTool.schema-363"><span class="linenos">363</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="AddCodeCellTool.schema-364"><a href="#AddCodeCellTool.schema-364"><span class="linenos">364</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddCodeCellTool.schema-365"><a href="#AddCodeCellTool.schema-365"><span class="linenos">365</span></a>                        <span class="s2">&quot;notebook_file_path&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="AddCodeCellTool.schema-366"><a href="#AddCodeCellTool.schema-366"><span class="linenos">366</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="AddCodeCellTool.schema-367"><a href="#AddCodeCellTool.schema-367"><span class="linenos">367</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Absolute or server-root-relative notebook path.&quot;</span><span class="p">,</span>
</span><span id="AddCodeCellTool.schema-368"><a href="#AddCodeCellTool.schema-368"><span class="linenos">368</span></a>                        <span class="p">},</span>
</span><span id="AddCodeCellTool.schema-369"><a href="#AddCodeCellTool.schema-369"><span class="linenos">369</span></a>                        <span class="s2">&quot;code_cell_source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Code to append.&quot;</span><span class="p">},</span>
</span><span id="AddCodeCellTool.schema-370"><a href="#AddCodeCellTool.schema-370"><span class="linenos">370</span></a>                    <span class="p">},</span>
</span><span id="AddCodeCellTool.schema-371"><a href="#AddCodeCellTool.schema-371"><span class="linenos">371</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">,</span> <span class="s2">&quot;code_cell_source&quot;</span><span class="p">],</span>
</span><span id="AddCodeCellTool.schema-372"><a href="#AddCodeCellTool.schema-372"><span class="linenos">372</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="AddCodeCellTool.schema-373"><a href="#AddCodeCellTool.schema-373"><span class="linenos">373</span></a>                <span class="p">},</span>
</span><span id="AddCodeCellTool.schema-374"><a href="#AddCodeCellTool.schema-374"><span class="linenos">374</span></a>            <span class="p">},</span>
</span><span id="AddCodeCellTool.schema-375"><a href="#AddCodeCellTool.schema-375"><span class="linenos">375</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Get the schema for the tool's function.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool's function.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddCodeCellTool.pre_invoke" class="classattr">
                                        <input id="AddCodeCellTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="AddCodeCellTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddCodeCellTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddCodeCellTool.pre_invoke-377"><a href="#AddCodeCellTool.pre_invoke-377"><span class="linenos">377</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="AddCodeCellTool.pre_invoke-378"><a href="#AddCodeCellTool.pre_invoke-378"><span class="linenos">378</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="AddCodeCellTool.pre_invoke-379"><a href="#AddCodeCellTool.pre_invoke-379"><span class="linenos">379</span></a>
</span><span id="AddCodeCellTool.pre_invoke-380"><a href="#AddCodeCellTool.pre_invoke-380"><span class="linenos">380</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="AddCodeCellTool.pre_invoke-381"><a href="#AddCodeCellTool.pre_invoke-381"><span class="linenos">381</span></a>
</span><span id="AddCodeCellTool.pre_invoke-382"><a href="#AddCodeCellTool.pre_invoke-382"><span class="linenos">382</span></a><span class="sd">        Args:</span>
</span><span id="AddCodeCellTool.pre_invoke-383"><a href="#AddCodeCellTool.pre_invoke-383"><span class="linenos">383</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="AddCodeCellTool.pre_invoke-384"><a href="#AddCodeCellTool.pre_invoke-384"><span class="linenos">384</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="AddCodeCellTool.pre_invoke-385"><a href="#AddCodeCellTool.pre_invoke-385"><span class="linenos">385</span></a>
</span><span id="AddCodeCellTool.pre_invoke-386"><a href="#AddCodeCellTool.pre_invoke-386"><span class="linenos">386</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool.pre_invoke-387"><a href="#AddCodeCellTool.pre_invoke-387"><span class="linenos">387</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="AddCodeCellTool.pre_invoke-388"><a href="#AddCodeCellTool.pre_invoke-388"><span class="linenos">388</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool.pre_invoke-389"><a href="#AddCodeCellTool.pre_invoke-389"><span class="linenos">389</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="AddCodeCellTool.pre_invoke-390"><a href="#AddCodeCellTool.pre_invoke-390"><span class="linenos">390</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="AddCodeCellTool.pre_invoke-391"><a href="#AddCodeCellTool.pre_invoke-391"><span class="linenos">391</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Append code to the notebook?&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="AddCodeCellTool.handle_tool_call" class="classattr">
                                        <input id="AddCodeCellTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="AddCodeCellTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AddCodeCellTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AddCodeCellTool.handle_tool_call-393"><a href="#AddCodeCellTool.handle_tool_call-393"><span class="linenos">393</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="AddCodeCellTool.handle_tool_call-394"><a href="#AddCodeCellTool.handle_tool_call-394"><span class="linenos">394</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="AddCodeCellTool.handle_tool_call-395"><a href="#AddCodeCellTool.handle_tool_call-395"><span class="linenos">395</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AddCodeCellTool.handle_tool_call-396"><a href="#AddCodeCellTool.handle_tool_call-396"><span class="linenos">396</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="AddCodeCellTool.handle_tool_call-397"><a href="#AddCodeCellTool.handle_tool_call-397"><span class="linenos">397</span></a>
</span><span id="AddCodeCellTool.handle_tool_call-398"><a href="#AddCodeCellTool.handle_tool_call-398"><span class="linenos">398</span></a><span class="sd">        Args:</span>
</span><span id="AddCodeCellTool.handle_tool_call-399"><a href="#AddCodeCellTool.handle_tool_call-399"><span class="linenos">399</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="AddCodeCellTool.handle_tool_call-400"><a href="#AddCodeCellTool.handle_tool_call-400"><span class="linenos">400</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="AddCodeCellTool.handle_tool_call-401"><a href="#AddCodeCellTool.handle_tool_call-401"><span class="linenos">401</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="AddCodeCellTool.handle_tool_call-402"><a href="#AddCodeCellTool.handle_tool_call-402"><span class="linenos">402</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="AddCodeCellTool.handle_tool_call-403"><a href="#AddCodeCellTool.handle_tool_call-403"><span class="linenos">403</span></a>
</span><span id="AddCodeCellTool.handle_tool_call-404"><a href="#AddCodeCellTool.handle_tool_call-404"><span class="linenos">404</span></a><span class="sd">        Return:</span>
</span><span id="AddCodeCellTool.handle_tool_call-405"><a href="#AddCodeCellTool.handle_tool_call-405"><span class="linenos">405</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="AddCodeCellTool.handle_tool_call-406"><a href="#AddCodeCellTool.handle_tool_call-406"><span class="linenos">406</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AddCodeCellTool.handle_tool_call-407"><a href="#AddCodeCellTool.handle_tool_call-407"><span class="linenos">407</span></a>        <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;notebook_file_path&quot;</span><span class="p">]</span>
</span><span id="AddCodeCellTool.handle_tool_call-408"><a href="#AddCodeCellTool.handle_tool_call-408"><span class="linenos">408</span></a>        <span class="n">server_root_dir</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">host</span><span class="o">.</span><span class="n">nbi_config</span><span class="o">.</span><span class="n">server_root_dir</span>
</span><span id="AddCodeCellTool.handle_tool_call-409"><a href="#AddCodeCellTool.handle_tool_call-409"><span class="linenos">409</span></a>
</span><span id="AddCodeCellTool.handle_tool_call-410"><a href="#AddCodeCellTool.handle_tool_call-410"><span class="linenos">410</span></a>        <span class="k">if</span> <span class="n">notebook_file_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">server_root_dir</span><span class="p">):</span>
</span><span id="AddCodeCellTool.handle_tool_call-411"><a href="#AddCodeCellTool.handle_tool_call-411"><span class="linenos">411</span></a>            <span class="n">notebook_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">notebook_file_path</span><span class="p">,</span> <span class="n">server_root_dir</span><span class="p">)</span>
</span><span id="AddCodeCellTool.handle_tool_call-412"><a href="#AddCodeCellTool.handle_tool_call-412"><span class="linenos">412</span></a>
</span><span id="AddCodeCellTool.handle_tool_call-413"><a href="#AddCodeCellTool.handle_tool_call-413"><span class="linenos">413</span></a>        <span class="n">src</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;code_cell_source&quot;</span><span class="p">]</span>
</span><span id="AddCodeCellTool.handle_tool_call-414"><a href="#AddCodeCellTool.handle_tool_call-414"><span class="linenos">414</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="AddCodeCellTool.handle_tool_call-415"><a href="#AddCodeCellTool.handle_tool_call-415"><span class="linenos">415</span></a>            <span class="s2">&quot;notebook-intelligence:add-code-cell-to-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">src</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">notebook_file_path</span><span class="p">}</span>
</span><span id="AddCodeCellTool.handle_tool_call-416"><a href="#AddCodeCellTool.handle_tool_call-416"><span class="linenos">416</span></a>        <span class="p">)</span>
</span><span id="AddCodeCellTool.handle_tool_call-417"><a href="#AddCodeCellTool.handle_tool_call-417"><span class="linenos">417</span></a>        <span class="k">return</span> <span class="s2">&quot;Added code cell to notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="RunCellAtIndexTool">
                            <input id="RunCellAtIndexTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RunCellAtIndexTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="RunCellAtIndexTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCellAtIndexTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCellAtIndexTool-420"><a href="#RunCellAtIndexTool-420"><span class="linenos">420</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RunCellAtIndexTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="RunCellAtIndexTool-421"><a href="#RunCellAtIndexTool-421"><span class="linenos">421</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Run cell at index tool.&quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool-422"><a href="#RunCellAtIndexTool-422"><span class="linenos">422</span></a>
</span><span id="RunCellAtIndexTool-423"><a href="#RunCellAtIndexTool-423"><span class="linenos">423</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool-424"><a href="#RunCellAtIndexTool-424"><span class="linenos">424</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="RunCellAtIndexTool-425"><a href="#RunCellAtIndexTool-425"><span class="linenos">425</span></a>
</span><span id="RunCellAtIndexTool-426"><a href="#RunCellAtIndexTool-426"><span class="linenos">426</span></a><span class="sd">        Args:</span>
</span><span id="RunCellAtIndexTool-427"><a href="#RunCellAtIndexTool-427"><span class="linenos">427</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="RunCellAtIndexTool-428"><a href="#RunCellAtIndexTool-428"><span class="linenos">428</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool-429"><a href="#RunCellAtIndexTool-429"><span class="linenos">429</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="RunCellAtIndexTool-430"><a href="#RunCellAtIndexTool-430"><span class="linenos">430</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="RunCellAtIndexTool-431"><a href="#RunCellAtIndexTool-431"><span class="linenos">431</span></a>
</span><span id="RunCellAtIndexTool-432"><a href="#RunCellAtIndexTool-432"><span class="linenos">432</span></a>    <span class="nd">@property</span>
</span><span id="RunCellAtIndexTool-433"><a href="#RunCellAtIndexTool-433"><span class="linenos">433</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool-434"><a href="#RunCellAtIndexTool-434"><span class="linenos">434</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="RunCellAtIndexTool-435"><a href="#RunCellAtIndexTool-435"><span class="linenos">435</span></a>
</span><span id="RunCellAtIndexTool-436"><a href="#RunCellAtIndexTool-436"><span class="linenos">436</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool-437"><a href="#RunCellAtIndexTool-437"><span class="linenos">437</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="RunCellAtIndexTool-438"><a href="#RunCellAtIndexTool-438"><span class="linenos">438</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool-439"><a href="#RunCellAtIndexTool-439"><span class="linenos">439</span></a>        <span class="k">return</span> <span class="s2">&quot;run_cell_at_index&quot;</span>
</span><span id="RunCellAtIndexTool-440"><a href="#RunCellAtIndexTool-440"><span class="linenos">440</span></a>
</span><span id="RunCellAtIndexTool-441"><a href="#RunCellAtIndexTool-441"><span class="linenos">441</span></a>    <span class="nd">@property</span>
</span><span id="RunCellAtIndexTool-442"><a href="#RunCellAtIndexTool-442"><span class="linenos">442</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool-443"><a href="#RunCellAtIndexTool-443"><span class="linenos">443</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="RunCellAtIndexTool-444"><a href="#RunCellAtIndexTool-444"><span class="linenos">444</span></a>
</span><span id="RunCellAtIndexTool-445"><a href="#RunCellAtIndexTool-445"><span class="linenos">445</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool-446"><a href="#RunCellAtIndexTool-446"><span class="linenos">446</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="RunCellAtIndexTool-447"><a href="#RunCellAtIndexTool-447"><span class="linenos">447</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool-448"><a href="#RunCellAtIndexTool-448"><span class="linenos">448</span></a>        <span class="k">return</span> <span class="s2">&quot;Run cell at index in the active notebook&quot;</span>
</span><span id="RunCellAtIndexTool-449"><a href="#RunCellAtIndexTool-449"><span class="linenos">449</span></a>
</span><span id="RunCellAtIndexTool-450"><a href="#RunCellAtIndexTool-450"><span class="linenos">450</span></a>    <span class="nd">@property</span>
</span><span id="RunCellAtIndexTool-451"><a href="#RunCellAtIndexTool-451"><span class="linenos">451</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="RunCellAtIndexTool-452"><a href="#RunCellAtIndexTool-452"><span class="linenos">452</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="RunCellAtIndexTool-453"><a href="#RunCellAtIndexTool-453"><span class="linenos">453</span></a>
</span><span id="RunCellAtIndexTool-454"><a href="#RunCellAtIndexTool-454"><span class="linenos">454</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool-455"><a href="#RunCellAtIndexTool-455"><span class="linenos">455</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="RunCellAtIndexTool-456"><a href="#RunCellAtIndexTool-456"><span class="linenos">456</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool-457"><a href="#RunCellAtIndexTool-457"><span class="linenos">457</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;code cell&quot;</span><span class="p">,</span> <span class="s2">&quot;execution&quot;</span><span class="p">]</span>
</span><span id="RunCellAtIndexTool-458"><a href="#RunCellAtIndexTool-458"><span class="linenos">458</span></a>
</span><span id="RunCellAtIndexTool-459"><a href="#RunCellAtIndexTool-459"><span class="linenos">459</span></a>    <span class="nd">@property</span>
</span><span id="RunCellAtIndexTool-460"><a href="#RunCellAtIndexTool-460"><span class="linenos">460</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool-461"><a href="#RunCellAtIndexTool-461"><span class="linenos">461</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="RunCellAtIndexTool-462"><a href="#RunCellAtIndexTool-462"><span class="linenos">462</span></a>
</span><span id="RunCellAtIndexTool-463"><a href="#RunCellAtIndexTool-463"><span class="linenos">463</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool-464"><a href="#RunCellAtIndexTool-464"><span class="linenos">464</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="RunCellAtIndexTool-465"><a href="#RunCellAtIndexTool-465"><span class="linenos">465</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool-466"><a href="#RunCellAtIndexTool-466"><span class="linenos">466</span></a>        <span class="k">return</span> <span class="s2">&quot;Execute the cell at the given zero-based index in the ACTIVE notebook.&quot;</span>
</span><span id="RunCellAtIndexTool-467"><a href="#RunCellAtIndexTool-467"><span class="linenos">467</span></a>
</span><span id="RunCellAtIndexTool-468"><a href="#RunCellAtIndexTool-468"><span class="linenos">468</span></a>    <span class="nd">@property</span>
</span><span id="RunCellAtIndexTool-469"><a href="#RunCellAtIndexTool-469"><span class="linenos">469</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool-470"><a href="#RunCellAtIndexTool-470"><span class="linenos">470</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="RunCellAtIndexTool-471"><a href="#RunCellAtIndexTool-471"><span class="linenos">471</span></a>
</span><span id="RunCellAtIndexTool-472"><a href="#RunCellAtIndexTool-472"><span class="linenos">472</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool-473"><a href="#RunCellAtIndexTool-473"><span class="linenos">473</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="RunCellAtIndexTool-474"><a href="#RunCellAtIndexTool-474"><span class="linenos">474</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool-475"><a href="#RunCellAtIndexTool-475"><span class="linenos">475</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="RunCellAtIndexTool-476"><a href="#RunCellAtIndexTool-476"><span class="linenos">476</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-477"><a href="#RunCellAtIndexTool-477"><span class="linenos">477</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RunCellAtIndexTool-478"><a href="#RunCellAtIndexTool-478"><span class="linenos">478</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-479"><a href="#RunCellAtIndexTool-479"><span class="linenos">479</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-480"><a href="#RunCellAtIndexTool-480"><span class="linenos">480</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-481"><a href="#RunCellAtIndexTool-481"><span class="linenos">481</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RunCellAtIndexTool-482"><a href="#RunCellAtIndexTool-482"><span class="linenos">482</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-483"><a href="#RunCellAtIndexTool-483"><span class="linenos">483</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RunCellAtIndexTool-484"><a href="#RunCellAtIndexTool-484"><span class="linenos">484</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RunCellAtIndexTool-485"><a href="#RunCellAtIndexTool-485"><span class="linenos">485</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-486"><a href="#RunCellAtIndexTool-486"><span class="linenos">486</span></a>                            <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-487"><a href="#RunCellAtIndexTool-487"><span class="linenos">487</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell to run in the active notebook.&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-488"><a href="#RunCellAtIndexTool-488"><span class="linenos">488</span></a>                        <span class="p">}</span>
</span><span id="RunCellAtIndexTool-489"><a href="#RunCellAtIndexTool-489"><span class="linenos">489</span></a>                    <span class="p">},</span>
</span><span id="RunCellAtIndexTool-490"><a href="#RunCellAtIndexTool-490"><span class="linenos">490</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="RunCellAtIndexTool-491"><a href="#RunCellAtIndexTool-491"><span class="linenos">491</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-492"><a href="#RunCellAtIndexTool-492"><span class="linenos">492</span></a>                <span class="p">},</span>
</span><span id="RunCellAtIndexTool-493"><a href="#RunCellAtIndexTool-493"><span class="linenos">493</span></a>            <span class="p">},</span>
</span><span id="RunCellAtIndexTool-494"><a href="#RunCellAtIndexTool-494"><span class="linenos">494</span></a>        <span class="p">}</span>
</span><span id="RunCellAtIndexTool-495"><a href="#RunCellAtIndexTool-495"><span class="linenos">495</span></a>
</span><span id="RunCellAtIndexTool-496"><a href="#RunCellAtIndexTool-496"><span class="linenos">496</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool-497"><a href="#RunCellAtIndexTool-497"><span class="linenos">497</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="RunCellAtIndexTool-498"><a href="#RunCellAtIndexTool-498"><span class="linenos">498</span></a>
</span><span id="RunCellAtIndexTool-499"><a href="#RunCellAtIndexTool-499"><span class="linenos">499</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="RunCellAtIndexTool-500"><a href="#RunCellAtIndexTool-500"><span class="linenos">500</span></a>
</span><span id="RunCellAtIndexTool-501"><a href="#RunCellAtIndexTool-501"><span class="linenos">501</span></a><span class="sd">        Args:</span>
</span><span id="RunCellAtIndexTool-502"><a href="#RunCellAtIndexTool-502"><span class="linenos">502</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="RunCellAtIndexTool-503"><a href="#RunCellAtIndexTool-503"><span class="linenos">503</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="RunCellAtIndexTool-504"><a href="#RunCellAtIndexTool-504"><span class="linenos">504</span></a>
</span><span id="RunCellAtIndexTool-505"><a href="#RunCellAtIndexTool-505"><span class="linenos">505</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool-506"><a href="#RunCellAtIndexTool-506"><span class="linenos">506</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="RunCellAtIndexTool-507"><a href="#RunCellAtIndexTool-507"><span class="linenos">507</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool-508"><a href="#RunCellAtIndexTool-508"><span class="linenos">508</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool-509"><a href="#RunCellAtIndexTool-509"><span class="linenos">509</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="RunCellAtIndexTool-510"><a href="#RunCellAtIndexTool-510"><span class="linenos">510</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="RunCellAtIndexTool-511"><a href="#RunCellAtIndexTool-511"><span class="linenos">511</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-512"><a href="#RunCellAtIndexTool-512"><span class="linenos">512</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-513"><a href="#RunCellAtIndexTool-513"><span class="linenos">513</span></a>            <span class="sa">f</span><span class="s2">&quot;Run cell at index </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> in the active notebook?&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool-514"><a href="#RunCellAtIndexTool-514"><span class="linenos">514</span></a>        <span class="p">)</span>
</span><span id="RunCellAtIndexTool-515"><a href="#RunCellAtIndexTool-515"><span class="linenos">515</span></a>
</span><span id="RunCellAtIndexTool-516"><a href="#RunCellAtIndexTool-516"><span class="linenos">516</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="RunCellAtIndexTool-517"><a href="#RunCellAtIndexTool-517"><span class="linenos">517</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="RunCellAtIndexTool-518"><a href="#RunCellAtIndexTool-518"><span class="linenos">518</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool-519"><a href="#RunCellAtIndexTool-519"><span class="linenos">519</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="RunCellAtIndexTool-520"><a href="#RunCellAtIndexTool-520"><span class="linenos">520</span></a>
</span><span id="RunCellAtIndexTool-521"><a href="#RunCellAtIndexTool-521"><span class="linenos">521</span></a><span class="sd">        Args:</span>
</span><span id="RunCellAtIndexTool-522"><a href="#RunCellAtIndexTool-522"><span class="linenos">522</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="RunCellAtIndexTool-523"><a href="#RunCellAtIndexTool-523"><span class="linenos">523</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="RunCellAtIndexTool-524"><a href="#RunCellAtIndexTool-524"><span class="linenos">524</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="RunCellAtIndexTool-525"><a href="#RunCellAtIndexTool-525"><span class="linenos">525</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="RunCellAtIndexTool-526"><a href="#RunCellAtIndexTool-526"><span class="linenos">526</span></a>
</span><span id="RunCellAtIndexTool-527"><a href="#RunCellAtIndexTool-527"><span class="linenos">527</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool-528"><a href="#RunCellAtIndexTool-528"><span class="linenos">528</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="RunCellAtIndexTool-529"><a href="#RunCellAtIndexTool-529"><span class="linenos">529</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool-530"><a href="#RunCellAtIndexTool-530"><span class="linenos">530</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="RunCellAtIndexTool-531"><a href="#RunCellAtIndexTool-531"><span class="linenos">531</span></a>        <span class="k">if</span> <span class="n">cell_index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool-532"><a href="#RunCellAtIndexTool-532"><span class="linenos">532</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;cell_index must be &gt;= 0&quot;</span><span class="p">)</span>
</span><span id="RunCellAtIndexTool-533"><a href="#RunCellAtIndexTool-533"><span class="linenos">533</span></a>
</span><span id="RunCellAtIndexTool-534"><a href="#RunCellAtIndexTool-534"><span class="linenos">534</span></a>        <span class="c1"># Runs against the ACTIVE notebook (no path needed)</span>
</span><span id="RunCellAtIndexTool-535"><a href="#RunCellAtIndexTool-535"><span class="linenos">535</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:run-cell-at-index&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">})</span>
</span><span id="RunCellAtIndexTool-536"><a href="#RunCellAtIndexTool-536"><span class="linenos">536</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Ran the cell at index: </span><span class="si">{</span><span class="n">cell_index</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Run cell at index tool.</p>
</div>


                            <div id="RunCellAtIndexTool.__init__" class="classattr">
                                        <input id="RunCellAtIndexTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RunCellAtIndexTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="RunCellAtIndexTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCellAtIndexTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCellAtIndexTool.__init__-423"><a href="#RunCellAtIndexTool.__init__-423"><span class="linenos">423</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool.__init__-424"><a href="#RunCellAtIndexTool.__init__-424"><span class="linenos">424</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="RunCellAtIndexTool.__init__-425"><a href="#RunCellAtIndexTool.__init__-425"><span class="linenos">425</span></a>
</span><span id="RunCellAtIndexTool.__init__-426"><a href="#RunCellAtIndexTool.__init__-426"><span class="linenos">426</span></a><span class="sd">        Args:</span>
</span><span id="RunCellAtIndexTool.__init__-427"><a href="#RunCellAtIndexTool.__init__-427"><span class="linenos">427</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="RunCellAtIndexTool.__init__-428"><a href="#RunCellAtIndexTool.__init__-428"><span class="linenos">428</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool.__init__-429"><a href="#RunCellAtIndexTool.__init__-429"><span class="linenos">429</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="RunCellAtIndexTool.__init__-430"><a href="#RunCellAtIndexTool.__init__-430"><span class="linenos">430</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="RunCellAtIndexTool.name" class="classattr">
                                        <input id="RunCellAtIndexTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="RunCellAtIndexTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCellAtIndexTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCellAtIndexTool.name-432"><a href="#RunCellAtIndexTool.name-432"><span class="linenos">432</span></a>    <span class="nd">@property</span>
</span><span id="RunCellAtIndexTool.name-433"><a href="#RunCellAtIndexTool.name-433"><span class="linenos">433</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool.name-434"><a href="#RunCellAtIndexTool.name-434"><span class="linenos">434</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="RunCellAtIndexTool.name-435"><a href="#RunCellAtIndexTool.name-435"><span class="linenos">435</span></a>
</span><span id="RunCellAtIndexTool.name-436"><a href="#RunCellAtIndexTool.name-436"><span class="linenos">436</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool.name-437"><a href="#RunCellAtIndexTool.name-437"><span class="linenos">437</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="RunCellAtIndexTool.name-438"><a href="#RunCellAtIndexTool.name-438"><span class="linenos">438</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool.name-439"><a href="#RunCellAtIndexTool.name-439"><span class="linenos">439</span></a>        <span class="k">return</span> <span class="s2">&quot;run_cell_at_index&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="RunCellAtIndexTool.title" class="classattr">
                                        <input id="RunCellAtIndexTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="RunCellAtIndexTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCellAtIndexTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCellAtIndexTool.title-441"><a href="#RunCellAtIndexTool.title-441"><span class="linenos">441</span></a>    <span class="nd">@property</span>
</span><span id="RunCellAtIndexTool.title-442"><a href="#RunCellAtIndexTool.title-442"><span class="linenos">442</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool.title-443"><a href="#RunCellAtIndexTool.title-443"><span class="linenos">443</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="RunCellAtIndexTool.title-444"><a href="#RunCellAtIndexTool.title-444"><span class="linenos">444</span></a>
</span><span id="RunCellAtIndexTool.title-445"><a href="#RunCellAtIndexTool.title-445"><span class="linenos">445</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool.title-446"><a href="#RunCellAtIndexTool.title-446"><span class="linenos">446</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="RunCellAtIndexTool.title-447"><a href="#RunCellAtIndexTool.title-447"><span class="linenos">447</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool.title-448"><a href="#RunCellAtIndexTool.title-448"><span class="linenos">448</span></a>        <span class="k">return</span> <span class="s2">&quot;Run cell at index in the active notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="RunCellAtIndexTool.tags" class="classattr">
                                        <input id="RunCellAtIndexTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="RunCellAtIndexTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCellAtIndexTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCellAtIndexTool.tags-450"><a href="#RunCellAtIndexTool.tags-450"><span class="linenos">450</span></a>    <span class="nd">@property</span>
</span><span id="RunCellAtIndexTool.tags-451"><a href="#RunCellAtIndexTool.tags-451"><span class="linenos">451</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="RunCellAtIndexTool.tags-452"><a href="#RunCellAtIndexTool.tags-452"><span class="linenos">452</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="RunCellAtIndexTool.tags-453"><a href="#RunCellAtIndexTool.tags-453"><span class="linenos">453</span></a>
</span><span id="RunCellAtIndexTool.tags-454"><a href="#RunCellAtIndexTool.tags-454"><span class="linenos">454</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool.tags-455"><a href="#RunCellAtIndexTool.tags-455"><span class="linenos">455</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="RunCellAtIndexTool.tags-456"><a href="#RunCellAtIndexTool.tags-456"><span class="linenos">456</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool.tags-457"><a href="#RunCellAtIndexTool.tags-457"><span class="linenos">457</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;code cell&quot;</span><span class="p">,</span> <span class="s2">&quot;execution&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="RunCellAtIndexTool.description" class="classattr">
                                        <input id="RunCellAtIndexTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="RunCellAtIndexTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCellAtIndexTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCellAtIndexTool.description-459"><a href="#RunCellAtIndexTool.description-459"><span class="linenos">459</span></a>    <span class="nd">@property</span>
</span><span id="RunCellAtIndexTool.description-460"><a href="#RunCellAtIndexTool.description-460"><span class="linenos">460</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool.description-461"><a href="#RunCellAtIndexTool.description-461"><span class="linenos">461</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="RunCellAtIndexTool.description-462"><a href="#RunCellAtIndexTool.description-462"><span class="linenos">462</span></a>
</span><span id="RunCellAtIndexTool.description-463"><a href="#RunCellAtIndexTool.description-463"><span class="linenos">463</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool.description-464"><a href="#RunCellAtIndexTool.description-464"><span class="linenos">464</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="RunCellAtIndexTool.description-465"><a href="#RunCellAtIndexTool.description-465"><span class="linenos">465</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool.description-466"><a href="#RunCellAtIndexTool.description-466"><span class="linenos">466</span></a>        <span class="k">return</span> <span class="s2">&quot;Execute the cell at the given zero-based index in the ACTIVE notebook.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="RunCellAtIndexTool.schema" class="classattr">
                                        <input id="RunCellAtIndexTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="RunCellAtIndexTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCellAtIndexTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCellAtIndexTool.schema-468"><a href="#RunCellAtIndexTool.schema-468"><span class="linenos">468</span></a>    <span class="nd">@property</span>
</span><span id="RunCellAtIndexTool.schema-469"><a href="#RunCellAtIndexTool.schema-469"><span class="linenos">469</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool.schema-470"><a href="#RunCellAtIndexTool.schema-470"><span class="linenos">470</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the schema for the tool&#39;s function.</span>
</span><span id="RunCellAtIndexTool.schema-471"><a href="#RunCellAtIndexTool.schema-471"><span class="linenos">471</span></a>
</span><span id="RunCellAtIndexTool.schema-472"><a href="#RunCellAtIndexTool.schema-472"><span class="linenos">472</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool.schema-473"><a href="#RunCellAtIndexTool.schema-473"><span class="linenos">473</span></a><span class="sd">            dict: The schema for the tool&#39;s function.</span>
</span><span id="RunCellAtIndexTool.schema-474"><a href="#RunCellAtIndexTool.schema-474"><span class="linenos">474</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool.schema-475"><a href="#RunCellAtIndexTool.schema-475"><span class="linenos">475</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="RunCellAtIndexTool.schema-476"><a href="#RunCellAtIndexTool.schema-476"><span class="linenos">476</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.schema-477"><a href="#RunCellAtIndexTool.schema-477"><span class="linenos">477</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RunCellAtIndexTool.schema-478"><a href="#RunCellAtIndexTool.schema-478"><span class="linenos">478</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.schema-479"><a href="#RunCellAtIndexTool.schema-479"><span class="linenos">479</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.schema-480"><a href="#RunCellAtIndexTool.schema-480"><span class="linenos">480</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.schema-481"><a href="#RunCellAtIndexTool.schema-481"><span class="linenos">481</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RunCellAtIndexTool.schema-482"><a href="#RunCellAtIndexTool.schema-482"><span class="linenos">482</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.schema-483"><a href="#RunCellAtIndexTool.schema-483"><span class="linenos">483</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RunCellAtIndexTool.schema-484"><a href="#RunCellAtIndexTool.schema-484"><span class="linenos">484</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RunCellAtIndexTool.schema-485"><a href="#RunCellAtIndexTool.schema-485"><span class="linenos">485</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.schema-486"><a href="#RunCellAtIndexTool.schema-486"><span class="linenos">486</span></a>                            <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.schema-487"><a href="#RunCellAtIndexTool.schema-487"><span class="linenos">487</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell to run in the active notebook.&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.schema-488"><a href="#RunCellAtIndexTool.schema-488"><span class="linenos">488</span></a>                        <span class="p">}</span>
</span><span id="RunCellAtIndexTool.schema-489"><a href="#RunCellAtIndexTool.schema-489"><span class="linenos">489</span></a>                    <span class="p">},</span>
</span><span id="RunCellAtIndexTool.schema-490"><a href="#RunCellAtIndexTool.schema-490"><span class="linenos">490</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="RunCellAtIndexTool.schema-491"><a href="#RunCellAtIndexTool.schema-491"><span class="linenos">491</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.schema-492"><a href="#RunCellAtIndexTool.schema-492"><span class="linenos">492</span></a>                <span class="p">},</span>
</span><span id="RunCellAtIndexTool.schema-493"><a href="#RunCellAtIndexTool.schema-493"><span class="linenos">493</span></a>            <span class="p">},</span>
</span><span id="RunCellAtIndexTool.schema-494"><a href="#RunCellAtIndexTool.schema-494"><span class="linenos">494</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Get the schema for the tool's function.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool's function.</p>
</blockquote>
</div>


                            </div>
                            <div id="RunCellAtIndexTool.pre_invoke" class="classattr">
                                        <input id="RunCellAtIndexTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="RunCellAtIndexTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCellAtIndexTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCellAtIndexTool.pre_invoke-496"><a href="#RunCellAtIndexTool.pre_invoke-496"><span class="linenos">496</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool.pre_invoke-497"><a href="#RunCellAtIndexTool.pre_invoke-497"><span class="linenos">497</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="RunCellAtIndexTool.pre_invoke-498"><a href="#RunCellAtIndexTool.pre_invoke-498"><span class="linenos">498</span></a>
</span><span id="RunCellAtIndexTool.pre_invoke-499"><a href="#RunCellAtIndexTool.pre_invoke-499"><span class="linenos">499</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="RunCellAtIndexTool.pre_invoke-500"><a href="#RunCellAtIndexTool.pre_invoke-500"><span class="linenos">500</span></a>
</span><span id="RunCellAtIndexTool.pre_invoke-501"><a href="#RunCellAtIndexTool.pre_invoke-501"><span class="linenos">501</span></a><span class="sd">        Args:</span>
</span><span id="RunCellAtIndexTool.pre_invoke-502"><a href="#RunCellAtIndexTool.pre_invoke-502"><span class="linenos">502</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="RunCellAtIndexTool.pre_invoke-503"><a href="#RunCellAtIndexTool.pre_invoke-503"><span class="linenos">503</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="RunCellAtIndexTool.pre_invoke-504"><a href="#RunCellAtIndexTool.pre_invoke-504"><span class="linenos">504</span></a>
</span><span id="RunCellAtIndexTool.pre_invoke-505"><a href="#RunCellAtIndexTool.pre_invoke-505"><span class="linenos">505</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool.pre_invoke-506"><a href="#RunCellAtIndexTool.pre_invoke-506"><span class="linenos">506</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="RunCellAtIndexTool.pre_invoke-507"><a href="#RunCellAtIndexTool.pre_invoke-507"><span class="linenos">507</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool.pre_invoke-508"><a href="#RunCellAtIndexTool.pre_invoke-508"><span class="linenos">508</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool.pre_invoke-509"><a href="#RunCellAtIndexTool.pre_invoke-509"><span class="linenos">509</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="RunCellAtIndexTool.pre_invoke-510"><a href="#RunCellAtIndexTool.pre_invoke-510"><span class="linenos">510</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="RunCellAtIndexTool.pre_invoke-511"><a href="#RunCellAtIndexTool.pre_invoke-511"><span class="linenos">511</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.pre_invoke-512"><a href="#RunCellAtIndexTool.pre_invoke-512"><span class="linenos">512</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.pre_invoke-513"><a href="#RunCellAtIndexTool.pre_invoke-513"><span class="linenos">513</span></a>            <span class="sa">f</span><span class="s2">&quot;Run cell at index </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> in the active notebook?&quot;</span><span class="p">,</span>
</span><span id="RunCellAtIndexTool.pre_invoke-514"><a href="#RunCellAtIndexTool.pre_invoke-514"><span class="linenos">514</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="RunCellAtIndexTool.handle_tool_call" class="classattr">
                                        <input id="RunCellAtIndexTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="RunCellAtIndexTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCellAtIndexTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCellAtIndexTool.handle_tool_call-516"><a href="#RunCellAtIndexTool.handle_tool_call-516"><span class="linenos">516</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-517"><a href="#RunCellAtIndexTool.handle_tool_call-517"><span class="linenos">517</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-518"><a href="#RunCellAtIndexTool.handle_tool_call-518"><span class="linenos">518</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-519"><a href="#RunCellAtIndexTool.handle_tool_call-519"><span class="linenos">519</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-520"><a href="#RunCellAtIndexTool.handle_tool_call-520"><span class="linenos">520</span></a>
</span><span id="RunCellAtIndexTool.handle_tool_call-521"><a href="#RunCellAtIndexTool.handle_tool_call-521"><span class="linenos">521</span></a><span class="sd">        Args:</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-522"><a href="#RunCellAtIndexTool.handle_tool_call-522"><span class="linenos">522</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-523"><a href="#RunCellAtIndexTool.handle_tool_call-523"><span class="linenos">523</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-524"><a href="#RunCellAtIndexTool.handle_tool_call-524"><span class="linenos">524</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-525"><a href="#RunCellAtIndexTool.handle_tool_call-525"><span class="linenos">525</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-526"><a href="#RunCellAtIndexTool.handle_tool_call-526"><span class="linenos">526</span></a>
</span><span id="RunCellAtIndexTool.handle_tool_call-527"><a href="#RunCellAtIndexTool.handle_tool_call-527"><span class="linenos">527</span></a><span class="sd">        Return:</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-528"><a href="#RunCellAtIndexTool.handle_tool_call-528"><span class="linenos">528</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-529"><a href="#RunCellAtIndexTool.handle_tool_call-529"><span class="linenos">529</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-530"><a href="#RunCellAtIndexTool.handle_tool_call-530"><span class="linenos">530</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-531"><a href="#RunCellAtIndexTool.handle_tool_call-531"><span class="linenos">531</span></a>        <span class="k">if</span> <span class="n">cell_index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-532"><a href="#RunCellAtIndexTool.handle_tool_call-532"><span class="linenos">532</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;cell_index must be &gt;= 0&quot;</span><span class="p">)</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-533"><a href="#RunCellAtIndexTool.handle_tool_call-533"><span class="linenos">533</span></a>
</span><span id="RunCellAtIndexTool.handle_tool_call-534"><a href="#RunCellAtIndexTool.handle_tool_call-534"><span class="linenos">534</span></a>        <span class="c1"># Runs against the ACTIVE notebook (no path needed)</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-535"><a href="#RunCellAtIndexTool.handle_tool_call-535"><span class="linenos">535</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:run-cell-at-index&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">})</span>
</span><span id="RunCellAtIndexTool.handle_tool_call-536"><a href="#RunCellAtIndexTool.handle_tool_call-536"><span class="linenos">536</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Ran the cell at index: </span><span class="si">{</span><span class="n">cell_index</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="RenameNotebookTool">
                            <input id="RenameNotebookTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RenameNotebookTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="RenameNotebookTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RenameNotebookTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RenameNotebookTool-539"><a href="#RenameNotebookTool-539"><span class="linenos">539</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RenameNotebookTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="RenameNotebookTool-540"><a href="#RenameNotebookTool-540"><span class="linenos">540</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Rename the active notebook tool.&quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool-541"><a href="#RenameNotebookTool-541"><span class="linenos">541</span></a>
</span><span id="RenameNotebookTool-542"><a href="#RenameNotebookTool-542"><span class="linenos">542</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RenameNotebookTool-543"><a href="#RenameNotebookTool-543"><span class="linenos">543</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="RenameNotebookTool-544"><a href="#RenameNotebookTool-544"><span class="linenos">544</span></a>
</span><span id="RenameNotebookTool-545"><a href="#RenameNotebookTool-545"><span class="linenos">545</span></a><span class="sd">        Args:</span>
</span><span id="RenameNotebookTool-546"><a href="#RenameNotebookTool-546"><span class="linenos">546</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="RenameNotebookTool-547"><a href="#RenameNotebookTool-547"><span class="linenos">547</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool-548"><a href="#RenameNotebookTool-548"><span class="linenos">548</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="RenameNotebookTool-549"><a href="#RenameNotebookTool-549"><span class="linenos">549</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="RenameNotebookTool-550"><a href="#RenameNotebookTool-550"><span class="linenos">550</span></a>
</span><span id="RenameNotebookTool-551"><a href="#RenameNotebookTool-551"><span class="linenos">551</span></a>    <span class="nd">@property</span>
</span><span id="RenameNotebookTool-552"><a href="#RenameNotebookTool-552"><span class="linenos">552</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RenameNotebookTool-553"><a href="#RenameNotebookTool-553"><span class="linenos">553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="RenameNotebookTool-554"><a href="#RenameNotebookTool-554"><span class="linenos">554</span></a>
</span><span id="RenameNotebookTool-555"><a href="#RenameNotebookTool-555"><span class="linenos">555</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool-556"><a href="#RenameNotebookTool-556"><span class="linenos">556</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="RenameNotebookTool-557"><a href="#RenameNotebookTool-557"><span class="linenos">557</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool-558"><a href="#RenameNotebookTool-558"><span class="linenos">558</span></a>        <span class="k">return</span> <span class="s2">&quot;rename_notebook&quot;</span>
</span><span id="RenameNotebookTool-559"><a href="#RenameNotebookTool-559"><span class="linenos">559</span></a>
</span><span id="RenameNotebookTool-560"><a href="#RenameNotebookTool-560"><span class="linenos">560</span></a>    <span class="nd">@property</span>
</span><span id="RenameNotebookTool-561"><a href="#RenameNotebookTool-561"><span class="linenos">561</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RenameNotebookTool-562"><a href="#RenameNotebookTool-562"><span class="linenos">562</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="RenameNotebookTool-563"><a href="#RenameNotebookTool-563"><span class="linenos">563</span></a>
</span><span id="RenameNotebookTool-564"><a href="#RenameNotebookTool-564"><span class="linenos">564</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool-565"><a href="#RenameNotebookTool-565"><span class="linenos">565</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="RenameNotebookTool-566"><a href="#RenameNotebookTool-566"><span class="linenos">566</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool-567"><a href="#RenameNotebookTool-567"><span class="linenos">567</span></a>        <span class="k">return</span> <span class="s2">&quot;Rename the active notebook&quot;</span>
</span><span id="RenameNotebookTool-568"><a href="#RenameNotebookTool-568"><span class="linenos">568</span></a>
</span><span id="RenameNotebookTool-569"><a href="#RenameNotebookTool-569"><span class="linenos">569</span></a>    <span class="nd">@property</span>
</span><span id="RenameNotebookTool-570"><a href="#RenameNotebookTool-570"><span class="linenos">570</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="RenameNotebookTool-571"><a href="#RenameNotebookTool-571"><span class="linenos">571</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="RenameNotebookTool-572"><a href="#RenameNotebookTool-572"><span class="linenos">572</span></a>
</span><span id="RenameNotebookTool-573"><a href="#RenameNotebookTool-573"><span class="linenos">573</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool-574"><a href="#RenameNotebookTool-574"><span class="linenos">574</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="RenameNotebookTool-575"><a href="#RenameNotebookTool-575"><span class="linenos">575</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool-576"><a href="#RenameNotebookTool-576"><span class="linenos">576</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;renaming&quot;</span><span class="p">]</span>
</span><span id="RenameNotebookTool-577"><a href="#RenameNotebookTool-577"><span class="linenos">577</span></a>
</span><span id="RenameNotebookTool-578"><a href="#RenameNotebookTool-578"><span class="linenos">578</span></a>    <span class="nd">@property</span>
</span><span id="RenameNotebookTool-579"><a href="#RenameNotebookTool-579"><span class="linenos">579</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RenameNotebookTool-580"><a href="#RenameNotebookTool-580"><span class="linenos">580</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="RenameNotebookTool-581"><a href="#RenameNotebookTool-581"><span class="linenos">581</span></a>
</span><span id="RenameNotebookTool-582"><a href="#RenameNotebookTool-582"><span class="linenos">582</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool-583"><a href="#RenameNotebookTool-583"><span class="linenos">583</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="RenameNotebookTool-584"><a href="#RenameNotebookTool-584"><span class="linenos">584</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool-585"><a href="#RenameNotebookTool-585"><span class="linenos">585</span></a>        <span class="k">return</span> <span class="s2">&quot;Renames the active notebook to the provided name.&quot;</span>
</span><span id="RenameNotebookTool-586"><a href="#RenameNotebookTool-586"><span class="linenos">586</span></a>
</span><span id="RenameNotebookTool-587"><a href="#RenameNotebookTool-587"><span class="linenos">587</span></a>    <span class="nd">@property</span>
</span><span id="RenameNotebookTool-588"><a href="#RenameNotebookTool-588"><span class="linenos">588</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="RenameNotebookTool-589"><a href="#RenameNotebookTool-589"><span class="linenos">589</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="RenameNotebookTool-590"><a href="#RenameNotebookTool-590"><span class="linenos">590</span></a>
</span><span id="RenameNotebookTool-591"><a href="#RenameNotebookTool-591"><span class="linenos">591</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool-592"><a href="#RenameNotebookTool-592"><span class="linenos">592</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="RenameNotebookTool-593"><a href="#RenameNotebookTool-593"><span class="linenos">593</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool-594"><a href="#RenameNotebookTool-594"><span class="linenos">594</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="RenameNotebookTool-595"><a href="#RenameNotebookTool-595"><span class="linenos">595</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool-596"><a href="#RenameNotebookTool-596"><span class="linenos">596</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RenameNotebookTool-597"><a href="#RenameNotebookTool-597"><span class="linenos">597</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="RenameNotebookTool-598"><a href="#RenameNotebookTool-598"><span class="linenos">598</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="RenameNotebookTool-599"><a href="#RenameNotebookTool-599"><span class="linenos">599</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="RenameNotebookTool-600"><a href="#RenameNotebookTool-600"><span class="linenos">600</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RenameNotebookTool-601"><a href="#RenameNotebookTool-601"><span class="linenos">601</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool-602"><a href="#RenameNotebookTool-602"><span class="linenos">602</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RenameNotebookTool-603"><a href="#RenameNotebookTool-603"><span class="linenos">603</span></a>                        <span class="s2">&quot;new_name&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RenameNotebookTool-604"><a href="#RenameNotebookTool-604"><span class="linenos">604</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool-605"><a href="#RenameNotebookTool-605"><span class="linenos">605</span></a>                            <span class="s2">&quot;minLength&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="RenameNotebookTool-606"><a href="#RenameNotebookTool-606"><span class="linenos">606</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;New filename for the notebook (e.g., &#39;analysis.ipynb&#39;).&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool-607"><a href="#RenameNotebookTool-607"><span class="linenos">607</span></a>                        <span class="p">}</span>
</span><span id="RenameNotebookTool-608"><a href="#RenameNotebookTool-608"><span class="linenos">608</span></a>                    <span class="p">},</span>
</span><span id="RenameNotebookTool-609"><a href="#RenameNotebookTool-609"><span class="linenos">609</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;new_name&quot;</span><span class="p">],</span>
</span><span id="RenameNotebookTool-610"><a href="#RenameNotebookTool-610"><span class="linenos">610</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="RenameNotebookTool-611"><a href="#RenameNotebookTool-611"><span class="linenos">611</span></a>                <span class="p">},</span>
</span><span id="RenameNotebookTool-612"><a href="#RenameNotebookTool-612"><span class="linenos">612</span></a>            <span class="p">},</span>
</span><span id="RenameNotebookTool-613"><a href="#RenameNotebookTool-613"><span class="linenos">613</span></a>        <span class="p">}</span>
</span><span id="RenameNotebookTool-614"><a href="#RenameNotebookTool-614"><span class="linenos">614</span></a>
</span><span id="RenameNotebookTool-615"><a href="#RenameNotebookTool-615"><span class="linenos">615</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="RenameNotebookTool-616"><a href="#RenameNotebookTool-616"><span class="linenos">616</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="RenameNotebookTool-617"><a href="#RenameNotebookTool-617"><span class="linenos">617</span></a>
</span><span id="RenameNotebookTool-618"><a href="#RenameNotebookTool-618"><span class="linenos">618</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="RenameNotebookTool-619"><a href="#RenameNotebookTool-619"><span class="linenos">619</span></a>
</span><span id="RenameNotebookTool-620"><a href="#RenameNotebookTool-620"><span class="linenos">620</span></a><span class="sd">        Args:</span>
</span><span id="RenameNotebookTool-621"><a href="#RenameNotebookTool-621"><span class="linenos">621</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="RenameNotebookTool-622"><a href="#RenameNotebookTool-622"><span class="linenos">622</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="RenameNotebookTool-623"><a href="#RenameNotebookTool-623"><span class="linenos">623</span></a>
</span><span id="RenameNotebookTool-624"><a href="#RenameNotebookTool-624"><span class="linenos">624</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool-625"><a href="#RenameNotebookTool-625"><span class="linenos">625</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="RenameNotebookTool-626"><a href="#RenameNotebookTool-626"><span class="linenos">626</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool-627"><a href="#RenameNotebookTool-627"><span class="linenos">627</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="RenameNotebookTool-628"><a href="#RenameNotebookTool-628"><span class="linenos">628</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="RenameNotebookTool-629"><a href="#RenameNotebookTool-629"><span class="linenos">629</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="RenameNotebookTool-630"><a href="#RenameNotebookTool-630"><span class="linenos">630</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool-631"><a href="#RenameNotebookTool-631"><span class="linenos">631</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool-632"><a href="#RenameNotebookTool-632"><span class="linenos">632</span></a>            <span class="sa">f</span><span class="s2">&quot;Rename the active notebook to &#39;</span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;new_name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;?&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool-633"><a href="#RenameNotebookTool-633"><span class="linenos">633</span></a>        <span class="p">)</span>
</span><span id="RenameNotebookTool-634"><a href="#RenameNotebookTool-634"><span class="linenos">634</span></a>
</span><span id="RenameNotebookTool-635"><a href="#RenameNotebookTool-635"><span class="linenos">635</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="RenameNotebookTool-636"><a href="#RenameNotebookTool-636"><span class="linenos">636</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="RenameNotebookTool-637"><a href="#RenameNotebookTool-637"><span class="linenos">637</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RenameNotebookTool-638"><a href="#RenameNotebookTool-638"><span class="linenos">638</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="RenameNotebookTool-639"><a href="#RenameNotebookTool-639"><span class="linenos">639</span></a>
</span><span id="RenameNotebookTool-640"><a href="#RenameNotebookTool-640"><span class="linenos">640</span></a><span class="sd">        Args:</span>
</span><span id="RenameNotebookTool-641"><a href="#RenameNotebookTool-641"><span class="linenos">641</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="RenameNotebookTool-642"><a href="#RenameNotebookTool-642"><span class="linenos">642</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="RenameNotebookTool-643"><a href="#RenameNotebookTool-643"><span class="linenos">643</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="RenameNotebookTool-644"><a href="#RenameNotebookTool-644"><span class="linenos">644</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="RenameNotebookTool-645"><a href="#RenameNotebookTool-645"><span class="linenos">645</span></a>
</span><span id="RenameNotebookTool-646"><a href="#RenameNotebookTool-646"><span class="linenos">646</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool-647"><a href="#RenameNotebookTool-647"><span class="linenos">647</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="RenameNotebookTool-648"><a href="#RenameNotebookTool-648"><span class="linenos">648</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool-649"><a href="#RenameNotebookTool-649"><span class="linenos">649</span></a>        <span class="n">new_name</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;new_name&quot;</span><span class="p">]</span>
</span><span id="RenameNotebookTool-650"><a href="#RenameNotebookTool-650"><span class="linenos">650</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:rename-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;newName&quot;</span><span class="p">:</span> <span class="n">new_name</span><span class="p">})</span>
</span><span id="RenameNotebookTool-651"><a href="#RenameNotebookTool-651"><span class="linenos">651</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Successfully renamed notebook to &#39;</span><span class="si">{</span><span class="n">new_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Rename the active notebook tool.</p>
</div>


                            <div id="RenameNotebookTool.__init__" class="classattr">
                                        <input id="RenameNotebookTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RenameNotebookTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="RenameNotebookTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RenameNotebookTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RenameNotebookTool.__init__-542"><a href="#RenameNotebookTool.__init__-542"><span class="linenos">542</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="RenameNotebookTool.__init__-543"><a href="#RenameNotebookTool.__init__-543"><span class="linenos">543</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="RenameNotebookTool.__init__-544"><a href="#RenameNotebookTool.__init__-544"><span class="linenos">544</span></a>
</span><span id="RenameNotebookTool.__init__-545"><a href="#RenameNotebookTool.__init__-545"><span class="linenos">545</span></a><span class="sd">        Args:</span>
</span><span id="RenameNotebookTool.__init__-546"><a href="#RenameNotebookTool.__init__-546"><span class="linenos">546</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="RenameNotebookTool.__init__-547"><a href="#RenameNotebookTool.__init__-547"><span class="linenos">547</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool.__init__-548"><a href="#RenameNotebookTool.__init__-548"><span class="linenos">548</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="RenameNotebookTool.__init__-549"><a href="#RenameNotebookTool.__init__-549"><span class="linenos">549</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="RenameNotebookTool.name" class="classattr">
                                        <input id="RenameNotebookTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="RenameNotebookTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RenameNotebookTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RenameNotebookTool.name-551"><a href="#RenameNotebookTool.name-551"><span class="linenos">551</span></a>    <span class="nd">@property</span>
</span><span id="RenameNotebookTool.name-552"><a href="#RenameNotebookTool.name-552"><span class="linenos">552</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RenameNotebookTool.name-553"><a href="#RenameNotebookTool.name-553"><span class="linenos">553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="RenameNotebookTool.name-554"><a href="#RenameNotebookTool.name-554"><span class="linenos">554</span></a>
</span><span id="RenameNotebookTool.name-555"><a href="#RenameNotebookTool.name-555"><span class="linenos">555</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool.name-556"><a href="#RenameNotebookTool.name-556"><span class="linenos">556</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="RenameNotebookTool.name-557"><a href="#RenameNotebookTool.name-557"><span class="linenos">557</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool.name-558"><a href="#RenameNotebookTool.name-558"><span class="linenos">558</span></a>        <span class="k">return</span> <span class="s2">&quot;rename_notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="RenameNotebookTool.title" class="classattr">
                                        <input id="RenameNotebookTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="RenameNotebookTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RenameNotebookTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RenameNotebookTool.title-560"><a href="#RenameNotebookTool.title-560"><span class="linenos">560</span></a>    <span class="nd">@property</span>
</span><span id="RenameNotebookTool.title-561"><a href="#RenameNotebookTool.title-561"><span class="linenos">561</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RenameNotebookTool.title-562"><a href="#RenameNotebookTool.title-562"><span class="linenos">562</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="RenameNotebookTool.title-563"><a href="#RenameNotebookTool.title-563"><span class="linenos">563</span></a>
</span><span id="RenameNotebookTool.title-564"><a href="#RenameNotebookTool.title-564"><span class="linenos">564</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool.title-565"><a href="#RenameNotebookTool.title-565"><span class="linenos">565</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="RenameNotebookTool.title-566"><a href="#RenameNotebookTool.title-566"><span class="linenos">566</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool.title-567"><a href="#RenameNotebookTool.title-567"><span class="linenos">567</span></a>        <span class="k">return</span> <span class="s2">&quot;Rename the active notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="RenameNotebookTool.tags" class="classattr">
                                        <input id="RenameNotebookTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="RenameNotebookTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RenameNotebookTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RenameNotebookTool.tags-569"><a href="#RenameNotebookTool.tags-569"><span class="linenos">569</span></a>    <span class="nd">@property</span>
</span><span id="RenameNotebookTool.tags-570"><a href="#RenameNotebookTool.tags-570"><span class="linenos">570</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="RenameNotebookTool.tags-571"><a href="#RenameNotebookTool.tags-571"><span class="linenos">571</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="RenameNotebookTool.tags-572"><a href="#RenameNotebookTool.tags-572"><span class="linenos">572</span></a>
</span><span id="RenameNotebookTool.tags-573"><a href="#RenameNotebookTool.tags-573"><span class="linenos">573</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool.tags-574"><a href="#RenameNotebookTool.tags-574"><span class="linenos">574</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="RenameNotebookTool.tags-575"><a href="#RenameNotebookTool.tags-575"><span class="linenos">575</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool.tags-576"><a href="#RenameNotebookTool.tags-576"><span class="linenos">576</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;renaming&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="RenameNotebookTool.description" class="classattr">
                                        <input id="RenameNotebookTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="RenameNotebookTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RenameNotebookTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RenameNotebookTool.description-578"><a href="#RenameNotebookTool.description-578"><span class="linenos">578</span></a>    <span class="nd">@property</span>
</span><span id="RenameNotebookTool.description-579"><a href="#RenameNotebookTool.description-579"><span class="linenos">579</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RenameNotebookTool.description-580"><a href="#RenameNotebookTool.description-580"><span class="linenos">580</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="RenameNotebookTool.description-581"><a href="#RenameNotebookTool.description-581"><span class="linenos">581</span></a>
</span><span id="RenameNotebookTool.description-582"><a href="#RenameNotebookTool.description-582"><span class="linenos">582</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool.description-583"><a href="#RenameNotebookTool.description-583"><span class="linenos">583</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="RenameNotebookTool.description-584"><a href="#RenameNotebookTool.description-584"><span class="linenos">584</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool.description-585"><a href="#RenameNotebookTool.description-585"><span class="linenos">585</span></a>        <span class="k">return</span> <span class="s2">&quot;Renames the active notebook to the provided name.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="RenameNotebookTool.schema" class="classattr">
                                        <input id="RenameNotebookTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="RenameNotebookTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RenameNotebookTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RenameNotebookTool.schema-587"><a href="#RenameNotebookTool.schema-587"><span class="linenos">587</span></a>    <span class="nd">@property</span>
</span><span id="RenameNotebookTool.schema-588"><a href="#RenameNotebookTool.schema-588"><span class="linenos">588</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="RenameNotebookTool.schema-589"><a href="#RenameNotebookTool.schema-589"><span class="linenos">589</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="RenameNotebookTool.schema-590"><a href="#RenameNotebookTool.schema-590"><span class="linenos">590</span></a>
</span><span id="RenameNotebookTool.schema-591"><a href="#RenameNotebookTool.schema-591"><span class="linenos">591</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool.schema-592"><a href="#RenameNotebookTool.schema-592"><span class="linenos">592</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="RenameNotebookTool.schema-593"><a href="#RenameNotebookTool.schema-593"><span class="linenos">593</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool.schema-594"><a href="#RenameNotebookTool.schema-594"><span class="linenos">594</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="RenameNotebookTool.schema-595"><a href="#RenameNotebookTool.schema-595"><span class="linenos">595</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool.schema-596"><a href="#RenameNotebookTool.schema-596"><span class="linenos">596</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RenameNotebookTool.schema-597"><a href="#RenameNotebookTool.schema-597"><span class="linenos">597</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="RenameNotebookTool.schema-598"><a href="#RenameNotebookTool.schema-598"><span class="linenos">598</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="RenameNotebookTool.schema-599"><a href="#RenameNotebookTool.schema-599"><span class="linenos">599</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="RenameNotebookTool.schema-600"><a href="#RenameNotebookTool.schema-600"><span class="linenos">600</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RenameNotebookTool.schema-601"><a href="#RenameNotebookTool.schema-601"><span class="linenos">601</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool.schema-602"><a href="#RenameNotebookTool.schema-602"><span class="linenos">602</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RenameNotebookTool.schema-603"><a href="#RenameNotebookTool.schema-603"><span class="linenos">603</span></a>                        <span class="s2">&quot;new_name&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="RenameNotebookTool.schema-604"><a href="#RenameNotebookTool.schema-604"><span class="linenos">604</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool.schema-605"><a href="#RenameNotebookTool.schema-605"><span class="linenos">605</span></a>                            <span class="s2">&quot;minLength&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span id="RenameNotebookTool.schema-606"><a href="#RenameNotebookTool.schema-606"><span class="linenos">606</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;New filename for the notebook (e.g., &#39;analysis.ipynb&#39;).&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool.schema-607"><a href="#RenameNotebookTool.schema-607"><span class="linenos">607</span></a>                        <span class="p">}</span>
</span><span id="RenameNotebookTool.schema-608"><a href="#RenameNotebookTool.schema-608"><span class="linenos">608</span></a>                    <span class="p">},</span>
</span><span id="RenameNotebookTool.schema-609"><a href="#RenameNotebookTool.schema-609"><span class="linenos">609</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;new_name&quot;</span><span class="p">],</span>
</span><span id="RenameNotebookTool.schema-610"><a href="#RenameNotebookTool.schema-610"><span class="linenos">610</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="RenameNotebookTool.schema-611"><a href="#RenameNotebookTool.schema-611"><span class="linenos">611</span></a>                <span class="p">},</span>
</span><span id="RenameNotebookTool.schema-612"><a href="#RenameNotebookTool.schema-612"><span class="linenos">612</span></a>            <span class="p">},</span>
</span><span id="RenameNotebookTool.schema-613"><a href="#RenameNotebookTool.schema-613"><span class="linenos">613</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Schema for the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="RenameNotebookTool.pre_invoke" class="classattr">
                                        <input id="RenameNotebookTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="RenameNotebookTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RenameNotebookTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RenameNotebookTool.pre_invoke-615"><a href="#RenameNotebookTool.pre_invoke-615"><span class="linenos">615</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="RenameNotebookTool.pre_invoke-616"><a href="#RenameNotebookTool.pre_invoke-616"><span class="linenos">616</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="RenameNotebookTool.pre_invoke-617"><a href="#RenameNotebookTool.pre_invoke-617"><span class="linenos">617</span></a>
</span><span id="RenameNotebookTool.pre_invoke-618"><a href="#RenameNotebookTool.pre_invoke-618"><span class="linenos">618</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="RenameNotebookTool.pre_invoke-619"><a href="#RenameNotebookTool.pre_invoke-619"><span class="linenos">619</span></a>
</span><span id="RenameNotebookTool.pre_invoke-620"><a href="#RenameNotebookTool.pre_invoke-620"><span class="linenos">620</span></a><span class="sd">        Args:</span>
</span><span id="RenameNotebookTool.pre_invoke-621"><a href="#RenameNotebookTool.pre_invoke-621"><span class="linenos">621</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="RenameNotebookTool.pre_invoke-622"><a href="#RenameNotebookTool.pre_invoke-622"><span class="linenos">622</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="RenameNotebookTool.pre_invoke-623"><a href="#RenameNotebookTool.pre_invoke-623"><span class="linenos">623</span></a>
</span><span id="RenameNotebookTool.pre_invoke-624"><a href="#RenameNotebookTool.pre_invoke-624"><span class="linenos">624</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool.pre_invoke-625"><a href="#RenameNotebookTool.pre_invoke-625"><span class="linenos">625</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="RenameNotebookTool.pre_invoke-626"><a href="#RenameNotebookTool.pre_invoke-626"><span class="linenos">626</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool.pre_invoke-627"><a href="#RenameNotebookTool.pre_invoke-627"><span class="linenos">627</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="RenameNotebookTool.pre_invoke-628"><a href="#RenameNotebookTool.pre_invoke-628"><span class="linenos">628</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="RenameNotebookTool.pre_invoke-629"><a href="#RenameNotebookTool.pre_invoke-629"><span class="linenos">629</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="RenameNotebookTool.pre_invoke-630"><a href="#RenameNotebookTool.pre_invoke-630"><span class="linenos">630</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool.pre_invoke-631"><a href="#RenameNotebookTool.pre_invoke-631"><span class="linenos">631</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool.pre_invoke-632"><a href="#RenameNotebookTool.pre_invoke-632"><span class="linenos">632</span></a>            <span class="sa">f</span><span class="s2">&quot;Rename the active notebook to &#39;</span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;new_name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;?&quot;</span><span class="p">,</span>
</span><span id="RenameNotebookTool.pre_invoke-633"><a href="#RenameNotebookTool.pre_invoke-633"><span class="linenos">633</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="RenameNotebookTool.handle_tool_call" class="classattr">
                                        <input id="RenameNotebookTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="RenameNotebookTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RenameNotebookTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RenameNotebookTool.handle_tool_call-635"><a href="#RenameNotebookTool.handle_tool_call-635"><span class="linenos">635</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="RenameNotebookTool.handle_tool_call-636"><a href="#RenameNotebookTool.handle_tool_call-636"><span class="linenos">636</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="RenameNotebookTool.handle_tool_call-637"><a href="#RenameNotebookTool.handle_tool_call-637"><span class="linenos">637</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="RenameNotebookTool.handle_tool_call-638"><a href="#RenameNotebookTool.handle_tool_call-638"><span class="linenos">638</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="RenameNotebookTool.handle_tool_call-639"><a href="#RenameNotebookTool.handle_tool_call-639"><span class="linenos">639</span></a>
</span><span id="RenameNotebookTool.handle_tool_call-640"><a href="#RenameNotebookTool.handle_tool_call-640"><span class="linenos">640</span></a><span class="sd">        Args:</span>
</span><span id="RenameNotebookTool.handle_tool_call-641"><a href="#RenameNotebookTool.handle_tool_call-641"><span class="linenos">641</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="RenameNotebookTool.handle_tool_call-642"><a href="#RenameNotebookTool.handle_tool_call-642"><span class="linenos">642</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="RenameNotebookTool.handle_tool_call-643"><a href="#RenameNotebookTool.handle_tool_call-643"><span class="linenos">643</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="RenameNotebookTool.handle_tool_call-644"><a href="#RenameNotebookTool.handle_tool_call-644"><span class="linenos">644</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="RenameNotebookTool.handle_tool_call-645"><a href="#RenameNotebookTool.handle_tool_call-645"><span class="linenos">645</span></a>
</span><span id="RenameNotebookTool.handle_tool_call-646"><a href="#RenameNotebookTool.handle_tool_call-646"><span class="linenos">646</span></a><span class="sd">        Return:</span>
</span><span id="RenameNotebookTool.handle_tool_call-647"><a href="#RenameNotebookTool.handle_tool_call-647"><span class="linenos">647</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="RenameNotebookTool.handle_tool_call-648"><a href="#RenameNotebookTool.handle_tool_call-648"><span class="linenos">648</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RenameNotebookTool.handle_tool_call-649"><a href="#RenameNotebookTool.handle_tool_call-649"><span class="linenos">649</span></a>        <span class="n">new_name</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;new_name&quot;</span><span class="p">]</span>
</span><span id="RenameNotebookTool.handle_tool_call-650"><a href="#RenameNotebookTool.handle_tool_call-650"><span class="linenos">650</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:rename-notebook&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;newName&quot;</span><span class="p">:</span> <span class="n">new_name</span><span class="p">})</span>
</span><span id="RenameNotebookTool.handle_tool_call-651"><a href="#RenameNotebookTool.handle_tool_call-651"><span class="linenos">651</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Successfully renamed notebook to &#39;</span><span class="si">{</span><span class="n">new_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="GetNumberOfCellsTool">
                            <input id="GetNumberOfCellsTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GetNumberOfCellsTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="GetNumberOfCellsTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetNumberOfCellsTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetNumberOfCellsTool-654"><a href="#GetNumberOfCellsTool-654"><span class="linenos">654</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GetNumberOfCellsTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="GetNumberOfCellsTool-655"><a href="#GetNumberOfCellsTool-655"><span class="linenos">655</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get number of cells tool.&quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool-656"><a href="#GetNumberOfCellsTool-656"><span class="linenos">656</span></a>
</span><span id="GetNumberOfCellsTool-657"><a href="#GetNumberOfCellsTool-657"><span class="linenos">657</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool-658"><a href="#GetNumberOfCellsTool-658"><span class="linenos">658</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="GetNumberOfCellsTool-659"><a href="#GetNumberOfCellsTool-659"><span class="linenos">659</span></a>
</span><span id="GetNumberOfCellsTool-660"><a href="#GetNumberOfCellsTool-660"><span class="linenos">660</span></a><span class="sd">        Args:</span>
</span><span id="GetNumberOfCellsTool-661"><a href="#GetNumberOfCellsTool-661"><span class="linenos">661</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="GetNumberOfCellsTool-662"><a href="#GetNumberOfCellsTool-662"><span class="linenos">662</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool-663"><a href="#GetNumberOfCellsTool-663"><span class="linenos">663</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="GetNumberOfCellsTool-664"><a href="#GetNumberOfCellsTool-664"><span class="linenos">664</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="GetNumberOfCellsTool-665"><a href="#GetNumberOfCellsTool-665"><span class="linenos">665</span></a>
</span><span id="GetNumberOfCellsTool-666"><a href="#GetNumberOfCellsTool-666"><span class="linenos">666</span></a>    <span class="nd">@property</span>
</span><span id="GetNumberOfCellsTool-667"><a href="#GetNumberOfCellsTool-667"><span class="linenos">667</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool-668"><a href="#GetNumberOfCellsTool-668"><span class="linenos">668</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="GetNumberOfCellsTool-669"><a href="#GetNumberOfCellsTool-669"><span class="linenos">669</span></a>
</span><span id="GetNumberOfCellsTool-670"><a href="#GetNumberOfCellsTool-670"><span class="linenos">670</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool-671"><a href="#GetNumberOfCellsTool-671"><span class="linenos">671</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="GetNumberOfCellsTool-672"><a href="#GetNumberOfCellsTool-672"><span class="linenos">672</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool-673"><a href="#GetNumberOfCellsTool-673"><span class="linenos">673</span></a>        <span class="k">return</span> <span class="s2">&quot;get_number_of_cells&quot;</span>
</span><span id="GetNumberOfCellsTool-674"><a href="#GetNumberOfCellsTool-674"><span class="linenos">674</span></a>
</span><span id="GetNumberOfCellsTool-675"><a href="#GetNumberOfCellsTool-675"><span class="linenos">675</span></a>    <span class="nd">@property</span>
</span><span id="GetNumberOfCellsTool-676"><a href="#GetNumberOfCellsTool-676"><span class="linenos">676</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool-677"><a href="#GetNumberOfCellsTool-677"><span class="linenos">677</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="GetNumberOfCellsTool-678"><a href="#GetNumberOfCellsTool-678"><span class="linenos">678</span></a>
</span><span id="GetNumberOfCellsTool-679"><a href="#GetNumberOfCellsTool-679"><span class="linenos">679</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool-680"><a href="#GetNumberOfCellsTool-680"><span class="linenos">680</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="GetNumberOfCellsTool-681"><a href="#GetNumberOfCellsTool-681"><span class="linenos">681</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool-682"><a href="#GetNumberOfCellsTool-682"><span class="linenos">682</span></a>        <span class="k">return</span> <span class="s2">&quot;Get number of cells in the active notebook&quot;</span>
</span><span id="GetNumberOfCellsTool-683"><a href="#GetNumberOfCellsTool-683"><span class="linenos">683</span></a>
</span><span id="GetNumberOfCellsTool-684"><a href="#GetNumberOfCellsTool-684"><span class="linenos">684</span></a>    <span class="nd">@property</span>
</span><span id="GetNumberOfCellsTool-685"><a href="#GetNumberOfCellsTool-685"><span class="linenos">685</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="GetNumberOfCellsTool-686"><a href="#GetNumberOfCellsTool-686"><span class="linenos">686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="GetNumberOfCellsTool-687"><a href="#GetNumberOfCellsTool-687"><span class="linenos">687</span></a>
</span><span id="GetNumberOfCellsTool-688"><a href="#GetNumberOfCellsTool-688"><span class="linenos">688</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool-689"><a href="#GetNumberOfCellsTool-689"><span class="linenos">689</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="GetNumberOfCellsTool-690"><a href="#GetNumberOfCellsTool-690"><span class="linenos">690</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool-691"><a href="#GetNumberOfCellsTool-691"><span class="linenos">691</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell count&quot;</span><span class="p">]</span>
</span><span id="GetNumberOfCellsTool-692"><a href="#GetNumberOfCellsTool-692"><span class="linenos">692</span></a>
</span><span id="GetNumberOfCellsTool-693"><a href="#GetNumberOfCellsTool-693"><span class="linenos">693</span></a>    <span class="nd">@property</span>
</span><span id="GetNumberOfCellsTool-694"><a href="#GetNumberOfCellsTool-694"><span class="linenos">694</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool-695"><a href="#GetNumberOfCellsTool-695"><span class="linenos">695</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="GetNumberOfCellsTool-696"><a href="#GetNumberOfCellsTool-696"><span class="linenos">696</span></a>
</span><span id="GetNumberOfCellsTool-697"><a href="#GetNumberOfCellsTool-697"><span class="linenos">697</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool-698"><a href="#GetNumberOfCellsTool-698"><span class="linenos">698</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="GetNumberOfCellsTool-699"><a href="#GetNumberOfCellsTool-699"><span class="linenos">699</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool-700"><a href="#GetNumberOfCellsTool-700"><span class="linenos">700</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the count of cells in the ACTIVE notebook.&quot;</span>
</span><span id="GetNumberOfCellsTool-701"><a href="#GetNumberOfCellsTool-701"><span class="linenos">701</span></a>
</span><span id="GetNumberOfCellsTool-702"><a href="#GetNumberOfCellsTool-702"><span class="linenos">702</span></a>    <span class="nd">@property</span>
</span><span id="GetNumberOfCellsTool-703"><a href="#GetNumberOfCellsTool-703"><span class="linenos">703</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool-704"><a href="#GetNumberOfCellsTool-704"><span class="linenos">704</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="GetNumberOfCellsTool-705"><a href="#GetNumberOfCellsTool-705"><span class="linenos">705</span></a>
</span><span id="GetNumberOfCellsTool-706"><a href="#GetNumberOfCellsTool-706"><span class="linenos">706</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool-707"><a href="#GetNumberOfCellsTool-707"><span class="linenos">707</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="GetNumberOfCellsTool-708"><a href="#GetNumberOfCellsTool-708"><span class="linenos">708</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool-709"><a href="#GetNumberOfCellsTool-709"><span class="linenos">709</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="GetNumberOfCellsTool-710"><a href="#GetNumberOfCellsTool-710"><span class="linenos">710</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="GetNumberOfCellsTool-711"><a href="#GetNumberOfCellsTool-711"><span class="linenos">711</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetNumberOfCellsTool-712"><a href="#GetNumberOfCellsTool-712"><span class="linenos">712</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="GetNumberOfCellsTool-713"><a href="#GetNumberOfCellsTool-713"><span class="linenos">713</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="GetNumberOfCellsTool-714"><a href="#GetNumberOfCellsTool-714"><span class="linenos">714</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="GetNumberOfCellsTool-715"><a href="#GetNumberOfCellsTool-715"><span class="linenos">715</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
</span><span id="GetNumberOfCellsTool-716"><a href="#GetNumberOfCellsTool-716"><span class="linenos">716</span></a>            <span class="p">},</span>
</span><span id="GetNumberOfCellsTool-717"><a href="#GetNumberOfCellsTool-717"><span class="linenos">717</span></a>        <span class="p">}</span>
</span><span id="GetNumberOfCellsTool-718"><a href="#GetNumberOfCellsTool-718"><span class="linenos">718</span></a>
</span><span id="GetNumberOfCellsTool-719"><a href="#GetNumberOfCellsTool-719"><span class="linenos">719</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool-720"><a href="#GetNumberOfCellsTool-720"><span class="linenos">720</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="GetNumberOfCellsTool-721"><a href="#GetNumberOfCellsTool-721"><span class="linenos">721</span></a>
</span><span id="GetNumberOfCellsTool-722"><a href="#GetNumberOfCellsTool-722"><span class="linenos">722</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="GetNumberOfCellsTool-723"><a href="#GetNumberOfCellsTool-723"><span class="linenos">723</span></a>
</span><span id="GetNumberOfCellsTool-724"><a href="#GetNumberOfCellsTool-724"><span class="linenos">724</span></a><span class="sd">        Args:</span>
</span><span id="GetNumberOfCellsTool-725"><a href="#GetNumberOfCellsTool-725"><span class="linenos">725</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetNumberOfCellsTool-726"><a href="#GetNumberOfCellsTool-726"><span class="linenos">726</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetNumberOfCellsTool-727"><a href="#GetNumberOfCellsTool-727"><span class="linenos">727</span></a>
</span><span id="GetNumberOfCellsTool-728"><a href="#GetNumberOfCellsTool-728"><span class="linenos">728</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool-729"><a href="#GetNumberOfCellsTool-729"><span class="linenos">729</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="GetNumberOfCellsTool-730"><a href="#GetNumberOfCellsTool-730"><span class="linenos">730</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool-731"><a href="#GetNumberOfCellsTool-731"><span class="linenos">731</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="GetNumberOfCellsTool-732"><a href="#GetNumberOfCellsTool-732"><span class="linenos">732</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="GetNumberOfCellsTool-733"><a href="#GetNumberOfCellsTool-733"><span class="linenos">733</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="GetNumberOfCellsTool-734"><a href="#GetNumberOfCellsTool-734"><span class="linenos">734</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="GetNumberOfCellsTool-735"><a href="#GetNumberOfCellsTool-735"><span class="linenos">735</span></a>                <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Get number of cells in the active notebook?&quot;</span>
</span><span id="GetNumberOfCellsTool-736"><a href="#GetNumberOfCellsTool-736"><span class="linenos">736</span></a>            <span class="p">)</span>
</span><span id="GetNumberOfCellsTool-737"><a href="#GetNumberOfCellsTool-737"><span class="linenos">737</span></a>        <span class="p">)</span>
</span><span id="GetNumberOfCellsTool-738"><a href="#GetNumberOfCellsTool-738"><span class="linenos">738</span></a>
</span><span id="GetNumberOfCellsTool-739"><a href="#GetNumberOfCellsTool-739"><span class="linenos">739</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="GetNumberOfCellsTool-740"><a href="#GetNumberOfCellsTool-740"><span class="linenos">740</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="GetNumberOfCellsTool-741"><a href="#GetNumberOfCellsTool-741"><span class="linenos">741</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool-742"><a href="#GetNumberOfCellsTool-742"><span class="linenos">742</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="GetNumberOfCellsTool-743"><a href="#GetNumberOfCellsTool-743"><span class="linenos">743</span></a>
</span><span id="GetNumberOfCellsTool-744"><a href="#GetNumberOfCellsTool-744"><span class="linenos">744</span></a><span class="sd">        Args:</span>
</span><span id="GetNumberOfCellsTool-745"><a href="#GetNumberOfCellsTool-745"><span class="linenos">745</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetNumberOfCellsTool-746"><a href="#GetNumberOfCellsTool-746"><span class="linenos">746</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="GetNumberOfCellsTool-747"><a href="#GetNumberOfCellsTool-747"><span class="linenos">747</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="GetNumberOfCellsTool-748"><a href="#GetNumberOfCellsTool-748"><span class="linenos">748</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetNumberOfCellsTool-749"><a href="#GetNumberOfCellsTool-749"><span class="linenos">749</span></a>
</span><span id="GetNumberOfCellsTool-750"><a href="#GetNumberOfCellsTool-750"><span class="linenos">750</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool-751"><a href="#GetNumberOfCellsTool-751"><span class="linenos">751</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="GetNumberOfCellsTool-752"><a href="#GetNumberOfCellsTool-752"><span class="linenos">752</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool-753"><a href="#GetNumberOfCellsTool-753"><span class="linenos">753</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:get-number-of-cells&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="GetNumberOfCellsTool-754"><a href="#GetNumberOfCellsTool-754"><span class="linenos">754</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get number of cells tool.</p>
</div>


                            <div id="GetNumberOfCellsTool.__init__" class="classattr">
                                        <input id="GetNumberOfCellsTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">GetNumberOfCellsTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="GetNumberOfCellsTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetNumberOfCellsTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetNumberOfCellsTool.__init__-657"><a href="#GetNumberOfCellsTool.__init__-657"><span class="linenos">657</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool.__init__-658"><a href="#GetNumberOfCellsTool.__init__-658"><span class="linenos">658</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="GetNumberOfCellsTool.__init__-659"><a href="#GetNumberOfCellsTool.__init__-659"><span class="linenos">659</span></a>
</span><span id="GetNumberOfCellsTool.__init__-660"><a href="#GetNumberOfCellsTool.__init__-660"><span class="linenos">660</span></a><span class="sd">        Args:</span>
</span><span id="GetNumberOfCellsTool.__init__-661"><a href="#GetNumberOfCellsTool.__init__-661"><span class="linenos">661</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="GetNumberOfCellsTool.__init__-662"><a href="#GetNumberOfCellsTool.__init__-662"><span class="linenos">662</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool.__init__-663"><a href="#GetNumberOfCellsTool.__init__-663"><span class="linenos">663</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="GetNumberOfCellsTool.__init__-664"><a href="#GetNumberOfCellsTool.__init__-664"><span class="linenos">664</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="GetNumberOfCellsTool.name" class="classattr">
                                        <input id="GetNumberOfCellsTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetNumberOfCellsTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetNumberOfCellsTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetNumberOfCellsTool.name-666"><a href="#GetNumberOfCellsTool.name-666"><span class="linenos">666</span></a>    <span class="nd">@property</span>
</span><span id="GetNumberOfCellsTool.name-667"><a href="#GetNumberOfCellsTool.name-667"><span class="linenos">667</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool.name-668"><a href="#GetNumberOfCellsTool.name-668"><span class="linenos">668</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="GetNumberOfCellsTool.name-669"><a href="#GetNumberOfCellsTool.name-669"><span class="linenos">669</span></a>
</span><span id="GetNumberOfCellsTool.name-670"><a href="#GetNumberOfCellsTool.name-670"><span class="linenos">670</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool.name-671"><a href="#GetNumberOfCellsTool.name-671"><span class="linenos">671</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="GetNumberOfCellsTool.name-672"><a href="#GetNumberOfCellsTool.name-672"><span class="linenos">672</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool.name-673"><a href="#GetNumberOfCellsTool.name-673"><span class="linenos">673</span></a>        <span class="k">return</span> <span class="s2">&quot;get_number_of_cells&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetNumberOfCellsTool.title" class="classattr">
                                        <input id="GetNumberOfCellsTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetNumberOfCellsTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetNumberOfCellsTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetNumberOfCellsTool.title-675"><a href="#GetNumberOfCellsTool.title-675"><span class="linenos">675</span></a>    <span class="nd">@property</span>
</span><span id="GetNumberOfCellsTool.title-676"><a href="#GetNumberOfCellsTool.title-676"><span class="linenos">676</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool.title-677"><a href="#GetNumberOfCellsTool.title-677"><span class="linenos">677</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="GetNumberOfCellsTool.title-678"><a href="#GetNumberOfCellsTool.title-678"><span class="linenos">678</span></a>
</span><span id="GetNumberOfCellsTool.title-679"><a href="#GetNumberOfCellsTool.title-679"><span class="linenos">679</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool.title-680"><a href="#GetNumberOfCellsTool.title-680"><span class="linenos">680</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="GetNumberOfCellsTool.title-681"><a href="#GetNumberOfCellsTool.title-681"><span class="linenos">681</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool.title-682"><a href="#GetNumberOfCellsTool.title-682"><span class="linenos">682</span></a>        <span class="k">return</span> <span class="s2">&quot;Get number of cells in the active notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetNumberOfCellsTool.tags" class="classattr">
                                        <input id="GetNumberOfCellsTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="GetNumberOfCellsTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetNumberOfCellsTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetNumberOfCellsTool.tags-684"><a href="#GetNumberOfCellsTool.tags-684"><span class="linenos">684</span></a>    <span class="nd">@property</span>
</span><span id="GetNumberOfCellsTool.tags-685"><a href="#GetNumberOfCellsTool.tags-685"><span class="linenos">685</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="GetNumberOfCellsTool.tags-686"><a href="#GetNumberOfCellsTool.tags-686"><span class="linenos">686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="GetNumberOfCellsTool.tags-687"><a href="#GetNumberOfCellsTool.tags-687"><span class="linenos">687</span></a>
</span><span id="GetNumberOfCellsTool.tags-688"><a href="#GetNumberOfCellsTool.tags-688"><span class="linenos">688</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool.tags-689"><a href="#GetNumberOfCellsTool.tags-689"><span class="linenos">689</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="GetNumberOfCellsTool.tags-690"><a href="#GetNumberOfCellsTool.tags-690"><span class="linenos">690</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool.tags-691"><a href="#GetNumberOfCellsTool.tags-691"><span class="linenos">691</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell count&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetNumberOfCellsTool.description" class="classattr">
                                        <input id="GetNumberOfCellsTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetNumberOfCellsTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetNumberOfCellsTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetNumberOfCellsTool.description-693"><a href="#GetNumberOfCellsTool.description-693"><span class="linenos">693</span></a>    <span class="nd">@property</span>
</span><span id="GetNumberOfCellsTool.description-694"><a href="#GetNumberOfCellsTool.description-694"><span class="linenos">694</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool.description-695"><a href="#GetNumberOfCellsTool.description-695"><span class="linenos">695</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="GetNumberOfCellsTool.description-696"><a href="#GetNumberOfCellsTool.description-696"><span class="linenos">696</span></a>
</span><span id="GetNumberOfCellsTool.description-697"><a href="#GetNumberOfCellsTool.description-697"><span class="linenos">697</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool.description-698"><a href="#GetNumberOfCellsTool.description-698"><span class="linenos">698</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="GetNumberOfCellsTool.description-699"><a href="#GetNumberOfCellsTool.description-699"><span class="linenos">699</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool.description-700"><a href="#GetNumberOfCellsTool.description-700"><span class="linenos">700</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the count of cells in the ACTIVE notebook.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetNumberOfCellsTool.schema" class="classattr">
                                        <input id="GetNumberOfCellsTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="GetNumberOfCellsTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetNumberOfCellsTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetNumberOfCellsTool.schema-702"><a href="#GetNumberOfCellsTool.schema-702"><span class="linenos">702</span></a>    <span class="nd">@property</span>
</span><span id="GetNumberOfCellsTool.schema-703"><a href="#GetNumberOfCellsTool.schema-703"><span class="linenos">703</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool.schema-704"><a href="#GetNumberOfCellsTool.schema-704"><span class="linenos">704</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="GetNumberOfCellsTool.schema-705"><a href="#GetNumberOfCellsTool.schema-705"><span class="linenos">705</span></a>
</span><span id="GetNumberOfCellsTool.schema-706"><a href="#GetNumberOfCellsTool.schema-706"><span class="linenos">706</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool.schema-707"><a href="#GetNumberOfCellsTool.schema-707"><span class="linenos">707</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="GetNumberOfCellsTool.schema-708"><a href="#GetNumberOfCellsTool.schema-708"><span class="linenos">708</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool.schema-709"><a href="#GetNumberOfCellsTool.schema-709"><span class="linenos">709</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="GetNumberOfCellsTool.schema-710"><a href="#GetNumberOfCellsTool.schema-710"><span class="linenos">710</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="GetNumberOfCellsTool.schema-711"><a href="#GetNumberOfCellsTool.schema-711"><span class="linenos">711</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetNumberOfCellsTool.schema-712"><a href="#GetNumberOfCellsTool.schema-712"><span class="linenos">712</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="GetNumberOfCellsTool.schema-713"><a href="#GetNumberOfCellsTool.schema-713"><span class="linenos">713</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="GetNumberOfCellsTool.schema-714"><a href="#GetNumberOfCellsTool.schema-714"><span class="linenos">714</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="GetNumberOfCellsTool.schema-715"><a href="#GetNumberOfCellsTool.schema-715"><span class="linenos">715</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
</span><span id="GetNumberOfCellsTool.schema-716"><a href="#GetNumberOfCellsTool.schema-716"><span class="linenos">716</span></a>            <span class="p">},</span>
</span><span id="GetNumberOfCellsTool.schema-717"><a href="#GetNumberOfCellsTool.schema-717"><span class="linenos">717</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Schema for the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetNumberOfCellsTool.pre_invoke" class="classattr">
                                        <input id="GetNumberOfCellsTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="GetNumberOfCellsTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetNumberOfCellsTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetNumberOfCellsTool.pre_invoke-719"><a href="#GetNumberOfCellsTool.pre_invoke-719"><span class="linenos">719</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-720"><a href="#GetNumberOfCellsTool.pre_invoke-720"><span class="linenos">720</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-721"><a href="#GetNumberOfCellsTool.pre_invoke-721"><span class="linenos">721</span></a>
</span><span id="GetNumberOfCellsTool.pre_invoke-722"><a href="#GetNumberOfCellsTool.pre_invoke-722"><span class="linenos">722</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-723"><a href="#GetNumberOfCellsTool.pre_invoke-723"><span class="linenos">723</span></a>
</span><span id="GetNumberOfCellsTool.pre_invoke-724"><a href="#GetNumberOfCellsTool.pre_invoke-724"><span class="linenos">724</span></a><span class="sd">        Args:</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-725"><a href="#GetNumberOfCellsTool.pre_invoke-725"><span class="linenos">725</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-726"><a href="#GetNumberOfCellsTool.pre_invoke-726"><span class="linenos">726</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-727"><a href="#GetNumberOfCellsTool.pre_invoke-727"><span class="linenos">727</span></a>
</span><span id="GetNumberOfCellsTool.pre_invoke-728"><a href="#GetNumberOfCellsTool.pre_invoke-728"><span class="linenos">728</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-729"><a href="#GetNumberOfCellsTool.pre_invoke-729"><span class="linenos">729</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-730"><a href="#GetNumberOfCellsTool.pre_invoke-730"><span class="linenos">730</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-731"><a href="#GetNumberOfCellsTool.pre_invoke-731"><span class="linenos">731</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-732"><a href="#GetNumberOfCellsTool.pre_invoke-732"><span class="linenos">732</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-733"><a href="#GetNumberOfCellsTool.pre_invoke-733"><span class="linenos">733</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-734"><a href="#GetNumberOfCellsTool.pre_invoke-734"><span class="linenos">734</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-735"><a href="#GetNumberOfCellsTool.pre_invoke-735"><span class="linenos">735</span></a>                <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Get number of cells in the active notebook?&quot;</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-736"><a href="#GetNumberOfCellsTool.pre_invoke-736"><span class="linenos">736</span></a>            <span class="p">)</span>
</span><span id="GetNumberOfCellsTool.pre_invoke-737"><a href="#GetNumberOfCellsTool.pre_invoke-737"><span class="linenos">737</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetNumberOfCellsTool.handle_tool_call" class="classattr">
                                        <input id="GetNumberOfCellsTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="GetNumberOfCellsTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetNumberOfCellsTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetNumberOfCellsTool.handle_tool_call-739"><a href="#GetNumberOfCellsTool.handle_tool_call-739"><span class="linenos">739</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-740"><a href="#GetNumberOfCellsTool.handle_tool_call-740"><span class="linenos">740</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-741"><a href="#GetNumberOfCellsTool.handle_tool_call-741"><span class="linenos">741</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-742"><a href="#GetNumberOfCellsTool.handle_tool_call-742"><span class="linenos">742</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-743"><a href="#GetNumberOfCellsTool.handle_tool_call-743"><span class="linenos">743</span></a>
</span><span id="GetNumberOfCellsTool.handle_tool_call-744"><a href="#GetNumberOfCellsTool.handle_tool_call-744"><span class="linenos">744</span></a><span class="sd">        Args:</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-745"><a href="#GetNumberOfCellsTool.handle_tool_call-745"><span class="linenos">745</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-746"><a href="#GetNumberOfCellsTool.handle_tool_call-746"><span class="linenos">746</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-747"><a href="#GetNumberOfCellsTool.handle_tool_call-747"><span class="linenos">747</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-748"><a href="#GetNumberOfCellsTool.handle_tool_call-748"><span class="linenos">748</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-749"><a href="#GetNumberOfCellsTool.handle_tool_call-749"><span class="linenos">749</span></a>
</span><span id="GetNumberOfCellsTool.handle_tool_call-750"><a href="#GetNumberOfCellsTool.handle_tool_call-750"><span class="linenos">750</span></a><span class="sd">        Return:</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-751"><a href="#GetNumberOfCellsTool.handle_tool_call-751"><span class="linenos">751</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-752"><a href="#GetNumberOfCellsTool.handle_tool_call-752"><span class="linenos">752</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-753"><a href="#GetNumberOfCellsTool.handle_tool_call-753"><span class="linenos">753</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:get-number-of-cells&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="GetNumberOfCellsTool.handle_tool_call-754"><a href="#GetNumberOfCellsTool.handle_tool_call-754"><span class="linenos">754</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="GetCellTypeAndSourceTool">
                            <input id="GetCellTypeAndSourceTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GetCellTypeAndSourceTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="GetCellTypeAndSourceTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellTypeAndSourceTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellTypeAndSourceTool-757"><a href="#GetCellTypeAndSourceTool-757"><span class="linenos">757</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GetCellTypeAndSourceTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="GetCellTypeAndSourceTool-758"><a href="#GetCellTypeAndSourceTool-758"><span class="linenos">758</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get cell type and source tool.&quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool-759"><a href="#GetCellTypeAndSourceTool-759"><span class="linenos">759</span></a>
</span><span id="GetCellTypeAndSourceTool-760"><a href="#GetCellTypeAndSourceTool-760"><span class="linenos">760</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool-761"><a href="#GetCellTypeAndSourceTool-761"><span class="linenos">761</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="GetCellTypeAndSourceTool-762"><a href="#GetCellTypeAndSourceTool-762"><span class="linenos">762</span></a>
</span><span id="GetCellTypeAndSourceTool-763"><a href="#GetCellTypeAndSourceTool-763"><span class="linenos">763</span></a><span class="sd">        Args:</span>
</span><span id="GetCellTypeAndSourceTool-764"><a href="#GetCellTypeAndSourceTool-764"><span class="linenos">764</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="GetCellTypeAndSourceTool-765"><a href="#GetCellTypeAndSourceTool-765"><span class="linenos">765</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool-766"><a href="#GetCellTypeAndSourceTool-766"><span class="linenos">766</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="GetCellTypeAndSourceTool-767"><a href="#GetCellTypeAndSourceTool-767"><span class="linenos">767</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="GetCellTypeAndSourceTool-768"><a href="#GetCellTypeAndSourceTool-768"><span class="linenos">768</span></a>
</span><span id="GetCellTypeAndSourceTool-769"><a href="#GetCellTypeAndSourceTool-769"><span class="linenos">769</span></a>    <span class="nd">@property</span>
</span><span id="GetCellTypeAndSourceTool-770"><a href="#GetCellTypeAndSourceTool-770"><span class="linenos">770</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool-771"><a href="#GetCellTypeAndSourceTool-771"><span class="linenos">771</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="GetCellTypeAndSourceTool-772"><a href="#GetCellTypeAndSourceTool-772"><span class="linenos">772</span></a>
</span><span id="GetCellTypeAndSourceTool-773"><a href="#GetCellTypeAndSourceTool-773"><span class="linenos">773</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool-774"><a href="#GetCellTypeAndSourceTool-774"><span class="linenos">774</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="GetCellTypeAndSourceTool-775"><a href="#GetCellTypeAndSourceTool-775"><span class="linenos">775</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool-776"><a href="#GetCellTypeAndSourceTool-776"><span class="linenos">776</span></a>        <span class="k">return</span> <span class="s2">&quot;get_cell_type_and_source&quot;</span>
</span><span id="GetCellTypeAndSourceTool-777"><a href="#GetCellTypeAndSourceTool-777"><span class="linenos">777</span></a>
</span><span id="GetCellTypeAndSourceTool-778"><a href="#GetCellTypeAndSourceTool-778"><span class="linenos">778</span></a>    <span class="nd">@property</span>
</span><span id="GetCellTypeAndSourceTool-779"><a href="#GetCellTypeAndSourceTool-779"><span class="linenos">779</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool-780"><a href="#GetCellTypeAndSourceTool-780"><span class="linenos">780</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="GetCellTypeAndSourceTool-781"><a href="#GetCellTypeAndSourceTool-781"><span class="linenos">781</span></a>
</span><span id="GetCellTypeAndSourceTool-782"><a href="#GetCellTypeAndSourceTool-782"><span class="linenos">782</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool-783"><a href="#GetCellTypeAndSourceTool-783"><span class="linenos">783</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="GetCellTypeAndSourceTool-784"><a href="#GetCellTypeAndSourceTool-784"><span class="linenos">784</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool-785"><a href="#GetCellTypeAndSourceTool-785"><span class="linenos">785</span></a>        <span class="k">return</span> <span class="s2">&quot;Get cell type and source at index&quot;</span>
</span><span id="GetCellTypeAndSourceTool-786"><a href="#GetCellTypeAndSourceTool-786"><span class="linenos">786</span></a>
</span><span id="GetCellTypeAndSourceTool-787"><a href="#GetCellTypeAndSourceTool-787"><span class="linenos">787</span></a>    <span class="nd">@property</span>
</span><span id="GetCellTypeAndSourceTool-788"><a href="#GetCellTypeAndSourceTool-788"><span class="linenos">788</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="GetCellTypeAndSourceTool-789"><a href="#GetCellTypeAndSourceTool-789"><span class="linenos">789</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="GetCellTypeAndSourceTool-790"><a href="#GetCellTypeAndSourceTool-790"><span class="linenos">790</span></a>
</span><span id="GetCellTypeAndSourceTool-791"><a href="#GetCellTypeAndSourceTool-791"><span class="linenos">791</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool-792"><a href="#GetCellTypeAndSourceTool-792"><span class="linenos">792</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="GetCellTypeAndSourceTool-793"><a href="#GetCellTypeAndSourceTool-793"><span class="linenos">793</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool-794"><a href="#GetCellTypeAndSourceTool-794"><span class="linenos">794</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">]</span>
</span><span id="GetCellTypeAndSourceTool-795"><a href="#GetCellTypeAndSourceTool-795"><span class="linenos">795</span></a>
</span><span id="GetCellTypeAndSourceTool-796"><a href="#GetCellTypeAndSourceTool-796"><span class="linenos">796</span></a>    <span class="nd">@property</span>
</span><span id="GetCellTypeAndSourceTool-797"><a href="#GetCellTypeAndSourceTool-797"><span class="linenos">797</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool-798"><a href="#GetCellTypeAndSourceTool-798"><span class="linenos">798</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="GetCellTypeAndSourceTool-799"><a href="#GetCellTypeAndSourceTool-799"><span class="linenos">799</span></a>
</span><span id="GetCellTypeAndSourceTool-800"><a href="#GetCellTypeAndSourceTool-800"><span class="linenos">800</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool-801"><a href="#GetCellTypeAndSourceTool-801"><span class="linenos">801</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="GetCellTypeAndSourceTool-802"><a href="#GetCellTypeAndSourceTool-802"><span class="linenos">802</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool-803"><a href="#GetCellTypeAndSourceTool-803"><span class="linenos">803</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the type (&#39;code&#39; or &#39;markdown&#39;) and the source for the given cell index.&quot;</span>
</span><span id="GetCellTypeAndSourceTool-804"><a href="#GetCellTypeAndSourceTool-804"><span class="linenos">804</span></a>
</span><span id="GetCellTypeAndSourceTool-805"><a href="#GetCellTypeAndSourceTool-805"><span class="linenos">805</span></a>    <span class="nd">@property</span>
</span><span id="GetCellTypeAndSourceTool-806"><a href="#GetCellTypeAndSourceTool-806"><span class="linenos">806</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool-807"><a href="#GetCellTypeAndSourceTool-807"><span class="linenos">807</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="GetCellTypeAndSourceTool-808"><a href="#GetCellTypeAndSourceTool-808"><span class="linenos">808</span></a>
</span><span id="GetCellTypeAndSourceTool-809"><a href="#GetCellTypeAndSourceTool-809"><span class="linenos">809</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool-810"><a href="#GetCellTypeAndSourceTool-810"><span class="linenos">810</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="GetCellTypeAndSourceTool-811"><a href="#GetCellTypeAndSourceTool-811"><span class="linenos">811</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool-812"><a href="#GetCellTypeAndSourceTool-812"><span class="linenos">812</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="GetCellTypeAndSourceTool-813"><a href="#GetCellTypeAndSourceTool-813"><span class="linenos">813</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool-814"><a href="#GetCellTypeAndSourceTool-814"><span class="linenos">814</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellTypeAndSourceTool-815"><a href="#GetCellTypeAndSourceTool-815"><span class="linenos">815</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool-816"><a href="#GetCellTypeAndSourceTool-816"><span class="linenos">816</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool-817"><a href="#GetCellTypeAndSourceTool-817"><span class="linenos">817</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool-818"><a href="#GetCellTypeAndSourceTool-818"><span class="linenos">818</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellTypeAndSourceTool-819"><a href="#GetCellTypeAndSourceTool-819"><span class="linenos">819</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool-820"><a href="#GetCellTypeAndSourceTool-820"><span class="linenos">820</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellTypeAndSourceTool-821"><a href="#GetCellTypeAndSourceTool-821"><span class="linenos">821</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell.&quot;</span><span class="p">}</span>
</span><span id="GetCellTypeAndSourceTool-822"><a href="#GetCellTypeAndSourceTool-822"><span class="linenos">822</span></a>                    <span class="p">},</span>
</span><span id="GetCellTypeAndSourceTool-823"><a href="#GetCellTypeAndSourceTool-823"><span class="linenos">823</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="GetCellTypeAndSourceTool-824"><a href="#GetCellTypeAndSourceTool-824"><span class="linenos">824</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool-825"><a href="#GetCellTypeAndSourceTool-825"><span class="linenos">825</span></a>                <span class="p">},</span>
</span><span id="GetCellTypeAndSourceTool-826"><a href="#GetCellTypeAndSourceTool-826"><span class="linenos">826</span></a>            <span class="p">},</span>
</span><span id="GetCellTypeAndSourceTool-827"><a href="#GetCellTypeAndSourceTool-827"><span class="linenos">827</span></a>        <span class="p">}</span>
</span><span id="GetCellTypeAndSourceTool-828"><a href="#GetCellTypeAndSourceTool-828"><span class="linenos">828</span></a>
</span><span id="GetCellTypeAndSourceTool-829"><a href="#GetCellTypeAndSourceTool-829"><span class="linenos">829</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool-830"><a href="#GetCellTypeAndSourceTool-830"><span class="linenos">830</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="GetCellTypeAndSourceTool-831"><a href="#GetCellTypeAndSourceTool-831"><span class="linenos">831</span></a>
</span><span id="GetCellTypeAndSourceTool-832"><a href="#GetCellTypeAndSourceTool-832"><span class="linenos">832</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="GetCellTypeAndSourceTool-833"><a href="#GetCellTypeAndSourceTool-833"><span class="linenos">833</span></a>
</span><span id="GetCellTypeAndSourceTool-834"><a href="#GetCellTypeAndSourceTool-834"><span class="linenos">834</span></a><span class="sd">        Args:</span>
</span><span id="GetCellTypeAndSourceTool-835"><a href="#GetCellTypeAndSourceTool-835"><span class="linenos">835</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCellTypeAndSourceTool-836"><a href="#GetCellTypeAndSourceTool-836"><span class="linenos">836</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCellTypeAndSourceTool-837"><a href="#GetCellTypeAndSourceTool-837"><span class="linenos">837</span></a>
</span><span id="GetCellTypeAndSourceTool-838"><a href="#GetCellTypeAndSourceTool-838"><span class="linenos">838</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool-839"><a href="#GetCellTypeAndSourceTool-839"><span class="linenos">839</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="GetCellTypeAndSourceTool-840"><a href="#GetCellTypeAndSourceTool-840"><span class="linenos">840</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool-841"><a href="#GetCellTypeAndSourceTool-841"><span class="linenos">841</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="GetCellTypeAndSourceTool-842"><a href="#GetCellTypeAndSourceTool-842"><span class="linenos">842</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="GetCellTypeAndSourceTool-843"><a href="#GetCellTypeAndSourceTool-843"><span class="linenos">843</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="GetCellTypeAndSourceTool-844"><a href="#GetCellTypeAndSourceTool-844"><span class="linenos">844</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="GetCellTypeAndSourceTool-845"><a href="#GetCellTypeAndSourceTool-845"><span class="linenos">845</span></a>                <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool-846"><a href="#GetCellTypeAndSourceTool-846"><span class="linenos">846</span></a>                <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool-847"><a href="#GetCellTypeAndSourceTool-847"><span class="linenos">847</span></a>                <span class="sa">f</span><span class="s2">&quot;Get type and source for cell </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool-848"><a href="#GetCellTypeAndSourceTool-848"><span class="linenos">848</span></a>            <span class="p">)</span>
</span><span id="GetCellTypeAndSourceTool-849"><a href="#GetCellTypeAndSourceTool-849"><span class="linenos">849</span></a>        <span class="p">)</span>
</span><span id="GetCellTypeAndSourceTool-850"><a href="#GetCellTypeAndSourceTool-850"><span class="linenos">850</span></a>
</span><span id="GetCellTypeAndSourceTool-851"><a href="#GetCellTypeAndSourceTool-851"><span class="linenos">851</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="GetCellTypeAndSourceTool-852"><a href="#GetCellTypeAndSourceTool-852"><span class="linenos">852</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="GetCellTypeAndSourceTool-853"><a href="#GetCellTypeAndSourceTool-853"><span class="linenos">853</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool-854"><a href="#GetCellTypeAndSourceTool-854"><span class="linenos">854</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="GetCellTypeAndSourceTool-855"><a href="#GetCellTypeAndSourceTool-855"><span class="linenos">855</span></a>
</span><span id="GetCellTypeAndSourceTool-856"><a href="#GetCellTypeAndSourceTool-856"><span class="linenos">856</span></a><span class="sd">        Args:</span>
</span><span id="GetCellTypeAndSourceTool-857"><a href="#GetCellTypeAndSourceTool-857"><span class="linenos">857</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCellTypeAndSourceTool-858"><a href="#GetCellTypeAndSourceTool-858"><span class="linenos">858</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="GetCellTypeAndSourceTool-859"><a href="#GetCellTypeAndSourceTool-859"><span class="linenos">859</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="GetCellTypeAndSourceTool-860"><a href="#GetCellTypeAndSourceTool-860"><span class="linenos">860</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCellTypeAndSourceTool-861"><a href="#GetCellTypeAndSourceTool-861"><span class="linenos">861</span></a>
</span><span id="GetCellTypeAndSourceTool-862"><a href="#GetCellTypeAndSourceTool-862"><span class="linenos">862</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool-863"><a href="#GetCellTypeAndSourceTool-863"><span class="linenos">863</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="GetCellTypeAndSourceTool-864"><a href="#GetCellTypeAndSourceTool-864"><span class="linenos">864</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool-865"><a href="#GetCellTypeAndSourceTool-865"><span class="linenos">865</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="GetCellTypeAndSourceTool-866"><a href="#GetCellTypeAndSourceTool-866"><span class="linenos">866</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="GetCellTypeAndSourceTool-867"><a href="#GetCellTypeAndSourceTool-867"><span class="linenos">867</span></a>            <span class="s2">&quot;notebook-intelligence:get-cell-type-and-source&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">}</span>
</span><span id="GetCellTypeAndSourceTool-868"><a href="#GetCellTypeAndSourceTool-868"><span class="linenos">868</span></a>        <span class="p">)</span>
</span><span id="GetCellTypeAndSourceTool-869"><a href="#GetCellTypeAndSourceTool-869"><span class="linenos">869</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get cell type and source tool.</p>
</div>


                            <div id="GetCellTypeAndSourceTool.__init__" class="classattr">
                                        <input id="GetCellTypeAndSourceTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">GetCellTypeAndSourceTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="GetCellTypeAndSourceTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellTypeAndSourceTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellTypeAndSourceTool.__init__-760"><a href="#GetCellTypeAndSourceTool.__init__-760"><span class="linenos">760</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool.__init__-761"><a href="#GetCellTypeAndSourceTool.__init__-761"><span class="linenos">761</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="GetCellTypeAndSourceTool.__init__-762"><a href="#GetCellTypeAndSourceTool.__init__-762"><span class="linenos">762</span></a>
</span><span id="GetCellTypeAndSourceTool.__init__-763"><a href="#GetCellTypeAndSourceTool.__init__-763"><span class="linenos">763</span></a><span class="sd">        Args:</span>
</span><span id="GetCellTypeAndSourceTool.__init__-764"><a href="#GetCellTypeAndSourceTool.__init__-764"><span class="linenos">764</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="GetCellTypeAndSourceTool.__init__-765"><a href="#GetCellTypeAndSourceTool.__init__-765"><span class="linenos">765</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool.__init__-766"><a href="#GetCellTypeAndSourceTool.__init__-766"><span class="linenos">766</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="GetCellTypeAndSourceTool.__init__-767"><a href="#GetCellTypeAndSourceTool.__init__-767"><span class="linenos">767</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="GetCellTypeAndSourceTool.name" class="classattr">
                                        <input id="GetCellTypeAndSourceTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetCellTypeAndSourceTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellTypeAndSourceTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellTypeAndSourceTool.name-769"><a href="#GetCellTypeAndSourceTool.name-769"><span class="linenos">769</span></a>    <span class="nd">@property</span>
</span><span id="GetCellTypeAndSourceTool.name-770"><a href="#GetCellTypeAndSourceTool.name-770"><span class="linenos">770</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool.name-771"><a href="#GetCellTypeAndSourceTool.name-771"><span class="linenos">771</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="GetCellTypeAndSourceTool.name-772"><a href="#GetCellTypeAndSourceTool.name-772"><span class="linenos">772</span></a>
</span><span id="GetCellTypeAndSourceTool.name-773"><a href="#GetCellTypeAndSourceTool.name-773"><span class="linenos">773</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool.name-774"><a href="#GetCellTypeAndSourceTool.name-774"><span class="linenos">774</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="GetCellTypeAndSourceTool.name-775"><a href="#GetCellTypeAndSourceTool.name-775"><span class="linenos">775</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool.name-776"><a href="#GetCellTypeAndSourceTool.name-776"><span class="linenos">776</span></a>        <span class="k">return</span> <span class="s2">&quot;get_cell_type_and_source&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellTypeAndSourceTool.title" class="classattr">
                                        <input id="GetCellTypeAndSourceTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetCellTypeAndSourceTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellTypeAndSourceTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellTypeAndSourceTool.title-778"><a href="#GetCellTypeAndSourceTool.title-778"><span class="linenos">778</span></a>    <span class="nd">@property</span>
</span><span id="GetCellTypeAndSourceTool.title-779"><a href="#GetCellTypeAndSourceTool.title-779"><span class="linenos">779</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool.title-780"><a href="#GetCellTypeAndSourceTool.title-780"><span class="linenos">780</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="GetCellTypeAndSourceTool.title-781"><a href="#GetCellTypeAndSourceTool.title-781"><span class="linenos">781</span></a>
</span><span id="GetCellTypeAndSourceTool.title-782"><a href="#GetCellTypeAndSourceTool.title-782"><span class="linenos">782</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool.title-783"><a href="#GetCellTypeAndSourceTool.title-783"><span class="linenos">783</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="GetCellTypeAndSourceTool.title-784"><a href="#GetCellTypeAndSourceTool.title-784"><span class="linenos">784</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool.title-785"><a href="#GetCellTypeAndSourceTool.title-785"><span class="linenos">785</span></a>        <span class="k">return</span> <span class="s2">&quot;Get cell type and source at index&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellTypeAndSourceTool.tags" class="classattr">
                                        <input id="GetCellTypeAndSourceTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="GetCellTypeAndSourceTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellTypeAndSourceTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellTypeAndSourceTool.tags-787"><a href="#GetCellTypeAndSourceTool.tags-787"><span class="linenos">787</span></a>    <span class="nd">@property</span>
</span><span id="GetCellTypeAndSourceTool.tags-788"><a href="#GetCellTypeAndSourceTool.tags-788"><span class="linenos">788</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="GetCellTypeAndSourceTool.tags-789"><a href="#GetCellTypeAndSourceTool.tags-789"><span class="linenos">789</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="GetCellTypeAndSourceTool.tags-790"><a href="#GetCellTypeAndSourceTool.tags-790"><span class="linenos">790</span></a>
</span><span id="GetCellTypeAndSourceTool.tags-791"><a href="#GetCellTypeAndSourceTool.tags-791"><span class="linenos">791</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool.tags-792"><a href="#GetCellTypeAndSourceTool.tags-792"><span class="linenos">792</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="GetCellTypeAndSourceTool.tags-793"><a href="#GetCellTypeAndSourceTool.tags-793"><span class="linenos">793</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool.tags-794"><a href="#GetCellTypeAndSourceTool.tags-794"><span class="linenos">794</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellTypeAndSourceTool.description" class="classattr">
                                        <input id="GetCellTypeAndSourceTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetCellTypeAndSourceTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellTypeAndSourceTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellTypeAndSourceTool.description-796"><a href="#GetCellTypeAndSourceTool.description-796"><span class="linenos">796</span></a>    <span class="nd">@property</span>
</span><span id="GetCellTypeAndSourceTool.description-797"><a href="#GetCellTypeAndSourceTool.description-797"><span class="linenos">797</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool.description-798"><a href="#GetCellTypeAndSourceTool.description-798"><span class="linenos">798</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="GetCellTypeAndSourceTool.description-799"><a href="#GetCellTypeAndSourceTool.description-799"><span class="linenos">799</span></a>
</span><span id="GetCellTypeAndSourceTool.description-800"><a href="#GetCellTypeAndSourceTool.description-800"><span class="linenos">800</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool.description-801"><a href="#GetCellTypeAndSourceTool.description-801"><span class="linenos">801</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="GetCellTypeAndSourceTool.description-802"><a href="#GetCellTypeAndSourceTool.description-802"><span class="linenos">802</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool.description-803"><a href="#GetCellTypeAndSourceTool.description-803"><span class="linenos">803</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the type (&#39;code&#39; or &#39;markdown&#39;) and the source for the given cell index.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellTypeAndSourceTool.schema" class="classattr">
                                        <input id="GetCellTypeAndSourceTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="GetCellTypeAndSourceTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellTypeAndSourceTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellTypeAndSourceTool.schema-805"><a href="#GetCellTypeAndSourceTool.schema-805"><span class="linenos">805</span></a>    <span class="nd">@property</span>
</span><span id="GetCellTypeAndSourceTool.schema-806"><a href="#GetCellTypeAndSourceTool.schema-806"><span class="linenos">806</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool.schema-807"><a href="#GetCellTypeAndSourceTool.schema-807"><span class="linenos">807</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="GetCellTypeAndSourceTool.schema-808"><a href="#GetCellTypeAndSourceTool.schema-808"><span class="linenos">808</span></a>
</span><span id="GetCellTypeAndSourceTool.schema-809"><a href="#GetCellTypeAndSourceTool.schema-809"><span class="linenos">809</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool.schema-810"><a href="#GetCellTypeAndSourceTool.schema-810"><span class="linenos">810</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="GetCellTypeAndSourceTool.schema-811"><a href="#GetCellTypeAndSourceTool.schema-811"><span class="linenos">811</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool.schema-812"><a href="#GetCellTypeAndSourceTool.schema-812"><span class="linenos">812</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="GetCellTypeAndSourceTool.schema-813"><a href="#GetCellTypeAndSourceTool.schema-813"><span class="linenos">813</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool.schema-814"><a href="#GetCellTypeAndSourceTool.schema-814"><span class="linenos">814</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellTypeAndSourceTool.schema-815"><a href="#GetCellTypeAndSourceTool.schema-815"><span class="linenos">815</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool.schema-816"><a href="#GetCellTypeAndSourceTool.schema-816"><span class="linenos">816</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool.schema-817"><a href="#GetCellTypeAndSourceTool.schema-817"><span class="linenos">817</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool.schema-818"><a href="#GetCellTypeAndSourceTool.schema-818"><span class="linenos">818</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellTypeAndSourceTool.schema-819"><a href="#GetCellTypeAndSourceTool.schema-819"><span class="linenos">819</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool.schema-820"><a href="#GetCellTypeAndSourceTool.schema-820"><span class="linenos">820</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellTypeAndSourceTool.schema-821"><a href="#GetCellTypeAndSourceTool.schema-821"><span class="linenos">821</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell.&quot;</span><span class="p">}</span>
</span><span id="GetCellTypeAndSourceTool.schema-822"><a href="#GetCellTypeAndSourceTool.schema-822"><span class="linenos">822</span></a>                    <span class="p">},</span>
</span><span id="GetCellTypeAndSourceTool.schema-823"><a href="#GetCellTypeAndSourceTool.schema-823"><span class="linenos">823</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="GetCellTypeAndSourceTool.schema-824"><a href="#GetCellTypeAndSourceTool.schema-824"><span class="linenos">824</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool.schema-825"><a href="#GetCellTypeAndSourceTool.schema-825"><span class="linenos">825</span></a>                <span class="p">},</span>
</span><span id="GetCellTypeAndSourceTool.schema-826"><a href="#GetCellTypeAndSourceTool.schema-826"><span class="linenos">826</span></a>            <span class="p">},</span>
</span><span id="GetCellTypeAndSourceTool.schema-827"><a href="#GetCellTypeAndSourceTool.schema-827"><span class="linenos">827</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Schema for the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellTypeAndSourceTool.pre_invoke" class="classattr">
                                        <input id="GetCellTypeAndSourceTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="GetCellTypeAndSourceTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellTypeAndSourceTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellTypeAndSourceTool.pre_invoke-829"><a href="#GetCellTypeAndSourceTool.pre_invoke-829"><span class="linenos">829</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-830"><a href="#GetCellTypeAndSourceTool.pre_invoke-830"><span class="linenos">830</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-831"><a href="#GetCellTypeAndSourceTool.pre_invoke-831"><span class="linenos">831</span></a>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-832"><a href="#GetCellTypeAndSourceTool.pre_invoke-832"><span class="linenos">832</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-833"><a href="#GetCellTypeAndSourceTool.pre_invoke-833"><span class="linenos">833</span></a>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-834"><a href="#GetCellTypeAndSourceTool.pre_invoke-834"><span class="linenos">834</span></a><span class="sd">        Args:</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-835"><a href="#GetCellTypeAndSourceTool.pre_invoke-835"><span class="linenos">835</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-836"><a href="#GetCellTypeAndSourceTool.pre_invoke-836"><span class="linenos">836</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-837"><a href="#GetCellTypeAndSourceTool.pre_invoke-837"><span class="linenos">837</span></a>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-838"><a href="#GetCellTypeAndSourceTool.pre_invoke-838"><span class="linenos">838</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-839"><a href="#GetCellTypeAndSourceTool.pre_invoke-839"><span class="linenos">839</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-840"><a href="#GetCellTypeAndSourceTool.pre_invoke-840"><span class="linenos">840</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-841"><a href="#GetCellTypeAndSourceTool.pre_invoke-841"><span class="linenos">841</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-842"><a href="#GetCellTypeAndSourceTool.pre_invoke-842"><span class="linenos">842</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-843"><a href="#GetCellTypeAndSourceTool.pre_invoke-843"><span class="linenos">843</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-844"><a href="#GetCellTypeAndSourceTool.pre_invoke-844"><span class="linenos">844</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-845"><a href="#GetCellTypeAndSourceTool.pre_invoke-845"><span class="linenos">845</span></a>                <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-846"><a href="#GetCellTypeAndSourceTool.pre_invoke-846"><span class="linenos">846</span></a>                <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-847"><a href="#GetCellTypeAndSourceTool.pre_invoke-847"><span class="linenos">847</span></a>                <span class="sa">f</span><span class="s2">&quot;Get type and source for cell </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-848"><a href="#GetCellTypeAndSourceTool.pre_invoke-848"><span class="linenos">848</span></a>            <span class="p">)</span>
</span><span id="GetCellTypeAndSourceTool.pre_invoke-849"><a href="#GetCellTypeAndSourceTool.pre_invoke-849"><span class="linenos">849</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellTypeAndSourceTool.handle_tool_call" class="classattr">
                                        <input id="GetCellTypeAndSourceTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="GetCellTypeAndSourceTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellTypeAndSourceTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellTypeAndSourceTool.handle_tool_call-851"><a href="#GetCellTypeAndSourceTool.handle_tool_call-851"><span class="linenos">851</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-852"><a href="#GetCellTypeAndSourceTool.handle_tool_call-852"><span class="linenos">852</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-853"><a href="#GetCellTypeAndSourceTool.handle_tool_call-853"><span class="linenos">853</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-854"><a href="#GetCellTypeAndSourceTool.handle_tool_call-854"><span class="linenos">854</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-855"><a href="#GetCellTypeAndSourceTool.handle_tool_call-855"><span class="linenos">855</span></a>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-856"><a href="#GetCellTypeAndSourceTool.handle_tool_call-856"><span class="linenos">856</span></a><span class="sd">        Args:</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-857"><a href="#GetCellTypeAndSourceTool.handle_tool_call-857"><span class="linenos">857</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-858"><a href="#GetCellTypeAndSourceTool.handle_tool_call-858"><span class="linenos">858</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-859"><a href="#GetCellTypeAndSourceTool.handle_tool_call-859"><span class="linenos">859</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-860"><a href="#GetCellTypeAndSourceTool.handle_tool_call-860"><span class="linenos">860</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-861"><a href="#GetCellTypeAndSourceTool.handle_tool_call-861"><span class="linenos">861</span></a>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-862"><a href="#GetCellTypeAndSourceTool.handle_tool_call-862"><span class="linenos">862</span></a><span class="sd">        Return:</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-863"><a href="#GetCellTypeAndSourceTool.handle_tool_call-863"><span class="linenos">863</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-864"><a href="#GetCellTypeAndSourceTool.handle_tool_call-864"><span class="linenos">864</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-865"><a href="#GetCellTypeAndSourceTool.handle_tool_call-865"><span class="linenos">865</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-866"><a href="#GetCellTypeAndSourceTool.handle_tool_call-866"><span class="linenos">866</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-867"><a href="#GetCellTypeAndSourceTool.handle_tool_call-867"><span class="linenos">867</span></a>            <span class="s2">&quot;notebook-intelligence:get-cell-type-and-source&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">}</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-868"><a href="#GetCellTypeAndSourceTool.handle_tool_call-868"><span class="linenos">868</span></a>        <span class="p">)</span>
</span><span id="GetCellTypeAndSourceTool.handle_tool_call-869"><a href="#GetCellTypeAndSourceTool.handle_tool_call-869"><span class="linenos">869</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="GetCellOutputTool">
                            <input id="GetCellOutputTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GetCellOutputTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="GetCellOutputTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellOutputTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellOutputTool-872"><a href="#GetCellOutputTool-872"><span class="linenos">872</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GetCellOutputTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="GetCellOutputTool-873"><a href="#GetCellOutputTool-873"><span class="linenos">873</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for getting the output of a cell at a specific index.&quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool-874"><a href="#GetCellOutputTool-874"><span class="linenos">874</span></a>
</span><span id="GetCellOutputTool-875"><a href="#GetCellOutputTool-875"><span class="linenos">875</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GetCellOutputTool-876"><a href="#GetCellOutputTool-876"><span class="linenos">876</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="GetCellOutputTool-877"><a href="#GetCellOutputTool-877"><span class="linenos">877</span></a>
</span><span id="GetCellOutputTool-878"><a href="#GetCellOutputTool-878"><span class="linenos">878</span></a><span class="sd">        Args:</span>
</span><span id="GetCellOutputTool-879"><a href="#GetCellOutputTool-879"><span class="linenos">879</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="GetCellOutputTool-880"><a href="#GetCellOutputTool-880"><span class="linenos">880</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool-881"><a href="#GetCellOutputTool-881"><span class="linenos">881</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="GetCellOutputTool-882"><a href="#GetCellOutputTool-882"><span class="linenos">882</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="GetCellOutputTool-883"><a href="#GetCellOutputTool-883"><span class="linenos">883</span></a>
</span><span id="GetCellOutputTool-884"><a href="#GetCellOutputTool-884"><span class="linenos">884</span></a>    <span class="nd">@property</span>
</span><span id="GetCellOutputTool-885"><a href="#GetCellOutputTool-885"><span class="linenos">885</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellOutputTool-886"><a href="#GetCellOutputTool-886"><span class="linenos">886</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="GetCellOutputTool-887"><a href="#GetCellOutputTool-887"><span class="linenos">887</span></a>
</span><span id="GetCellOutputTool-888"><a href="#GetCellOutputTool-888"><span class="linenos">888</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool-889"><a href="#GetCellOutputTool-889"><span class="linenos">889</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="GetCellOutputTool-890"><a href="#GetCellOutputTool-890"><span class="linenos">890</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool-891"><a href="#GetCellOutputTool-891"><span class="linenos">891</span></a>        <span class="k">return</span> <span class="s2">&quot;get_cell_output&quot;</span>
</span><span id="GetCellOutputTool-892"><a href="#GetCellOutputTool-892"><span class="linenos">892</span></a>
</span><span id="GetCellOutputTool-893"><a href="#GetCellOutputTool-893"><span class="linenos">893</span></a>    <span class="nd">@property</span>
</span><span id="GetCellOutputTool-894"><a href="#GetCellOutputTool-894"><span class="linenos">894</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellOutputTool-895"><a href="#GetCellOutputTool-895"><span class="linenos">895</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="GetCellOutputTool-896"><a href="#GetCellOutputTool-896"><span class="linenos">896</span></a>
</span><span id="GetCellOutputTool-897"><a href="#GetCellOutputTool-897"><span class="linenos">897</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool-898"><a href="#GetCellOutputTool-898"><span class="linenos">898</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="GetCellOutputTool-899"><a href="#GetCellOutputTool-899"><span class="linenos">899</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool-900"><a href="#GetCellOutputTool-900"><span class="linenos">900</span></a>        <span class="k">return</span> <span class="s2">&quot;Get output of cell at index&quot;</span>
</span><span id="GetCellOutputTool-901"><a href="#GetCellOutputTool-901"><span class="linenos">901</span></a>
</span><span id="GetCellOutputTool-902"><a href="#GetCellOutputTool-902"><span class="linenos">902</span></a>    <span class="nd">@property</span>
</span><span id="GetCellOutputTool-903"><a href="#GetCellOutputTool-903"><span class="linenos">903</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="GetCellOutputTool-904"><a href="#GetCellOutputTool-904"><span class="linenos">904</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="GetCellOutputTool-905"><a href="#GetCellOutputTool-905"><span class="linenos">905</span></a>
</span><span id="GetCellOutputTool-906"><a href="#GetCellOutputTool-906"><span class="linenos">906</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool-907"><a href="#GetCellOutputTool-907"><span class="linenos">907</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="GetCellOutputTool-908"><a href="#GetCellOutputTool-908"><span class="linenos">908</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool-909"><a href="#GetCellOutputTool-909"><span class="linenos">909</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell output&quot;</span><span class="p">]</span>
</span><span id="GetCellOutputTool-910"><a href="#GetCellOutputTool-910"><span class="linenos">910</span></a>
</span><span id="GetCellOutputTool-911"><a href="#GetCellOutputTool-911"><span class="linenos">911</span></a>    <span class="nd">@property</span>
</span><span id="GetCellOutputTool-912"><a href="#GetCellOutputTool-912"><span class="linenos">912</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellOutputTool-913"><a href="#GetCellOutputTool-913"><span class="linenos">913</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="GetCellOutputTool-914"><a href="#GetCellOutputTool-914"><span class="linenos">914</span></a>
</span><span id="GetCellOutputTool-915"><a href="#GetCellOutputTool-915"><span class="linenos">915</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool-916"><a href="#GetCellOutputTool-916"><span class="linenos">916</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="GetCellOutputTool-917"><a href="#GetCellOutputTool-917"><span class="linenos">917</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool-918"><a href="#GetCellOutputTool-918"><span class="linenos">918</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the output of the cell at the given index.&quot;</span>
</span><span id="GetCellOutputTool-919"><a href="#GetCellOutputTool-919"><span class="linenos">919</span></a>
</span><span id="GetCellOutputTool-920"><a href="#GetCellOutputTool-920"><span class="linenos">920</span></a>    <span class="nd">@property</span>
</span><span id="GetCellOutputTool-921"><a href="#GetCellOutputTool-921"><span class="linenos">921</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GetCellOutputTool-922"><a href="#GetCellOutputTool-922"><span class="linenos">922</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="GetCellOutputTool-923"><a href="#GetCellOutputTool-923"><span class="linenos">923</span></a>
</span><span id="GetCellOutputTool-924"><a href="#GetCellOutputTool-924"><span class="linenos">924</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool-925"><a href="#GetCellOutputTool-925"><span class="linenos">925</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="GetCellOutputTool-926"><a href="#GetCellOutputTool-926"><span class="linenos">926</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool-927"><a href="#GetCellOutputTool-927"><span class="linenos">927</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="GetCellOutputTool-928"><a href="#GetCellOutputTool-928"><span class="linenos">928</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="GetCellOutputTool-929"><a href="#GetCellOutputTool-929"><span class="linenos">929</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellOutputTool-930"><a href="#GetCellOutputTool-930"><span class="linenos">930</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="GetCellOutputTool-931"><a href="#GetCellOutputTool-931"><span class="linenos">931</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="GetCellOutputTool-932"><a href="#GetCellOutputTool-932"><span class="linenos">932</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="GetCellOutputTool-933"><a href="#GetCellOutputTool-933"><span class="linenos">933</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellOutputTool-934"><a href="#GetCellOutputTool-934"><span class="linenos">934</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="GetCellOutputTool-935"><a href="#GetCellOutputTool-935"><span class="linenos">935</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellOutputTool-936"><a href="#GetCellOutputTool-936"><span class="linenos">936</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell.&quot;</span><span class="p">}</span>
</span><span id="GetCellOutputTool-937"><a href="#GetCellOutputTool-937"><span class="linenos">937</span></a>                    <span class="p">},</span>
</span><span id="GetCellOutputTool-938"><a href="#GetCellOutputTool-938"><span class="linenos">938</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="GetCellOutputTool-939"><a href="#GetCellOutputTool-939"><span class="linenos">939</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="GetCellOutputTool-940"><a href="#GetCellOutputTool-940"><span class="linenos">940</span></a>                <span class="p">},</span>
</span><span id="GetCellOutputTool-941"><a href="#GetCellOutputTool-941"><span class="linenos">941</span></a>            <span class="p">},</span>
</span><span id="GetCellOutputTool-942"><a href="#GetCellOutputTool-942"><span class="linenos">942</span></a>        <span class="p">}</span>
</span><span id="GetCellOutputTool-943"><a href="#GetCellOutputTool-943"><span class="linenos">943</span></a>
</span><span id="GetCellOutputTool-944"><a href="#GetCellOutputTool-944"><span class="linenos">944</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="GetCellOutputTool-945"><a href="#GetCellOutputTool-945"><span class="linenos">945</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="GetCellOutputTool-946"><a href="#GetCellOutputTool-946"><span class="linenos">946</span></a>
</span><span id="GetCellOutputTool-947"><a href="#GetCellOutputTool-947"><span class="linenos">947</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="GetCellOutputTool-948"><a href="#GetCellOutputTool-948"><span class="linenos">948</span></a>
</span><span id="GetCellOutputTool-949"><a href="#GetCellOutputTool-949"><span class="linenos">949</span></a><span class="sd">        Args:</span>
</span><span id="GetCellOutputTool-950"><a href="#GetCellOutputTool-950"><span class="linenos">950</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCellOutputTool-951"><a href="#GetCellOutputTool-951"><span class="linenos">951</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCellOutputTool-952"><a href="#GetCellOutputTool-952"><span class="linenos">952</span></a>
</span><span id="GetCellOutputTool-953"><a href="#GetCellOutputTool-953"><span class="linenos">953</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool-954"><a href="#GetCellOutputTool-954"><span class="linenos">954</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="GetCellOutputTool-955"><a href="#GetCellOutputTool-955"><span class="linenos">955</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool-956"><a href="#GetCellOutputTool-956"><span class="linenos">956</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="GetCellOutputTool-957"><a href="#GetCellOutputTool-957"><span class="linenos">957</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="GetCellOutputTool-958"><a href="#GetCellOutputTool-958"><span class="linenos">958</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="GetCellOutputTool-959"><a href="#GetCellOutputTool-959"><span class="linenos">959</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="GetCellOutputTool-960"><a href="#GetCellOutputTool-960"><span class="linenos">960</span></a>                <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Get output for cell </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span>
</span><span id="GetCellOutputTool-961"><a href="#GetCellOutputTool-961"><span class="linenos">961</span></a>            <span class="p">)</span>
</span><span id="GetCellOutputTool-962"><a href="#GetCellOutputTool-962"><span class="linenos">962</span></a>        <span class="p">)</span>
</span><span id="GetCellOutputTool-963"><a href="#GetCellOutputTool-963"><span class="linenos">963</span></a>
</span><span id="GetCellOutputTool-964"><a href="#GetCellOutputTool-964"><span class="linenos">964</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="GetCellOutputTool-965"><a href="#GetCellOutputTool-965"><span class="linenos">965</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="GetCellOutputTool-966"><a href="#GetCellOutputTool-966"><span class="linenos">966</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellOutputTool-967"><a href="#GetCellOutputTool-967"><span class="linenos">967</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="GetCellOutputTool-968"><a href="#GetCellOutputTool-968"><span class="linenos">968</span></a>
</span><span id="GetCellOutputTool-969"><a href="#GetCellOutputTool-969"><span class="linenos">969</span></a><span class="sd">        Args:</span>
</span><span id="GetCellOutputTool-970"><a href="#GetCellOutputTool-970"><span class="linenos">970</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCellOutputTool-971"><a href="#GetCellOutputTool-971"><span class="linenos">971</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="GetCellOutputTool-972"><a href="#GetCellOutputTool-972"><span class="linenos">972</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="GetCellOutputTool-973"><a href="#GetCellOutputTool-973"><span class="linenos">973</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCellOutputTool-974"><a href="#GetCellOutputTool-974"><span class="linenos">974</span></a>
</span><span id="GetCellOutputTool-975"><a href="#GetCellOutputTool-975"><span class="linenos">975</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool-976"><a href="#GetCellOutputTool-976"><span class="linenos">976</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="GetCellOutputTool-977"><a href="#GetCellOutputTool-977"><span class="linenos">977</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool-978"><a href="#GetCellOutputTool-978"><span class="linenos">978</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="GetCellOutputTool-979"><a href="#GetCellOutputTool-979"><span class="linenos">979</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="GetCellOutputTool-980"><a href="#GetCellOutputTool-980"><span class="linenos">980</span></a>            <span class="s2">&quot;notebook-intelligence:get-cell-output&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">}</span>
</span><span id="GetCellOutputTool-981"><a href="#GetCellOutputTool-981"><span class="linenos">981</span></a>        <span class="p">)</span>
</span><span id="GetCellOutputTool-982"><a href="#GetCellOutputTool-982"><span class="linenos">982</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tool for getting the output of a cell at a specific index.</p>
</div>


                            <div id="GetCellOutputTool.__init__" class="classattr">
                                        <input id="GetCellOutputTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">GetCellOutputTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="GetCellOutputTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellOutputTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellOutputTool.__init__-875"><a href="#GetCellOutputTool.__init__-875"><span class="linenos">875</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GetCellOutputTool.__init__-876"><a href="#GetCellOutputTool.__init__-876"><span class="linenos">876</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="GetCellOutputTool.__init__-877"><a href="#GetCellOutputTool.__init__-877"><span class="linenos">877</span></a>
</span><span id="GetCellOutputTool.__init__-878"><a href="#GetCellOutputTool.__init__-878"><span class="linenos">878</span></a><span class="sd">        Args:</span>
</span><span id="GetCellOutputTool.__init__-879"><a href="#GetCellOutputTool.__init__-879"><span class="linenos">879</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="GetCellOutputTool.__init__-880"><a href="#GetCellOutputTool.__init__-880"><span class="linenos">880</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool.__init__-881"><a href="#GetCellOutputTool.__init__-881"><span class="linenos">881</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="GetCellOutputTool.__init__-882"><a href="#GetCellOutputTool.__init__-882"><span class="linenos">882</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="GetCellOutputTool.name" class="classattr">
                                        <input id="GetCellOutputTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetCellOutputTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellOutputTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellOutputTool.name-884"><a href="#GetCellOutputTool.name-884"><span class="linenos">884</span></a>    <span class="nd">@property</span>
</span><span id="GetCellOutputTool.name-885"><a href="#GetCellOutputTool.name-885"><span class="linenos">885</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellOutputTool.name-886"><a href="#GetCellOutputTool.name-886"><span class="linenos">886</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="GetCellOutputTool.name-887"><a href="#GetCellOutputTool.name-887"><span class="linenos">887</span></a>
</span><span id="GetCellOutputTool.name-888"><a href="#GetCellOutputTool.name-888"><span class="linenos">888</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool.name-889"><a href="#GetCellOutputTool.name-889"><span class="linenos">889</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="GetCellOutputTool.name-890"><a href="#GetCellOutputTool.name-890"><span class="linenos">890</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool.name-891"><a href="#GetCellOutputTool.name-891"><span class="linenos">891</span></a>        <span class="k">return</span> <span class="s2">&quot;get_cell_output&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellOutputTool.title" class="classattr">
                                        <input id="GetCellOutputTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetCellOutputTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellOutputTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellOutputTool.title-893"><a href="#GetCellOutputTool.title-893"><span class="linenos">893</span></a>    <span class="nd">@property</span>
</span><span id="GetCellOutputTool.title-894"><a href="#GetCellOutputTool.title-894"><span class="linenos">894</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellOutputTool.title-895"><a href="#GetCellOutputTool.title-895"><span class="linenos">895</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="GetCellOutputTool.title-896"><a href="#GetCellOutputTool.title-896"><span class="linenos">896</span></a>
</span><span id="GetCellOutputTool.title-897"><a href="#GetCellOutputTool.title-897"><span class="linenos">897</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool.title-898"><a href="#GetCellOutputTool.title-898"><span class="linenos">898</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="GetCellOutputTool.title-899"><a href="#GetCellOutputTool.title-899"><span class="linenos">899</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool.title-900"><a href="#GetCellOutputTool.title-900"><span class="linenos">900</span></a>        <span class="k">return</span> <span class="s2">&quot;Get output of cell at index&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellOutputTool.tags" class="classattr">
                                        <input id="GetCellOutputTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="GetCellOutputTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellOutputTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellOutputTool.tags-902"><a href="#GetCellOutputTool.tags-902"><span class="linenos">902</span></a>    <span class="nd">@property</span>
</span><span id="GetCellOutputTool.tags-903"><a href="#GetCellOutputTool.tags-903"><span class="linenos">903</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="GetCellOutputTool.tags-904"><a href="#GetCellOutputTool.tags-904"><span class="linenos">904</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="GetCellOutputTool.tags-905"><a href="#GetCellOutputTool.tags-905"><span class="linenos">905</span></a>
</span><span id="GetCellOutputTool.tags-906"><a href="#GetCellOutputTool.tags-906"><span class="linenos">906</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool.tags-907"><a href="#GetCellOutputTool.tags-907"><span class="linenos">907</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="GetCellOutputTool.tags-908"><a href="#GetCellOutputTool.tags-908"><span class="linenos">908</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool.tags-909"><a href="#GetCellOutputTool.tags-909"><span class="linenos">909</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell output&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellOutputTool.description" class="classattr">
                                        <input id="GetCellOutputTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetCellOutputTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellOutputTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellOutputTool.description-911"><a href="#GetCellOutputTool.description-911"><span class="linenos">911</span></a>    <span class="nd">@property</span>
</span><span id="GetCellOutputTool.description-912"><a href="#GetCellOutputTool.description-912"><span class="linenos">912</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellOutputTool.description-913"><a href="#GetCellOutputTool.description-913"><span class="linenos">913</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="GetCellOutputTool.description-914"><a href="#GetCellOutputTool.description-914"><span class="linenos">914</span></a>
</span><span id="GetCellOutputTool.description-915"><a href="#GetCellOutputTool.description-915"><span class="linenos">915</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool.description-916"><a href="#GetCellOutputTool.description-916"><span class="linenos">916</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="GetCellOutputTool.description-917"><a href="#GetCellOutputTool.description-917"><span class="linenos">917</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool.description-918"><a href="#GetCellOutputTool.description-918"><span class="linenos">918</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the output of the cell at the given index.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellOutputTool.schema" class="classattr">
                                        <input id="GetCellOutputTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="GetCellOutputTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellOutputTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellOutputTool.schema-920"><a href="#GetCellOutputTool.schema-920"><span class="linenos">920</span></a>    <span class="nd">@property</span>
</span><span id="GetCellOutputTool.schema-921"><a href="#GetCellOutputTool.schema-921"><span class="linenos">921</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GetCellOutputTool.schema-922"><a href="#GetCellOutputTool.schema-922"><span class="linenos">922</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="GetCellOutputTool.schema-923"><a href="#GetCellOutputTool.schema-923"><span class="linenos">923</span></a>
</span><span id="GetCellOutputTool.schema-924"><a href="#GetCellOutputTool.schema-924"><span class="linenos">924</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool.schema-925"><a href="#GetCellOutputTool.schema-925"><span class="linenos">925</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="GetCellOutputTool.schema-926"><a href="#GetCellOutputTool.schema-926"><span class="linenos">926</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool.schema-927"><a href="#GetCellOutputTool.schema-927"><span class="linenos">927</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="GetCellOutputTool.schema-928"><a href="#GetCellOutputTool.schema-928"><span class="linenos">928</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="GetCellOutputTool.schema-929"><a href="#GetCellOutputTool.schema-929"><span class="linenos">929</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellOutputTool.schema-930"><a href="#GetCellOutputTool.schema-930"><span class="linenos">930</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="GetCellOutputTool.schema-931"><a href="#GetCellOutputTool.schema-931"><span class="linenos">931</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="GetCellOutputTool.schema-932"><a href="#GetCellOutputTool.schema-932"><span class="linenos">932</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="GetCellOutputTool.schema-933"><a href="#GetCellOutputTool.schema-933"><span class="linenos">933</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellOutputTool.schema-934"><a href="#GetCellOutputTool.schema-934"><span class="linenos">934</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="GetCellOutputTool.schema-935"><a href="#GetCellOutputTool.schema-935"><span class="linenos">935</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCellOutputTool.schema-936"><a href="#GetCellOutputTool.schema-936"><span class="linenos">936</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell.&quot;</span><span class="p">}</span>
</span><span id="GetCellOutputTool.schema-937"><a href="#GetCellOutputTool.schema-937"><span class="linenos">937</span></a>                    <span class="p">},</span>
</span><span id="GetCellOutputTool.schema-938"><a href="#GetCellOutputTool.schema-938"><span class="linenos">938</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="GetCellOutputTool.schema-939"><a href="#GetCellOutputTool.schema-939"><span class="linenos">939</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="GetCellOutputTool.schema-940"><a href="#GetCellOutputTool.schema-940"><span class="linenos">940</span></a>                <span class="p">},</span>
</span><span id="GetCellOutputTool.schema-941"><a href="#GetCellOutputTool.schema-941"><span class="linenos">941</span></a>            <span class="p">},</span>
</span><span id="GetCellOutputTool.schema-942"><a href="#GetCellOutputTool.schema-942"><span class="linenos">942</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Schema for the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellOutputTool.pre_invoke" class="classattr">
                                        <input id="GetCellOutputTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="GetCellOutputTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellOutputTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellOutputTool.pre_invoke-944"><a href="#GetCellOutputTool.pre_invoke-944"><span class="linenos">944</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="GetCellOutputTool.pre_invoke-945"><a href="#GetCellOutputTool.pre_invoke-945"><span class="linenos">945</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="GetCellOutputTool.pre_invoke-946"><a href="#GetCellOutputTool.pre_invoke-946"><span class="linenos">946</span></a>
</span><span id="GetCellOutputTool.pre_invoke-947"><a href="#GetCellOutputTool.pre_invoke-947"><span class="linenos">947</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="GetCellOutputTool.pre_invoke-948"><a href="#GetCellOutputTool.pre_invoke-948"><span class="linenos">948</span></a>
</span><span id="GetCellOutputTool.pre_invoke-949"><a href="#GetCellOutputTool.pre_invoke-949"><span class="linenos">949</span></a><span class="sd">        Args:</span>
</span><span id="GetCellOutputTool.pre_invoke-950"><a href="#GetCellOutputTool.pre_invoke-950"><span class="linenos">950</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCellOutputTool.pre_invoke-951"><a href="#GetCellOutputTool.pre_invoke-951"><span class="linenos">951</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCellOutputTool.pre_invoke-952"><a href="#GetCellOutputTool.pre_invoke-952"><span class="linenos">952</span></a>
</span><span id="GetCellOutputTool.pre_invoke-953"><a href="#GetCellOutputTool.pre_invoke-953"><span class="linenos">953</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool.pre_invoke-954"><a href="#GetCellOutputTool.pre_invoke-954"><span class="linenos">954</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="GetCellOutputTool.pre_invoke-955"><a href="#GetCellOutputTool.pre_invoke-955"><span class="linenos">955</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool.pre_invoke-956"><a href="#GetCellOutputTool.pre_invoke-956"><span class="linenos">956</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="GetCellOutputTool.pre_invoke-957"><a href="#GetCellOutputTool.pre_invoke-957"><span class="linenos">957</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="GetCellOutputTool.pre_invoke-958"><a href="#GetCellOutputTool.pre_invoke-958"><span class="linenos">958</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="GetCellOutputTool.pre_invoke-959"><a href="#GetCellOutputTool.pre_invoke-959"><span class="linenos">959</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="GetCellOutputTool.pre_invoke-960"><a href="#GetCellOutputTool.pre_invoke-960"><span class="linenos">960</span></a>                <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Get output for cell </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span>
</span><span id="GetCellOutputTool.pre_invoke-961"><a href="#GetCellOutputTool.pre_invoke-961"><span class="linenos">961</span></a>            <span class="p">)</span>
</span><span id="GetCellOutputTool.pre_invoke-962"><a href="#GetCellOutputTool.pre_invoke-962"><span class="linenos">962</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCellOutputTool.handle_tool_call" class="classattr">
                                        <input id="GetCellOutputTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="GetCellOutputTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCellOutputTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCellOutputTool.handle_tool_call-964"><a href="#GetCellOutputTool.handle_tool_call-964"><span class="linenos">964</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="GetCellOutputTool.handle_tool_call-965"><a href="#GetCellOutputTool.handle_tool_call-965"><span class="linenos">965</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="GetCellOutputTool.handle_tool_call-966"><a href="#GetCellOutputTool.handle_tool_call-966"><span class="linenos">966</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCellOutputTool.handle_tool_call-967"><a href="#GetCellOutputTool.handle_tool_call-967"><span class="linenos">967</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="GetCellOutputTool.handle_tool_call-968"><a href="#GetCellOutputTool.handle_tool_call-968"><span class="linenos">968</span></a>
</span><span id="GetCellOutputTool.handle_tool_call-969"><a href="#GetCellOutputTool.handle_tool_call-969"><span class="linenos">969</span></a><span class="sd">        Args:</span>
</span><span id="GetCellOutputTool.handle_tool_call-970"><a href="#GetCellOutputTool.handle_tool_call-970"><span class="linenos">970</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCellOutputTool.handle_tool_call-971"><a href="#GetCellOutputTool.handle_tool_call-971"><span class="linenos">971</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="GetCellOutputTool.handle_tool_call-972"><a href="#GetCellOutputTool.handle_tool_call-972"><span class="linenos">972</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="GetCellOutputTool.handle_tool_call-973"><a href="#GetCellOutputTool.handle_tool_call-973"><span class="linenos">973</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCellOutputTool.handle_tool_call-974"><a href="#GetCellOutputTool.handle_tool_call-974"><span class="linenos">974</span></a>
</span><span id="GetCellOutputTool.handle_tool_call-975"><a href="#GetCellOutputTool.handle_tool_call-975"><span class="linenos">975</span></a><span class="sd">        Return:</span>
</span><span id="GetCellOutputTool.handle_tool_call-976"><a href="#GetCellOutputTool.handle_tool_call-976"><span class="linenos">976</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="GetCellOutputTool.handle_tool_call-977"><a href="#GetCellOutputTool.handle_tool_call-977"><span class="linenos">977</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCellOutputTool.handle_tool_call-978"><a href="#GetCellOutputTool.handle_tool_call-978"><span class="linenos">978</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="GetCellOutputTool.handle_tool_call-979"><a href="#GetCellOutputTool.handle_tool_call-979"><span class="linenos">979</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="GetCellOutputTool.handle_tool_call-980"><a href="#GetCellOutputTool.handle_tool_call-980"><span class="linenos">980</span></a>            <span class="s2">&quot;notebook-intelligence:get-cell-output&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">}</span>
</span><span id="GetCellOutputTool.handle_tool_call-981"><a href="#GetCellOutputTool.handle_tool_call-981"><span class="linenos">981</span></a>        <span class="p">)</span>
</span><span id="GetCellOutputTool.handle_tool_call-982"><a href="#GetCellOutputTool.handle_tool_call-982"><span class="linenos">982</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="SetCellTypeAndSourceTool">
                            <input id="SetCellTypeAndSourceTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SetCellTypeAndSourceTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="SetCellTypeAndSourceTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCellTypeAndSourceTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCellTypeAndSourceTool-985"><a href="#SetCellTypeAndSourceTool-985"><span class="linenos"> 985</span></a><span class="k">class</span><span class="w"> </span><span class="nc">SetCellTypeAndSourceTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="SetCellTypeAndSourceTool-986"><a href="#SetCellTypeAndSourceTool-986"><span class="linenos"> 986</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for setting the type and source of a cell at a specific index.&quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool-987"><a href="#SetCellTypeAndSourceTool-987"><span class="linenos"> 987</span></a>
</span><span id="SetCellTypeAndSourceTool-988"><a href="#SetCellTypeAndSourceTool-988"><span class="linenos"> 988</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool-989"><a href="#SetCellTypeAndSourceTool-989"><span class="linenos"> 989</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="SetCellTypeAndSourceTool-990"><a href="#SetCellTypeAndSourceTool-990"><span class="linenos"> 990</span></a>
</span><span id="SetCellTypeAndSourceTool-991"><a href="#SetCellTypeAndSourceTool-991"><span class="linenos"> 991</span></a><span class="sd">        Args:</span>
</span><span id="SetCellTypeAndSourceTool-992"><a href="#SetCellTypeAndSourceTool-992"><span class="linenos"> 992</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="SetCellTypeAndSourceTool-993"><a href="#SetCellTypeAndSourceTool-993"><span class="linenos"> 993</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool-994"><a href="#SetCellTypeAndSourceTool-994"><span class="linenos"> 994</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="SetCellTypeAndSourceTool-995"><a href="#SetCellTypeAndSourceTool-995"><span class="linenos"> 995</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="SetCellTypeAndSourceTool-996"><a href="#SetCellTypeAndSourceTool-996"><span class="linenos"> 996</span></a>
</span><span id="SetCellTypeAndSourceTool-997"><a href="#SetCellTypeAndSourceTool-997"><span class="linenos"> 997</span></a>    <span class="nd">@property</span>
</span><span id="SetCellTypeAndSourceTool-998"><a href="#SetCellTypeAndSourceTool-998"><span class="linenos"> 998</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool-999"><a href="#SetCellTypeAndSourceTool-999"><span class="linenos"> 999</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="SetCellTypeAndSourceTool-1000"><a href="#SetCellTypeAndSourceTool-1000"><span class="linenos">1000</span></a>
</span><span id="SetCellTypeAndSourceTool-1001"><a href="#SetCellTypeAndSourceTool-1001"><span class="linenos">1001</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool-1002"><a href="#SetCellTypeAndSourceTool-1002"><span class="linenos">1002</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="SetCellTypeAndSourceTool-1003"><a href="#SetCellTypeAndSourceTool-1003"><span class="linenos">1003</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool-1004"><a href="#SetCellTypeAndSourceTool-1004"><span class="linenos">1004</span></a>        <span class="k">return</span> <span class="s2">&quot;set_cell_type_and_source&quot;</span>
</span><span id="SetCellTypeAndSourceTool-1005"><a href="#SetCellTypeAndSourceTool-1005"><span class="linenos">1005</span></a>
</span><span id="SetCellTypeAndSourceTool-1006"><a href="#SetCellTypeAndSourceTool-1006"><span class="linenos">1006</span></a>    <span class="nd">@property</span>
</span><span id="SetCellTypeAndSourceTool-1007"><a href="#SetCellTypeAndSourceTool-1007"><span class="linenos">1007</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool-1008"><a href="#SetCellTypeAndSourceTool-1008"><span class="linenos">1008</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="SetCellTypeAndSourceTool-1009"><a href="#SetCellTypeAndSourceTool-1009"><span class="linenos">1009</span></a>
</span><span id="SetCellTypeAndSourceTool-1010"><a href="#SetCellTypeAndSourceTool-1010"><span class="linenos">1010</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool-1011"><a href="#SetCellTypeAndSourceTool-1011"><span class="linenos">1011</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="SetCellTypeAndSourceTool-1012"><a href="#SetCellTypeAndSourceTool-1012"><span class="linenos">1012</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool-1013"><a href="#SetCellTypeAndSourceTool-1013"><span class="linenos">1013</span></a>        <span class="k">return</span> <span class="s2">&quot;Set cell type and source at index&quot;</span>
</span><span id="SetCellTypeAndSourceTool-1014"><a href="#SetCellTypeAndSourceTool-1014"><span class="linenos">1014</span></a>
</span><span id="SetCellTypeAndSourceTool-1015"><a href="#SetCellTypeAndSourceTool-1015"><span class="linenos">1015</span></a>    <span class="nd">@property</span>
</span><span id="SetCellTypeAndSourceTool-1016"><a href="#SetCellTypeAndSourceTool-1016"><span class="linenos">1016</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="SetCellTypeAndSourceTool-1017"><a href="#SetCellTypeAndSourceTool-1017"><span class="linenos">1017</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="SetCellTypeAndSourceTool-1018"><a href="#SetCellTypeAndSourceTool-1018"><span class="linenos">1018</span></a>
</span><span id="SetCellTypeAndSourceTool-1019"><a href="#SetCellTypeAndSourceTool-1019"><span class="linenos">1019</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool-1020"><a href="#SetCellTypeAndSourceTool-1020"><span class="linenos">1020</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="SetCellTypeAndSourceTool-1021"><a href="#SetCellTypeAndSourceTool-1021"><span class="linenos">1021</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool-1022"><a href="#SetCellTypeAndSourceTool-1022"><span class="linenos">1022</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">]</span>
</span><span id="SetCellTypeAndSourceTool-1023"><a href="#SetCellTypeAndSourceTool-1023"><span class="linenos">1023</span></a>
</span><span id="SetCellTypeAndSourceTool-1024"><a href="#SetCellTypeAndSourceTool-1024"><span class="linenos">1024</span></a>    <span class="nd">@property</span>
</span><span id="SetCellTypeAndSourceTool-1025"><a href="#SetCellTypeAndSourceTool-1025"><span class="linenos">1025</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool-1026"><a href="#SetCellTypeAndSourceTool-1026"><span class="linenos">1026</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="SetCellTypeAndSourceTool-1027"><a href="#SetCellTypeAndSourceTool-1027"><span class="linenos">1027</span></a>
</span><span id="SetCellTypeAndSourceTool-1028"><a href="#SetCellTypeAndSourceTool-1028"><span class="linenos">1028</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool-1029"><a href="#SetCellTypeAndSourceTool-1029"><span class="linenos">1029</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="SetCellTypeAndSourceTool-1030"><a href="#SetCellTypeAndSourceTool-1030"><span class="linenos">1030</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool-1031"><a href="#SetCellTypeAndSourceTool-1031"><span class="linenos">1031</span></a>        <span class="k">return</span> <span class="s2">&quot;Sets the cell&#39;s type (&#39;code&#39; or &#39;markdown&#39;) and its source at the given index.&quot;</span>
</span><span id="SetCellTypeAndSourceTool-1032"><a href="#SetCellTypeAndSourceTool-1032"><span class="linenos">1032</span></a>
</span><span id="SetCellTypeAndSourceTool-1033"><a href="#SetCellTypeAndSourceTool-1033"><span class="linenos">1033</span></a>    <span class="nd">@property</span>
</span><span id="SetCellTypeAndSourceTool-1034"><a href="#SetCellTypeAndSourceTool-1034"><span class="linenos">1034</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool-1035"><a href="#SetCellTypeAndSourceTool-1035"><span class="linenos">1035</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="SetCellTypeAndSourceTool-1036"><a href="#SetCellTypeAndSourceTool-1036"><span class="linenos">1036</span></a>
</span><span id="SetCellTypeAndSourceTool-1037"><a href="#SetCellTypeAndSourceTool-1037"><span class="linenos">1037</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool-1038"><a href="#SetCellTypeAndSourceTool-1038"><span class="linenos">1038</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="SetCellTypeAndSourceTool-1039"><a href="#SetCellTypeAndSourceTool-1039"><span class="linenos">1039</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool-1040"><a href="#SetCellTypeAndSourceTool-1040"><span class="linenos">1040</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="SetCellTypeAndSourceTool-1041"><a href="#SetCellTypeAndSourceTool-1041"><span class="linenos">1041</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1042"><a href="#SetCellTypeAndSourceTool-1042"><span class="linenos">1042</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCellTypeAndSourceTool-1043"><a href="#SetCellTypeAndSourceTool-1043"><span class="linenos">1043</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1044"><a href="#SetCellTypeAndSourceTool-1044"><span class="linenos">1044</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1045"><a href="#SetCellTypeAndSourceTool-1045"><span class="linenos">1045</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1046"><a href="#SetCellTypeAndSourceTool-1046"><span class="linenos">1046</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCellTypeAndSourceTool-1047"><a href="#SetCellTypeAndSourceTool-1047"><span class="linenos">1047</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1048"><a href="#SetCellTypeAndSourceTool-1048"><span class="linenos">1048</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCellTypeAndSourceTool-1049"><a href="#SetCellTypeAndSourceTool-1049"><span class="linenos">1049</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell.&quot;</span><span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool-1050"><a href="#SetCellTypeAndSourceTool-1050"><span class="linenos">1050</span></a>                        <span class="s2">&quot;cell_type&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCellTypeAndSourceTool-1051"><a href="#SetCellTypeAndSourceTool-1051"><span class="linenos">1051</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1052"><a href="#SetCellTypeAndSourceTool-1052"><span class="linenos">1052</span></a>                            <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown&quot;</span><span class="p">],</span>
</span><span id="SetCellTypeAndSourceTool-1053"><a href="#SetCellTypeAndSourceTool-1053"><span class="linenos">1053</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Cell type to set.&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1054"><a href="#SetCellTypeAndSourceTool-1054"><span class="linenos">1054</span></a>                        <span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool-1055"><a href="#SetCellTypeAndSourceTool-1055"><span class="linenos">1055</span></a>                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Cell content (Python code or Markdown).&quot;</span><span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool-1056"><a href="#SetCellTypeAndSourceTool-1056"><span class="linenos">1056</span></a>                    <span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool-1057"><a href="#SetCellTypeAndSourceTool-1057"><span class="linenos">1057</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">,</span> <span class="s2">&quot;cell_type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">],</span>
</span><span id="SetCellTypeAndSourceTool-1058"><a href="#SetCellTypeAndSourceTool-1058"><span class="linenos">1058</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1059"><a href="#SetCellTypeAndSourceTool-1059"><span class="linenos">1059</span></a>                <span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool-1060"><a href="#SetCellTypeAndSourceTool-1060"><span class="linenos">1060</span></a>            <span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool-1061"><a href="#SetCellTypeAndSourceTool-1061"><span class="linenos">1061</span></a>        <span class="p">}</span>
</span><span id="SetCellTypeAndSourceTool-1062"><a href="#SetCellTypeAndSourceTool-1062"><span class="linenos">1062</span></a>
</span><span id="SetCellTypeAndSourceTool-1063"><a href="#SetCellTypeAndSourceTool-1063"><span class="linenos">1063</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool-1064"><a href="#SetCellTypeAndSourceTool-1064"><span class="linenos">1064</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="SetCellTypeAndSourceTool-1065"><a href="#SetCellTypeAndSourceTool-1065"><span class="linenos">1065</span></a>
</span><span id="SetCellTypeAndSourceTool-1066"><a href="#SetCellTypeAndSourceTool-1066"><span class="linenos">1066</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="SetCellTypeAndSourceTool-1067"><a href="#SetCellTypeAndSourceTool-1067"><span class="linenos">1067</span></a>
</span><span id="SetCellTypeAndSourceTool-1068"><a href="#SetCellTypeAndSourceTool-1068"><span class="linenos">1068</span></a><span class="sd">        Args:</span>
</span><span id="SetCellTypeAndSourceTool-1069"><a href="#SetCellTypeAndSourceTool-1069"><span class="linenos">1069</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SetCellTypeAndSourceTool-1070"><a href="#SetCellTypeAndSourceTool-1070"><span class="linenos">1070</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SetCellTypeAndSourceTool-1071"><a href="#SetCellTypeAndSourceTool-1071"><span class="linenos">1071</span></a>
</span><span id="SetCellTypeAndSourceTool-1072"><a href="#SetCellTypeAndSourceTool-1072"><span class="linenos">1072</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool-1073"><a href="#SetCellTypeAndSourceTool-1073"><span class="linenos">1073</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="SetCellTypeAndSourceTool-1074"><a href="#SetCellTypeAndSourceTool-1074"><span class="linenos">1074</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool-1075"><a href="#SetCellTypeAndSourceTool-1075"><span class="linenos">1075</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool-1076"><a href="#SetCellTypeAndSourceTool-1076"><span class="linenos">1076</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="SetCellTypeAndSourceTool-1077"><a href="#SetCellTypeAndSourceTool-1077"><span class="linenos">1077</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="SetCellTypeAndSourceTool-1078"><a href="#SetCellTypeAndSourceTool-1078"><span class="linenos">1078</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1079"><a href="#SetCellTypeAndSourceTool-1079"><span class="linenos">1079</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1080"><a href="#SetCellTypeAndSourceTool-1080"><span class="linenos">1080</span></a>            <span class="sa">f</span><span class="s2">&quot;Set cell </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> to type </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_type&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1081"><a href="#SetCellTypeAndSourceTool-1081"><span class="linenos">1081</span></a>        <span class="p">)</span>
</span><span id="SetCellTypeAndSourceTool-1082"><a href="#SetCellTypeAndSourceTool-1082"><span class="linenos">1082</span></a>
</span><span id="SetCellTypeAndSourceTool-1083"><a href="#SetCellTypeAndSourceTool-1083"><span class="linenos">1083</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="SetCellTypeAndSourceTool-1084"><a href="#SetCellTypeAndSourceTool-1084"><span class="linenos">1084</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="SetCellTypeAndSourceTool-1085"><a href="#SetCellTypeAndSourceTool-1085"><span class="linenos">1085</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool-1086"><a href="#SetCellTypeAndSourceTool-1086"><span class="linenos">1086</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="SetCellTypeAndSourceTool-1087"><a href="#SetCellTypeAndSourceTool-1087"><span class="linenos">1087</span></a>
</span><span id="SetCellTypeAndSourceTool-1088"><a href="#SetCellTypeAndSourceTool-1088"><span class="linenos">1088</span></a><span class="sd">        Args:</span>
</span><span id="SetCellTypeAndSourceTool-1089"><a href="#SetCellTypeAndSourceTool-1089"><span class="linenos">1089</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SetCellTypeAndSourceTool-1090"><a href="#SetCellTypeAndSourceTool-1090"><span class="linenos">1090</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="SetCellTypeAndSourceTool-1091"><a href="#SetCellTypeAndSourceTool-1091"><span class="linenos">1091</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="SetCellTypeAndSourceTool-1092"><a href="#SetCellTypeAndSourceTool-1092"><span class="linenos">1092</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SetCellTypeAndSourceTool-1093"><a href="#SetCellTypeAndSourceTool-1093"><span class="linenos">1093</span></a>
</span><span id="SetCellTypeAndSourceTool-1094"><a href="#SetCellTypeAndSourceTool-1094"><span class="linenos">1094</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool-1095"><a href="#SetCellTypeAndSourceTool-1095"><span class="linenos">1095</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="SetCellTypeAndSourceTool-1096"><a href="#SetCellTypeAndSourceTool-1096"><span class="linenos">1096</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool-1097"><a href="#SetCellTypeAndSourceTool-1097"><span class="linenos">1097</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="SetCellTypeAndSourceTool-1098"><a href="#SetCellTypeAndSourceTool-1098"><span class="linenos">1098</span></a>            <span class="s2">&quot;notebook-intelligence:set-cell-type-and-source&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool-1099"><a href="#SetCellTypeAndSourceTool-1099"><span class="linenos">1099</span></a>            <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span> <span class="s2">&quot;cellType&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">],</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]},</span>
</span><span id="SetCellTypeAndSourceTool-1100"><a href="#SetCellTypeAndSourceTool-1100"><span class="linenos">1100</span></a>        <span class="p">)</span>
</span><span id="SetCellTypeAndSourceTool-1101"><a href="#SetCellTypeAndSourceTool-1101"><span class="linenos">1101</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tool for setting the type and source of a cell at a specific index.</p>
</div>


                            <div id="SetCellTypeAndSourceTool.__init__" class="classattr">
                                        <input id="SetCellTypeAndSourceTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">SetCellTypeAndSourceTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="SetCellTypeAndSourceTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCellTypeAndSourceTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCellTypeAndSourceTool.__init__-988"><a href="#SetCellTypeAndSourceTool.__init__-988"><span class="linenos">988</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool.__init__-989"><a href="#SetCellTypeAndSourceTool.__init__-989"><span class="linenos">989</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="SetCellTypeAndSourceTool.__init__-990"><a href="#SetCellTypeAndSourceTool.__init__-990"><span class="linenos">990</span></a>
</span><span id="SetCellTypeAndSourceTool.__init__-991"><a href="#SetCellTypeAndSourceTool.__init__-991"><span class="linenos">991</span></a><span class="sd">        Args:</span>
</span><span id="SetCellTypeAndSourceTool.__init__-992"><a href="#SetCellTypeAndSourceTool.__init__-992"><span class="linenos">992</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="SetCellTypeAndSourceTool.__init__-993"><a href="#SetCellTypeAndSourceTool.__init__-993"><span class="linenos">993</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool.__init__-994"><a href="#SetCellTypeAndSourceTool.__init__-994"><span class="linenos">994</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="SetCellTypeAndSourceTool.__init__-995"><a href="#SetCellTypeAndSourceTool.__init__-995"><span class="linenos">995</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="SetCellTypeAndSourceTool.name" class="classattr">
                                        <input id="SetCellTypeAndSourceTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="SetCellTypeAndSourceTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCellTypeAndSourceTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCellTypeAndSourceTool.name-997"><a href="#SetCellTypeAndSourceTool.name-997"><span class="linenos"> 997</span></a>    <span class="nd">@property</span>
</span><span id="SetCellTypeAndSourceTool.name-998"><a href="#SetCellTypeAndSourceTool.name-998"><span class="linenos"> 998</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool.name-999"><a href="#SetCellTypeAndSourceTool.name-999"><span class="linenos"> 999</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="SetCellTypeAndSourceTool.name-1000"><a href="#SetCellTypeAndSourceTool.name-1000"><span class="linenos">1000</span></a>
</span><span id="SetCellTypeAndSourceTool.name-1001"><a href="#SetCellTypeAndSourceTool.name-1001"><span class="linenos">1001</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool.name-1002"><a href="#SetCellTypeAndSourceTool.name-1002"><span class="linenos">1002</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="SetCellTypeAndSourceTool.name-1003"><a href="#SetCellTypeAndSourceTool.name-1003"><span class="linenos">1003</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool.name-1004"><a href="#SetCellTypeAndSourceTool.name-1004"><span class="linenos">1004</span></a>        <span class="k">return</span> <span class="s2">&quot;set_cell_type_and_source&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCellTypeAndSourceTool.title" class="classattr">
                                        <input id="SetCellTypeAndSourceTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="SetCellTypeAndSourceTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCellTypeAndSourceTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCellTypeAndSourceTool.title-1006"><a href="#SetCellTypeAndSourceTool.title-1006"><span class="linenos">1006</span></a>    <span class="nd">@property</span>
</span><span id="SetCellTypeAndSourceTool.title-1007"><a href="#SetCellTypeAndSourceTool.title-1007"><span class="linenos">1007</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool.title-1008"><a href="#SetCellTypeAndSourceTool.title-1008"><span class="linenos">1008</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="SetCellTypeAndSourceTool.title-1009"><a href="#SetCellTypeAndSourceTool.title-1009"><span class="linenos">1009</span></a>
</span><span id="SetCellTypeAndSourceTool.title-1010"><a href="#SetCellTypeAndSourceTool.title-1010"><span class="linenos">1010</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool.title-1011"><a href="#SetCellTypeAndSourceTool.title-1011"><span class="linenos">1011</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="SetCellTypeAndSourceTool.title-1012"><a href="#SetCellTypeAndSourceTool.title-1012"><span class="linenos">1012</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool.title-1013"><a href="#SetCellTypeAndSourceTool.title-1013"><span class="linenos">1013</span></a>        <span class="k">return</span> <span class="s2">&quot;Set cell type and source at index&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCellTypeAndSourceTool.tags" class="classattr">
                                        <input id="SetCellTypeAndSourceTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="SetCellTypeAndSourceTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCellTypeAndSourceTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCellTypeAndSourceTool.tags-1015"><a href="#SetCellTypeAndSourceTool.tags-1015"><span class="linenos">1015</span></a>    <span class="nd">@property</span>
</span><span id="SetCellTypeAndSourceTool.tags-1016"><a href="#SetCellTypeAndSourceTool.tags-1016"><span class="linenos">1016</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="SetCellTypeAndSourceTool.tags-1017"><a href="#SetCellTypeAndSourceTool.tags-1017"><span class="linenos">1017</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="SetCellTypeAndSourceTool.tags-1018"><a href="#SetCellTypeAndSourceTool.tags-1018"><span class="linenos">1018</span></a>
</span><span id="SetCellTypeAndSourceTool.tags-1019"><a href="#SetCellTypeAndSourceTool.tags-1019"><span class="linenos">1019</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool.tags-1020"><a href="#SetCellTypeAndSourceTool.tags-1020"><span class="linenos">1020</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="SetCellTypeAndSourceTool.tags-1021"><a href="#SetCellTypeAndSourceTool.tags-1021"><span class="linenos">1021</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool.tags-1022"><a href="#SetCellTypeAndSourceTool.tags-1022"><span class="linenos">1022</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCellTypeAndSourceTool.description" class="classattr">
                                        <input id="SetCellTypeAndSourceTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="SetCellTypeAndSourceTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCellTypeAndSourceTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCellTypeAndSourceTool.description-1024"><a href="#SetCellTypeAndSourceTool.description-1024"><span class="linenos">1024</span></a>    <span class="nd">@property</span>
</span><span id="SetCellTypeAndSourceTool.description-1025"><a href="#SetCellTypeAndSourceTool.description-1025"><span class="linenos">1025</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool.description-1026"><a href="#SetCellTypeAndSourceTool.description-1026"><span class="linenos">1026</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="SetCellTypeAndSourceTool.description-1027"><a href="#SetCellTypeAndSourceTool.description-1027"><span class="linenos">1027</span></a>
</span><span id="SetCellTypeAndSourceTool.description-1028"><a href="#SetCellTypeAndSourceTool.description-1028"><span class="linenos">1028</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool.description-1029"><a href="#SetCellTypeAndSourceTool.description-1029"><span class="linenos">1029</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="SetCellTypeAndSourceTool.description-1030"><a href="#SetCellTypeAndSourceTool.description-1030"><span class="linenos">1030</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool.description-1031"><a href="#SetCellTypeAndSourceTool.description-1031"><span class="linenos">1031</span></a>        <span class="k">return</span> <span class="s2">&quot;Sets the cell&#39;s type (&#39;code&#39; or &#39;markdown&#39;) and its source at the given index.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCellTypeAndSourceTool.schema" class="classattr">
                                        <input id="SetCellTypeAndSourceTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="SetCellTypeAndSourceTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCellTypeAndSourceTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCellTypeAndSourceTool.schema-1033"><a href="#SetCellTypeAndSourceTool.schema-1033"><span class="linenos">1033</span></a>    <span class="nd">@property</span>
</span><span id="SetCellTypeAndSourceTool.schema-1034"><a href="#SetCellTypeAndSourceTool.schema-1034"><span class="linenos">1034</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool.schema-1035"><a href="#SetCellTypeAndSourceTool.schema-1035"><span class="linenos">1035</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="SetCellTypeAndSourceTool.schema-1036"><a href="#SetCellTypeAndSourceTool.schema-1036"><span class="linenos">1036</span></a>
</span><span id="SetCellTypeAndSourceTool.schema-1037"><a href="#SetCellTypeAndSourceTool.schema-1037"><span class="linenos">1037</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool.schema-1038"><a href="#SetCellTypeAndSourceTool.schema-1038"><span class="linenos">1038</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="SetCellTypeAndSourceTool.schema-1039"><a href="#SetCellTypeAndSourceTool.schema-1039"><span class="linenos">1039</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool.schema-1040"><a href="#SetCellTypeAndSourceTool.schema-1040"><span class="linenos">1040</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="SetCellTypeAndSourceTool.schema-1041"><a href="#SetCellTypeAndSourceTool.schema-1041"><span class="linenos">1041</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.schema-1042"><a href="#SetCellTypeAndSourceTool.schema-1042"><span class="linenos">1042</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCellTypeAndSourceTool.schema-1043"><a href="#SetCellTypeAndSourceTool.schema-1043"><span class="linenos">1043</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.schema-1044"><a href="#SetCellTypeAndSourceTool.schema-1044"><span class="linenos">1044</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.schema-1045"><a href="#SetCellTypeAndSourceTool.schema-1045"><span class="linenos">1045</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.schema-1046"><a href="#SetCellTypeAndSourceTool.schema-1046"><span class="linenos">1046</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCellTypeAndSourceTool.schema-1047"><a href="#SetCellTypeAndSourceTool.schema-1047"><span class="linenos">1047</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.schema-1048"><a href="#SetCellTypeAndSourceTool.schema-1048"><span class="linenos">1048</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCellTypeAndSourceTool.schema-1049"><a href="#SetCellTypeAndSourceTool.schema-1049"><span class="linenos">1049</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell.&quot;</span><span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool.schema-1050"><a href="#SetCellTypeAndSourceTool.schema-1050"><span class="linenos">1050</span></a>                        <span class="s2">&quot;cell_type&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCellTypeAndSourceTool.schema-1051"><a href="#SetCellTypeAndSourceTool.schema-1051"><span class="linenos">1051</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.schema-1052"><a href="#SetCellTypeAndSourceTool.schema-1052"><span class="linenos">1052</span></a>                            <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown&quot;</span><span class="p">],</span>
</span><span id="SetCellTypeAndSourceTool.schema-1053"><a href="#SetCellTypeAndSourceTool.schema-1053"><span class="linenos">1053</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Cell type to set.&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.schema-1054"><a href="#SetCellTypeAndSourceTool.schema-1054"><span class="linenos">1054</span></a>                        <span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool.schema-1055"><a href="#SetCellTypeAndSourceTool.schema-1055"><span class="linenos">1055</span></a>                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Cell content (Python code or Markdown).&quot;</span><span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool.schema-1056"><a href="#SetCellTypeAndSourceTool.schema-1056"><span class="linenos">1056</span></a>                    <span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool.schema-1057"><a href="#SetCellTypeAndSourceTool.schema-1057"><span class="linenos">1057</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">,</span> <span class="s2">&quot;cell_type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">],</span>
</span><span id="SetCellTypeAndSourceTool.schema-1058"><a href="#SetCellTypeAndSourceTool.schema-1058"><span class="linenos">1058</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.schema-1059"><a href="#SetCellTypeAndSourceTool.schema-1059"><span class="linenos">1059</span></a>                <span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool.schema-1060"><a href="#SetCellTypeAndSourceTool.schema-1060"><span class="linenos">1060</span></a>            <span class="p">},</span>
</span><span id="SetCellTypeAndSourceTool.schema-1061"><a href="#SetCellTypeAndSourceTool.schema-1061"><span class="linenos">1061</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Schema for the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCellTypeAndSourceTool.pre_invoke" class="classattr">
                                        <input id="SetCellTypeAndSourceTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="SetCellTypeAndSourceTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCellTypeAndSourceTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCellTypeAndSourceTool.pre_invoke-1063"><a href="#SetCellTypeAndSourceTool.pre_invoke-1063"><span class="linenos">1063</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1064"><a href="#SetCellTypeAndSourceTool.pre_invoke-1064"><span class="linenos">1064</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1065"><a href="#SetCellTypeAndSourceTool.pre_invoke-1065"><span class="linenos">1065</span></a>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1066"><a href="#SetCellTypeAndSourceTool.pre_invoke-1066"><span class="linenos">1066</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1067"><a href="#SetCellTypeAndSourceTool.pre_invoke-1067"><span class="linenos">1067</span></a>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1068"><a href="#SetCellTypeAndSourceTool.pre_invoke-1068"><span class="linenos">1068</span></a><span class="sd">        Args:</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1069"><a href="#SetCellTypeAndSourceTool.pre_invoke-1069"><span class="linenos">1069</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1070"><a href="#SetCellTypeAndSourceTool.pre_invoke-1070"><span class="linenos">1070</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1071"><a href="#SetCellTypeAndSourceTool.pre_invoke-1071"><span class="linenos">1071</span></a>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1072"><a href="#SetCellTypeAndSourceTool.pre_invoke-1072"><span class="linenos">1072</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1073"><a href="#SetCellTypeAndSourceTool.pre_invoke-1073"><span class="linenos">1073</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1074"><a href="#SetCellTypeAndSourceTool.pre_invoke-1074"><span class="linenos">1074</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1075"><a href="#SetCellTypeAndSourceTool.pre_invoke-1075"><span class="linenos">1075</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1076"><a href="#SetCellTypeAndSourceTool.pre_invoke-1076"><span class="linenos">1076</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1077"><a href="#SetCellTypeAndSourceTool.pre_invoke-1077"><span class="linenos">1077</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1078"><a href="#SetCellTypeAndSourceTool.pre_invoke-1078"><span class="linenos">1078</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1079"><a href="#SetCellTypeAndSourceTool.pre_invoke-1079"><span class="linenos">1079</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1080"><a href="#SetCellTypeAndSourceTool.pre_invoke-1080"><span class="linenos">1080</span></a>            <span class="sa">f</span><span class="s2">&quot;Set cell </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> to type </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_type&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.pre_invoke-1081"><a href="#SetCellTypeAndSourceTool.pre_invoke-1081"><span class="linenos">1081</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCellTypeAndSourceTool.handle_tool_call" class="classattr">
                                        <input id="SetCellTypeAndSourceTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="SetCellTypeAndSourceTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCellTypeAndSourceTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCellTypeAndSourceTool.handle_tool_call-1083"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1083"><span class="linenos">1083</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1084"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1084"><span class="linenos">1084</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1085"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1085"><span class="linenos">1085</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1086"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1086"><span class="linenos">1086</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1087"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1087"><span class="linenos">1087</span></a>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1088"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1088"><span class="linenos">1088</span></a><span class="sd">        Args:</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1089"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1089"><span class="linenos">1089</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1090"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1090"><span class="linenos">1090</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1091"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1091"><span class="linenos">1091</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1092"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1092"><span class="linenos">1092</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1093"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1093"><span class="linenos">1093</span></a>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1094"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1094"><span class="linenos">1094</span></a><span class="sd">        Return:</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1095"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1095"><span class="linenos">1095</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1096"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1096"><span class="linenos">1096</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1097"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1097"><span class="linenos">1097</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1098"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1098"><span class="linenos">1098</span></a>            <span class="s2">&quot;notebook-intelligence:set-cell-type-and-source&quot;</span><span class="p">,</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1099"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1099"><span class="linenos">1099</span></a>            <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span> <span class="s2">&quot;cellType&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">],</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]},</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1100"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1100"><span class="linenos">1100</span></a>        <span class="p">)</span>
</span><span id="SetCellTypeAndSourceTool.handle_tool_call-1101"><a href="#SetCellTypeAndSourceTool.handle_tool_call-1101"><span class="linenos">1101</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="DeleteCellAtIndexTool">
                            <input id="DeleteCellAtIndexTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">DeleteCellAtIndexTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="DeleteCellAtIndexTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeleteCellAtIndexTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeleteCellAtIndexTool-1104"><a href="#DeleteCellAtIndexTool-1104"><span class="linenos">1104</span></a><span class="k">class</span><span class="w"> </span><span class="nc">DeleteCellAtIndexTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="DeleteCellAtIndexTool-1105"><a href="#DeleteCellAtIndexTool-1105"><span class="linenos">1105</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for deleting a cell at a specific index.&quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool-1106"><a href="#DeleteCellAtIndexTool-1106"><span class="linenos">1106</span></a>
</span><span id="DeleteCellAtIndexTool-1107"><a href="#DeleteCellAtIndexTool-1107"><span class="linenos">1107</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool-1108"><a href="#DeleteCellAtIndexTool-1108"><span class="linenos">1108</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="DeleteCellAtIndexTool-1109"><a href="#DeleteCellAtIndexTool-1109"><span class="linenos">1109</span></a>
</span><span id="DeleteCellAtIndexTool-1110"><a href="#DeleteCellAtIndexTool-1110"><span class="linenos">1110</span></a><span class="sd">        Args:</span>
</span><span id="DeleteCellAtIndexTool-1111"><a href="#DeleteCellAtIndexTool-1111"><span class="linenos">1111</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="DeleteCellAtIndexTool-1112"><a href="#DeleteCellAtIndexTool-1112"><span class="linenos">1112</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool-1113"><a href="#DeleteCellAtIndexTool-1113"><span class="linenos">1113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="DeleteCellAtIndexTool-1114"><a href="#DeleteCellAtIndexTool-1114"><span class="linenos">1114</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="DeleteCellAtIndexTool-1115"><a href="#DeleteCellAtIndexTool-1115"><span class="linenos">1115</span></a>
</span><span id="DeleteCellAtIndexTool-1116"><a href="#DeleteCellAtIndexTool-1116"><span class="linenos">1116</span></a>    <span class="nd">@property</span>
</span><span id="DeleteCellAtIndexTool-1117"><a href="#DeleteCellAtIndexTool-1117"><span class="linenos">1117</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool-1118"><a href="#DeleteCellAtIndexTool-1118"><span class="linenos">1118</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="DeleteCellAtIndexTool-1119"><a href="#DeleteCellAtIndexTool-1119"><span class="linenos">1119</span></a>
</span><span id="DeleteCellAtIndexTool-1120"><a href="#DeleteCellAtIndexTool-1120"><span class="linenos">1120</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool-1121"><a href="#DeleteCellAtIndexTool-1121"><span class="linenos">1121</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="DeleteCellAtIndexTool-1122"><a href="#DeleteCellAtIndexTool-1122"><span class="linenos">1122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool-1123"><a href="#DeleteCellAtIndexTool-1123"><span class="linenos">1123</span></a>        <span class="k">return</span> <span class="s2">&quot;delete_cell_at_index&quot;</span>
</span><span id="DeleteCellAtIndexTool-1124"><a href="#DeleteCellAtIndexTool-1124"><span class="linenos">1124</span></a>
</span><span id="DeleteCellAtIndexTool-1125"><a href="#DeleteCellAtIndexTool-1125"><span class="linenos">1125</span></a>    <span class="nd">@property</span>
</span><span id="DeleteCellAtIndexTool-1126"><a href="#DeleteCellAtIndexTool-1126"><span class="linenos">1126</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool-1127"><a href="#DeleteCellAtIndexTool-1127"><span class="linenos">1127</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="DeleteCellAtIndexTool-1128"><a href="#DeleteCellAtIndexTool-1128"><span class="linenos">1128</span></a>
</span><span id="DeleteCellAtIndexTool-1129"><a href="#DeleteCellAtIndexTool-1129"><span class="linenos">1129</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool-1130"><a href="#DeleteCellAtIndexTool-1130"><span class="linenos">1130</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="DeleteCellAtIndexTool-1131"><a href="#DeleteCellAtIndexTool-1131"><span class="linenos">1131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool-1132"><a href="#DeleteCellAtIndexTool-1132"><span class="linenos">1132</span></a>        <span class="k">return</span> <span class="s2">&quot;Delete cell at index&quot;</span>
</span><span id="DeleteCellAtIndexTool-1133"><a href="#DeleteCellAtIndexTool-1133"><span class="linenos">1133</span></a>
</span><span id="DeleteCellAtIndexTool-1134"><a href="#DeleteCellAtIndexTool-1134"><span class="linenos">1134</span></a>    <span class="nd">@property</span>
</span><span id="DeleteCellAtIndexTool-1135"><a href="#DeleteCellAtIndexTool-1135"><span class="linenos">1135</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="DeleteCellAtIndexTool-1136"><a href="#DeleteCellAtIndexTool-1136"><span class="linenos">1136</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="DeleteCellAtIndexTool-1137"><a href="#DeleteCellAtIndexTool-1137"><span class="linenos">1137</span></a>
</span><span id="DeleteCellAtIndexTool-1138"><a href="#DeleteCellAtIndexTool-1138"><span class="linenos">1138</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool-1139"><a href="#DeleteCellAtIndexTool-1139"><span class="linenos">1139</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="DeleteCellAtIndexTool-1140"><a href="#DeleteCellAtIndexTool-1140"><span class="linenos">1140</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool-1141"><a href="#DeleteCellAtIndexTool-1141"><span class="linenos">1141</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell deletion&quot;</span><span class="p">]</span>
</span><span id="DeleteCellAtIndexTool-1142"><a href="#DeleteCellAtIndexTool-1142"><span class="linenos">1142</span></a>
</span><span id="DeleteCellAtIndexTool-1143"><a href="#DeleteCellAtIndexTool-1143"><span class="linenos">1143</span></a>    <span class="nd">@property</span>
</span><span id="DeleteCellAtIndexTool-1144"><a href="#DeleteCellAtIndexTool-1144"><span class="linenos">1144</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool-1145"><a href="#DeleteCellAtIndexTool-1145"><span class="linenos">1145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="DeleteCellAtIndexTool-1146"><a href="#DeleteCellAtIndexTool-1146"><span class="linenos">1146</span></a>
</span><span id="DeleteCellAtIndexTool-1147"><a href="#DeleteCellAtIndexTool-1147"><span class="linenos">1147</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool-1148"><a href="#DeleteCellAtIndexTool-1148"><span class="linenos">1148</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="DeleteCellAtIndexTool-1149"><a href="#DeleteCellAtIndexTool-1149"><span class="linenos">1149</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool-1150"><a href="#DeleteCellAtIndexTool-1150"><span class="linenos">1150</span></a>        <span class="k">return</span> <span class="s2">&quot;Deletes the cell at the given index in the ACTIVE notebook.&quot;</span>
</span><span id="DeleteCellAtIndexTool-1151"><a href="#DeleteCellAtIndexTool-1151"><span class="linenos">1151</span></a>
</span><span id="DeleteCellAtIndexTool-1152"><a href="#DeleteCellAtIndexTool-1152"><span class="linenos">1152</span></a>    <span class="nd">@property</span>
</span><span id="DeleteCellAtIndexTool-1153"><a href="#DeleteCellAtIndexTool-1153"><span class="linenos">1153</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool-1154"><a href="#DeleteCellAtIndexTool-1154"><span class="linenos">1154</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="DeleteCellAtIndexTool-1155"><a href="#DeleteCellAtIndexTool-1155"><span class="linenos">1155</span></a>
</span><span id="DeleteCellAtIndexTool-1156"><a href="#DeleteCellAtIndexTool-1156"><span class="linenos">1156</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool-1157"><a href="#DeleteCellAtIndexTool-1157"><span class="linenos">1157</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="DeleteCellAtIndexTool-1158"><a href="#DeleteCellAtIndexTool-1158"><span class="linenos">1158</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool-1159"><a href="#DeleteCellAtIndexTool-1159"><span class="linenos">1159</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="DeleteCellAtIndexTool-1160"><a href="#DeleteCellAtIndexTool-1160"><span class="linenos">1160</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool-1161"><a href="#DeleteCellAtIndexTool-1161"><span class="linenos">1161</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DeleteCellAtIndexTool-1162"><a href="#DeleteCellAtIndexTool-1162"><span class="linenos">1162</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool-1163"><a href="#DeleteCellAtIndexTool-1163"><span class="linenos">1163</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool-1164"><a href="#DeleteCellAtIndexTool-1164"><span class="linenos">1164</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool-1165"><a href="#DeleteCellAtIndexTool-1165"><span class="linenos">1165</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DeleteCellAtIndexTool-1166"><a href="#DeleteCellAtIndexTool-1166"><span class="linenos">1166</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool-1167"><a href="#DeleteCellAtIndexTool-1167"><span class="linenos">1167</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DeleteCellAtIndexTool-1168"><a href="#DeleteCellAtIndexTool-1168"><span class="linenos">1168</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DeleteCellAtIndexTool-1169"><a href="#DeleteCellAtIndexTool-1169"><span class="linenos">1169</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool-1170"><a href="#DeleteCellAtIndexTool-1170"><span class="linenos">1170</span></a>                            <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool-1171"><a href="#DeleteCellAtIndexTool-1171"><span class="linenos">1171</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell to delete.&quot;</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool-1172"><a href="#DeleteCellAtIndexTool-1172"><span class="linenos">1172</span></a>                        <span class="p">}</span>
</span><span id="DeleteCellAtIndexTool-1173"><a href="#DeleteCellAtIndexTool-1173"><span class="linenos">1173</span></a>                    <span class="p">},</span>
</span><span id="DeleteCellAtIndexTool-1174"><a href="#DeleteCellAtIndexTool-1174"><span class="linenos">1174</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="DeleteCellAtIndexTool-1175"><a href="#DeleteCellAtIndexTool-1175"><span class="linenos">1175</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool-1176"><a href="#DeleteCellAtIndexTool-1176"><span class="linenos">1176</span></a>                <span class="p">},</span>
</span><span id="DeleteCellAtIndexTool-1177"><a href="#DeleteCellAtIndexTool-1177"><span class="linenos">1177</span></a>            <span class="p">},</span>
</span><span id="DeleteCellAtIndexTool-1178"><a href="#DeleteCellAtIndexTool-1178"><span class="linenos">1178</span></a>        <span class="p">}</span>
</span><span id="DeleteCellAtIndexTool-1179"><a href="#DeleteCellAtIndexTool-1179"><span class="linenos">1179</span></a>
</span><span id="DeleteCellAtIndexTool-1180"><a href="#DeleteCellAtIndexTool-1180"><span class="linenos">1180</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool-1181"><a href="#DeleteCellAtIndexTool-1181"><span class="linenos">1181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="DeleteCellAtIndexTool-1182"><a href="#DeleteCellAtIndexTool-1182"><span class="linenos">1182</span></a>
</span><span id="DeleteCellAtIndexTool-1183"><a href="#DeleteCellAtIndexTool-1183"><span class="linenos">1183</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="DeleteCellAtIndexTool-1184"><a href="#DeleteCellAtIndexTool-1184"><span class="linenos">1184</span></a>
</span><span id="DeleteCellAtIndexTool-1185"><a href="#DeleteCellAtIndexTool-1185"><span class="linenos">1185</span></a><span class="sd">        Args:</span>
</span><span id="DeleteCellAtIndexTool-1186"><a href="#DeleteCellAtIndexTool-1186"><span class="linenos">1186</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="DeleteCellAtIndexTool-1187"><a href="#DeleteCellAtIndexTool-1187"><span class="linenos">1187</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="DeleteCellAtIndexTool-1188"><a href="#DeleteCellAtIndexTool-1188"><span class="linenos">1188</span></a>
</span><span id="DeleteCellAtIndexTool-1189"><a href="#DeleteCellAtIndexTool-1189"><span class="linenos">1189</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool-1190"><a href="#DeleteCellAtIndexTool-1190"><span class="linenos">1190</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="DeleteCellAtIndexTool-1191"><a href="#DeleteCellAtIndexTool-1191"><span class="linenos">1191</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool-1192"><a href="#DeleteCellAtIndexTool-1192"><span class="linenos">1192</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool-1193"><a href="#DeleteCellAtIndexTool-1193"><span class="linenos">1193</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="DeleteCellAtIndexTool-1194"><a href="#DeleteCellAtIndexTool-1194"><span class="linenos">1194</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="DeleteCellAtIndexTool-1195"><a href="#DeleteCellAtIndexTool-1195"><span class="linenos">1195</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Delete the cell at index </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span>
</span><span id="DeleteCellAtIndexTool-1196"><a href="#DeleteCellAtIndexTool-1196"><span class="linenos">1196</span></a>        <span class="p">)</span>
</span><span id="DeleteCellAtIndexTool-1197"><a href="#DeleteCellAtIndexTool-1197"><span class="linenos">1197</span></a>
</span><span id="DeleteCellAtIndexTool-1198"><a href="#DeleteCellAtIndexTool-1198"><span class="linenos">1198</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="DeleteCellAtIndexTool-1199"><a href="#DeleteCellAtIndexTool-1199"><span class="linenos">1199</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="DeleteCellAtIndexTool-1200"><a href="#DeleteCellAtIndexTool-1200"><span class="linenos">1200</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool-1201"><a href="#DeleteCellAtIndexTool-1201"><span class="linenos">1201</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="DeleteCellAtIndexTool-1202"><a href="#DeleteCellAtIndexTool-1202"><span class="linenos">1202</span></a>
</span><span id="DeleteCellAtIndexTool-1203"><a href="#DeleteCellAtIndexTool-1203"><span class="linenos">1203</span></a><span class="sd">        Args:</span>
</span><span id="DeleteCellAtIndexTool-1204"><a href="#DeleteCellAtIndexTool-1204"><span class="linenos">1204</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="DeleteCellAtIndexTool-1205"><a href="#DeleteCellAtIndexTool-1205"><span class="linenos">1205</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="DeleteCellAtIndexTool-1206"><a href="#DeleteCellAtIndexTool-1206"><span class="linenos">1206</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="DeleteCellAtIndexTool-1207"><a href="#DeleteCellAtIndexTool-1207"><span class="linenos">1207</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="DeleteCellAtIndexTool-1208"><a href="#DeleteCellAtIndexTool-1208"><span class="linenos">1208</span></a>
</span><span id="DeleteCellAtIndexTool-1209"><a href="#DeleteCellAtIndexTool-1209"><span class="linenos">1209</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool-1210"><a href="#DeleteCellAtIndexTool-1210"><span class="linenos">1210</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="DeleteCellAtIndexTool-1211"><a href="#DeleteCellAtIndexTool-1211"><span class="linenos">1211</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool-1212"><a href="#DeleteCellAtIndexTool-1212"><span class="linenos">1212</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="DeleteCellAtIndexTool-1213"><a href="#DeleteCellAtIndexTool-1213"><span class="linenos">1213</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:delete-cell-at-index&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">})</span>
</span><span id="DeleteCellAtIndexTool-1214"><a href="#DeleteCellAtIndexTool-1214"><span class="linenos">1214</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Deleted the cell at index: </span><span class="si">{</span><span class="n">cell_index</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Tool for deleting a cell at a specific index.</p>
</div>


                            <div id="DeleteCellAtIndexTool.__init__" class="classattr">
                                        <input id="DeleteCellAtIndexTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">DeleteCellAtIndexTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="DeleteCellAtIndexTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeleteCellAtIndexTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeleteCellAtIndexTool.__init__-1107"><a href="#DeleteCellAtIndexTool.__init__-1107"><span class="linenos">1107</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool.__init__-1108"><a href="#DeleteCellAtIndexTool.__init__-1108"><span class="linenos">1108</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="DeleteCellAtIndexTool.__init__-1109"><a href="#DeleteCellAtIndexTool.__init__-1109"><span class="linenos">1109</span></a>
</span><span id="DeleteCellAtIndexTool.__init__-1110"><a href="#DeleteCellAtIndexTool.__init__-1110"><span class="linenos">1110</span></a><span class="sd">        Args:</span>
</span><span id="DeleteCellAtIndexTool.__init__-1111"><a href="#DeleteCellAtIndexTool.__init__-1111"><span class="linenos">1111</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="DeleteCellAtIndexTool.__init__-1112"><a href="#DeleteCellAtIndexTool.__init__-1112"><span class="linenos">1112</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool.__init__-1113"><a href="#DeleteCellAtIndexTool.__init__-1113"><span class="linenos">1113</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="DeleteCellAtIndexTool.__init__-1114"><a href="#DeleteCellAtIndexTool.__init__-1114"><span class="linenos">1114</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="DeleteCellAtIndexTool.name" class="classattr">
                                        <input id="DeleteCellAtIndexTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="DeleteCellAtIndexTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeleteCellAtIndexTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeleteCellAtIndexTool.name-1116"><a href="#DeleteCellAtIndexTool.name-1116"><span class="linenos">1116</span></a>    <span class="nd">@property</span>
</span><span id="DeleteCellAtIndexTool.name-1117"><a href="#DeleteCellAtIndexTool.name-1117"><span class="linenos">1117</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool.name-1118"><a href="#DeleteCellAtIndexTool.name-1118"><span class="linenos">1118</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="DeleteCellAtIndexTool.name-1119"><a href="#DeleteCellAtIndexTool.name-1119"><span class="linenos">1119</span></a>
</span><span id="DeleteCellAtIndexTool.name-1120"><a href="#DeleteCellAtIndexTool.name-1120"><span class="linenos">1120</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool.name-1121"><a href="#DeleteCellAtIndexTool.name-1121"><span class="linenos">1121</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="DeleteCellAtIndexTool.name-1122"><a href="#DeleteCellAtIndexTool.name-1122"><span class="linenos">1122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool.name-1123"><a href="#DeleteCellAtIndexTool.name-1123"><span class="linenos">1123</span></a>        <span class="k">return</span> <span class="s2">&quot;delete_cell_at_index&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="DeleteCellAtIndexTool.title" class="classattr">
                                        <input id="DeleteCellAtIndexTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="DeleteCellAtIndexTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeleteCellAtIndexTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeleteCellAtIndexTool.title-1125"><a href="#DeleteCellAtIndexTool.title-1125"><span class="linenos">1125</span></a>    <span class="nd">@property</span>
</span><span id="DeleteCellAtIndexTool.title-1126"><a href="#DeleteCellAtIndexTool.title-1126"><span class="linenos">1126</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool.title-1127"><a href="#DeleteCellAtIndexTool.title-1127"><span class="linenos">1127</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="DeleteCellAtIndexTool.title-1128"><a href="#DeleteCellAtIndexTool.title-1128"><span class="linenos">1128</span></a>
</span><span id="DeleteCellAtIndexTool.title-1129"><a href="#DeleteCellAtIndexTool.title-1129"><span class="linenos">1129</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool.title-1130"><a href="#DeleteCellAtIndexTool.title-1130"><span class="linenos">1130</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="DeleteCellAtIndexTool.title-1131"><a href="#DeleteCellAtIndexTool.title-1131"><span class="linenos">1131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool.title-1132"><a href="#DeleteCellAtIndexTool.title-1132"><span class="linenos">1132</span></a>        <span class="k">return</span> <span class="s2">&quot;Delete cell at index&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="DeleteCellAtIndexTool.tags" class="classattr">
                                        <input id="DeleteCellAtIndexTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="DeleteCellAtIndexTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeleteCellAtIndexTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeleteCellAtIndexTool.tags-1134"><a href="#DeleteCellAtIndexTool.tags-1134"><span class="linenos">1134</span></a>    <span class="nd">@property</span>
</span><span id="DeleteCellAtIndexTool.tags-1135"><a href="#DeleteCellAtIndexTool.tags-1135"><span class="linenos">1135</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="DeleteCellAtIndexTool.tags-1136"><a href="#DeleteCellAtIndexTool.tags-1136"><span class="linenos">1136</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="DeleteCellAtIndexTool.tags-1137"><a href="#DeleteCellAtIndexTool.tags-1137"><span class="linenos">1137</span></a>
</span><span id="DeleteCellAtIndexTool.tags-1138"><a href="#DeleteCellAtIndexTool.tags-1138"><span class="linenos">1138</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool.tags-1139"><a href="#DeleteCellAtIndexTool.tags-1139"><span class="linenos">1139</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="DeleteCellAtIndexTool.tags-1140"><a href="#DeleteCellAtIndexTool.tags-1140"><span class="linenos">1140</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool.tags-1141"><a href="#DeleteCellAtIndexTool.tags-1141"><span class="linenos">1141</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell deletion&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="DeleteCellAtIndexTool.description" class="classattr">
                                        <input id="DeleteCellAtIndexTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="DeleteCellAtIndexTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeleteCellAtIndexTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeleteCellAtIndexTool.description-1143"><a href="#DeleteCellAtIndexTool.description-1143"><span class="linenos">1143</span></a>    <span class="nd">@property</span>
</span><span id="DeleteCellAtIndexTool.description-1144"><a href="#DeleteCellAtIndexTool.description-1144"><span class="linenos">1144</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool.description-1145"><a href="#DeleteCellAtIndexTool.description-1145"><span class="linenos">1145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="DeleteCellAtIndexTool.description-1146"><a href="#DeleteCellAtIndexTool.description-1146"><span class="linenos">1146</span></a>
</span><span id="DeleteCellAtIndexTool.description-1147"><a href="#DeleteCellAtIndexTool.description-1147"><span class="linenos">1147</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool.description-1148"><a href="#DeleteCellAtIndexTool.description-1148"><span class="linenos">1148</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="DeleteCellAtIndexTool.description-1149"><a href="#DeleteCellAtIndexTool.description-1149"><span class="linenos">1149</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool.description-1150"><a href="#DeleteCellAtIndexTool.description-1150"><span class="linenos">1150</span></a>        <span class="k">return</span> <span class="s2">&quot;Deletes the cell at the given index in the ACTIVE notebook.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="DeleteCellAtIndexTool.schema" class="classattr">
                                        <input id="DeleteCellAtIndexTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="DeleteCellAtIndexTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeleteCellAtIndexTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeleteCellAtIndexTool.schema-1152"><a href="#DeleteCellAtIndexTool.schema-1152"><span class="linenos">1152</span></a>    <span class="nd">@property</span>
</span><span id="DeleteCellAtIndexTool.schema-1153"><a href="#DeleteCellAtIndexTool.schema-1153"><span class="linenos">1153</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool.schema-1154"><a href="#DeleteCellAtIndexTool.schema-1154"><span class="linenos">1154</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="DeleteCellAtIndexTool.schema-1155"><a href="#DeleteCellAtIndexTool.schema-1155"><span class="linenos">1155</span></a>
</span><span id="DeleteCellAtIndexTool.schema-1156"><a href="#DeleteCellAtIndexTool.schema-1156"><span class="linenos">1156</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool.schema-1157"><a href="#DeleteCellAtIndexTool.schema-1157"><span class="linenos">1157</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="DeleteCellAtIndexTool.schema-1158"><a href="#DeleteCellAtIndexTool.schema-1158"><span class="linenos">1158</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool.schema-1159"><a href="#DeleteCellAtIndexTool.schema-1159"><span class="linenos">1159</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="DeleteCellAtIndexTool.schema-1160"><a href="#DeleteCellAtIndexTool.schema-1160"><span class="linenos">1160</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool.schema-1161"><a href="#DeleteCellAtIndexTool.schema-1161"><span class="linenos">1161</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DeleteCellAtIndexTool.schema-1162"><a href="#DeleteCellAtIndexTool.schema-1162"><span class="linenos">1162</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool.schema-1163"><a href="#DeleteCellAtIndexTool.schema-1163"><span class="linenos">1163</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool.schema-1164"><a href="#DeleteCellAtIndexTool.schema-1164"><span class="linenos">1164</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool.schema-1165"><a href="#DeleteCellAtIndexTool.schema-1165"><span class="linenos">1165</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DeleteCellAtIndexTool.schema-1166"><a href="#DeleteCellAtIndexTool.schema-1166"><span class="linenos">1166</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool.schema-1167"><a href="#DeleteCellAtIndexTool.schema-1167"><span class="linenos">1167</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DeleteCellAtIndexTool.schema-1168"><a href="#DeleteCellAtIndexTool.schema-1168"><span class="linenos">1168</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="DeleteCellAtIndexTool.schema-1169"><a href="#DeleteCellAtIndexTool.schema-1169"><span class="linenos">1169</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool.schema-1170"><a href="#DeleteCellAtIndexTool.schema-1170"><span class="linenos">1170</span></a>                            <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool.schema-1171"><a href="#DeleteCellAtIndexTool.schema-1171"><span class="linenos">1171</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index of the cell to delete.&quot;</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool.schema-1172"><a href="#DeleteCellAtIndexTool.schema-1172"><span class="linenos">1172</span></a>                        <span class="p">}</span>
</span><span id="DeleteCellAtIndexTool.schema-1173"><a href="#DeleteCellAtIndexTool.schema-1173"><span class="linenos">1173</span></a>                    <span class="p">},</span>
</span><span id="DeleteCellAtIndexTool.schema-1174"><a href="#DeleteCellAtIndexTool.schema-1174"><span class="linenos">1174</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span>
</span><span id="DeleteCellAtIndexTool.schema-1175"><a href="#DeleteCellAtIndexTool.schema-1175"><span class="linenos">1175</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="DeleteCellAtIndexTool.schema-1176"><a href="#DeleteCellAtIndexTool.schema-1176"><span class="linenos">1176</span></a>                <span class="p">},</span>
</span><span id="DeleteCellAtIndexTool.schema-1177"><a href="#DeleteCellAtIndexTool.schema-1177"><span class="linenos">1177</span></a>            <span class="p">},</span>
</span><span id="DeleteCellAtIndexTool.schema-1178"><a href="#DeleteCellAtIndexTool.schema-1178"><span class="linenos">1178</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Schema for the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="DeleteCellAtIndexTool.pre_invoke" class="classattr">
                                        <input id="DeleteCellAtIndexTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="DeleteCellAtIndexTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeleteCellAtIndexTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeleteCellAtIndexTool.pre_invoke-1180"><a href="#DeleteCellAtIndexTool.pre_invoke-1180"><span class="linenos">1180</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1181"><a href="#DeleteCellAtIndexTool.pre_invoke-1181"><span class="linenos">1181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1182"><a href="#DeleteCellAtIndexTool.pre_invoke-1182"><span class="linenos">1182</span></a>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1183"><a href="#DeleteCellAtIndexTool.pre_invoke-1183"><span class="linenos">1183</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1184"><a href="#DeleteCellAtIndexTool.pre_invoke-1184"><span class="linenos">1184</span></a>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1185"><a href="#DeleteCellAtIndexTool.pre_invoke-1185"><span class="linenos">1185</span></a><span class="sd">        Args:</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1186"><a href="#DeleteCellAtIndexTool.pre_invoke-1186"><span class="linenos">1186</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1187"><a href="#DeleteCellAtIndexTool.pre_invoke-1187"><span class="linenos">1187</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1188"><a href="#DeleteCellAtIndexTool.pre_invoke-1188"><span class="linenos">1188</span></a>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1189"><a href="#DeleteCellAtIndexTool.pre_invoke-1189"><span class="linenos">1189</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1190"><a href="#DeleteCellAtIndexTool.pre_invoke-1190"><span class="linenos">1190</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1191"><a href="#DeleteCellAtIndexTool.pre_invoke-1191"><span class="linenos">1191</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1192"><a href="#DeleteCellAtIndexTool.pre_invoke-1192"><span class="linenos">1192</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1193"><a href="#DeleteCellAtIndexTool.pre_invoke-1193"><span class="linenos">1193</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1194"><a href="#DeleteCellAtIndexTool.pre_invoke-1194"><span class="linenos">1194</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1195"><a href="#DeleteCellAtIndexTool.pre_invoke-1195"><span class="linenos">1195</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Delete the cell at index </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span>
</span><span id="DeleteCellAtIndexTool.pre_invoke-1196"><a href="#DeleteCellAtIndexTool.pre_invoke-1196"><span class="linenos">1196</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="DeleteCellAtIndexTool.handle_tool_call" class="classattr">
                                        <input id="DeleteCellAtIndexTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="DeleteCellAtIndexTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DeleteCellAtIndexTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DeleteCellAtIndexTool.handle_tool_call-1198"><a href="#DeleteCellAtIndexTool.handle_tool_call-1198"><span class="linenos">1198</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1199"><a href="#DeleteCellAtIndexTool.handle_tool_call-1199"><span class="linenos">1199</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1200"><a href="#DeleteCellAtIndexTool.handle_tool_call-1200"><span class="linenos">1200</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1201"><a href="#DeleteCellAtIndexTool.handle_tool_call-1201"><span class="linenos">1201</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1202"><a href="#DeleteCellAtIndexTool.handle_tool_call-1202"><span class="linenos">1202</span></a>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1203"><a href="#DeleteCellAtIndexTool.handle_tool_call-1203"><span class="linenos">1203</span></a><span class="sd">        Args:</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1204"><a href="#DeleteCellAtIndexTool.handle_tool_call-1204"><span class="linenos">1204</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1205"><a href="#DeleteCellAtIndexTool.handle_tool_call-1205"><span class="linenos">1205</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1206"><a href="#DeleteCellAtIndexTool.handle_tool_call-1206"><span class="linenos">1206</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1207"><a href="#DeleteCellAtIndexTool.handle_tool_call-1207"><span class="linenos">1207</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1208"><a href="#DeleteCellAtIndexTool.handle_tool_call-1208"><span class="linenos">1208</span></a>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1209"><a href="#DeleteCellAtIndexTool.handle_tool_call-1209"><span class="linenos">1209</span></a><span class="sd">        Return:</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1210"><a href="#DeleteCellAtIndexTool.handle_tool_call-1210"><span class="linenos">1210</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1211"><a href="#DeleteCellAtIndexTool.handle_tool_call-1211"><span class="linenos">1211</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1212"><a href="#DeleteCellAtIndexTool.handle_tool_call-1212"><span class="linenos">1212</span></a>        <span class="n">cell_index</span> <span class="o">=</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">]</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1213"><a href="#DeleteCellAtIndexTool.handle_tool_call-1213"><span class="linenos">1213</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:delete-cell-at-index&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">cell_index</span><span class="p">})</span>
</span><span id="DeleteCellAtIndexTool.handle_tool_call-1214"><a href="#DeleteCellAtIndexTool.handle_tool_call-1214"><span class="linenos">1214</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Deleted the cell at index: </span><span class="si">{</span><span class="n">cell_index</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="InsertCellAtIndexTool">
                            <input id="InsertCellAtIndexTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">InsertCellAtIndexTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="InsertCellAtIndexTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#InsertCellAtIndexTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="InsertCellAtIndexTool-1217"><a href="#InsertCellAtIndexTool-1217"><span class="linenos">1217</span></a><span class="k">class</span><span class="w"> </span><span class="nc">InsertCellAtIndexTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="InsertCellAtIndexTool-1218"><a href="#InsertCellAtIndexTool-1218"><span class="linenos">1218</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for inserting a new cell at a specific index.&quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool-1219"><a href="#InsertCellAtIndexTool-1219"><span class="linenos">1219</span></a>
</span><span id="InsertCellAtIndexTool-1220"><a href="#InsertCellAtIndexTool-1220"><span class="linenos">1220</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool-1221"><a href="#InsertCellAtIndexTool-1221"><span class="linenos">1221</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="InsertCellAtIndexTool-1222"><a href="#InsertCellAtIndexTool-1222"><span class="linenos">1222</span></a>
</span><span id="InsertCellAtIndexTool-1223"><a href="#InsertCellAtIndexTool-1223"><span class="linenos">1223</span></a><span class="sd">        Args:</span>
</span><span id="InsertCellAtIndexTool-1224"><a href="#InsertCellAtIndexTool-1224"><span class="linenos">1224</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="InsertCellAtIndexTool-1225"><a href="#InsertCellAtIndexTool-1225"><span class="linenos">1225</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool-1226"><a href="#InsertCellAtIndexTool-1226"><span class="linenos">1226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="InsertCellAtIndexTool-1227"><a href="#InsertCellAtIndexTool-1227"><span class="linenos">1227</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="InsertCellAtIndexTool-1228"><a href="#InsertCellAtIndexTool-1228"><span class="linenos">1228</span></a>
</span><span id="InsertCellAtIndexTool-1229"><a href="#InsertCellAtIndexTool-1229"><span class="linenos">1229</span></a>    <span class="nd">@property</span>
</span><span id="InsertCellAtIndexTool-1230"><a href="#InsertCellAtIndexTool-1230"><span class="linenos">1230</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool-1231"><a href="#InsertCellAtIndexTool-1231"><span class="linenos">1231</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="InsertCellAtIndexTool-1232"><a href="#InsertCellAtIndexTool-1232"><span class="linenos">1232</span></a>
</span><span id="InsertCellAtIndexTool-1233"><a href="#InsertCellAtIndexTool-1233"><span class="linenos">1233</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool-1234"><a href="#InsertCellAtIndexTool-1234"><span class="linenos">1234</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="InsertCellAtIndexTool-1235"><a href="#InsertCellAtIndexTool-1235"><span class="linenos">1235</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool-1236"><a href="#InsertCellAtIndexTool-1236"><span class="linenos">1236</span></a>        <span class="k">return</span> <span class="s2">&quot;insert_cell_at_index&quot;</span>
</span><span id="InsertCellAtIndexTool-1237"><a href="#InsertCellAtIndexTool-1237"><span class="linenos">1237</span></a>
</span><span id="InsertCellAtIndexTool-1238"><a href="#InsertCellAtIndexTool-1238"><span class="linenos">1238</span></a>    <span class="nd">@property</span>
</span><span id="InsertCellAtIndexTool-1239"><a href="#InsertCellAtIndexTool-1239"><span class="linenos">1239</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool-1240"><a href="#InsertCellAtIndexTool-1240"><span class="linenos">1240</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="InsertCellAtIndexTool-1241"><a href="#InsertCellAtIndexTool-1241"><span class="linenos">1241</span></a>
</span><span id="InsertCellAtIndexTool-1242"><a href="#InsertCellAtIndexTool-1242"><span class="linenos">1242</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool-1243"><a href="#InsertCellAtIndexTool-1243"><span class="linenos">1243</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="InsertCellAtIndexTool-1244"><a href="#InsertCellAtIndexTool-1244"><span class="linenos">1244</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool-1245"><a href="#InsertCellAtIndexTool-1245"><span class="linenos">1245</span></a>        <span class="k">return</span> <span class="s2">&quot;Insert a cell at index&quot;</span>
</span><span id="InsertCellAtIndexTool-1246"><a href="#InsertCellAtIndexTool-1246"><span class="linenos">1246</span></a>
</span><span id="InsertCellAtIndexTool-1247"><a href="#InsertCellAtIndexTool-1247"><span class="linenos">1247</span></a>    <span class="nd">@property</span>
</span><span id="InsertCellAtIndexTool-1248"><a href="#InsertCellAtIndexTool-1248"><span class="linenos">1248</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="InsertCellAtIndexTool-1249"><a href="#InsertCellAtIndexTool-1249"><span class="linenos">1249</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="InsertCellAtIndexTool-1250"><a href="#InsertCellAtIndexTool-1250"><span class="linenos">1250</span></a>
</span><span id="InsertCellAtIndexTool-1251"><a href="#InsertCellAtIndexTool-1251"><span class="linenos">1251</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool-1252"><a href="#InsertCellAtIndexTool-1252"><span class="linenos">1252</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="InsertCellAtIndexTool-1253"><a href="#InsertCellAtIndexTool-1253"><span class="linenos">1253</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool-1254"><a href="#InsertCellAtIndexTool-1254"><span class="linenos">1254</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell insertion&quot;</span><span class="p">]</span>
</span><span id="InsertCellAtIndexTool-1255"><a href="#InsertCellAtIndexTool-1255"><span class="linenos">1255</span></a>
</span><span id="InsertCellAtIndexTool-1256"><a href="#InsertCellAtIndexTool-1256"><span class="linenos">1256</span></a>    <span class="nd">@property</span>
</span><span id="InsertCellAtIndexTool-1257"><a href="#InsertCellAtIndexTool-1257"><span class="linenos">1257</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool-1258"><a href="#InsertCellAtIndexTool-1258"><span class="linenos">1258</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="InsertCellAtIndexTool-1259"><a href="#InsertCellAtIndexTool-1259"><span class="linenos">1259</span></a>
</span><span id="InsertCellAtIndexTool-1260"><a href="#InsertCellAtIndexTool-1260"><span class="linenos">1260</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool-1261"><a href="#InsertCellAtIndexTool-1261"><span class="linenos">1261</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="InsertCellAtIndexTool-1262"><a href="#InsertCellAtIndexTool-1262"><span class="linenos">1262</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool-1263"><a href="#InsertCellAtIndexTool-1263"><span class="linenos">1263</span></a>        <span class="k">return</span> <span class="s2">&quot;Inserts a new cell (code or markdown) with given source at the index.&quot;</span>
</span><span id="InsertCellAtIndexTool-1264"><a href="#InsertCellAtIndexTool-1264"><span class="linenos">1264</span></a>
</span><span id="InsertCellAtIndexTool-1265"><a href="#InsertCellAtIndexTool-1265"><span class="linenos">1265</span></a>    <span class="nd">@property</span>
</span><span id="InsertCellAtIndexTool-1266"><a href="#InsertCellAtIndexTool-1266"><span class="linenos">1266</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool-1267"><a href="#InsertCellAtIndexTool-1267"><span class="linenos">1267</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="InsertCellAtIndexTool-1268"><a href="#InsertCellAtIndexTool-1268"><span class="linenos">1268</span></a>
</span><span id="InsertCellAtIndexTool-1269"><a href="#InsertCellAtIndexTool-1269"><span class="linenos">1269</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool-1270"><a href="#InsertCellAtIndexTool-1270"><span class="linenos">1270</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="InsertCellAtIndexTool-1271"><a href="#InsertCellAtIndexTool-1271"><span class="linenos">1271</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool-1272"><a href="#InsertCellAtIndexTool-1272"><span class="linenos">1272</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool-1273"><a href="#InsertCellAtIndexTool-1273"><span class="linenos">1273</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1274"><a href="#InsertCellAtIndexTool-1274"><span class="linenos">1274</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool-1275"><a href="#InsertCellAtIndexTool-1275"><span class="linenos">1275</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1276"><a href="#InsertCellAtIndexTool-1276"><span class="linenos">1276</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1277"><a href="#InsertCellAtIndexTool-1277"><span class="linenos">1277</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1278"><a href="#InsertCellAtIndexTool-1278"><span class="linenos">1278</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool-1279"><a href="#InsertCellAtIndexTool-1279"><span class="linenos">1279</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1280"><a href="#InsertCellAtIndexTool-1280"><span class="linenos">1280</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool-1281"><a href="#InsertCellAtIndexTool-1281"><span class="linenos">1281</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool-1282"><a href="#InsertCellAtIndexTool-1282"><span class="linenos">1282</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1283"><a href="#InsertCellAtIndexTool-1283"><span class="linenos">1283</span></a>                            <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1284"><a href="#InsertCellAtIndexTool-1284"><span class="linenos">1284</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index where the new cell will be inserted.&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1285"><a href="#InsertCellAtIndexTool-1285"><span class="linenos">1285</span></a>                        <span class="p">},</span>
</span><span id="InsertCellAtIndexTool-1286"><a href="#InsertCellAtIndexTool-1286"><span class="linenos">1286</span></a>                        <span class="s2">&quot;cell_type&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool-1287"><a href="#InsertCellAtIndexTool-1287"><span class="linenos">1287</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1288"><a href="#InsertCellAtIndexTool-1288"><span class="linenos">1288</span></a>                            <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown&quot;</span><span class="p">],</span>
</span><span id="InsertCellAtIndexTool-1289"><a href="#InsertCellAtIndexTool-1289"><span class="linenos">1289</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Type of the new cell.&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1290"><a href="#InsertCellAtIndexTool-1290"><span class="linenos">1290</span></a>                        <span class="p">},</span>
</span><span id="InsertCellAtIndexTool-1291"><a href="#InsertCellAtIndexTool-1291"><span class="linenos">1291</span></a>                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Content for the new cell.&quot;</span><span class="p">},</span>
</span><span id="InsertCellAtIndexTool-1292"><a href="#InsertCellAtIndexTool-1292"><span class="linenos">1292</span></a>                    <span class="p">},</span>
</span><span id="InsertCellAtIndexTool-1293"><a href="#InsertCellAtIndexTool-1293"><span class="linenos">1293</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">,</span> <span class="s2">&quot;cell_type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">],</span>
</span><span id="InsertCellAtIndexTool-1294"><a href="#InsertCellAtIndexTool-1294"><span class="linenos">1294</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1295"><a href="#InsertCellAtIndexTool-1295"><span class="linenos">1295</span></a>                <span class="p">},</span>
</span><span id="InsertCellAtIndexTool-1296"><a href="#InsertCellAtIndexTool-1296"><span class="linenos">1296</span></a>            <span class="p">},</span>
</span><span id="InsertCellAtIndexTool-1297"><a href="#InsertCellAtIndexTool-1297"><span class="linenos">1297</span></a>        <span class="p">}</span>
</span><span id="InsertCellAtIndexTool-1298"><a href="#InsertCellAtIndexTool-1298"><span class="linenos">1298</span></a>
</span><span id="InsertCellAtIndexTool-1299"><a href="#InsertCellAtIndexTool-1299"><span class="linenos">1299</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool-1300"><a href="#InsertCellAtIndexTool-1300"><span class="linenos">1300</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="InsertCellAtIndexTool-1301"><a href="#InsertCellAtIndexTool-1301"><span class="linenos">1301</span></a>
</span><span id="InsertCellAtIndexTool-1302"><a href="#InsertCellAtIndexTool-1302"><span class="linenos">1302</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="InsertCellAtIndexTool-1303"><a href="#InsertCellAtIndexTool-1303"><span class="linenos">1303</span></a>
</span><span id="InsertCellAtIndexTool-1304"><a href="#InsertCellAtIndexTool-1304"><span class="linenos">1304</span></a><span class="sd">        Args:</span>
</span><span id="InsertCellAtIndexTool-1305"><a href="#InsertCellAtIndexTool-1305"><span class="linenos">1305</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="InsertCellAtIndexTool-1306"><a href="#InsertCellAtIndexTool-1306"><span class="linenos">1306</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="InsertCellAtIndexTool-1307"><a href="#InsertCellAtIndexTool-1307"><span class="linenos">1307</span></a>
</span><span id="InsertCellAtIndexTool-1308"><a href="#InsertCellAtIndexTool-1308"><span class="linenos">1308</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool-1309"><a href="#InsertCellAtIndexTool-1309"><span class="linenos">1309</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="InsertCellAtIndexTool-1310"><a href="#InsertCellAtIndexTool-1310"><span class="linenos">1310</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool-1311"><a href="#InsertCellAtIndexTool-1311"><span class="linenos">1311</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool-1312"><a href="#InsertCellAtIndexTool-1312"><span class="linenos">1312</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="InsertCellAtIndexTool-1313"><a href="#InsertCellAtIndexTool-1313"><span class="linenos">1313</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="InsertCellAtIndexTool-1314"><a href="#InsertCellAtIndexTool-1314"><span class="linenos">1314</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1315"><a href="#InsertCellAtIndexTool-1315"><span class="linenos">1315</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1316"><a href="#InsertCellAtIndexTool-1316"><span class="linenos">1316</span></a>            <span class="sa">f</span><span class="s2">&quot;Insert a </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_type&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> cell at index </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1317"><a href="#InsertCellAtIndexTool-1317"><span class="linenos">1317</span></a>        <span class="p">)</span>
</span><span id="InsertCellAtIndexTool-1318"><a href="#InsertCellAtIndexTool-1318"><span class="linenos">1318</span></a>
</span><span id="InsertCellAtIndexTool-1319"><a href="#InsertCellAtIndexTool-1319"><span class="linenos">1319</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="InsertCellAtIndexTool-1320"><a href="#InsertCellAtIndexTool-1320"><span class="linenos">1320</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="InsertCellAtIndexTool-1321"><a href="#InsertCellAtIndexTool-1321"><span class="linenos">1321</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool-1322"><a href="#InsertCellAtIndexTool-1322"><span class="linenos">1322</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="InsertCellAtIndexTool-1323"><a href="#InsertCellAtIndexTool-1323"><span class="linenos">1323</span></a>
</span><span id="InsertCellAtIndexTool-1324"><a href="#InsertCellAtIndexTool-1324"><span class="linenos">1324</span></a><span class="sd">        Args:</span>
</span><span id="InsertCellAtIndexTool-1325"><a href="#InsertCellAtIndexTool-1325"><span class="linenos">1325</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="InsertCellAtIndexTool-1326"><a href="#InsertCellAtIndexTool-1326"><span class="linenos">1326</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="InsertCellAtIndexTool-1327"><a href="#InsertCellAtIndexTool-1327"><span class="linenos">1327</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="InsertCellAtIndexTool-1328"><a href="#InsertCellAtIndexTool-1328"><span class="linenos">1328</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="InsertCellAtIndexTool-1329"><a href="#InsertCellAtIndexTool-1329"><span class="linenos">1329</span></a>
</span><span id="InsertCellAtIndexTool-1330"><a href="#InsertCellAtIndexTool-1330"><span class="linenos">1330</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool-1331"><a href="#InsertCellAtIndexTool-1331"><span class="linenos">1331</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="InsertCellAtIndexTool-1332"><a href="#InsertCellAtIndexTool-1332"><span class="linenos">1332</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool-1333"><a href="#InsertCellAtIndexTool-1333"><span class="linenos">1333</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="InsertCellAtIndexTool-1334"><a href="#InsertCellAtIndexTool-1334"><span class="linenos">1334</span></a>            <span class="s2">&quot;notebook-intelligence:insert-cell-at-index&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool-1335"><a href="#InsertCellAtIndexTool-1335"><span class="linenos">1335</span></a>            <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span> <span class="s2">&quot;cellType&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">],</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]},</span>
</span><span id="InsertCellAtIndexTool-1336"><a href="#InsertCellAtIndexTool-1336"><span class="linenos">1336</span></a>        <span class="p">)</span>
</span><span id="InsertCellAtIndexTool-1337"><a href="#InsertCellAtIndexTool-1337"><span class="linenos">1337</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tool for inserting a new cell at a specific index.</p>
</div>


                            <div id="InsertCellAtIndexTool.__init__" class="classattr">
                                        <input id="InsertCellAtIndexTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">InsertCellAtIndexTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="InsertCellAtIndexTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#InsertCellAtIndexTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="InsertCellAtIndexTool.__init__-1220"><a href="#InsertCellAtIndexTool.__init__-1220"><span class="linenos">1220</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool.__init__-1221"><a href="#InsertCellAtIndexTool.__init__-1221"><span class="linenos">1221</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="InsertCellAtIndexTool.__init__-1222"><a href="#InsertCellAtIndexTool.__init__-1222"><span class="linenos">1222</span></a>
</span><span id="InsertCellAtIndexTool.__init__-1223"><a href="#InsertCellAtIndexTool.__init__-1223"><span class="linenos">1223</span></a><span class="sd">        Args:</span>
</span><span id="InsertCellAtIndexTool.__init__-1224"><a href="#InsertCellAtIndexTool.__init__-1224"><span class="linenos">1224</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="InsertCellAtIndexTool.__init__-1225"><a href="#InsertCellAtIndexTool.__init__-1225"><span class="linenos">1225</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool.__init__-1226"><a href="#InsertCellAtIndexTool.__init__-1226"><span class="linenos">1226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="InsertCellAtIndexTool.__init__-1227"><a href="#InsertCellAtIndexTool.__init__-1227"><span class="linenos">1227</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="InsertCellAtIndexTool.name" class="classattr">
                                        <input id="InsertCellAtIndexTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="InsertCellAtIndexTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#InsertCellAtIndexTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="InsertCellAtIndexTool.name-1229"><a href="#InsertCellAtIndexTool.name-1229"><span class="linenos">1229</span></a>    <span class="nd">@property</span>
</span><span id="InsertCellAtIndexTool.name-1230"><a href="#InsertCellAtIndexTool.name-1230"><span class="linenos">1230</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool.name-1231"><a href="#InsertCellAtIndexTool.name-1231"><span class="linenos">1231</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="InsertCellAtIndexTool.name-1232"><a href="#InsertCellAtIndexTool.name-1232"><span class="linenos">1232</span></a>
</span><span id="InsertCellAtIndexTool.name-1233"><a href="#InsertCellAtIndexTool.name-1233"><span class="linenos">1233</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool.name-1234"><a href="#InsertCellAtIndexTool.name-1234"><span class="linenos">1234</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="InsertCellAtIndexTool.name-1235"><a href="#InsertCellAtIndexTool.name-1235"><span class="linenos">1235</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool.name-1236"><a href="#InsertCellAtIndexTool.name-1236"><span class="linenos">1236</span></a>        <span class="k">return</span> <span class="s2">&quot;insert_cell_at_index&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="InsertCellAtIndexTool.title" class="classattr">
                                        <input id="InsertCellAtIndexTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="InsertCellAtIndexTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#InsertCellAtIndexTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="InsertCellAtIndexTool.title-1238"><a href="#InsertCellAtIndexTool.title-1238"><span class="linenos">1238</span></a>    <span class="nd">@property</span>
</span><span id="InsertCellAtIndexTool.title-1239"><a href="#InsertCellAtIndexTool.title-1239"><span class="linenos">1239</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool.title-1240"><a href="#InsertCellAtIndexTool.title-1240"><span class="linenos">1240</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="InsertCellAtIndexTool.title-1241"><a href="#InsertCellAtIndexTool.title-1241"><span class="linenos">1241</span></a>
</span><span id="InsertCellAtIndexTool.title-1242"><a href="#InsertCellAtIndexTool.title-1242"><span class="linenos">1242</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool.title-1243"><a href="#InsertCellAtIndexTool.title-1243"><span class="linenos">1243</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="InsertCellAtIndexTool.title-1244"><a href="#InsertCellAtIndexTool.title-1244"><span class="linenos">1244</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool.title-1245"><a href="#InsertCellAtIndexTool.title-1245"><span class="linenos">1245</span></a>        <span class="k">return</span> <span class="s2">&quot;Insert a cell at index&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="InsertCellAtIndexTool.tags" class="classattr">
                                        <input id="InsertCellAtIndexTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="InsertCellAtIndexTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#InsertCellAtIndexTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="InsertCellAtIndexTool.tags-1247"><a href="#InsertCellAtIndexTool.tags-1247"><span class="linenos">1247</span></a>    <span class="nd">@property</span>
</span><span id="InsertCellAtIndexTool.tags-1248"><a href="#InsertCellAtIndexTool.tags-1248"><span class="linenos">1248</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="InsertCellAtIndexTool.tags-1249"><a href="#InsertCellAtIndexTool.tags-1249"><span class="linenos">1249</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="InsertCellAtIndexTool.tags-1250"><a href="#InsertCellAtIndexTool.tags-1250"><span class="linenos">1250</span></a>
</span><span id="InsertCellAtIndexTool.tags-1251"><a href="#InsertCellAtIndexTool.tags-1251"><span class="linenos">1251</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool.tags-1252"><a href="#InsertCellAtIndexTool.tags-1252"><span class="linenos">1252</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="InsertCellAtIndexTool.tags-1253"><a href="#InsertCellAtIndexTool.tags-1253"><span class="linenos">1253</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool.tags-1254"><a href="#InsertCellAtIndexTool.tags-1254"><span class="linenos">1254</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;cell insertion&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="InsertCellAtIndexTool.description" class="classattr">
                                        <input id="InsertCellAtIndexTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="InsertCellAtIndexTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#InsertCellAtIndexTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="InsertCellAtIndexTool.description-1256"><a href="#InsertCellAtIndexTool.description-1256"><span class="linenos">1256</span></a>    <span class="nd">@property</span>
</span><span id="InsertCellAtIndexTool.description-1257"><a href="#InsertCellAtIndexTool.description-1257"><span class="linenos">1257</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool.description-1258"><a href="#InsertCellAtIndexTool.description-1258"><span class="linenos">1258</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="InsertCellAtIndexTool.description-1259"><a href="#InsertCellAtIndexTool.description-1259"><span class="linenos">1259</span></a>
</span><span id="InsertCellAtIndexTool.description-1260"><a href="#InsertCellAtIndexTool.description-1260"><span class="linenos">1260</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool.description-1261"><a href="#InsertCellAtIndexTool.description-1261"><span class="linenos">1261</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="InsertCellAtIndexTool.description-1262"><a href="#InsertCellAtIndexTool.description-1262"><span class="linenos">1262</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool.description-1263"><a href="#InsertCellAtIndexTool.description-1263"><span class="linenos">1263</span></a>        <span class="k">return</span> <span class="s2">&quot;Inserts a new cell (code or markdown) with given source at the index.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="InsertCellAtIndexTool.schema" class="classattr">
                                        <input id="InsertCellAtIndexTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="InsertCellAtIndexTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#InsertCellAtIndexTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="InsertCellAtIndexTool.schema-1265"><a href="#InsertCellAtIndexTool.schema-1265"><span class="linenos">1265</span></a>    <span class="nd">@property</span>
</span><span id="InsertCellAtIndexTool.schema-1266"><a href="#InsertCellAtIndexTool.schema-1266"><span class="linenos">1266</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool.schema-1267"><a href="#InsertCellAtIndexTool.schema-1267"><span class="linenos">1267</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="InsertCellAtIndexTool.schema-1268"><a href="#InsertCellAtIndexTool.schema-1268"><span class="linenos">1268</span></a>
</span><span id="InsertCellAtIndexTool.schema-1269"><a href="#InsertCellAtIndexTool.schema-1269"><span class="linenos">1269</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool.schema-1270"><a href="#InsertCellAtIndexTool.schema-1270"><span class="linenos">1270</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="InsertCellAtIndexTool.schema-1271"><a href="#InsertCellAtIndexTool.schema-1271"><span class="linenos">1271</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool.schema-1272"><a href="#InsertCellAtIndexTool.schema-1272"><span class="linenos">1272</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool.schema-1273"><a href="#InsertCellAtIndexTool.schema-1273"><span class="linenos">1273</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.schema-1274"><a href="#InsertCellAtIndexTool.schema-1274"><span class="linenos">1274</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool.schema-1275"><a href="#InsertCellAtIndexTool.schema-1275"><span class="linenos">1275</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.schema-1276"><a href="#InsertCellAtIndexTool.schema-1276"><span class="linenos">1276</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.schema-1277"><a href="#InsertCellAtIndexTool.schema-1277"><span class="linenos">1277</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.schema-1278"><a href="#InsertCellAtIndexTool.schema-1278"><span class="linenos">1278</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool.schema-1279"><a href="#InsertCellAtIndexTool.schema-1279"><span class="linenos">1279</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.schema-1280"><a href="#InsertCellAtIndexTool.schema-1280"><span class="linenos">1280</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool.schema-1281"><a href="#InsertCellAtIndexTool.schema-1281"><span class="linenos">1281</span></a>                        <span class="s2">&quot;cell_index&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool.schema-1282"><a href="#InsertCellAtIndexTool.schema-1282"><span class="linenos">1282</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.schema-1283"><a href="#InsertCellAtIndexTool.schema-1283"><span class="linenos">1283</span></a>                            <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.schema-1284"><a href="#InsertCellAtIndexTool.schema-1284"><span class="linenos">1284</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Zero-based index where the new cell will be inserted.&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.schema-1285"><a href="#InsertCellAtIndexTool.schema-1285"><span class="linenos">1285</span></a>                        <span class="p">},</span>
</span><span id="InsertCellAtIndexTool.schema-1286"><a href="#InsertCellAtIndexTool.schema-1286"><span class="linenos">1286</span></a>                        <span class="s2">&quot;cell_type&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="InsertCellAtIndexTool.schema-1287"><a href="#InsertCellAtIndexTool.schema-1287"><span class="linenos">1287</span></a>                            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.schema-1288"><a href="#InsertCellAtIndexTool.schema-1288"><span class="linenos">1288</span></a>                            <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;markdown&quot;</span><span class="p">],</span>
</span><span id="InsertCellAtIndexTool.schema-1289"><a href="#InsertCellAtIndexTool.schema-1289"><span class="linenos">1289</span></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Type of the new cell.&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.schema-1290"><a href="#InsertCellAtIndexTool.schema-1290"><span class="linenos">1290</span></a>                        <span class="p">},</span>
</span><span id="InsertCellAtIndexTool.schema-1291"><a href="#InsertCellAtIndexTool.schema-1291"><span class="linenos">1291</span></a>                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Content for the new cell.&quot;</span><span class="p">},</span>
</span><span id="InsertCellAtIndexTool.schema-1292"><a href="#InsertCellAtIndexTool.schema-1292"><span class="linenos">1292</span></a>                    <span class="p">},</span>
</span><span id="InsertCellAtIndexTool.schema-1293"><a href="#InsertCellAtIndexTool.schema-1293"><span class="linenos">1293</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">,</span> <span class="s2">&quot;cell_type&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">],</span>
</span><span id="InsertCellAtIndexTool.schema-1294"><a href="#InsertCellAtIndexTool.schema-1294"><span class="linenos">1294</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.schema-1295"><a href="#InsertCellAtIndexTool.schema-1295"><span class="linenos">1295</span></a>                <span class="p">},</span>
</span><span id="InsertCellAtIndexTool.schema-1296"><a href="#InsertCellAtIndexTool.schema-1296"><span class="linenos">1296</span></a>            <span class="p">},</span>
</span><span id="InsertCellAtIndexTool.schema-1297"><a href="#InsertCellAtIndexTool.schema-1297"><span class="linenos">1297</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Schema for the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="InsertCellAtIndexTool.pre_invoke" class="classattr">
                                        <input id="InsertCellAtIndexTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="InsertCellAtIndexTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#InsertCellAtIndexTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="InsertCellAtIndexTool.pre_invoke-1299"><a href="#InsertCellAtIndexTool.pre_invoke-1299"><span class="linenos">1299</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1300"><a href="#InsertCellAtIndexTool.pre_invoke-1300"><span class="linenos">1300</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1301"><a href="#InsertCellAtIndexTool.pre_invoke-1301"><span class="linenos">1301</span></a>
</span><span id="InsertCellAtIndexTool.pre_invoke-1302"><a href="#InsertCellAtIndexTool.pre_invoke-1302"><span class="linenos">1302</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1303"><a href="#InsertCellAtIndexTool.pre_invoke-1303"><span class="linenos">1303</span></a>
</span><span id="InsertCellAtIndexTool.pre_invoke-1304"><a href="#InsertCellAtIndexTool.pre_invoke-1304"><span class="linenos">1304</span></a><span class="sd">        Args:</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1305"><a href="#InsertCellAtIndexTool.pre_invoke-1305"><span class="linenos">1305</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1306"><a href="#InsertCellAtIndexTool.pre_invoke-1306"><span class="linenos">1306</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1307"><a href="#InsertCellAtIndexTool.pre_invoke-1307"><span class="linenos">1307</span></a>
</span><span id="InsertCellAtIndexTool.pre_invoke-1308"><a href="#InsertCellAtIndexTool.pre_invoke-1308"><span class="linenos">1308</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1309"><a href="#InsertCellAtIndexTool.pre_invoke-1309"><span class="linenos">1309</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1310"><a href="#InsertCellAtIndexTool.pre_invoke-1310"><span class="linenos">1310</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1311"><a href="#InsertCellAtIndexTool.pre_invoke-1311"><span class="linenos">1311</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1312"><a href="#InsertCellAtIndexTool.pre_invoke-1312"><span class="linenos">1312</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1313"><a href="#InsertCellAtIndexTool.pre_invoke-1313"><span class="linenos">1313</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1314"><a href="#InsertCellAtIndexTool.pre_invoke-1314"><span class="linenos">1314</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1315"><a href="#InsertCellAtIndexTool.pre_invoke-1315"><span class="linenos">1315</span></a>            <span class="s2">&quot;Approve&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1316"><a href="#InsertCellAtIndexTool.pre_invoke-1316"><span class="linenos">1316</span></a>            <span class="sa">f</span><span class="s2">&quot;Insert a </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_type&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> cell at index </span><span class="si">{</span><span class="n">tool_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cell_index&#39;</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.pre_invoke-1317"><a href="#InsertCellAtIndexTool.pre_invoke-1317"><span class="linenos">1317</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="InsertCellAtIndexTool.handle_tool_call" class="classattr">
                                        <input id="InsertCellAtIndexTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="InsertCellAtIndexTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#InsertCellAtIndexTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="InsertCellAtIndexTool.handle_tool_call-1319"><a href="#InsertCellAtIndexTool.handle_tool_call-1319"><span class="linenos">1319</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1320"><a href="#InsertCellAtIndexTool.handle_tool_call-1320"><span class="linenos">1320</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1321"><a href="#InsertCellAtIndexTool.handle_tool_call-1321"><span class="linenos">1321</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1322"><a href="#InsertCellAtIndexTool.handle_tool_call-1322"><span class="linenos">1322</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1323"><a href="#InsertCellAtIndexTool.handle_tool_call-1323"><span class="linenos">1323</span></a>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1324"><a href="#InsertCellAtIndexTool.handle_tool_call-1324"><span class="linenos">1324</span></a><span class="sd">        Args:</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1325"><a href="#InsertCellAtIndexTool.handle_tool_call-1325"><span class="linenos">1325</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1326"><a href="#InsertCellAtIndexTool.handle_tool_call-1326"><span class="linenos">1326</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1327"><a href="#InsertCellAtIndexTool.handle_tool_call-1327"><span class="linenos">1327</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1328"><a href="#InsertCellAtIndexTool.handle_tool_call-1328"><span class="linenos">1328</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1329"><a href="#InsertCellAtIndexTool.handle_tool_call-1329"><span class="linenos">1329</span></a>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1330"><a href="#InsertCellAtIndexTool.handle_tool_call-1330"><span class="linenos">1330</span></a><span class="sd">        Return:</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1331"><a href="#InsertCellAtIndexTool.handle_tool_call-1331"><span class="linenos">1331</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1332"><a href="#InsertCellAtIndexTool.handle_tool_call-1332"><span class="linenos">1332</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1333"><a href="#InsertCellAtIndexTool.handle_tool_call-1333"><span class="linenos">1333</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1334"><a href="#InsertCellAtIndexTool.handle_tool_call-1334"><span class="linenos">1334</span></a>            <span class="s2">&quot;notebook-intelligence:insert-cell-at-index&quot;</span><span class="p">,</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1335"><a href="#InsertCellAtIndexTool.handle_tool_call-1335"><span class="linenos">1335</span></a>            <span class="p">{</span><span class="s2">&quot;cellIndex&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_index&quot;</span><span class="p">],</span> <span class="s2">&quot;cellType&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;cell_type&quot;</span><span class="p">],</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]},</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1336"><a href="#InsertCellAtIndexTool.handle_tool_call-1336"><span class="linenos">1336</span></a>        <span class="p">)</span>
</span><span id="InsertCellAtIndexTool.handle_tool_call-1337"><a href="#InsertCellAtIndexTool.handle_tool_call-1337"><span class="linenos">1337</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="SaveNotebookTool">
                            <input id="SaveNotebookTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SaveNotebookTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="SaveNotebookTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SaveNotebookTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SaveNotebookTool-1340"><a href="#SaveNotebookTool-1340"><span class="linenos">1340</span></a><span class="k">class</span><span class="w"> </span><span class="nc">SaveNotebookTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="SaveNotebookTool-1341"><a href="#SaveNotebookTool-1341"><span class="linenos">1341</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for saving the active notebook.&quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool-1342"><a href="#SaveNotebookTool-1342"><span class="linenos">1342</span></a>
</span><span id="SaveNotebookTool-1343"><a href="#SaveNotebookTool-1343"><span class="linenos">1343</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SaveNotebookTool-1344"><a href="#SaveNotebookTool-1344"><span class="linenos">1344</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="SaveNotebookTool-1345"><a href="#SaveNotebookTool-1345"><span class="linenos">1345</span></a>
</span><span id="SaveNotebookTool-1346"><a href="#SaveNotebookTool-1346"><span class="linenos">1346</span></a><span class="sd">        Args:</span>
</span><span id="SaveNotebookTool-1347"><a href="#SaveNotebookTool-1347"><span class="linenos">1347</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="SaveNotebookTool-1348"><a href="#SaveNotebookTool-1348"><span class="linenos">1348</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool-1349"><a href="#SaveNotebookTool-1349"><span class="linenos">1349</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="SaveNotebookTool-1350"><a href="#SaveNotebookTool-1350"><span class="linenos">1350</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="SaveNotebookTool-1351"><a href="#SaveNotebookTool-1351"><span class="linenos">1351</span></a>
</span><span id="SaveNotebookTool-1352"><a href="#SaveNotebookTool-1352"><span class="linenos">1352</span></a>    <span class="nd">@property</span>
</span><span id="SaveNotebookTool-1353"><a href="#SaveNotebookTool-1353"><span class="linenos">1353</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SaveNotebookTool-1354"><a href="#SaveNotebookTool-1354"><span class="linenos">1354</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="SaveNotebookTool-1355"><a href="#SaveNotebookTool-1355"><span class="linenos">1355</span></a>
</span><span id="SaveNotebookTool-1356"><a href="#SaveNotebookTool-1356"><span class="linenos">1356</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool-1357"><a href="#SaveNotebookTool-1357"><span class="linenos">1357</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="SaveNotebookTool-1358"><a href="#SaveNotebookTool-1358"><span class="linenos">1358</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool-1359"><a href="#SaveNotebookTool-1359"><span class="linenos">1359</span></a>        <span class="k">return</span> <span class="s2">&quot;save_notebook&quot;</span>
</span><span id="SaveNotebookTool-1360"><a href="#SaveNotebookTool-1360"><span class="linenos">1360</span></a>
</span><span id="SaveNotebookTool-1361"><a href="#SaveNotebookTool-1361"><span class="linenos">1361</span></a>    <span class="nd">@property</span>
</span><span id="SaveNotebookTool-1362"><a href="#SaveNotebookTool-1362"><span class="linenos">1362</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SaveNotebookTool-1363"><a href="#SaveNotebookTool-1363"><span class="linenos">1363</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="SaveNotebookTool-1364"><a href="#SaveNotebookTool-1364"><span class="linenos">1364</span></a>
</span><span id="SaveNotebookTool-1365"><a href="#SaveNotebookTool-1365"><span class="linenos">1365</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool-1366"><a href="#SaveNotebookTool-1366"><span class="linenos">1366</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="SaveNotebookTool-1367"><a href="#SaveNotebookTool-1367"><span class="linenos">1367</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool-1368"><a href="#SaveNotebookTool-1368"><span class="linenos">1368</span></a>        <span class="k">return</span> <span class="s2">&quot;Save the active notebook to disk&quot;</span>
</span><span id="SaveNotebookTool-1369"><a href="#SaveNotebookTool-1369"><span class="linenos">1369</span></a>
</span><span id="SaveNotebookTool-1370"><a href="#SaveNotebookTool-1370"><span class="linenos">1370</span></a>    <span class="nd">@property</span>
</span><span id="SaveNotebookTool-1371"><a href="#SaveNotebookTool-1371"><span class="linenos">1371</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="SaveNotebookTool-1372"><a href="#SaveNotebookTool-1372"><span class="linenos">1372</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="SaveNotebookTool-1373"><a href="#SaveNotebookTool-1373"><span class="linenos">1373</span></a>
</span><span id="SaveNotebookTool-1374"><a href="#SaveNotebookTool-1374"><span class="linenos">1374</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool-1375"><a href="#SaveNotebookTool-1375"><span class="linenos">1375</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="SaveNotebookTool-1376"><a href="#SaveNotebookTool-1376"><span class="linenos">1376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool-1377"><a href="#SaveNotebookTool-1377"><span class="linenos">1377</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;saving&quot;</span><span class="p">]</span>
</span><span id="SaveNotebookTool-1378"><a href="#SaveNotebookTool-1378"><span class="linenos">1378</span></a>
</span><span id="SaveNotebookTool-1379"><a href="#SaveNotebookTool-1379"><span class="linenos">1379</span></a>    <span class="nd">@property</span>
</span><span id="SaveNotebookTool-1380"><a href="#SaveNotebookTool-1380"><span class="linenos">1380</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SaveNotebookTool-1381"><a href="#SaveNotebookTool-1381"><span class="linenos">1381</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="SaveNotebookTool-1382"><a href="#SaveNotebookTool-1382"><span class="linenos">1382</span></a>
</span><span id="SaveNotebookTool-1383"><a href="#SaveNotebookTool-1383"><span class="linenos">1383</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool-1384"><a href="#SaveNotebookTool-1384"><span class="linenos">1384</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="SaveNotebookTool-1385"><a href="#SaveNotebookTool-1385"><span class="linenos">1385</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool-1386"><a href="#SaveNotebookTool-1386"><span class="linenos">1386</span></a>        <span class="k">return</span> <span class="s2">&quot;Saves changes in the ACTIVE notebook.&quot;</span>
</span><span id="SaveNotebookTool-1387"><a href="#SaveNotebookTool-1387"><span class="linenos">1387</span></a>
</span><span id="SaveNotebookTool-1388"><a href="#SaveNotebookTool-1388"><span class="linenos">1388</span></a>    <span class="nd">@property</span>
</span><span id="SaveNotebookTool-1389"><a href="#SaveNotebookTool-1389"><span class="linenos">1389</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="SaveNotebookTool-1390"><a href="#SaveNotebookTool-1390"><span class="linenos">1390</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="SaveNotebookTool-1391"><a href="#SaveNotebookTool-1391"><span class="linenos">1391</span></a>
</span><span id="SaveNotebookTool-1392"><a href="#SaveNotebookTool-1392"><span class="linenos">1392</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool-1393"><a href="#SaveNotebookTool-1393"><span class="linenos">1393</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="SaveNotebookTool-1394"><a href="#SaveNotebookTool-1394"><span class="linenos">1394</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool-1395"><a href="#SaveNotebookTool-1395"><span class="linenos">1395</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="SaveNotebookTool-1396"><a href="#SaveNotebookTool-1396"><span class="linenos">1396</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="SaveNotebookTool-1397"><a href="#SaveNotebookTool-1397"><span class="linenos">1397</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SaveNotebookTool-1398"><a href="#SaveNotebookTool-1398"><span class="linenos">1398</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="SaveNotebookTool-1399"><a href="#SaveNotebookTool-1399"><span class="linenos">1399</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="SaveNotebookTool-1400"><a href="#SaveNotebookTool-1400"><span class="linenos">1400</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="SaveNotebookTool-1401"><a href="#SaveNotebookTool-1401"><span class="linenos">1401</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
</span><span id="SaveNotebookTool-1402"><a href="#SaveNotebookTool-1402"><span class="linenos">1402</span></a>            <span class="p">},</span>
</span><span id="SaveNotebookTool-1403"><a href="#SaveNotebookTool-1403"><span class="linenos">1403</span></a>        <span class="p">}</span>
</span><span id="SaveNotebookTool-1404"><a href="#SaveNotebookTool-1404"><span class="linenos">1404</span></a>
</span><span id="SaveNotebookTool-1405"><a href="#SaveNotebookTool-1405"><span class="linenos">1405</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="SaveNotebookTool-1406"><a href="#SaveNotebookTool-1406"><span class="linenos">1406</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="SaveNotebookTool-1407"><a href="#SaveNotebookTool-1407"><span class="linenos">1407</span></a>
</span><span id="SaveNotebookTool-1408"><a href="#SaveNotebookTool-1408"><span class="linenos">1408</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="SaveNotebookTool-1409"><a href="#SaveNotebookTool-1409"><span class="linenos">1409</span></a>
</span><span id="SaveNotebookTool-1410"><a href="#SaveNotebookTool-1410"><span class="linenos">1410</span></a><span class="sd">        Args:</span>
</span><span id="SaveNotebookTool-1411"><a href="#SaveNotebookTool-1411"><span class="linenos">1411</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SaveNotebookTool-1412"><a href="#SaveNotebookTool-1412"><span class="linenos">1412</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SaveNotebookTool-1413"><a href="#SaveNotebookTool-1413"><span class="linenos">1413</span></a>
</span><span id="SaveNotebookTool-1414"><a href="#SaveNotebookTool-1414"><span class="linenos">1414</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool-1415"><a href="#SaveNotebookTool-1415"><span class="linenos">1415</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="SaveNotebookTool-1416"><a href="#SaveNotebookTool-1416"><span class="linenos">1416</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool-1417"><a href="#SaveNotebookTool-1417"><span class="linenos">1417</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="SaveNotebookTool-1418"><a href="#SaveNotebookTool-1418"><span class="linenos">1418</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="SaveNotebookTool-1419"><a href="#SaveNotebookTool-1419"><span class="linenos">1419</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="SaveNotebookTool-1420"><a href="#SaveNotebookTool-1420"><span class="linenos">1420</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Save the active notebook?&quot;</span><span class="p">)</span>
</span><span id="SaveNotebookTool-1421"><a href="#SaveNotebookTool-1421"><span class="linenos">1421</span></a>        <span class="p">)</span>
</span><span id="SaveNotebookTool-1422"><a href="#SaveNotebookTool-1422"><span class="linenos">1422</span></a>
</span><span id="SaveNotebookTool-1423"><a href="#SaveNotebookTool-1423"><span class="linenos">1423</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="SaveNotebookTool-1424"><a href="#SaveNotebookTool-1424"><span class="linenos">1424</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="SaveNotebookTool-1425"><a href="#SaveNotebookTool-1425"><span class="linenos">1425</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SaveNotebookTool-1426"><a href="#SaveNotebookTool-1426"><span class="linenos">1426</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="SaveNotebookTool-1427"><a href="#SaveNotebookTool-1427"><span class="linenos">1427</span></a>
</span><span id="SaveNotebookTool-1428"><a href="#SaveNotebookTool-1428"><span class="linenos">1428</span></a><span class="sd">        Args:</span>
</span><span id="SaveNotebookTool-1429"><a href="#SaveNotebookTool-1429"><span class="linenos">1429</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SaveNotebookTool-1430"><a href="#SaveNotebookTool-1430"><span class="linenos">1430</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="SaveNotebookTool-1431"><a href="#SaveNotebookTool-1431"><span class="linenos">1431</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="SaveNotebookTool-1432"><a href="#SaveNotebookTool-1432"><span class="linenos">1432</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SaveNotebookTool-1433"><a href="#SaveNotebookTool-1433"><span class="linenos">1433</span></a>
</span><span id="SaveNotebookTool-1434"><a href="#SaveNotebookTool-1434"><span class="linenos">1434</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool-1435"><a href="#SaveNotebookTool-1435"><span class="linenos">1435</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="SaveNotebookTool-1436"><a href="#SaveNotebookTool-1436"><span class="linenos">1436</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool-1437"><a href="#SaveNotebookTool-1437"><span class="linenos">1437</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;docmanager:save&quot;</span><span class="p">)</span>
</span><span id="SaveNotebookTool-1438"><a href="#SaveNotebookTool-1438"><span class="linenos">1438</span></a>        <span class="k">return</span> <span class="s2">&quot;Saved the notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Tool for saving the active notebook.</p>
</div>


                            <div id="SaveNotebookTool.__init__" class="classattr">
                                        <input id="SaveNotebookTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">SaveNotebookTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="SaveNotebookTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SaveNotebookTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SaveNotebookTool.__init__-1343"><a href="#SaveNotebookTool.__init__-1343"><span class="linenos">1343</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SaveNotebookTool.__init__-1344"><a href="#SaveNotebookTool.__init__-1344"><span class="linenos">1344</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="SaveNotebookTool.__init__-1345"><a href="#SaveNotebookTool.__init__-1345"><span class="linenos">1345</span></a>
</span><span id="SaveNotebookTool.__init__-1346"><a href="#SaveNotebookTool.__init__-1346"><span class="linenos">1346</span></a><span class="sd">        Args:</span>
</span><span id="SaveNotebookTool.__init__-1347"><a href="#SaveNotebookTool.__init__-1347"><span class="linenos">1347</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="SaveNotebookTool.__init__-1348"><a href="#SaveNotebookTool.__init__-1348"><span class="linenos">1348</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool.__init__-1349"><a href="#SaveNotebookTool.__init__-1349"><span class="linenos">1349</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="SaveNotebookTool.__init__-1350"><a href="#SaveNotebookTool.__init__-1350"><span class="linenos">1350</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="SaveNotebookTool.name" class="classattr">
                                        <input id="SaveNotebookTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="SaveNotebookTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SaveNotebookTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SaveNotebookTool.name-1352"><a href="#SaveNotebookTool.name-1352"><span class="linenos">1352</span></a>    <span class="nd">@property</span>
</span><span id="SaveNotebookTool.name-1353"><a href="#SaveNotebookTool.name-1353"><span class="linenos">1353</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SaveNotebookTool.name-1354"><a href="#SaveNotebookTool.name-1354"><span class="linenos">1354</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="SaveNotebookTool.name-1355"><a href="#SaveNotebookTool.name-1355"><span class="linenos">1355</span></a>
</span><span id="SaveNotebookTool.name-1356"><a href="#SaveNotebookTool.name-1356"><span class="linenos">1356</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool.name-1357"><a href="#SaveNotebookTool.name-1357"><span class="linenos">1357</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="SaveNotebookTool.name-1358"><a href="#SaveNotebookTool.name-1358"><span class="linenos">1358</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool.name-1359"><a href="#SaveNotebookTool.name-1359"><span class="linenos">1359</span></a>        <span class="k">return</span> <span class="s2">&quot;save_notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="SaveNotebookTool.title" class="classattr">
                                        <input id="SaveNotebookTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="SaveNotebookTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SaveNotebookTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SaveNotebookTool.title-1361"><a href="#SaveNotebookTool.title-1361"><span class="linenos">1361</span></a>    <span class="nd">@property</span>
</span><span id="SaveNotebookTool.title-1362"><a href="#SaveNotebookTool.title-1362"><span class="linenos">1362</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SaveNotebookTool.title-1363"><a href="#SaveNotebookTool.title-1363"><span class="linenos">1363</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="SaveNotebookTool.title-1364"><a href="#SaveNotebookTool.title-1364"><span class="linenos">1364</span></a>
</span><span id="SaveNotebookTool.title-1365"><a href="#SaveNotebookTool.title-1365"><span class="linenos">1365</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool.title-1366"><a href="#SaveNotebookTool.title-1366"><span class="linenos">1366</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="SaveNotebookTool.title-1367"><a href="#SaveNotebookTool.title-1367"><span class="linenos">1367</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool.title-1368"><a href="#SaveNotebookTool.title-1368"><span class="linenos">1368</span></a>        <span class="k">return</span> <span class="s2">&quot;Save the active notebook to disk&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="SaveNotebookTool.tags" class="classattr">
                                        <input id="SaveNotebookTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="SaveNotebookTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SaveNotebookTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SaveNotebookTool.tags-1370"><a href="#SaveNotebookTool.tags-1370"><span class="linenos">1370</span></a>    <span class="nd">@property</span>
</span><span id="SaveNotebookTool.tags-1371"><a href="#SaveNotebookTool.tags-1371"><span class="linenos">1371</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="SaveNotebookTool.tags-1372"><a href="#SaveNotebookTool.tags-1372"><span class="linenos">1372</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="SaveNotebookTool.tags-1373"><a href="#SaveNotebookTool.tags-1373"><span class="linenos">1373</span></a>
</span><span id="SaveNotebookTool.tags-1374"><a href="#SaveNotebookTool.tags-1374"><span class="linenos">1374</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool.tags-1375"><a href="#SaveNotebookTool.tags-1375"><span class="linenos">1375</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="SaveNotebookTool.tags-1376"><a href="#SaveNotebookTool.tags-1376"><span class="linenos">1376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool.tags-1377"><a href="#SaveNotebookTool.tags-1377"><span class="linenos">1377</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="s2">&quot;saving&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="SaveNotebookTool.description" class="classattr">
                                        <input id="SaveNotebookTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="SaveNotebookTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SaveNotebookTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SaveNotebookTool.description-1379"><a href="#SaveNotebookTool.description-1379"><span class="linenos">1379</span></a>    <span class="nd">@property</span>
</span><span id="SaveNotebookTool.description-1380"><a href="#SaveNotebookTool.description-1380"><span class="linenos">1380</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SaveNotebookTool.description-1381"><a href="#SaveNotebookTool.description-1381"><span class="linenos">1381</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="SaveNotebookTool.description-1382"><a href="#SaveNotebookTool.description-1382"><span class="linenos">1382</span></a>
</span><span id="SaveNotebookTool.description-1383"><a href="#SaveNotebookTool.description-1383"><span class="linenos">1383</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool.description-1384"><a href="#SaveNotebookTool.description-1384"><span class="linenos">1384</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="SaveNotebookTool.description-1385"><a href="#SaveNotebookTool.description-1385"><span class="linenos">1385</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool.description-1386"><a href="#SaveNotebookTool.description-1386"><span class="linenos">1386</span></a>        <span class="k">return</span> <span class="s2">&quot;Saves changes in the ACTIVE notebook.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="SaveNotebookTool.schema" class="classattr">
                                        <input id="SaveNotebookTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="SaveNotebookTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SaveNotebookTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SaveNotebookTool.schema-1388"><a href="#SaveNotebookTool.schema-1388"><span class="linenos">1388</span></a>    <span class="nd">@property</span>
</span><span id="SaveNotebookTool.schema-1389"><a href="#SaveNotebookTool.schema-1389"><span class="linenos">1389</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="SaveNotebookTool.schema-1390"><a href="#SaveNotebookTool.schema-1390"><span class="linenos">1390</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="SaveNotebookTool.schema-1391"><a href="#SaveNotebookTool.schema-1391"><span class="linenos">1391</span></a>
</span><span id="SaveNotebookTool.schema-1392"><a href="#SaveNotebookTool.schema-1392"><span class="linenos">1392</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool.schema-1393"><a href="#SaveNotebookTool.schema-1393"><span class="linenos">1393</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="SaveNotebookTool.schema-1394"><a href="#SaveNotebookTool.schema-1394"><span class="linenos">1394</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool.schema-1395"><a href="#SaveNotebookTool.schema-1395"><span class="linenos">1395</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="SaveNotebookTool.schema-1396"><a href="#SaveNotebookTool.schema-1396"><span class="linenos">1396</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="SaveNotebookTool.schema-1397"><a href="#SaveNotebookTool.schema-1397"><span class="linenos">1397</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SaveNotebookTool.schema-1398"><a href="#SaveNotebookTool.schema-1398"><span class="linenos">1398</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="SaveNotebookTool.schema-1399"><a href="#SaveNotebookTool.schema-1399"><span class="linenos">1399</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="SaveNotebookTool.schema-1400"><a href="#SaveNotebookTool.schema-1400"><span class="linenos">1400</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="SaveNotebookTool.schema-1401"><a href="#SaveNotebookTool.schema-1401"><span class="linenos">1401</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
</span><span id="SaveNotebookTool.schema-1402"><a href="#SaveNotebookTool.schema-1402"><span class="linenos">1402</span></a>            <span class="p">},</span>
</span><span id="SaveNotebookTool.schema-1403"><a href="#SaveNotebookTool.schema-1403"><span class="linenos">1403</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Schema for the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="SaveNotebookTool.pre_invoke" class="classattr">
                                        <input id="SaveNotebookTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="SaveNotebookTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SaveNotebookTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SaveNotebookTool.pre_invoke-1405"><a href="#SaveNotebookTool.pre_invoke-1405"><span class="linenos">1405</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="SaveNotebookTool.pre_invoke-1406"><a href="#SaveNotebookTool.pre_invoke-1406"><span class="linenos">1406</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="SaveNotebookTool.pre_invoke-1407"><a href="#SaveNotebookTool.pre_invoke-1407"><span class="linenos">1407</span></a>
</span><span id="SaveNotebookTool.pre_invoke-1408"><a href="#SaveNotebookTool.pre_invoke-1408"><span class="linenos">1408</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="SaveNotebookTool.pre_invoke-1409"><a href="#SaveNotebookTool.pre_invoke-1409"><span class="linenos">1409</span></a>
</span><span id="SaveNotebookTool.pre_invoke-1410"><a href="#SaveNotebookTool.pre_invoke-1410"><span class="linenos">1410</span></a><span class="sd">        Args:</span>
</span><span id="SaveNotebookTool.pre_invoke-1411"><a href="#SaveNotebookTool.pre_invoke-1411"><span class="linenos">1411</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SaveNotebookTool.pre_invoke-1412"><a href="#SaveNotebookTool.pre_invoke-1412"><span class="linenos">1412</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SaveNotebookTool.pre_invoke-1413"><a href="#SaveNotebookTool.pre_invoke-1413"><span class="linenos">1413</span></a>
</span><span id="SaveNotebookTool.pre_invoke-1414"><a href="#SaveNotebookTool.pre_invoke-1414"><span class="linenos">1414</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool.pre_invoke-1415"><a href="#SaveNotebookTool.pre_invoke-1415"><span class="linenos">1415</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="SaveNotebookTool.pre_invoke-1416"><a href="#SaveNotebookTool.pre_invoke-1416"><span class="linenos">1416</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool.pre_invoke-1417"><a href="#SaveNotebookTool.pre_invoke-1417"><span class="linenos">1417</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="SaveNotebookTool.pre_invoke-1418"><a href="#SaveNotebookTool.pre_invoke-1418"><span class="linenos">1418</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="SaveNotebookTool.pre_invoke-1419"><a href="#SaveNotebookTool.pre_invoke-1419"><span class="linenos">1419</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="SaveNotebookTool.pre_invoke-1420"><a href="#SaveNotebookTool.pre_invoke-1420"><span class="linenos">1420</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Save the active notebook?&quot;</span><span class="p">)</span>
</span><span id="SaveNotebookTool.pre_invoke-1421"><a href="#SaveNotebookTool.pre_invoke-1421"><span class="linenos">1421</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="SaveNotebookTool.handle_tool_call" class="classattr">
                                        <input id="SaveNotebookTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="SaveNotebookTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SaveNotebookTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SaveNotebookTool.handle_tool_call-1423"><a href="#SaveNotebookTool.handle_tool_call-1423"><span class="linenos">1423</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="SaveNotebookTool.handle_tool_call-1424"><a href="#SaveNotebookTool.handle_tool_call-1424"><span class="linenos">1424</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="SaveNotebookTool.handle_tool_call-1425"><a href="#SaveNotebookTool.handle_tool_call-1425"><span class="linenos">1425</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SaveNotebookTool.handle_tool_call-1426"><a href="#SaveNotebookTool.handle_tool_call-1426"><span class="linenos">1426</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="SaveNotebookTool.handle_tool_call-1427"><a href="#SaveNotebookTool.handle_tool_call-1427"><span class="linenos">1427</span></a>
</span><span id="SaveNotebookTool.handle_tool_call-1428"><a href="#SaveNotebookTool.handle_tool_call-1428"><span class="linenos">1428</span></a><span class="sd">        Args:</span>
</span><span id="SaveNotebookTool.handle_tool_call-1429"><a href="#SaveNotebookTool.handle_tool_call-1429"><span class="linenos">1429</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SaveNotebookTool.handle_tool_call-1430"><a href="#SaveNotebookTool.handle_tool_call-1430"><span class="linenos">1430</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="SaveNotebookTool.handle_tool_call-1431"><a href="#SaveNotebookTool.handle_tool_call-1431"><span class="linenos">1431</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="SaveNotebookTool.handle_tool_call-1432"><a href="#SaveNotebookTool.handle_tool_call-1432"><span class="linenos">1432</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SaveNotebookTool.handle_tool_call-1433"><a href="#SaveNotebookTool.handle_tool_call-1433"><span class="linenos">1433</span></a>
</span><span id="SaveNotebookTool.handle_tool_call-1434"><a href="#SaveNotebookTool.handle_tool_call-1434"><span class="linenos">1434</span></a><span class="sd">        Return:</span>
</span><span id="SaveNotebookTool.handle_tool_call-1435"><a href="#SaveNotebookTool.handle_tool_call-1435"><span class="linenos">1435</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="SaveNotebookTool.handle_tool_call-1436"><a href="#SaveNotebookTool.handle_tool_call-1436"><span class="linenos">1436</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SaveNotebookTool.handle_tool_call-1437"><a href="#SaveNotebookTool.handle_tool_call-1437"><span class="linenos">1437</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;docmanager:save&quot;</span><span class="p">)</span>
</span><span id="SaveNotebookTool.handle_tool_call-1438"><a href="#SaveNotebookTool.handle_tool_call-1438"><span class="linenos">1438</span></a>        <span class="k">return</span> <span class="s2">&quot;Saved the notebook&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="CreateNewPythonFileTool">
                            <input id="CreateNewPythonFileTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CreateNewPythonFileTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="CreateNewPythonFileTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewPythonFileTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewPythonFileTool-1441"><a href="#CreateNewPythonFileTool-1441"><span class="linenos">1441</span></a><span class="k">class</span><span class="w"> </span><span class="nc">CreateNewPythonFileTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="CreateNewPythonFileTool-1442"><a href="#CreateNewPythonFileTool-1442"><span class="linenos">1442</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for creating a new Python file.&quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool-1443"><a href="#CreateNewPythonFileTool-1443"><span class="linenos">1443</span></a>
</span><span id="CreateNewPythonFileTool-1444"><a href="#CreateNewPythonFileTool-1444"><span class="linenos">1444</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool-1445"><a href="#CreateNewPythonFileTool-1445"><span class="linenos">1445</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="CreateNewPythonFileTool-1446"><a href="#CreateNewPythonFileTool-1446"><span class="linenos">1446</span></a>
</span><span id="CreateNewPythonFileTool-1447"><a href="#CreateNewPythonFileTool-1447"><span class="linenos">1447</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewPythonFileTool-1448"><a href="#CreateNewPythonFileTool-1448"><span class="linenos">1448</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="CreateNewPythonFileTool-1449"><a href="#CreateNewPythonFileTool-1449"><span class="linenos">1449</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool-1450"><a href="#CreateNewPythonFileTool-1450"><span class="linenos">1450</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="CreateNewPythonFileTool-1451"><a href="#CreateNewPythonFileTool-1451"><span class="linenos">1451</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="CreateNewPythonFileTool-1452"><a href="#CreateNewPythonFileTool-1452"><span class="linenos">1452</span></a>
</span><span id="CreateNewPythonFileTool-1453"><a href="#CreateNewPythonFileTool-1453"><span class="linenos">1453</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewPythonFileTool-1454"><a href="#CreateNewPythonFileTool-1454"><span class="linenos">1454</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool-1455"><a href="#CreateNewPythonFileTool-1455"><span class="linenos">1455</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="CreateNewPythonFileTool-1456"><a href="#CreateNewPythonFileTool-1456"><span class="linenos">1456</span></a>
</span><span id="CreateNewPythonFileTool-1457"><a href="#CreateNewPythonFileTool-1457"><span class="linenos">1457</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool-1458"><a href="#CreateNewPythonFileTool-1458"><span class="linenos">1458</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="CreateNewPythonFileTool-1459"><a href="#CreateNewPythonFileTool-1459"><span class="linenos">1459</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool-1460"><a href="#CreateNewPythonFileTool-1460"><span class="linenos">1460</span></a>        <span class="k">return</span> <span class="s2">&quot;create_new_python_file&quot;</span>
</span><span id="CreateNewPythonFileTool-1461"><a href="#CreateNewPythonFileTool-1461"><span class="linenos">1461</span></a>
</span><span id="CreateNewPythonFileTool-1462"><a href="#CreateNewPythonFileTool-1462"><span class="linenos">1462</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewPythonFileTool-1463"><a href="#CreateNewPythonFileTool-1463"><span class="linenos">1463</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool-1464"><a href="#CreateNewPythonFileTool-1464"><span class="linenos">1464</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="CreateNewPythonFileTool-1465"><a href="#CreateNewPythonFileTool-1465"><span class="linenos">1465</span></a>
</span><span id="CreateNewPythonFileTool-1466"><a href="#CreateNewPythonFileTool-1466"><span class="linenos">1466</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool-1467"><a href="#CreateNewPythonFileTool-1467"><span class="linenos">1467</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="CreateNewPythonFileTool-1468"><a href="#CreateNewPythonFileTool-1468"><span class="linenos">1468</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool-1469"><a href="#CreateNewPythonFileTool-1469"><span class="linenos">1469</span></a>        <span class="k">return</span> <span class="s2">&quot;Create a new Python (.py) file&quot;</span>
</span><span id="CreateNewPythonFileTool-1470"><a href="#CreateNewPythonFileTool-1470"><span class="linenos">1470</span></a>
</span><span id="CreateNewPythonFileTool-1471"><a href="#CreateNewPythonFileTool-1471"><span class="linenos">1471</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewPythonFileTool-1472"><a href="#CreateNewPythonFileTool-1472"><span class="linenos">1472</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="CreateNewPythonFileTool-1473"><a href="#CreateNewPythonFileTool-1473"><span class="linenos">1473</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="CreateNewPythonFileTool-1474"><a href="#CreateNewPythonFileTool-1474"><span class="linenos">1474</span></a>
</span><span id="CreateNewPythonFileTool-1475"><a href="#CreateNewPythonFileTool-1475"><span class="linenos">1475</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool-1476"><a href="#CreateNewPythonFileTool-1476"><span class="linenos">1476</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="CreateNewPythonFileTool-1477"><a href="#CreateNewPythonFileTool-1477"><span class="linenos">1477</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool-1478"><a href="#CreateNewPythonFileTool-1478"><span class="linenos">1478</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;file creation&quot;</span><span class="p">,</span> <span class="s2">&quot;python&quot;</span><span class="p">]</span>
</span><span id="CreateNewPythonFileTool-1479"><a href="#CreateNewPythonFileTool-1479"><span class="linenos">1479</span></a>
</span><span id="CreateNewPythonFileTool-1480"><a href="#CreateNewPythonFileTool-1480"><span class="linenos">1480</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewPythonFileTool-1481"><a href="#CreateNewPythonFileTool-1481"><span class="linenos">1481</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool-1482"><a href="#CreateNewPythonFileTool-1482"><span class="linenos">1482</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="CreateNewPythonFileTool-1483"><a href="#CreateNewPythonFileTool-1483"><span class="linenos">1483</span></a>
</span><span id="CreateNewPythonFileTool-1484"><a href="#CreateNewPythonFileTool-1484"><span class="linenos">1484</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool-1485"><a href="#CreateNewPythonFileTool-1485"><span class="linenos">1485</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="CreateNewPythonFileTool-1486"><a href="#CreateNewPythonFileTool-1486"><span class="linenos">1486</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool-1487"><a href="#CreateNewPythonFileTool-1487"><span class="linenos">1487</span></a>        <span class="k">return</span> <span class="s2">&quot;Creates a new Python file with the provided code, returning the file path.&quot;</span>
</span><span id="CreateNewPythonFileTool-1488"><a href="#CreateNewPythonFileTool-1488"><span class="linenos">1488</span></a>
</span><span id="CreateNewPythonFileTool-1489"><a href="#CreateNewPythonFileTool-1489"><span class="linenos">1489</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewPythonFileTool-1490"><a href="#CreateNewPythonFileTool-1490"><span class="linenos">1490</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool-1491"><a href="#CreateNewPythonFileTool-1491"><span class="linenos">1491</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="CreateNewPythonFileTool-1492"><a href="#CreateNewPythonFileTool-1492"><span class="linenos">1492</span></a>
</span><span id="CreateNewPythonFileTool-1493"><a href="#CreateNewPythonFileTool-1493"><span class="linenos">1493</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool-1494"><a href="#CreateNewPythonFileTool-1494"><span class="linenos">1494</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="CreateNewPythonFileTool-1495"><a href="#CreateNewPythonFileTool-1495"><span class="linenos">1495</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool-1496"><a href="#CreateNewPythonFileTool-1496"><span class="linenos">1496</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="CreateNewPythonFileTool-1497"><a href="#CreateNewPythonFileTool-1497"><span class="linenos">1497</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool-1498"><a href="#CreateNewPythonFileTool-1498"><span class="linenos">1498</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewPythonFileTool-1499"><a href="#CreateNewPythonFileTool-1499"><span class="linenos">1499</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool-1500"><a href="#CreateNewPythonFileTool-1500"><span class="linenos">1500</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool-1501"><a href="#CreateNewPythonFileTool-1501"><span class="linenos">1501</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool-1502"><a href="#CreateNewPythonFileTool-1502"><span class="linenos">1502</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewPythonFileTool-1503"><a href="#CreateNewPythonFileTool-1503"><span class="linenos">1503</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool-1504"><a href="#CreateNewPythonFileTool-1504"><span class="linenos">1504</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Python source code for the new file.&quot;</span><span class="p">}},</span>
</span><span id="CreateNewPythonFileTool-1505"><a href="#CreateNewPythonFileTool-1505"><span class="linenos">1505</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span>
</span><span id="CreateNewPythonFileTool-1506"><a href="#CreateNewPythonFileTool-1506"><span class="linenos">1506</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool-1507"><a href="#CreateNewPythonFileTool-1507"><span class="linenos">1507</span></a>                <span class="p">},</span>
</span><span id="CreateNewPythonFileTool-1508"><a href="#CreateNewPythonFileTool-1508"><span class="linenos">1508</span></a>            <span class="p">},</span>
</span><span id="CreateNewPythonFileTool-1509"><a href="#CreateNewPythonFileTool-1509"><span class="linenos">1509</span></a>        <span class="p">}</span>
</span><span id="CreateNewPythonFileTool-1510"><a href="#CreateNewPythonFileTool-1510"><span class="linenos">1510</span></a>
</span><span id="CreateNewPythonFileTool-1511"><a href="#CreateNewPythonFileTool-1511"><span class="linenos">1511</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool-1512"><a href="#CreateNewPythonFileTool-1512"><span class="linenos">1512</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="CreateNewPythonFileTool-1513"><a href="#CreateNewPythonFileTool-1513"><span class="linenos">1513</span></a>
</span><span id="CreateNewPythonFileTool-1514"><a href="#CreateNewPythonFileTool-1514"><span class="linenos">1514</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="CreateNewPythonFileTool-1515"><a href="#CreateNewPythonFileTool-1515"><span class="linenos">1515</span></a>
</span><span id="CreateNewPythonFileTool-1516"><a href="#CreateNewPythonFileTool-1516"><span class="linenos">1516</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewPythonFileTool-1517"><a href="#CreateNewPythonFileTool-1517"><span class="linenos">1517</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="CreateNewPythonFileTool-1518"><a href="#CreateNewPythonFileTool-1518"><span class="linenos">1518</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="CreateNewPythonFileTool-1519"><a href="#CreateNewPythonFileTool-1519"><span class="linenos">1519</span></a>
</span><span id="CreateNewPythonFileTool-1520"><a href="#CreateNewPythonFileTool-1520"><span class="linenos">1520</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool-1521"><a href="#CreateNewPythonFileTool-1521"><span class="linenos">1521</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="CreateNewPythonFileTool-1522"><a href="#CreateNewPythonFileTool-1522"><span class="linenos">1522</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool-1523"><a href="#CreateNewPythonFileTool-1523"><span class="linenos">1523</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool-1524"><a href="#CreateNewPythonFileTool-1524"><span class="linenos">1524</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="CreateNewPythonFileTool-1525"><a href="#CreateNewPythonFileTool-1525"><span class="linenos">1525</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="CreateNewPythonFileTool-1526"><a href="#CreateNewPythonFileTool-1526"><span class="linenos">1526</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Create a new Python file with the provided code?&quot;</span>
</span><span id="CreateNewPythonFileTool-1527"><a href="#CreateNewPythonFileTool-1527"><span class="linenos">1527</span></a>        <span class="p">)</span>
</span><span id="CreateNewPythonFileTool-1528"><a href="#CreateNewPythonFileTool-1528"><span class="linenos">1528</span></a>
</span><span id="CreateNewPythonFileTool-1529"><a href="#CreateNewPythonFileTool-1529"><span class="linenos">1529</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="CreateNewPythonFileTool-1530"><a href="#CreateNewPythonFileTool-1530"><span class="linenos">1530</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="CreateNewPythonFileTool-1531"><a href="#CreateNewPythonFileTool-1531"><span class="linenos">1531</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool-1532"><a href="#CreateNewPythonFileTool-1532"><span class="linenos">1532</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="CreateNewPythonFileTool-1533"><a href="#CreateNewPythonFileTool-1533"><span class="linenos">1533</span></a>
</span><span id="CreateNewPythonFileTool-1534"><a href="#CreateNewPythonFileTool-1534"><span class="linenos">1534</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewPythonFileTool-1535"><a href="#CreateNewPythonFileTool-1535"><span class="linenos">1535</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="CreateNewPythonFileTool-1536"><a href="#CreateNewPythonFileTool-1536"><span class="linenos">1536</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="CreateNewPythonFileTool-1537"><a href="#CreateNewPythonFileTool-1537"><span class="linenos">1537</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="CreateNewPythonFileTool-1538"><a href="#CreateNewPythonFileTool-1538"><span class="linenos">1538</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="CreateNewPythonFileTool-1539"><a href="#CreateNewPythonFileTool-1539"><span class="linenos">1539</span></a>
</span><span id="CreateNewPythonFileTool-1540"><a href="#CreateNewPythonFileTool-1540"><span class="linenos">1540</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool-1541"><a href="#CreateNewPythonFileTool-1541"><span class="linenos">1541</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="CreateNewPythonFileTool-1542"><a href="#CreateNewPythonFileTool-1542"><span class="linenos">1542</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool-1543"><a href="#CreateNewPythonFileTool-1543"><span class="linenos">1543</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="CreateNewPythonFileTool-1544"><a href="#CreateNewPythonFileTool-1544"><span class="linenos">1544</span></a>            <span class="s2">&quot;notebook-intelligence:create-new-file&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">]}</span>
</span><span id="CreateNewPythonFileTool-1545"><a href="#CreateNewPythonFileTool-1545"><span class="linenos">1545</span></a>        <span class="p">)</span>
</span><span id="CreateNewPythonFileTool-1546"><a href="#CreateNewPythonFileTool-1546"><span class="linenos">1546</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">ui_cmd_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="CreateNewPythonFileTool-1547"><a href="#CreateNewPythonFileTool-1547"><span class="linenos">1547</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Created new Python file at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Tool for creating a new Python file.</p>
</div>


                            <div id="CreateNewPythonFileTool.__init__" class="classattr">
                                        <input id="CreateNewPythonFileTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CreateNewPythonFileTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="CreateNewPythonFileTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewPythonFileTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewPythonFileTool.__init__-1444"><a href="#CreateNewPythonFileTool.__init__-1444"><span class="linenos">1444</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool.__init__-1445"><a href="#CreateNewPythonFileTool.__init__-1445"><span class="linenos">1445</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="CreateNewPythonFileTool.__init__-1446"><a href="#CreateNewPythonFileTool.__init__-1446"><span class="linenos">1446</span></a>
</span><span id="CreateNewPythonFileTool.__init__-1447"><a href="#CreateNewPythonFileTool.__init__-1447"><span class="linenos">1447</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewPythonFileTool.__init__-1448"><a href="#CreateNewPythonFileTool.__init__-1448"><span class="linenos">1448</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="CreateNewPythonFileTool.__init__-1449"><a href="#CreateNewPythonFileTool.__init__-1449"><span class="linenos">1449</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool.__init__-1450"><a href="#CreateNewPythonFileTool.__init__-1450"><span class="linenos">1450</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="CreateNewPythonFileTool.__init__-1451"><a href="#CreateNewPythonFileTool.__init__-1451"><span class="linenos">1451</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="CreateNewPythonFileTool.name" class="classattr">
                                        <input id="CreateNewPythonFileTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="CreateNewPythonFileTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewPythonFileTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewPythonFileTool.name-1453"><a href="#CreateNewPythonFileTool.name-1453"><span class="linenos">1453</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewPythonFileTool.name-1454"><a href="#CreateNewPythonFileTool.name-1454"><span class="linenos">1454</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool.name-1455"><a href="#CreateNewPythonFileTool.name-1455"><span class="linenos">1455</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="CreateNewPythonFileTool.name-1456"><a href="#CreateNewPythonFileTool.name-1456"><span class="linenos">1456</span></a>
</span><span id="CreateNewPythonFileTool.name-1457"><a href="#CreateNewPythonFileTool.name-1457"><span class="linenos">1457</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool.name-1458"><a href="#CreateNewPythonFileTool.name-1458"><span class="linenos">1458</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="CreateNewPythonFileTool.name-1459"><a href="#CreateNewPythonFileTool.name-1459"><span class="linenos">1459</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool.name-1460"><a href="#CreateNewPythonFileTool.name-1460"><span class="linenos">1460</span></a>        <span class="k">return</span> <span class="s2">&quot;create_new_python_file&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewPythonFileTool.title" class="classattr">
                                        <input id="CreateNewPythonFileTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="CreateNewPythonFileTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewPythonFileTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewPythonFileTool.title-1462"><a href="#CreateNewPythonFileTool.title-1462"><span class="linenos">1462</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewPythonFileTool.title-1463"><a href="#CreateNewPythonFileTool.title-1463"><span class="linenos">1463</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool.title-1464"><a href="#CreateNewPythonFileTool.title-1464"><span class="linenos">1464</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="CreateNewPythonFileTool.title-1465"><a href="#CreateNewPythonFileTool.title-1465"><span class="linenos">1465</span></a>
</span><span id="CreateNewPythonFileTool.title-1466"><a href="#CreateNewPythonFileTool.title-1466"><span class="linenos">1466</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool.title-1467"><a href="#CreateNewPythonFileTool.title-1467"><span class="linenos">1467</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="CreateNewPythonFileTool.title-1468"><a href="#CreateNewPythonFileTool.title-1468"><span class="linenos">1468</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool.title-1469"><a href="#CreateNewPythonFileTool.title-1469"><span class="linenos">1469</span></a>        <span class="k">return</span> <span class="s2">&quot;Create a new Python (.py) file&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewPythonFileTool.tags" class="classattr">
                                        <input id="CreateNewPythonFileTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="CreateNewPythonFileTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewPythonFileTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewPythonFileTool.tags-1471"><a href="#CreateNewPythonFileTool.tags-1471"><span class="linenos">1471</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewPythonFileTool.tags-1472"><a href="#CreateNewPythonFileTool.tags-1472"><span class="linenos">1472</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="CreateNewPythonFileTool.tags-1473"><a href="#CreateNewPythonFileTool.tags-1473"><span class="linenos">1473</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="CreateNewPythonFileTool.tags-1474"><a href="#CreateNewPythonFileTool.tags-1474"><span class="linenos">1474</span></a>
</span><span id="CreateNewPythonFileTool.tags-1475"><a href="#CreateNewPythonFileTool.tags-1475"><span class="linenos">1475</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool.tags-1476"><a href="#CreateNewPythonFileTool.tags-1476"><span class="linenos">1476</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="CreateNewPythonFileTool.tags-1477"><a href="#CreateNewPythonFileTool.tags-1477"><span class="linenos">1477</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool.tags-1478"><a href="#CreateNewPythonFileTool.tags-1478"><span class="linenos">1478</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;file creation&quot;</span><span class="p">,</span> <span class="s2">&quot;python&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewPythonFileTool.description" class="classattr">
                                        <input id="CreateNewPythonFileTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="CreateNewPythonFileTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewPythonFileTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewPythonFileTool.description-1480"><a href="#CreateNewPythonFileTool.description-1480"><span class="linenos">1480</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewPythonFileTool.description-1481"><a href="#CreateNewPythonFileTool.description-1481"><span class="linenos">1481</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool.description-1482"><a href="#CreateNewPythonFileTool.description-1482"><span class="linenos">1482</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="CreateNewPythonFileTool.description-1483"><a href="#CreateNewPythonFileTool.description-1483"><span class="linenos">1483</span></a>
</span><span id="CreateNewPythonFileTool.description-1484"><a href="#CreateNewPythonFileTool.description-1484"><span class="linenos">1484</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool.description-1485"><a href="#CreateNewPythonFileTool.description-1485"><span class="linenos">1485</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="CreateNewPythonFileTool.description-1486"><a href="#CreateNewPythonFileTool.description-1486"><span class="linenos">1486</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool.description-1487"><a href="#CreateNewPythonFileTool.description-1487"><span class="linenos">1487</span></a>        <span class="k">return</span> <span class="s2">&quot;Creates a new Python file with the provided code, returning the file path.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewPythonFileTool.schema" class="classattr">
                                        <input id="CreateNewPythonFileTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="CreateNewPythonFileTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewPythonFileTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewPythonFileTool.schema-1489"><a href="#CreateNewPythonFileTool.schema-1489"><span class="linenos">1489</span></a>    <span class="nd">@property</span>
</span><span id="CreateNewPythonFileTool.schema-1490"><a href="#CreateNewPythonFileTool.schema-1490"><span class="linenos">1490</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool.schema-1491"><a href="#CreateNewPythonFileTool.schema-1491"><span class="linenos">1491</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="CreateNewPythonFileTool.schema-1492"><a href="#CreateNewPythonFileTool.schema-1492"><span class="linenos">1492</span></a>
</span><span id="CreateNewPythonFileTool.schema-1493"><a href="#CreateNewPythonFileTool.schema-1493"><span class="linenos">1493</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool.schema-1494"><a href="#CreateNewPythonFileTool.schema-1494"><span class="linenos">1494</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="CreateNewPythonFileTool.schema-1495"><a href="#CreateNewPythonFileTool.schema-1495"><span class="linenos">1495</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool.schema-1496"><a href="#CreateNewPythonFileTool.schema-1496"><span class="linenos">1496</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="CreateNewPythonFileTool.schema-1497"><a href="#CreateNewPythonFileTool.schema-1497"><span class="linenos">1497</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool.schema-1498"><a href="#CreateNewPythonFileTool.schema-1498"><span class="linenos">1498</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewPythonFileTool.schema-1499"><a href="#CreateNewPythonFileTool.schema-1499"><span class="linenos">1499</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool.schema-1500"><a href="#CreateNewPythonFileTool.schema-1500"><span class="linenos">1500</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool.schema-1501"><a href="#CreateNewPythonFileTool.schema-1501"><span class="linenos">1501</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool.schema-1502"><a href="#CreateNewPythonFileTool.schema-1502"><span class="linenos">1502</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="CreateNewPythonFileTool.schema-1503"><a href="#CreateNewPythonFileTool.schema-1503"><span class="linenos">1503</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool.schema-1504"><a href="#CreateNewPythonFileTool.schema-1504"><span class="linenos">1504</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Python source code for the new file.&quot;</span><span class="p">}},</span>
</span><span id="CreateNewPythonFileTool.schema-1505"><a href="#CreateNewPythonFileTool.schema-1505"><span class="linenos">1505</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span>
</span><span id="CreateNewPythonFileTool.schema-1506"><a href="#CreateNewPythonFileTool.schema-1506"><span class="linenos">1506</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="CreateNewPythonFileTool.schema-1507"><a href="#CreateNewPythonFileTool.schema-1507"><span class="linenos">1507</span></a>                <span class="p">},</span>
</span><span id="CreateNewPythonFileTool.schema-1508"><a href="#CreateNewPythonFileTool.schema-1508"><span class="linenos">1508</span></a>            <span class="p">},</span>
</span><span id="CreateNewPythonFileTool.schema-1509"><a href="#CreateNewPythonFileTool.schema-1509"><span class="linenos">1509</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Schema for the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewPythonFileTool.pre_invoke" class="classattr">
                                        <input id="CreateNewPythonFileTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="CreateNewPythonFileTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewPythonFileTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewPythonFileTool.pre_invoke-1511"><a href="#CreateNewPythonFileTool.pre_invoke-1511"><span class="linenos">1511</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1512"><a href="#CreateNewPythonFileTool.pre_invoke-1512"><span class="linenos">1512</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1513"><a href="#CreateNewPythonFileTool.pre_invoke-1513"><span class="linenos">1513</span></a>
</span><span id="CreateNewPythonFileTool.pre_invoke-1514"><a href="#CreateNewPythonFileTool.pre_invoke-1514"><span class="linenos">1514</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1515"><a href="#CreateNewPythonFileTool.pre_invoke-1515"><span class="linenos">1515</span></a>
</span><span id="CreateNewPythonFileTool.pre_invoke-1516"><a href="#CreateNewPythonFileTool.pre_invoke-1516"><span class="linenos">1516</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1517"><a href="#CreateNewPythonFileTool.pre_invoke-1517"><span class="linenos">1517</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1518"><a href="#CreateNewPythonFileTool.pre_invoke-1518"><span class="linenos">1518</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1519"><a href="#CreateNewPythonFileTool.pre_invoke-1519"><span class="linenos">1519</span></a>
</span><span id="CreateNewPythonFileTool.pre_invoke-1520"><a href="#CreateNewPythonFileTool.pre_invoke-1520"><span class="linenos">1520</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1521"><a href="#CreateNewPythonFileTool.pre_invoke-1521"><span class="linenos">1521</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1522"><a href="#CreateNewPythonFileTool.pre_invoke-1522"><span class="linenos">1522</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1523"><a href="#CreateNewPythonFileTool.pre_invoke-1523"><span class="linenos">1523</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1524"><a href="#CreateNewPythonFileTool.pre_invoke-1524"><span class="linenos">1524</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1525"><a href="#CreateNewPythonFileTool.pre_invoke-1525"><span class="linenos">1525</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1526"><a href="#CreateNewPythonFileTool.pre_invoke-1526"><span class="linenos">1526</span></a>            <span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Create a new Python file with the provided code?&quot;</span>
</span><span id="CreateNewPythonFileTool.pre_invoke-1527"><a href="#CreateNewPythonFileTool.pre_invoke-1527"><span class="linenos">1527</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="CreateNewPythonFileTool.handle_tool_call" class="classattr">
                                        <input id="CreateNewPythonFileTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="CreateNewPythonFileTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CreateNewPythonFileTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CreateNewPythonFileTool.handle_tool_call-1529"><a href="#CreateNewPythonFileTool.handle_tool_call-1529"><span class="linenos">1529</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1530"><a href="#CreateNewPythonFileTool.handle_tool_call-1530"><span class="linenos">1530</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1531"><a href="#CreateNewPythonFileTool.handle_tool_call-1531"><span class="linenos">1531</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1532"><a href="#CreateNewPythonFileTool.handle_tool_call-1532"><span class="linenos">1532</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1533"><a href="#CreateNewPythonFileTool.handle_tool_call-1533"><span class="linenos">1533</span></a>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1534"><a href="#CreateNewPythonFileTool.handle_tool_call-1534"><span class="linenos">1534</span></a><span class="sd">        Args:</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1535"><a href="#CreateNewPythonFileTool.handle_tool_call-1535"><span class="linenos">1535</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1536"><a href="#CreateNewPythonFileTool.handle_tool_call-1536"><span class="linenos">1536</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1537"><a href="#CreateNewPythonFileTool.handle_tool_call-1537"><span class="linenos">1537</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1538"><a href="#CreateNewPythonFileTool.handle_tool_call-1538"><span class="linenos">1538</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1539"><a href="#CreateNewPythonFileTool.handle_tool_call-1539"><span class="linenos">1539</span></a>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1540"><a href="#CreateNewPythonFileTool.handle_tool_call-1540"><span class="linenos">1540</span></a><span class="sd">        Return:</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1541"><a href="#CreateNewPythonFileTool.handle_tool_call-1541"><span class="linenos">1541</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1542"><a href="#CreateNewPythonFileTool.handle_tool_call-1542"><span class="linenos">1542</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1543"><a href="#CreateNewPythonFileTool.handle_tool_call-1543"><span class="linenos">1543</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1544"><a href="#CreateNewPythonFileTool.handle_tool_call-1544"><span class="linenos">1544</span></a>            <span class="s2">&quot;notebook-intelligence:create-new-file&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">]}</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1545"><a href="#CreateNewPythonFileTool.handle_tool_call-1545"><span class="linenos">1545</span></a>        <span class="p">)</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1546"><a href="#CreateNewPythonFileTool.handle_tool_call-1546"><span class="linenos">1546</span></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">ui_cmd_response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="CreateNewPythonFileTool.handle_tool_call-1547"><a href="#CreateNewPythonFileTool.handle_tool_call-1547"><span class="linenos">1547</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Created new Python file at </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="GetCurrentFileContentTool">
                            <input id="GetCurrentFileContentTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GetCurrentFileContentTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="GetCurrentFileContentTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCurrentFileContentTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCurrentFileContentTool-1550"><a href="#GetCurrentFileContentTool-1550"><span class="linenos">1550</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GetCurrentFileContentTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="GetCurrentFileContentTool-1551"><a href="#GetCurrentFileContentTool-1551"><span class="linenos">1551</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool for getting the content of the current file.&quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool-1552"><a href="#GetCurrentFileContentTool-1552"><span class="linenos">1552</span></a>
</span><span id="GetCurrentFileContentTool-1553"><a href="#GetCurrentFileContentTool-1553"><span class="linenos">1553</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool-1554"><a href="#GetCurrentFileContentTool-1554"><span class="linenos">1554</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="GetCurrentFileContentTool-1555"><a href="#GetCurrentFileContentTool-1555"><span class="linenos">1555</span></a>
</span><span id="GetCurrentFileContentTool-1556"><a href="#GetCurrentFileContentTool-1556"><span class="linenos">1556</span></a><span class="sd">        Args:</span>
</span><span id="GetCurrentFileContentTool-1557"><a href="#GetCurrentFileContentTool-1557"><span class="linenos">1557</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="GetCurrentFileContentTool-1558"><a href="#GetCurrentFileContentTool-1558"><span class="linenos">1558</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool-1559"><a href="#GetCurrentFileContentTool-1559"><span class="linenos">1559</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="GetCurrentFileContentTool-1560"><a href="#GetCurrentFileContentTool-1560"><span class="linenos">1560</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="GetCurrentFileContentTool-1561"><a href="#GetCurrentFileContentTool-1561"><span class="linenos">1561</span></a>
</span><span id="GetCurrentFileContentTool-1562"><a href="#GetCurrentFileContentTool-1562"><span class="linenos">1562</span></a>    <span class="nd">@property</span>
</span><span id="GetCurrentFileContentTool-1563"><a href="#GetCurrentFileContentTool-1563"><span class="linenos">1563</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool-1564"><a href="#GetCurrentFileContentTool-1564"><span class="linenos">1564</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="GetCurrentFileContentTool-1565"><a href="#GetCurrentFileContentTool-1565"><span class="linenos">1565</span></a>
</span><span id="GetCurrentFileContentTool-1566"><a href="#GetCurrentFileContentTool-1566"><span class="linenos">1566</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool-1567"><a href="#GetCurrentFileContentTool-1567"><span class="linenos">1567</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="GetCurrentFileContentTool-1568"><a href="#GetCurrentFileContentTool-1568"><span class="linenos">1568</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool-1569"><a href="#GetCurrentFileContentTool-1569"><span class="linenos">1569</span></a>        <span class="k">return</span> <span class="s2">&quot;get_current_file_content&quot;</span>
</span><span id="GetCurrentFileContentTool-1570"><a href="#GetCurrentFileContentTool-1570"><span class="linenos">1570</span></a>
</span><span id="GetCurrentFileContentTool-1571"><a href="#GetCurrentFileContentTool-1571"><span class="linenos">1571</span></a>    <span class="nd">@property</span>
</span><span id="GetCurrentFileContentTool-1572"><a href="#GetCurrentFileContentTool-1572"><span class="linenos">1572</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool-1573"><a href="#GetCurrentFileContentTool-1573"><span class="linenos">1573</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="GetCurrentFileContentTool-1574"><a href="#GetCurrentFileContentTool-1574"><span class="linenos">1574</span></a>
</span><span id="GetCurrentFileContentTool-1575"><a href="#GetCurrentFileContentTool-1575"><span class="linenos">1575</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool-1576"><a href="#GetCurrentFileContentTool-1576"><span class="linenos">1576</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="GetCurrentFileContentTool-1577"><a href="#GetCurrentFileContentTool-1577"><span class="linenos">1577</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool-1578"><a href="#GetCurrentFileContentTool-1578"><span class="linenos">1578</span></a>        <span class="k">return</span> <span class="s2">&quot;Get content of the current file&quot;</span>
</span><span id="GetCurrentFileContentTool-1579"><a href="#GetCurrentFileContentTool-1579"><span class="linenos">1579</span></a>
</span><span id="GetCurrentFileContentTool-1580"><a href="#GetCurrentFileContentTool-1580"><span class="linenos">1580</span></a>    <span class="nd">@property</span>
</span><span id="GetCurrentFileContentTool-1581"><a href="#GetCurrentFileContentTool-1581"><span class="linenos">1581</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="GetCurrentFileContentTool-1582"><a href="#GetCurrentFileContentTool-1582"><span class="linenos">1582</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="GetCurrentFileContentTool-1583"><a href="#GetCurrentFileContentTool-1583"><span class="linenos">1583</span></a>
</span><span id="GetCurrentFileContentTool-1584"><a href="#GetCurrentFileContentTool-1584"><span class="linenos">1584</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool-1585"><a href="#GetCurrentFileContentTool-1585"><span class="linenos">1585</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="GetCurrentFileContentTool-1586"><a href="#GetCurrentFileContentTool-1586"><span class="linenos">1586</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool-1587"><a href="#GetCurrentFileContentTool-1587"><span class="linenos">1587</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">]</span>
</span><span id="GetCurrentFileContentTool-1588"><a href="#GetCurrentFileContentTool-1588"><span class="linenos">1588</span></a>
</span><span id="GetCurrentFileContentTool-1589"><a href="#GetCurrentFileContentTool-1589"><span class="linenos">1589</span></a>    <span class="nd">@property</span>
</span><span id="GetCurrentFileContentTool-1590"><a href="#GetCurrentFileContentTool-1590"><span class="linenos">1590</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool-1591"><a href="#GetCurrentFileContentTool-1591"><span class="linenos">1591</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="GetCurrentFileContentTool-1592"><a href="#GetCurrentFileContentTool-1592"><span class="linenos">1592</span></a>
</span><span id="GetCurrentFileContentTool-1593"><a href="#GetCurrentFileContentTool-1593"><span class="linenos">1593</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool-1594"><a href="#GetCurrentFileContentTool-1594"><span class="linenos">1594</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="GetCurrentFileContentTool-1595"><a href="#GetCurrentFileContentTool-1595"><span class="linenos">1595</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool-1596"><a href="#GetCurrentFileContentTool-1596"><span class="linenos">1596</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the content of the currently active file (notebook or text).&quot;</span>
</span><span id="GetCurrentFileContentTool-1597"><a href="#GetCurrentFileContentTool-1597"><span class="linenos">1597</span></a>
</span><span id="GetCurrentFileContentTool-1598"><a href="#GetCurrentFileContentTool-1598"><span class="linenos">1598</span></a>    <span class="nd">@property</span>
</span><span id="GetCurrentFileContentTool-1599"><a href="#GetCurrentFileContentTool-1599"><span class="linenos">1599</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool-1600"><a href="#GetCurrentFileContentTool-1600"><span class="linenos">1600</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="GetCurrentFileContentTool-1601"><a href="#GetCurrentFileContentTool-1601"><span class="linenos">1601</span></a>
</span><span id="GetCurrentFileContentTool-1602"><a href="#GetCurrentFileContentTool-1602"><span class="linenos">1602</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool-1603"><a href="#GetCurrentFileContentTool-1603"><span class="linenos">1603</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="GetCurrentFileContentTool-1604"><a href="#GetCurrentFileContentTool-1604"><span class="linenos">1604</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool-1605"><a href="#GetCurrentFileContentTool-1605"><span class="linenos">1605</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="GetCurrentFileContentTool-1606"><a href="#GetCurrentFileContentTool-1606"><span class="linenos">1606</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="GetCurrentFileContentTool-1607"><a href="#GetCurrentFileContentTool-1607"><span class="linenos">1607</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCurrentFileContentTool-1608"><a href="#GetCurrentFileContentTool-1608"><span class="linenos">1608</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="GetCurrentFileContentTool-1609"><a href="#GetCurrentFileContentTool-1609"><span class="linenos">1609</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="GetCurrentFileContentTool-1610"><a href="#GetCurrentFileContentTool-1610"><span class="linenos">1610</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="GetCurrentFileContentTool-1611"><a href="#GetCurrentFileContentTool-1611"><span class="linenos">1611</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
</span><span id="GetCurrentFileContentTool-1612"><a href="#GetCurrentFileContentTool-1612"><span class="linenos">1612</span></a>            <span class="p">},</span>
</span><span id="GetCurrentFileContentTool-1613"><a href="#GetCurrentFileContentTool-1613"><span class="linenos">1613</span></a>        <span class="p">}</span>
</span><span id="GetCurrentFileContentTool-1614"><a href="#GetCurrentFileContentTool-1614"><span class="linenos">1614</span></a>
</span><span id="GetCurrentFileContentTool-1615"><a href="#GetCurrentFileContentTool-1615"><span class="linenos">1615</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool-1616"><a href="#GetCurrentFileContentTool-1616"><span class="linenos">1616</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="GetCurrentFileContentTool-1617"><a href="#GetCurrentFileContentTool-1617"><span class="linenos">1617</span></a>
</span><span id="GetCurrentFileContentTool-1618"><a href="#GetCurrentFileContentTool-1618"><span class="linenos">1618</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="GetCurrentFileContentTool-1619"><a href="#GetCurrentFileContentTool-1619"><span class="linenos">1619</span></a>
</span><span id="GetCurrentFileContentTool-1620"><a href="#GetCurrentFileContentTool-1620"><span class="linenos">1620</span></a><span class="sd">        Args:</span>
</span><span id="GetCurrentFileContentTool-1621"><a href="#GetCurrentFileContentTool-1621"><span class="linenos">1621</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCurrentFileContentTool-1622"><a href="#GetCurrentFileContentTool-1622"><span class="linenos">1622</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCurrentFileContentTool-1623"><a href="#GetCurrentFileContentTool-1623"><span class="linenos">1623</span></a>
</span><span id="GetCurrentFileContentTool-1624"><a href="#GetCurrentFileContentTool-1624"><span class="linenos">1624</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool-1625"><a href="#GetCurrentFileContentTool-1625"><span class="linenos">1625</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="GetCurrentFileContentTool-1626"><a href="#GetCurrentFileContentTool-1626"><span class="linenos">1626</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool-1627"><a href="#GetCurrentFileContentTool-1627"><span class="linenos">1627</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="GetCurrentFileContentTool-1628"><a href="#GetCurrentFileContentTool-1628"><span class="linenos">1628</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="GetCurrentFileContentTool-1629"><a href="#GetCurrentFileContentTool-1629"><span class="linenos">1629</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="GetCurrentFileContentTool-1630"><a href="#GetCurrentFileContentTool-1630"><span class="linenos">1630</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Get content of the current file?&quot;</span><span class="p">)</span>
</span><span id="GetCurrentFileContentTool-1631"><a href="#GetCurrentFileContentTool-1631"><span class="linenos">1631</span></a>        <span class="p">)</span>
</span><span id="GetCurrentFileContentTool-1632"><a href="#GetCurrentFileContentTool-1632"><span class="linenos">1632</span></a>
</span><span id="GetCurrentFileContentTool-1633"><a href="#GetCurrentFileContentTool-1633"><span class="linenos">1633</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="GetCurrentFileContentTool-1634"><a href="#GetCurrentFileContentTool-1634"><span class="linenos">1634</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="GetCurrentFileContentTool-1635"><a href="#GetCurrentFileContentTool-1635"><span class="linenos">1635</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool-1636"><a href="#GetCurrentFileContentTool-1636"><span class="linenos">1636</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="GetCurrentFileContentTool-1637"><a href="#GetCurrentFileContentTool-1637"><span class="linenos">1637</span></a>
</span><span id="GetCurrentFileContentTool-1638"><a href="#GetCurrentFileContentTool-1638"><span class="linenos">1638</span></a><span class="sd">        Args:</span>
</span><span id="GetCurrentFileContentTool-1639"><a href="#GetCurrentFileContentTool-1639"><span class="linenos">1639</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCurrentFileContentTool-1640"><a href="#GetCurrentFileContentTool-1640"><span class="linenos">1640</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="GetCurrentFileContentTool-1641"><a href="#GetCurrentFileContentTool-1641"><span class="linenos">1641</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="GetCurrentFileContentTool-1642"><a href="#GetCurrentFileContentTool-1642"><span class="linenos">1642</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCurrentFileContentTool-1643"><a href="#GetCurrentFileContentTool-1643"><span class="linenos">1643</span></a>
</span><span id="GetCurrentFileContentTool-1644"><a href="#GetCurrentFileContentTool-1644"><span class="linenos">1644</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool-1645"><a href="#GetCurrentFileContentTool-1645"><span class="linenos">1645</span></a><span class="sd">            str: The content of the current file.</span>
</span><span id="GetCurrentFileContentTool-1646"><a href="#GetCurrentFileContentTool-1646"><span class="linenos">1646</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool-1647"><a href="#GetCurrentFileContentTool-1647"><span class="linenos">1647</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:get-current-file-content&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="GetCurrentFileContentTool-1648"><a href="#GetCurrentFileContentTool-1648"><span class="linenos">1648</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Tool for getting the content of the current file.</p>
</div>


                            <div id="GetCurrentFileContentTool.__init__" class="classattr">
                                        <input id="GetCurrentFileContentTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">GetCurrentFileContentTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></span>)</span>

                <label class="view-source-button" for="GetCurrentFileContentTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCurrentFileContentTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCurrentFileContentTool.__init__-1553"><a href="#GetCurrentFileContentTool.__init__-1553"><span class="linenos">1553</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool.__init__-1554"><a href="#GetCurrentFileContentTool.__init__-1554"><span class="linenos">1554</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the tool.</span>
</span><span id="GetCurrentFileContentTool.__init__-1555"><a href="#GetCurrentFileContentTool.__init__-1555"><span class="linenos">1555</span></a>
</span><span id="GetCurrentFileContentTool.__init__-1556"><a href="#GetCurrentFileContentTool.__init__-1556"><span class="linenos">1556</span></a><span class="sd">        Args:</span>
</span><span id="GetCurrentFileContentTool.__init__-1557"><a href="#GetCurrentFileContentTool.__init__-1557"><span class="linenos">1557</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve tool calls.</span>
</span><span id="GetCurrentFileContentTool.__init__-1558"><a href="#GetCurrentFileContentTool.__init__-1558"><span class="linenos">1558</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool.__init__-1559"><a href="#GetCurrentFileContentTool.__init__-1559"><span class="linenos">1559</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="GetCurrentFileContentTool.__init__-1560"><a href="#GetCurrentFileContentTool.__init__-1560"><span class="linenos">1560</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve tool calls.</li>
</ul>
</div>


                            </div>
                            <div id="GetCurrentFileContentTool.name" class="classattr">
                                        <input id="GetCurrentFileContentTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetCurrentFileContentTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCurrentFileContentTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCurrentFileContentTool.name-1562"><a href="#GetCurrentFileContentTool.name-1562"><span class="linenos">1562</span></a>    <span class="nd">@property</span>
</span><span id="GetCurrentFileContentTool.name-1563"><a href="#GetCurrentFileContentTool.name-1563"><span class="linenos">1563</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool.name-1564"><a href="#GetCurrentFileContentTool.name-1564"><span class="linenos">1564</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="GetCurrentFileContentTool.name-1565"><a href="#GetCurrentFileContentTool.name-1565"><span class="linenos">1565</span></a>
</span><span id="GetCurrentFileContentTool.name-1566"><a href="#GetCurrentFileContentTool.name-1566"><span class="linenos">1566</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool.name-1567"><a href="#GetCurrentFileContentTool.name-1567"><span class="linenos">1567</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="GetCurrentFileContentTool.name-1568"><a href="#GetCurrentFileContentTool.name-1568"><span class="linenos">1568</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool.name-1569"><a href="#GetCurrentFileContentTool.name-1569"><span class="linenos">1569</span></a>        <span class="k">return</span> <span class="s2">&quot;get_current_file_content&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCurrentFileContentTool.title" class="classattr">
                                        <input id="GetCurrentFileContentTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetCurrentFileContentTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCurrentFileContentTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCurrentFileContentTool.title-1571"><a href="#GetCurrentFileContentTool.title-1571"><span class="linenos">1571</span></a>    <span class="nd">@property</span>
</span><span id="GetCurrentFileContentTool.title-1572"><a href="#GetCurrentFileContentTool.title-1572"><span class="linenos">1572</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool.title-1573"><a href="#GetCurrentFileContentTool.title-1573"><span class="linenos">1573</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="GetCurrentFileContentTool.title-1574"><a href="#GetCurrentFileContentTool.title-1574"><span class="linenos">1574</span></a>
</span><span id="GetCurrentFileContentTool.title-1575"><a href="#GetCurrentFileContentTool.title-1575"><span class="linenos">1575</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool.title-1576"><a href="#GetCurrentFileContentTool.title-1576"><span class="linenos">1576</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="GetCurrentFileContentTool.title-1577"><a href="#GetCurrentFileContentTool.title-1577"><span class="linenos">1577</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool.title-1578"><a href="#GetCurrentFileContentTool.title-1578"><span class="linenos">1578</span></a>        <span class="k">return</span> <span class="s2">&quot;Get content of the current file&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCurrentFileContentTool.tags" class="classattr">
                                        <input id="GetCurrentFileContentTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="GetCurrentFileContentTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCurrentFileContentTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCurrentFileContentTool.tags-1580"><a href="#GetCurrentFileContentTool.tags-1580"><span class="linenos">1580</span></a>    <span class="nd">@property</span>
</span><span id="GetCurrentFileContentTool.tags-1581"><a href="#GetCurrentFileContentTool.tags-1581"><span class="linenos">1581</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="GetCurrentFileContentTool.tags-1582"><a href="#GetCurrentFileContentTool.tags-1582"><span class="linenos">1582</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="GetCurrentFileContentTool.tags-1583"><a href="#GetCurrentFileContentTool.tags-1583"><span class="linenos">1583</span></a>
</span><span id="GetCurrentFileContentTool.tags-1584"><a href="#GetCurrentFileContentTool.tags-1584"><span class="linenos">1584</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool.tags-1585"><a href="#GetCurrentFileContentTool.tags-1585"><span class="linenos">1585</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="GetCurrentFileContentTool.tags-1586"><a href="#GetCurrentFileContentTool.tags-1586"><span class="linenos">1586</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool.tags-1587"><a href="#GetCurrentFileContentTool.tags-1587"><span class="linenos">1587</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCurrentFileContentTool.description" class="classattr">
                                        <input id="GetCurrentFileContentTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="GetCurrentFileContentTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCurrentFileContentTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCurrentFileContentTool.description-1589"><a href="#GetCurrentFileContentTool.description-1589"><span class="linenos">1589</span></a>    <span class="nd">@property</span>
</span><span id="GetCurrentFileContentTool.description-1590"><a href="#GetCurrentFileContentTool.description-1590"><span class="linenos">1590</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool.description-1591"><a href="#GetCurrentFileContentTool.description-1591"><span class="linenos">1591</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="GetCurrentFileContentTool.description-1592"><a href="#GetCurrentFileContentTool.description-1592"><span class="linenos">1592</span></a>
</span><span id="GetCurrentFileContentTool.description-1593"><a href="#GetCurrentFileContentTool.description-1593"><span class="linenos">1593</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool.description-1594"><a href="#GetCurrentFileContentTool.description-1594"><span class="linenos">1594</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="GetCurrentFileContentTool.description-1595"><a href="#GetCurrentFileContentTool.description-1595"><span class="linenos">1595</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool.description-1596"><a href="#GetCurrentFileContentTool.description-1596"><span class="linenos">1596</span></a>        <span class="k">return</span> <span class="s2">&quot;Returns the content of the currently active file (notebook or text).&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCurrentFileContentTool.schema" class="classattr">
                                        <input id="GetCurrentFileContentTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="GetCurrentFileContentTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCurrentFileContentTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCurrentFileContentTool.schema-1598"><a href="#GetCurrentFileContentTool.schema-1598"><span class="linenos">1598</span></a>    <span class="nd">@property</span>
</span><span id="GetCurrentFileContentTool.schema-1599"><a href="#GetCurrentFileContentTool.schema-1599"><span class="linenos">1599</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool.schema-1600"><a href="#GetCurrentFileContentTool.schema-1600"><span class="linenos">1600</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool.</span>
</span><span id="GetCurrentFileContentTool.schema-1601"><a href="#GetCurrentFileContentTool.schema-1601"><span class="linenos">1601</span></a>
</span><span id="GetCurrentFileContentTool.schema-1602"><a href="#GetCurrentFileContentTool.schema-1602"><span class="linenos">1602</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool.schema-1603"><a href="#GetCurrentFileContentTool.schema-1603"><span class="linenos">1603</span></a><span class="sd">            dict: The schema for the tool.</span>
</span><span id="GetCurrentFileContentTool.schema-1604"><a href="#GetCurrentFileContentTool.schema-1604"><span class="linenos">1604</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool.schema-1605"><a href="#GetCurrentFileContentTool.schema-1605"><span class="linenos">1605</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="GetCurrentFileContentTool.schema-1606"><a href="#GetCurrentFileContentTool.schema-1606"><span class="linenos">1606</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="GetCurrentFileContentTool.schema-1607"><a href="#GetCurrentFileContentTool.schema-1607"><span class="linenos">1607</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="GetCurrentFileContentTool.schema-1608"><a href="#GetCurrentFileContentTool.schema-1608"><span class="linenos">1608</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="GetCurrentFileContentTool.schema-1609"><a href="#GetCurrentFileContentTool.schema-1609"><span class="linenos">1609</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="GetCurrentFileContentTool.schema-1610"><a href="#GetCurrentFileContentTool.schema-1610"><span class="linenos">1610</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="GetCurrentFileContentTool.schema-1611"><a href="#GetCurrentFileContentTool.schema-1611"><span class="linenos">1611</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span>
</span><span id="GetCurrentFileContentTool.schema-1612"><a href="#GetCurrentFileContentTool.schema-1612"><span class="linenos">1612</span></a>            <span class="p">},</span>
</span><span id="GetCurrentFileContentTool.schema-1613"><a href="#GetCurrentFileContentTool.schema-1613"><span class="linenos">1613</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Schema for the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>dict: The schema for the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCurrentFileContentTool.pre_invoke" class="classattr">
                                        <input id="GetCurrentFileContentTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="GetCurrentFileContentTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCurrentFileContentTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCurrentFileContentTool.pre_invoke-1615"><a href="#GetCurrentFileContentTool.pre_invoke-1615"><span class="linenos">1615</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1616"><a href="#GetCurrentFileContentTool.pre_invoke-1616"><span class="linenos">1616</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1617"><a href="#GetCurrentFileContentTool.pre_invoke-1617"><span class="linenos">1617</span></a>
</span><span id="GetCurrentFileContentTool.pre_invoke-1618"><a href="#GetCurrentFileContentTool.pre_invoke-1618"><span class="linenos">1618</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1619"><a href="#GetCurrentFileContentTool.pre_invoke-1619"><span class="linenos">1619</span></a>
</span><span id="GetCurrentFileContentTool.pre_invoke-1620"><a href="#GetCurrentFileContentTool.pre_invoke-1620"><span class="linenos">1620</span></a><span class="sd">        Args:</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1621"><a href="#GetCurrentFileContentTool.pre_invoke-1621"><span class="linenos">1621</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1622"><a href="#GetCurrentFileContentTool.pre_invoke-1622"><span class="linenos">1622</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1623"><a href="#GetCurrentFileContentTool.pre_invoke-1623"><span class="linenos">1623</span></a>
</span><span id="GetCurrentFileContentTool.pre_invoke-1624"><a href="#GetCurrentFileContentTool.pre_invoke-1624"><span class="linenos">1624</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1625"><a href="#GetCurrentFileContentTool.pre_invoke-1625"><span class="linenos">1625</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1626"><a href="#GetCurrentFileContentTool.pre_invoke-1626"><span class="linenos">1626</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1627"><a href="#GetCurrentFileContentTool.pre_invoke-1627"><span class="linenos">1627</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1628"><a href="#GetCurrentFileContentTool.pre_invoke-1628"><span class="linenos">1628</span></a>            <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1629"><a href="#GetCurrentFileContentTool.pre_invoke-1629"><span class="linenos">1629</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1630"><a href="#GetCurrentFileContentTool.pre_invoke-1630"><span class="linenos">1630</span></a>            <span class="k">else</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Get content of the current file?&quot;</span><span class="p">)</span>
</span><span id="GetCurrentFileContentTool.pre_invoke-1631"><a href="#GetCurrentFileContentTool.pre_invoke-1631"><span class="linenos">1631</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="GetCurrentFileContentTool.handle_tool_call" class="classattr">
                                        <input id="GetCurrentFileContentTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="GetCurrentFileContentTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GetCurrentFileContentTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GetCurrentFileContentTool.handle_tool_call-1633"><a href="#GetCurrentFileContentTool.handle_tool_call-1633"><span class="linenos">1633</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1634"><a href="#GetCurrentFileContentTool.handle_tool_call-1634"><span class="linenos">1634</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1635"><a href="#GetCurrentFileContentTool.handle_tool_call-1635"><span class="linenos">1635</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1636"><a href="#GetCurrentFileContentTool.handle_tool_call-1636"><span class="linenos">1636</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call.</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1637"><a href="#GetCurrentFileContentTool.handle_tool_call-1637"><span class="linenos">1637</span></a>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1638"><a href="#GetCurrentFileContentTool.handle_tool_call-1638"><span class="linenos">1638</span></a><span class="sd">        Args:</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1639"><a href="#GetCurrentFileContentTool.handle_tool_call-1639"><span class="linenos">1639</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1640"><a href="#GetCurrentFileContentTool.handle_tool_call-1640"><span class="linenos">1640</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1641"><a href="#GetCurrentFileContentTool.handle_tool_call-1641"><span class="linenos">1641</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1642"><a href="#GetCurrentFileContentTool.handle_tool_call-1642"><span class="linenos">1642</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1643"><a href="#GetCurrentFileContentTool.handle_tool_call-1643"><span class="linenos">1643</span></a>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1644"><a href="#GetCurrentFileContentTool.handle_tool_call-1644"><span class="linenos">1644</span></a><span class="sd">        Return:</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1645"><a href="#GetCurrentFileContentTool.handle_tool_call-1645"><span class="linenos">1645</span></a><span class="sd">            str: The content of the current file.</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1646"><a href="#GetCurrentFileContentTool.handle_tool_call-1646"><span class="linenos">1646</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1647"><a href="#GetCurrentFileContentTool.handle_tool_call-1647"><span class="linenos">1647</span></a>        <span class="n">ui_cmd_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span><span class="s2">&quot;notebook-intelligence:get-current-file-content&quot;</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="GetCurrentFileContentTool.handle_tool_call-1648"><a href="#GetCurrentFileContentTool.handle_tool_call-1648"><span class="linenos">1648</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ui_cmd_response</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The content of the current file.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="SetCurrentFileContentTool">
                            <input id="SetCurrentFileContentTool-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SetCurrentFileContentTool</span><wbr>(<span class="base">notebook_intelligence.api.Tool</span>):

                <label class="view-source-button" for="SetCurrentFileContentTool-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCurrentFileContentTool"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCurrentFileContentTool-1651"><a href="#SetCurrentFileContentTool-1651"><span class="linenos">1651</span></a><span class="k">class</span><span class="w"> </span><span class="nc">SetCurrentFileContentTool</span><span class="p">(</span><span class="n">Tool</span><span class="p">):</span>
</span><span id="SetCurrentFileContentTool-1652"><a href="#SetCurrentFileContentTool-1652"><span class="linenos">1652</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tool to set the content of the current file.&quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool-1653"><a href="#SetCurrentFileContentTool-1653"><span class="linenos">1653</span></a>
</span><span id="SetCurrentFileContentTool-1654"><a href="#SetCurrentFileContentTool-1654"><span class="linenos">1654</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool-1655"><a href="#SetCurrentFileContentTool-1655"><span class="linenos">1655</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tool to set the content of the current file.</span>
</span><span id="SetCurrentFileContentTool-1656"><a href="#SetCurrentFileContentTool-1656"><span class="linenos">1656</span></a>
</span><span id="SetCurrentFileContentTool-1657"><a href="#SetCurrentFileContentTool-1657"><span class="linenos">1657</span></a><span class="sd">        Args:</span>
</span><span id="SetCurrentFileContentTool-1658"><a href="#SetCurrentFileContentTool-1658"><span class="linenos">1658</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve the tool invocation.</span>
</span><span id="SetCurrentFileContentTool-1659"><a href="#SetCurrentFileContentTool-1659"><span class="linenos">1659</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool-1660"><a href="#SetCurrentFileContentTool-1660"><span class="linenos">1660</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="SetCurrentFileContentTool-1661"><a href="#SetCurrentFileContentTool-1661"><span class="linenos">1661</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="SetCurrentFileContentTool-1662"><a href="#SetCurrentFileContentTool-1662"><span class="linenos">1662</span></a>
</span><span id="SetCurrentFileContentTool-1663"><a href="#SetCurrentFileContentTool-1663"><span class="linenos">1663</span></a>    <span class="nd">@property</span>
</span><span id="SetCurrentFileContentTool-1664"><a href="#SetCurrentFileContentTool-1664"><span class="linenos">1664</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool-1665"><a href="#SetCurrentFileContentTool-1665"><span class="linenos">1665</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="SetCurrentFileContentTool-1666"><a href="#SetCurrentFileContentTool-1666"><span class="linenos">1666</span></a>
</span><span id="SetCurrentFileContentTool-1667"><a href="#SetCurrentFileContentTool-1667"><span class="linenos">1667</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool-1668"><a href="#SetCurrentFileContentTool-1668"><span class="linenos">1668</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="SetCurrentFileContentTool-1669"><a href="#SetCurrentFileContentTool-1669"><span class="linenos">1669</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool-1670"><a href="#SetCurrentFileContentTool-1670"><span class="linenos">1670</span></a>        <span class="k">return</span> <span class="s2">&quot;set_current_file_content&quot;</span>
</span><span id="SetCurrentFileContentTool-1671"><a href="#SetCurrentFileContentTool-1671"><span class="linenos">1671</span></a>
</span><span id="SetCurrentFileContentTool-1672"><a href="#SetCurrentFileContentTool-1672"><span class="linenos">1672</span></a>    <span class="nd">@property</span>
</span><span id="SetCurrentFileContentTool-1673"><a href="#SetCurrentFileContentTool-1673"><span class="linenos">1673</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool-1674"><a href="#SetCurrentFileContentTool-1674"><span class="linenos">1674</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="SetCurrentFileContentTool-1675"><a href="#SetCurrentFileContentTool-1675"><span class="linenos">1675</span></a>
</span><span id="SetCurrentFileContentTool-1676"><a href="#SetCurrentFileContentTool-1676"><span class="linenos">1676</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool-1677"><a href="#SetCurrentFileContentTool-1677"><span class="linenos">1677</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="SetCurrentFileContentTool-1678"><a href="#SetCurrentFileContentTool-1678"><span class="linenos">1678</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool-1679"><a href="#SetCurrentFileContentTool-1679"><span class="linenos">1679</span></a>        <span class="k">return</span> <span class="s2">&quot;Set content of the current file&quot;</span>
</span><span id="SetCurrentFileContentTool-1680"><a href="#SetCurrentFileContentTool-1680"><span class="linenos">1680</span></a>
</span><span id="SetCurrentFileContentTool-1681"><a href="#SetCurrentFileContentTool-1681"><span class="linenos">1681</span></a>    <span class="nd">@property</span>
</span><span id="SetCurrentFileContentTool-1682"><a href="#SetCurrentFileContentTool-1682"><span class="linenos">1682</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="SetCurrentFileContentTool-1683"><a href="#SetCurrentFileContentTool-1683"><span class="linenos">1683</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="SetCurrentFileContentTool-1684"><a href="#SetCurrentFileContentTool-1684"><span class="linenos">1684</span></a>
</span><span id="SetCurrentFileContentTool-1685"><a href="#SetCurrentFileContentTool-1685"><span class="linenos">1685</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool-1686"><a href="#SetCurrentFileContentTool-1686"><span class="linenos">1686</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="SetCurrentFileContentTool-1687"><a href="#SetCurrentFileContentTool-1687"><span class="linenos">1687</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool-1688"><a href="#SetCurrentFileContentTool-1688"><span class="linenos">1688</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">]</span>
</span><span id="SetCurrentFileContentTool-1689"><a href="#SetCurrentFileContentTool-1689"><span class="linenos">1689</span></a>
</span><span id="SetCurrentFileContentTool-1690"><a href="#SetCurrentFileContentTool-1690"><span class="linenos">1690</span></a>    <span class="nd">@property</span>
</span><span id="SetCurrentFileContentTool-1691"><a href="#SetCurrentFileContentTool-1691"><span class="linenos">1691</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool-1692"><a href="#SetCurrentFileContentTool-1692"><span class="linenos">1692</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="SetCurrentFileContentTool-1693"><a href="#SetCurrentFileContentTool-1693"><span class="linenos">1693</span></a>
</span><span id="SetCurrentFileContentTool-1694"><a href="#SetCurrentFileContentTool-1694"><span class="linenos">1694</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool-1695"><a href="#SetCurrentFileContentTool-1695"><span class="linenos">1695</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="SetCurrentFileContentTool-1696"><a href="#SetCurrentFileContentTool-1696"><span class="linenos">1696</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool-1697"><a href="#SetCurrentFileContentTool-1697"><span class="linenos">1697</span></a>        <span class="k">return</span> <span class="s2">&quot;Sets the content of the currently active file (notebook or text).&quot;</span>
</span><span id="SetCurrentFileContentTool-1698"><a href="#SetCurrentFileContentTool-1698"><span class="linenos">1698</span></a>
</span><span id="SetCurrentFileContentTool-1699"><a href="#SetCurrentFileContentTool-1699"><span class="linenos">1699</span></a>    <span class="nd">@property</span>
</span><span id="SetCurrentFileContentTool-1700"><a href="#SetCurrentFileContentTool-1700"><span class="linenos">1700</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool-1701"><a href="#SetCurrentFileContentTool-1701"><span class="linenos">1701</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool&#39;s parameters.</span>
</span><span id="SetCurrentFileContentTool-1702"><a href="#SetCurrentFileContentTool-1702"><span class="linenos">1702</span></a>
</span><span id="SetCurrentFileContentTool-1703"><a href="#SetCurrentFileContentTool-1703"><span class="linenos">1703</span></a><span class="sd">        Returns:</span>
</span><span id="SetCurrentFileContentTool-1704"><a href="#SetCurrentFileContentTool-1704"><span class="linenos">1704</span></a><span class="sd">            dict: The schema dictionary.</span>
</span><span id="SetCurrentFileContentTool-1705"><a href="#SetCurrentFileContentTool-1705"><span class="linenos">1705</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool-1706"><a href="#SetCurrentFileContentTool-1706"><span class="linenos">1706</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="SetCurrentFileContentTool-1707"><a href="#SetCurrentFileContentTool-1707"><span class="linenos">1707</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool-1708"><a href="#SetCurrentFileContentTool-1708"><span class="linenos">1708</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCurrentFileContentTool-1709"><a href="#SetCurrentFileContentTool-1709"><span class="linenos">1709</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool-1710"><a href="#SetCurrentFileContentTool-1710"><span class="linenos">1710</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool-1711"><a href="#SetCurrentFileContentTool-1711"><span class="linenos">1711</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool-1712"><a href="#SetCurrentFileContentTool-1712"><span class="linenos">1712</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCurrentFileContentTool-1713"><a href="#SetCurrentFileContentTool-1713"><span class="linenos">1713</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool-1714"><a href="#SetCurrentFileContentTool-1714"><span class="linenos">1714</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCurrentFileContentTool-1715"><a href="#SetCurrentFileContentTool-1715"><span class="linenos">1715</span></a>                        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;New content to write into the current file.&quot;</span><span class="p">}</span>
</span><span id="SetCurrentFileContentTool-1716"><a href="#SetCurrentFileContentTool-1716"><span class="linenos">1716</span></a>                    <span class="p">},</span>
</span><span id="SetCurrentFileContentTool-1717"><a href="#SetCurrentFileContentTool-1717"><span class="linenos">1717</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span>
</span><span id="SetCurrentFileContentTool-1718"><a href="#SetCurrentFileContentTool-1718"><span class="linenos">1718</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool-1719"><a href="#SetCurrentFileContentTool-1719"><span class="linenos">1719</span></a>                <span class="p">},</span>
</span><span id="SetCurrentFileContentTool-1720"><a href="#SetCurrentFileContentTool-1720"><span class="linenos">1720</span></a>            <span class="p">},</span>
</span><span id="SetCurrentFileContentTool-1721"><a href="#SetCurrentFileContentTool-1721"><span class="linenos">1721</span></a>        <span class="p">}</span>
</span><span id="SetCurrentFileContentTool-1722"><a href="#SetCurrentFileContentTool-1722"><span class="linenos">1722</span></a>
</span><span id="SetCurrentFileContentTool-1723"><a href="#SetCurrentFileContentTool-1723"><span class="linenos">1723</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool-1724"><a href="#SetCurrentFileContentTool-1724"><span class="linenos">1724</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="SetCurrentFileContentTool-1725"><a href="#SetCurrentFileContentTool-1725"><span class="linenos">1725</span></a>
</span><span id="SetCurrentFileContentTool-1726"><a href="#SetCurrentFileContentTool-1726"><span class="linenos">1726</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="SetCurrentFileContentTool-1727"><a href="#SetCurrentFileContentTool-1727"><span class="linenos">1727</span></a>
</span><span id="SetCurrentFileContentTool-1728"><a href="#SetCurrentFileContentTool-1728"><span class="linenos">1728</span></a><span class="sd">        Args:</span>
</span><span id="SetCurrentFileContentTool-1729"><a href="#SetCurrentFileContentTool-1729"><span class="linenos">1729</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SetCurrentFileContentTool-1730"><a href="#SetCurrentFileContentTool-1730"><span class="linenos">1730</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SetCurrentFileContentTool-1731"><a href="#SetCurrentFileContentTool-1731"><span class="linenos">1731</span></a>
</span><span id="SetCurrentFileContentTool-1732"><a href="#SetCurrentFileContentTool-1732"><span class="linenos">1732</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool-1733"><a href="#SetCurrentFileContentTool-1733"><span class="linenos">1733</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="SetCurrentFileContentTool-1734"><a href="#SetCurrentFileContentTool-1734"><span class="linenos">1734</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool-1735"><a href="#SetCurrentFileContentTool-1735"><span class="linenos">1735</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool-1736"><a href="#SetCurrentFileContentTool-1736"><span class="linenos">1736</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="SetCurrentFileContentTool-1737"><a href="#SetCurrentFileContentTool-1737"><span class="linenos">1737</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Overwrite the current file&#39;s content?&quot;</span><span class="p">)</span>
</span><span id="SetCurrentFileContentTool-1738"><a href="#SetCurrentFileContentTool-1738"><span class="linenos">1738</span></a>
</span><span id="SetCurrentFileContentTool-1739"><a href="#SetCurrentFileContentTool-1739"><span class="linenos">1739</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="SetCurrentFileContentTool-1740"><a href="#SetCurrentFileContentTool-1740"><span class="linenos">1740</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="SetCurrentFileContentTool-1741"><a href="#SetCurrentFileContentTool-1741"><span class="linenos">1741</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool-1742"><a href="#SetCurrentFileContentTool-1742"><span class="linenos">1742</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call to set the current file content.</span>
</span><span id="SetCurrentFileContentTool-1743"><a href="#SetCurrentFileContentTool-1743"><span class="linenos">1743</span></a>
</span><span id="SetCurrentFileContentTool-1744"><a href="#SetCurrentFileContentTool-1744"><span class="linenos">1744</span></a><span class="sd">        Args:</span>
</span><span id="SetCurrentFileContentTool-1745"><a href="#SetCurrentFileContentTool-1745"><span class="linenos">1745</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SetCurrentFileContentTool-1746"><a href="#SetCurrentFileContentTool-1746"><span class="linenos">1746</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="SetCurrentFileContentTool-1747"><a href="#SetCurrentFileContentTool-1747"><span class="linenos">1747</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="SetCurrentFileContentTool-1748"><a href="#SetCurrentFileContentTool-1748"><span class="linenos">1748</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SetCurrentFileContentTool-1749"><a href="#SetCurrentFileContentTool-1749"><span class="linenos">1749</span></a>
</span><span id="SetCurrentFileContentTool-1750"><a href="#SetCurrentFileContentTool-1750"><span class="linenos">1750</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool-1751"><a href="#SetCurrentFileContentTool-1751"><span class="linenos">1751</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="SetCurrentFileContentTool-1752"><a href="#SetCurrentFileContentTool-1752"><span class="linenos">1752</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool-1753"><a href="#SetCurrentFileContentTool-1753"><span class="linenos">1753</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="SetCurrentFileContentTool-1754"><a href="#SetCurrentFileContentTool-1754"><span class="linenos">1754</span></a>            <span class="s2">&quot;notebook-intelligence:set-current-file-content&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]}</span>
</span><span id="SetCurrentFileContentTool-1755"><a href="#SetCurrentFileContentTool-1755"><span class="linenos">1755</span></a>        <span class="p">)</span>
</span><span id="SetCurrentFileContentTool-1756"><a href="#SetCurrentFileContentTool-1756"><span class="linenos">1756</span></a>        <span class="k">return</span> <span class="s2">&quot;Set the file content&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Tool to set the content of the current file.</p>
</div>


                            <div id="SetCurrentFileContentTool.__init__" class="classattr">
                                        <input id="SetCurrentFileContentTool.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">SetCurrentFileContentTool</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="SetCurrentFileContentTool.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCurrentFileContentTool.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCurrentFileContentTool.__init__-1654"><a href="#SetCurrentFileContentTool.__init__-1654"><span class="linenos">1654</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auto_approve</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool.__init__-1655"><a href="#SetCurrentFileContentTool.__init__-1655"><span class="linenos">1655</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tool to set the content of the current file.</span>
</span><span id="SetCurrentFileContentTool.__init__-1656"><a href="#SetCurrentFileContentTool.__init__-1656"><span class="linenos">1656</span></a>
</span><span id="SetCurrentFileContentTool.__init__-1657"><a href="#SetCurrentFileContentTool.__init__-1657"><span class="linenos">1657</span></a><span class="sd">        Args:</span>
</span><span id="SetCurrentFileContentTool.__init__-1658"><a href="#SetCurrentFileContentTool.__init__-1658"><span class="linenos">1658</span></a><span class="sd">            auto_approve (bool): Whether to automatically approve the tool invocation.</span>
</span><span id="SetCurrentFileContentTool.__init__-1659"><a href="#SetCurrentFileContentTool.__init__-1659"><span class="linenos">1659</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool.__init__-1660"><a href="#SetCurrentFileContentTool.__init__-1660"><span class="linenos">1660</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span> <span class="o">=</span> <span class="n">auto_approve</span>
</span><span id="SetCurrentFileContentTool.__init__-1661"><a href="#SetCurrentFileContentTool.__init__-1661"><span class="linenos">1661</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Tool to set the content of the current file.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>auto_approve (bool):</strong>  Whether to automatically approve the tool invocation.</li>
</ul>
</div>


                            </div>
                            <div id="SetCurrentFileContentTool.name" class="classattr">
                                        <input id="SetCurrentFileContentTool.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="SetCurrentFileContentTool.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCurrentFileContentTool.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCurrentFileContentTool.name-1663"><a href="#SetCurrentFileContentTool.name-1663"><span class="linenos">1663</span></a>    <span class="nd">@property</span>
</span><span id="SetCurrentFileContentTool.name-1664"><a href="#SetCurrentFileContentTool.name-1664"><span class="linenos">1664</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool.name-1665"><a href="#SetCurrentFileContentTool.name-1665"><span class="linenos">1665</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Name of the tool.</span>
</span><span id="SetCurrentFileContentTool.name-1666"><a href="#SetCurrentFileContentTool.name-1666"><span class="linenos">1666</span></a>
</span><span id="SetCurrentFileContentTool.name-1667"><a href="#SetCurrentFileContentTool.name-1667"><span class="linenos">1667</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool.name-1668"><a href="#SetCurrentFileContentTool.name-1668"><span class="linenos">1668</span></a><span class="sd">            str: The name of the tool.</span>
</span><span id="SetCurrentFileContentTool.name-1669"><a href="#SetCurrentFileContentTool.name-1669"><span class="linenos">1669</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool.name-1670"><a href="#SetCurrentFileContentTool.name-1670"><span class="linenos">1670</span></a>        <span class="k">return</span> <span class="s2">&quot;set_current_file_content&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Name of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCurrentFileContentTool.title" class="classattr">
                                        <input id="SetCurrentFileContentTool.title-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">title</span><span class="annotation">: str</span>

                <label class="view-source-button" for="SetCurrentFileContentTool.title-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCurrentFileContentTool.title"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCurrentFileContentTool.title-1672"><a href="#SetCurrentFileContentTool.title-1672"><span class="linenos">1672</span></a>    <span class="nd">@property</span>
</span><span id="SetCurrentFileContentTool.title-1673"><a href="#SetCurrentFileContentTool.title-1673"><span class="linenos">1673</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool.title-1674"><a href="#SetCurrentFileContentTool.title-1674"><span class="linenos">1674</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Title of the tool.</span>
</span><span id="SetCurrentFileContentTool.title-1675"><a href="#SetCurrentFileContentTool.title-1675"><span class="linenos">1675</span></a>
</span><span id="SetCurrentFileContentTool.title-1676"><a href="#SetCurrentFileContentTool.title-1676"><span class="linenos">1676</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool.title-1677"><a href="#SetCurrentFileContentTool.title-1677"><span class="linenos">1677</span></a><span class="sd">            str: The title of the tool.</span>
</span><span id="SetCurrentFileContentTool.title-1678"><a href="#SetCurrentFileContentTool.title-1678"><span class="linenos">1678</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool.title-1679"><a href="#SetCurrentFileContentTool.title-1679"><span class="linenos">1679</span></a>        <span class="k">return</span> <span class="s2">&quot;Set content of the current file&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Title of the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The title of the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCurrentFileContentTool.tags" class="classattr">
                                        <input id="SetCurrentFileContentTool.tags-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tags</span><span class="annotation">: list[str]</span>

                <label class="view-source-button" for="SetCurrentFileContentTool.tags-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCurrentFileContentTool.tags"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCurrentFileContentTool.tags-1681"><a href="#SetCurrentFileContentTool.tags-1681"><span class="linenos">1681</span></a>    <span class="nd">@property</span>
</span><span id="SetCurrentFileContentTool.tags-1682"><a href="#SetCurrentFileContentTool.tags-1682"><span class="linenos">1682</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="SetCurrentFileContentTool.tags-1683"><a href="#SetCurrentFileContentTool.tags-1683"><span class="linenos">1683</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Tags associated with the tool.</span>
</span><span id="SetCurrentFileContentTool.tags-1684"><a href="#SetCurrentFileContentTool.tags-1684"><span class="linenos">1684</span></a>
</span><span id="SetCurrentFileContentTool.tags-1685"><a href="#SetCurrentFileContentTool.tags-1685"><span class="linenos">1685</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool.tags-1686"><a href="#SetCurrentFileContentTool.tags-1686"><span class="linenos">1686</span></a><span class="sd">            list[str]: The list of tags associated with the tool.</span>
</span><span id="SetCurrentFileContentTool.tags-1687"><a href="#SetCurrentFileContentTool.tags-1687"><span class="linenos">1687</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool.tags-1688"><a href="#SetCurrentFileContentTool.tags-1688"><span class="linenos">1688</span></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Tags associated with the tool.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[str]: The list of tags associated with the tool.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCurrentFileContentTool.description" class="classattr">
                                        <input id="SetCurrentFileContentTool.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="SetCurrentFileContentTool.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCurrentFileContentTool.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCurrentFileContentTool.description-1690"><a href="#SetCurrentFileContentTool.description-1690"><span class="linenos">1690</span></a>    <span class="nd">@property</span>
</span><span id="SetCurrentFileContentTool.description-1691"><a href="#SetCurrentFileContentTool.description-1691"><span class="linenos">1691</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool.description-1692"><a href="#SetCurrentFileContentTool.description-1692"><span class="linenos">1692</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Description of the tool&#39;s functionality.</span>
</span><span id="SetCurrentFileContentTool.description-1693"><a href="#SetCurrentFileContentTool.description-1693"><span class="linenos">1693</span></a>
</span><span id="SetCurrentFileContentTool.description-1694"><a href="#SetCurrentFileContentTool.description-1694"><span class="linenos">1694</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool.description-1695"><a href="#SetCurrentFileContentTool.description-1695"><span class="linenos">1695</span></a><span class="sd">            str: The description of the tool&#39;s functionality.</span>
</span><span id="SetCurrentFileContentTool.description-1696"><a href="#SetCurrentFileContentTool.description-1696"><span class="linenos">1696</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool.description-1697"><a href="#SetCurrentFileContentTool.description-1697"><span class="linenos">1697</span></a>        <span class="k">return</span> <span class="s2">&quot;Sets the content of the currently active file (notebook or text).&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Description of the tool's functionality.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the tool's functionality.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCurrentFileContentTool.schema" class="classattr">
                                        <input id="SetCurrentFileContentTool.schema-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">schema</span><span class="annotation">: dict</span>

                <label class="view-source-button" for="SetCurrentFileContentTool.schema-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCurrentFileContentTool.schema"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCurrentFileContentTool.schema-1699"><a href="#SetCurrentFileContentTool.schema-1699"><span class="linenos">1699</span></a>    <span class="nd">@property</span>
</span><span id="SetCurrentFileContentTool.schema-1700"><a href="#SetCurrentFileContentTool.schema-1700"><span class="linenos">1700</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool.schema-1701"><a href="#SetCurrentFileContentTool.schema-1701"><span class="linenos">1701</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Schema for the tool&#39;s parameters.</span>
</span><span id="SetCurrentFileContentTool.schema-1702"><a href="#SetCurrentFileContentTool.schema-1702"><span class="linenos">1702</span></a>
</span><span id="SetCurrentFileContentTool.schema-1703"><a href="#SetCurrentFileContentTool.schema-1703"><span class="linenos">1703</span></a><span class="sd">        Returns:</span>
</span><span id="SetCurrentFileContentTool.schema-1704"><a href="#SetCurrentFileContentTool.schema-1704"><span class="linenos">1704</span></a><span class="sd">            dict: The schema dictionary.</span>
</span><span id="SetCurrentFileContentTool.schema-1705"><a href="#SetCurrentFileContentTool.schema-1705"><span class="linenos">1705</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool.schema-1706"><a href="#SetCurrentFileContentTool.schema-1706"><span class="linenos">1706</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="SetCurrentFileContentTool.schema-1707"><a href="#SetCurrentFileContentTool.schema-1707"><span class="linenos">1707</span></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool.schema-1708"><a href="#SetCurrentFileContentTool.schema-1708"><span class="linenos">1708</span></a>            <span class="s2">&quot;function&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCurrentFileContentTool.schema-1709"><a href="#SetCurrentFileContentTool.schema-1709"><span class="linenos">1709</span></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool.schema-1710"><a href="#SetCurrentFileContentTool.schema-1710"><span class="linenos">1710</span></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool.schema-1711"><a href="#SetCurrentFileContentTool.schema-1711"><span class="linenos">1711</span></a>                <span class="s2">&quot;strict&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool.schema-1712"><a href="#SetCurrentFileContentTool.schema-1712"><span class="linenos">1712</span></a>                <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCurrentFileContentTool.schema-1713"><a href="#SetCurrentFileContentTool.schema-1713"><span class="linenos">1713</span></a>                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool.schema-1714"><a href="#SetCurrentFileContentTool.schema-1714"><span class="linenos">1714</span></a>                    <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="SetCurrentFileContentTool.schema-1715"><a href="#SetCurrentFileContentTool.schema-1715"><span class="linenos">1715</span></a>                        <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;New content to write into the current file.&quot;</span><span class="p">}</span>
</span><span id="SetCurrentFileContentTool.schema-1716"><a href="#SetCurrentFileContentTool.schema-1716"><span class="linenos">1716</span></a>                    <span class="p">},</span>
</span><span id="SetCurrentFileContentTool.schema-1717"><a href="#SetCurrentFileContentTool.schema-1717"><span class="linenos">1717</span></a>                    <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span>
</span><span id="SetCurrentFileContentTool.schema-1718"><a href="#SetCurrentFileContentTool.schema-1718"><span class="linenos">1718</span></a>                    <span class="s2">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="SetCurrentFileContentTool.schema-1719"><a href="#SetCurrentFileContentTool.schema-1719"><span class="linenos">1719</span></a>                <span class="p">},</span>
</span><span id="SetCurrentFileContentTool.schema-1720"><a href="#SetCurrentFileContentTool.schema-1720"><span class="linenos">1720</span></a>            <span class="p">},</span>
</span><span id="SetCurrentFileContentTool.schema-1721"><a href="#SetCurrentFileContentTool.schema-1721"><span class="linenos">1721</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Schema for the tool's parameters.</p>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>dict: The schema dictionary.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCurrentFileContentTool.pre_invoke" class="classattr">
                                        <input id="SetCurrentFileContentTool.pre_invoke-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pre_invoke</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ToolPreInvokeResponse</span>:</span></span>

                <label class="view-source-button" for="SetCurrentFileContentTool.pre_invoke-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCurrentFileContentTool.pre_invoke"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCurrentFileContentTool.pre_invoke-1723"><a href="#SetCurrentFileContentTool.pre_invoke-1723"><span class="linenos">1723</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pre_invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ToolPreInvokeResponse</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool.pre_invoke-1724"><a href="#SetCurrentFileContentTool.pre_invoke-1724"><span class="linenos">1724</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pre-invoke checks for the tool.</span>
</span><span id="SetCurrentFileContentTool.pre_invoke-1725"><a href="#SetCurrentFileContentTool.pre_invoke-1725"><span class="linenos">1725</span></a>
</span><span id="SetCurrentFileContentTool.pre_invoke-1726"><a href="#SetCurrentFileContentTool.pre_invoke-1726"><span class="linenos">1726</span></a><span class="sd">        Asks for approval before running the tool.</span>
</span><span id="SetCurrentFileContentTool.pre_invoke-1727"><a href="#SetCurrentFileContentTool.pre_invoke-1727"><span class="linenos">1727</span></a>
</span><span id="SetCurrentFileContentTool.pre_invoke-1728"><a href="#SetCurrentFileContentTool.pre_invoke-1728"><span class="linenos">1728</span></a><span class="sd">        Args:</span>
</span><span id="SetCurrentFileContentTool.pre_invoke-1729"><a href="#SetCurrentFileContentTool.pre_invoke-1729"><span class="linenos">1729</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SetCurrentFileContentTool.pre_invoke-1730"><a href="#SetCurrentFileContentTool.pre_invoke-1730"><span class="linenos">1730</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SetCurrentFileContentTool.pre_invoke-1731"><a href="#SetCurrentFileContentTool.pre_invoke-1731"><span class="linenos">1731</span></a>
</span><span id="SetCurrentFileContentTool.pre_invoke-1732"><a href="#SetCurrentFileContentTool.pre_invoke-1732"><span class="linenos">1732</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool.pre_invoke-1733"><a href="#SetCurrentFileContentTool.pre_invoke-1733"><span class="linenos">1733</span></a><span class="sd">            ToolPreInvokeResponse: The pre-invoke response.</span>
</span><span id="SetCurrentFileContentTool.pre_invoke-1734"><a href="#SetCurrentFileContentTool.pre_invoke-1734"><span class="linenos">1734</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool.pre_invoke-1735"><a href="#SetCurrentFileContentTool.pre_invoke-1735"><span class="linenos">1735</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auto_approve</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool.pre_invoke-1736"><a href="#SetCurrentFileContentTool.pre_invoke-1736"><span class="linenos">1736</span></a>            <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="SetCurrentFileContentTool.pre_invoke-1737"><a href="#SetCurrentFileContentTool.pre_invoke-1737"><span class="linenos">1737</span></a>        <span class="k">return</span> <span class="n">ToolPreInvokeResponse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calling tool &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;Approve&quot;</span><span class="p">,</span> <span class="s2">&quot;Overwrite the current file&#39;s content?&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pre-invoke checks for the tool.</p>

<p>Asks for approval before running the tool.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>ToolPreInvokeResponse: The pre-invoke response.</p>
</blockquote>
</div>


                            </div>
                            <div id="SetCurrentFileContentTool.handle_tool_call" class="classattr">
                                        <input id="SetCurrentFileContentTool.handle_tool_call-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_tool_call</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span>,</span><span class="param">	<span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="SetCurrentFileContentTool.handle_tool_call-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SetCurrentFileContentTool.handle_tool_call"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SetCurrentFileContentTool.handle_tool_call-1739"><a href="#SetCurrentFileContentTool.handle_tool_call-1739"><span class="linenos">1739</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_tool_call</span><span class="p">(</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1740"><a href="#SetCurrentFileContentTool.handle_tool_call-1740"><span class="linenos">1740</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">tool_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">tool_args</span><span class="p">:</span> <span class="nb">dict</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1741"><a href="#SetCurrentFileContentTool.handle_tool_call-1741"><span class="linenos">1741</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1742"><a href="#SetCurrentFileContentTool.handle_tool_call-1742"><span class="linenos">1742</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the tool call to set the current file content.</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1743"><a href="#SetCurrentFileContentTool.handle_tool_call-1743"><span class="linenos">1743</span></a>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1744"><a href="#SetCurrentFileContentTool.handle_tool_call-1744"><span class="linenos">1744</span></a><span class="sd">        Args:</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1745"><a href="#SetCurrentFileContentTool.handle_tool_call-1745"><span class="linenos">1745</span></a><span class="sd">            request (ChatRequest): The chat request object.</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1746"><a href="#SetCurrentFileContentTool.handle_tool_call-1746"><span class="linenos">1746</span></a><span class="sd">            response (ChatResponse): The chat response object.</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1747"><a href="#SetCurrentFileContentTool.handle_tool_call-1747"><span class="linenos">1747</span></a><span class="sd">            tool_context (dict): The context for the tool call.</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1748"><a href="#SetCurrentFileContentTool.handle_tool_call-1748"><span class="linenos">1748</span></a><span class="sd">            tool_args (dict): The arguments for the tool call.</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1749"><a href="#SetCurrentFileContentTool.handle_tool_call-1749"><span class="linenos">1749</span></a>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1750"><a href="#SetCurrentFileContentTool.handle_tool_call-1750"><span class="linenos">1750</span></a><span class="sd">        Return:</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1751"><a href="#SetCurrentFileContentTool.handle_tool_call-1751"><span class="linenos">1751</span></a><span class="sd">            str: A message indicating the result of the operation.</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1752"><a href="#SetCurrentFileContentTool.handle_tool_call-1752"><span class="linenos">1752</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1753"><a href="#SetCurrentFileContentTool.handle_tool_call-1753"><span class="linenos">1753</span></a>        <span class="k">await</span> <span class="n">response</span><span class="o">.</span><span class="n">run_ui_command</span><span class="p">(</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1754"><a href="#SetCurrentFileContentTool.handle_tool_call-1754"><span class="linenos">1754</span></a>            <span class="s2">&quot;notebook-intelligence:set-current-file-content&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">tool_args</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]}</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1755"><a href="#SetCurrentFileContentTool.handle_tool_call-1755"><span class="linenos">1755</span></a>        <span class="p">)</span>
</span><span id="SetCurrentFileContentTool.handle_tool_call-1756"><a href="#SetCurrentFileContentTool.handle_tool_call-1756"><span class="linenos">1756</span></a>        <span class="k">return</span> <span class="s2">&quot;Set the file content&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Handle the tool call to set the current file content.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The chat request object.</li>
<li><strong>response (ChatResponse):</strong>  The chat response object.</li>
<li><strong>tool_context (dict):</strong>  The context for the tool call.</li>
<li><strong>tool_args (dict):</strong>  The arguments for the tool call.</li>
</ul>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: A message indicating the result of the operation.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="AIAgentChatParticipant">
                            <input id="AIAgentChatParticipant-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AIAgentChatParticipant</span><wbr>(<span class="base">notebook_intelligence.mcp_manager.MCPChatParticipant</span>):

                <label class="view-source-button" for="AIAgentChatParticipant-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentChatParticipant"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentChatParticipant-1759"><a href="#AIAgentChatParticipant-1759"><span class="linenos">1759</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AIAgentChatParticipant</span><span class="p">(</span><span class="n">MCPChatParticipant</span><span class="p">):</span>
</span><span id="AIAgentChatParticipant-1760"><a href="#AIAgentChatParticipant-1760"><span class="linenos">1760</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A chat participant representing the senselab AI.&quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1761"><a href="#AIAgentChatParticipant-1761"><span class="linenos">1761</span></a>
</span><span id="AIAgentChatParticipant-1762"><a href="#AIAgentChatParticipant-1762"><span class="linenos">1762</span></a>    <span class="n">PREPROMPT</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;You are senselab AI. Solve every user request using the senselab Python package</span>
</span><span id="AIAgentChatParticipant-1763"><a href="#AIAgentChatParticipant-1763"><span class="linenos">1763</span></a><span class="s2">    (assume it is installed and importable).</span>
</span><span id="AIAgentChatParticipant-1764"><a href="#AIAgentChatParticipant-1764"><span class="linenos">1764</span></a><span class="s2">    Before writing ANY import, function call, or data structure,</span>
</span><span id="AIAgentChatParticipant-1765"><a href="#AIAgentChatParticipant-1765"><span class="linenos">1765</span></a><span class="s2">    first consult the Deepwiki MCP server (sensein/senselab, server name: `deepwiki`)</span>
</span><span id="AIAgentChatParticipant-1766"><a href="#AIAgentChatParticipant-1766"><span class="linenos">1766</span></a><span class="s2">    to confirm the correct senselab utilities/classes/modules to use.</span>
</span><span id="AIAgentChatParticipant-1767"><a href="#AIAgentChatParticipant-1767"><span class="linenos">1767</span></a><span class="s2">    Do not invent functions or APIs.</span>
</span><span id="AIAgentChatParticipant-1768"><a href="#AIAgentChatParticipant-1768"><span class="linenos">1768</span></a><span class="s2">    If anything is unclear or ambiguous, STOP and query Deepwiki before coding.</span>
</span><span id="AIAgentChatParticipant-1769"><a href="#AIAgentChatParticipant-1769"><span class="linenos">1769</span></a>
</span><span id="AIAgentChatParticipant-1770"><a href="#AIAgentChatParticipant-1770"><span class="linenos">1770</span></a><span class="s2">    Follow an iterative loop: Think  Act  Observe, repeating as needed.</span>
</span><span id="AIAgentChatParticipant-1771"><a href="#AIAgentChatParticipant-1771"><span class="linenos">1771</span></a><span class="s2">    1) Plan: briefly state your step-by-step plan for solving the task with senselab.</span>
</span><span id="AIAgentChatParticipant-1772"><a href="#AIAgentChatParticipant-1772"><span class="linenos">1772</span></a><span class="s2">    2) Act (discovery): call Deepwiki tools to confirm the exact senselab symbols</span>
</span><span id="AIAgentChatParticipant-1773"><a href="#AIAgentChatParticipant-1773"><span class="linenos">1773</span></a><span class="s2">    (module paths, class/function names, expected arguments, return types) and relevant usage notes.</span>
</span><span id="AIAgentChatParticipant-1774"><a href="#AIAgentChatParticipant-1774"><span class="linenos">1774</span></a><span class="s2">    3) Observe: summarize what you learned from Deepwiki and update your plan if needed.</span>
</span><span id="AIAgentChatParticipant-1775"><a href="#AIAgentChatParticipant-1775"><span class="linenos">1775</span></a><span class="s2">    4) Plan II: refine your plan based on the new knowledge.</span>
</span><span id="AIAgentChatParticipant-1776"><a href="#AIAgentChatParticipant-1776"><span class="linenos">1776</span></a><span class="s2">    5) Coding: write code one Jupyter cell at a time.</span>
</span><span id="AIAgentChatParticipant-1777"><a href="#AIAgentChatParticipant-1777"><span class="linenos">1777</span></a><span class="s2">    Each cell must be self-contained and minimal (anatomic), with only what is necessary for that step.</span>
</span><span id="AIAgentChatParticipant-1778"><a href="#AIAgentChatParticipant-1778"><span class="linenos">1778</span></a><span class="s2">    6) Execute: Run immediately after writing each cell.</span>
</span><span id="AIAgentChatParticipant-1779"><a href="#AIAgentChatParticipant-1779"><span class="linenos">1779</span></a><span class="s2">    7) If it fails, debug IN PLACE until it runs successfully.</span>
</span><span id="AIAgentChatParticipant-1780"><a href="#AIAgentChatParticipant-1780"><span class="linenos">1780</span></a><span class="s2">    Only then proceed to the next step. If user input is needed (e.g., paths, parameters, assumptions),</span>
</span><span id="AIAgentChatParticipant-1781"><a href="#AIAgentChatParticipant-1781"><span class="linenos">1781</span></a><span class="s2">    explicitly ask the user before continuing.</span>
</span><span id="AIAgentChatParticipant-1782"><a href="#AIAgentChatParticipant-1782"><span class="linenos">1782</span></a>
</span><span id="AIAgentChatParticipant-1783"><a href="#AIAgentChatParticipant-1783"><span class="linenos">1783</span></a><span class="s2">    While acting, always name which Deepwiki tool you used (e.g., ask_question, read_wiki_structure,</span>
</span><span id="AIAgentChatParticipant-1784"><a href="#AIAgentChatParticipant-1784"><span class="linenos">1784</span></a><span class="s2">    read_wiki_contents) and what you asked. Keep responses concise and action-oriented.&quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1785"><a href="#AIAgentChatParticipant-1785"><span class="linenos">1785</span></a>
</span><span id="AIAgentChatParticipant-1786"><a href="#AIAgentChatParticipant-1786"><span class="linenos">1786</span></a>    <span class="n">POSTPROMPT</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;Output format and discipline:</span>
</span><span id="AIAgentChatParticipant-1787"><a href="#AIAgentChatParticipant-1787"><span class="linenos">1787</span></a><span class="s2">    - Start with **Plan** (numbered steps).</span>
</span><span id="AIAgentChatParticipant-1788"><a href="#AIAgentChatParticipant-1788"><span class="linenos">1788</span></a><span class="s2">    - For each discovery step, show **Deepwiki query** (tool + question) and **Observation** (what you learned).</span>
</span><span id="AIAgentChatParticipant-1789"><a href="#AIAgentChatParticipant-1789"><span class="linenos">1789</span></a><span class="s2">    - For each coding step, output exactly one Jupyter cell, then immediately run it;</span>
</span><span id="AIAgentChatParticipant-1790"><a href="#AIAgentChatParticipant-1790"><span class="linenos">1790</span></a><span class="s2">    if an error occurs, show the error briefly and fix the SAME cell until it succeeds before moving on.</span>
</span><span id="AIAgentChatParticipant-1791"><a href="#AIAgentChatParticipant-1791"><span class="linenos">1791</span></a><span class="s2">    - Prefer runnable, minimal snippets over long narratives.</span>
</span><span id="AIAgentChatParticipant-1792"><a href="#AIAgentChatParticipant-1792"><span class="linenos">1792</span></a><span class="s2">    - Never fabricate senselab APIs; if uncertain, consult Deepwiki again.</span>
</span><span id="AIAgentChatParticipant-1793"><a href="#AIAgentChatParticipant-1793"><span class="linenos">1793</span></a>
</span><span id="AIAgentChatParticipant-1794"><a href="#AIAgentChatParticipant-1794"><span class="linenos">1794</span></a><span class="s2">    Finalization:</span>
</span><span id="AIAgentChatParticipant-1795"><a href="#AIAgentChatParticipant-1795"><span class="linenos">1795</span></a><span class="s2">    - Conclude with a **Methods** and **Results** section in the Notebook,</span>
</span><span id="AIAgentChatParticipant-1796"><a href="#AIAgentChatParticipant-1796"><span class="linenos">1796</span></a><span class="s2">    as in a scientific report (concise, reproducible).</span>
</span><span id="AIAgentChatParticipant-1797"><a href="#AIAgentChatParticipant-1797"><span class="linenos">1797</span></a><span class="s2">    - In **Methods**, list senselab components used, key parameters, data handling, and the sequence of steps.</span>
</span><span id="AIAgentChatParticipant-1798"><a href="#AIAgentChatParticipant-1798"><span class="linenos">1798</span></a><span class="s2">    - In **Results**, report outputs/metrics/artifacts produced and any validations performed.</span>
</span><span id="AIAgentChatParticipant-1799"><a href="#AIAgentChatParticipant-1799"><span class="linenos">1799</span></a><span class="s2">    - If there are limitations or open questions, include a brief **Discussion/Next steps**.</span>
</span><span id="AIAgentChatParticipant-1800"><a href="#AIAgentChatParticipant-1800"><span class="linenos">1800</span></a>
</span><span id="AIAgentChatParticipant-1801"><a href="#AIAgentChatParticipant-1801"><span class="linenos">1801</span></a><span class="s2">    Remember:</span>
</span><span id="AIAgentChatParticipant-1802"><a href="#AIAgentChatParticipant-1802"><span class="linenos">1802</span></a><span class="s2">    - senselab-first;</span>
</span><span id="AIAgentChatParticipant-1803"><a href="#AIAgentChatParticipant-1803"><span class="linenos">1803</span></a><span class="s2">    - Deepwiki for confirmation before coding;</span>
</span><span id="AIAgentChatParticipant-1804"><a href="#AIAgentChatParticipant-1804"><span class="linenos">1804</span></a><span class="s2">    - iterate with thinkactobserve;</span>
</span><span id="AIAgentChatParticipant-1805"><a href="#AIAgentChatParticipant-1805"><span class="linenos">1805</span></a><span class="s2">    - one self-contained cell at a time;</span>
</span><span id="AIAgentChatParticipant-1806"><a href="#AIAgentChatParticipant-1806"><span class="linenos">1806</span></a><span class="s2">    - run and fix before proceeding;</span>
</span><span id="AIAgentChatParticipant-1807"><a href="#AIAgentChatParticipant-1807"><span class="linenos">1807</span></a><span class="s2">    - convert any relative paths to absolute paths before using them with senselab utilities.</span>
</span><span id="AIAgentChatParticipant-1808"><a href="#AIAgentChatParticipant-1808"><span class="linenos">1808</span></a><span class="s2">    &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1809"><a href="#AIAgentChatParticipant-1809"><span class="linenos">1809</span></a>
</span><span id="AIAgentChatParticipant-1810"><a href="#AIAgentChatParticipant-1810"><span class="linenos">1810</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="n">Host</span><span class="p">,</span> <span class="n">servers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MCPServer</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant-1811"><a href="#AIAgentChatParticipant-1811"><span class="linenos">1811</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the senselab AI chat participant.</span>
</span><span id="AIAgentChatParticipant-1812"><a href="#AIAgentChatParticipant-1812"><span class="linenos">1812</span></a>
</span><span id="AIAgentChatParticipant-1813"><a href="#AIAgentChatParticipant-1813"><span class="linenos">1813</span></a><span class="sd">        Args:</span>
</span><span id="AIAgentChatParticipant-1814"><a href="#AIAgentChatParticipant-1814"><span class="linenos">1814</span></a><span class="sd">            host (Host): The host of the chat participant.</span>
</span><span id="AIAgentChatParticipant-1815"><a href="#AIAgentChatParticipant-1815"><span class="linenos">1815</span></a><span class="sd">            servers (list[MCPServer]): The list of MCP servers the participant can access.</span>
</span><span id="AIAgentChatParticipant-1816"><a href="#AIAgentChatParticipant-1816"><span class="linenos">1816</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1817"><a href="#AIAgentChatParticipant-1817"><span class="linenos">1817</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
</span><span id="AIAgentChatParticipant-1818"><a href="#AIAgentChatParticipant-1818"><span class="linenos">1818</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;senselab-ai&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;senselab AI&quot;</span><span class="p">,</span> <span class="n">servers</span><span class="o">=</span><span class="n">servers</span><span class="p">,</span> <span class="n">nbi_tools</span><span class="o">=</span><span class="p">[])</span>
</span><span id="AIAgentChatParticipant-1819"><a href="#AIAgentChatParticipant-1819"><span class="linenos">1819</span></a>
</span><span id="AIAgentChatParticipant-1820"><a href="#AIAgentChatParticipant-1820"><span class="linenos">1820</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant-1821"><a href="#AIAgentChatParticipant-1821"><span class="linenos">1821</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant-1822"><a href="#AIAgentChatParticipant-1822"><span class="linenos">1822</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The ID of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1823"><a href="#AIAgentChatParticipant-1823"><span class="linenos">1823</span></a>
</span><span id="AIAgentChatParticipant-1824"><a href="#AIAgentChatParticipant-1824"><span class="linenos">1824</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant-1825"><a href="#AIAgentChatParticipant-1825"><span class="linenos">1825</span></a><span class="sd">            str: The ID of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1826"><a href="#AIAgentChatParticipant-1826"><span class="linenos">1826</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1827"><a href="#AIAgentChatParticipant-1827"><span class="linenos">1827</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab-ai&quot;</span>
</span><span id="AIAgentChatParticipant-1828"><a href="#AIAgentChatParticipant-1828"><span class="linenos">1828</span></a>
</span><span id="AIAgentChatParticipant-1829"><a href="#AIAgentChatParticipant-1829"><span class="linenos">1829</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant-1830"><a href="#AIAgentChatParticipant-1830"><span class="linenos">1830</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant-1831"><a href="#AIAgentChatParticipant-1831"><span class="linenos">1831</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1832"><a href="#AIAgentChatParticipant-1832"><span class="linenos">1832</span></a>
</span><span id="AIAgentChatParticipant-1833"><a href="#AIAgentChatParticipant-1833"><span class="linenos">1833</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant-1834"><a href="#AIAgentChatParticipant-1834"><span class="linenos">1834</span></a><span class="sd">            str: The name of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1835"><a href="#AIAgentChatParticipant-1835"><span class="linenos">1835</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1836"><a href="#AIAgentChatParticipant-1836"><span class="linenos">1836</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab AI&quot;</span>
</span><span id="AIAgentChatParticipant-1837"><a href="#AIAgentChatParticipant-1837"><span class="linenos">1837</span></a>
</span><span id="AIAgentChatParticipant-1838"><a href="#AIAgentChatParticipant-1838"><span class="linenos">1838</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant-1839"><a href="#AIAgentChatParticipant-1839"><span class="linenos">1839</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant-1840"><a href="#AIAgentChatParticipant-1840"><span class="linenos">1840</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The description of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1841"><a href="#AIAgentChatParticipant-1841"><span class="linenos">1841</span></a>
</span><span id="AIAgentChatParticipant-1842"><a href="#AIAgentChatParticipant-1842"><span class="linenos">1842</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant-1843"><a href="#AIAgentChatParticipant-1843"><span class="linenos">1843</span></a><span class="sd">            str: The description of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1844"><a href="#AIAgentChatParticipant-1844"><span class="linenos">1844</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1845"><a href="#AIAgentChatParticipant-1845"><span class="linenos">1845</span></a>        <span class="k">return</span> <span class="s2">&quot;The senselab AI that assists with using senselab for audio, video, and text analysis.&quot;</span>
</span><span id="AIAgentChatParticipant-1846"><a href="#AIAgentChatParticipant-1846"><span class="linenos">1846</span></a>
</span><span id="AIAgentChatParticipant-1847"><a href="#AIAgentChatParticipant-1847"><span class="linenos">1847</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant-1848"><a href="#AIAgentChatParticipant-1848"><span class="linenos">1848</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">icon_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant-1849"><a href="#AIAgentChatParticipant-1849"><span class="linenos">1849</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The icon path of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1850"><a href="#AIAgentChatParticipant-1850"><span class="linenos">1850</span></a>
</span><span id="AIAgentChatParticipant-1851"><a href="#AIAgentChatParticipant-1851"><span class="linenos">1851</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant-1852"><a href="#AIAgentChatParticipant-1852"><span class="linenos">1852</span></a><span class="sd">            str: The icon path of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1853"><a href="#AIAgentChatParticipant-1853"><span class="linenos">1853</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1854"><a href="#AIAgentChatParticipant-1854"><span class="linenos">1854</span></a>        <span class="k">return</span> <span class="n">PARTICIPANT_ICON_URL</span>
</span><span id="AIAgentChatParticipant-1855"><a href="#AIAgentChatParticipant-1855"><span class="linenos">1855</span></a>
</span><span id="AIAgentChatParticipant-1856"><a href="#AIAgentChatParticipant-1856"><span class="linenos">1856</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant-1857"><a href="#AIAgentChatParticipant-1857"><span class="linenos">1857</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">commands</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatCommand</span><span class="p">]:</span>
</span><span id="AIAgentChatParticipant-1858"><a href="#AIAgentChatParticipant-1858"><span class="linenos">1858</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of commands available for the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1859"><a href="#AIAgentChatParticipant-1859"><span class="linenos">1859</span></a>
</span><span id="AIAgentChatParticipant-1860"><a href="#AIAgentChatParticipant-1860"><span class="linenos">1860</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant-1861"><a href="#AIAgentChatParticipant-1861"><span class="linenos">1861</span></a><span class="sd">            list[ChatCommand]: The list of commands available for the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1862"><a href="#AIAgentChatParticipant-1862"><span class="linenos">1862</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1863"><a href="#AIAgentChatParticipant-1863"><span class="linenos">1863</span></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="AIAgentChatParticipant-1864"><a href="#AIAgentChatParticipant-1864"><span class="linenos">1864</span></a>            <span class="o">*</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">commands</span><span class="p">,</span>  <span class="c1"># keep anything parent exposes</span>
</span><span id="AIAgentChatParticipant-1865"><a href="#AIAgentChatParticipant-1865"><span class="linenos">1865</span></a>            <span class="n">ChatCommand</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Show help&quot;</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1866"><a href="#AIAgentChatParticipant-1866"><span class="linenos">1866</span></a>        <span class="p">]</span>
</span><span id="AIAgentChatParticipant-1867"><a href="#AIAgentChatParticipant-1867"><span class="linenos">1867</span></a>
</span><span id="AIAgentChatParticipant-1868"><a href="#AIAgentChatParticipant-1868"><span class="linenos">1868</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant-1869"><a href="#AIAgentChatParticipant-1869"><span class="linenos">1869</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tools</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Tool</span><span class="p">]:</span>
</span><span id="AIAgentChatParticipant-1870"><a href="#AIAgentChatParticipant-1870"><span class="linenos">1870</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of tools available for the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1871"><a href="#AIAgentChatParticipant-1871"><span class="linenos">1871</span></a>
</span><span id="AIAgentChatParticipant-1872"><a href="#AIAgentChatParticipant-1872"><span class="linenos">1872</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant-1873"><a href="#AIAgentChatParticipant-1873"><span class="linenos">1873</span></a><span class="sd">            list[Tool]: The list of tools available for the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant-1874"><a href="#AIAgentChatParticipant-1874"><span class="linenos">1874</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1875"><a href="#AIAgentChatParticipant-1875"><span class="linenos">1875</span></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="AIAgentChatParticipant-1876"><a href="#AIAgentChatParticipant-1876"><span class="linenos">1876</span></a>            <span class="o">*</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">tools</span><span class="p">,</span>  <span class="c1"># keep anything parent exposes</span>
</span><span id="AIAgentChatParticipant-1877"><a href="#AIAgentChatParticipant-1877"><span class="linenos">1877</span></a>            <span class="n">CreateNewNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1878"><a href="#AIAgentChatParticipant-1878"><span class="linenos">1878</span></a>            <span class="n">AddMarkdownCellToNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1879"><a href="#AIAgentChatParticipant-1879"><span class="linenos">1879</span></a>            <span class="n">AddCodeCellTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1880"><a href="#AIAgentChatParticipant-1880"><span class="linenos">1880</span></a>            <span class="n">RunCellAtIndexTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1881"><a href="#AIAgentChatParticipant-1881"><span class="linenos">1881</span></a>            <span class="n">RenameNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1882"><a href="#AIAgentChatParticipant-1882"><span class="linenos">1882</span></a>            <span class="n">GetNumberOfCellsTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1883"><a href="#AIAgentChatParticipant-1883"><span class="linenos">1883</span></a>            <span class="n">GetCellTypeAndSourceTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1884"><a href="#AIAgentChatParticipant-1884"><span class="linenos">1884</span></a>            <span class="n">GetCellOutputTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1885"><a href="#AIAgentChatParticipant-1885"><span class="linenos">1885</span></a>            <span class="n">SetCellTypeAndSourceTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1886"><a href="#AIAgentChatParticipant-1886"><span class="linenos">1886</span></a>            <span class="n">DeleteCellAtIndexTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1887"><a href="#AIAgentChatParticipant-1887"><span class="linenos">1887</span></a>            <span class="n">InsertCellAtIndexTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1888"><a href="#AIAgentChatParticipant-1888"><span class="linenos">1888</span></a>            <span class="n">SaveNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1889"><a href="#AIAgentChatParticipant-1889"><span class="linenos">1889</span></a>            <span class="n">CreateNewPythonFileTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1890"><a href="#AIAgentChatParticipant-1890"><span class="linenos">1890</span></a>            <span class="n">GetCurrentFileContentTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1891"><a href="#AIAgentChatParticipant-1891"><span class="linenos">1891</span></a>            <span class="n">SetCurrentFileContentTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant-1892"><a href="#AIAgentChatParticipant-1892"><span class="linenos">1892</span></a>            <span class="n">NotebookShareTool</span><span class="p">(),</span>
</span><span id="AIAgentChatParticipant-1893"><a href="#AIAgentChatParticipant-1893"><span class="linenos">1893</span></a>        <span class="p">]</span>
</span><span id="AIAgentChatParticipant-1894"><a href="#AIAgentChatParticipant-1894"><span class="linenos">1894</span></a>
</span><span id="AIAgentChatParticipant-1895"><a href="#AIAgentChatParticipant-1895"><span class="linenos">1895</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_chat_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant-1896"><a href="#AIAgentChatParticipant-1896"><span class="linenos">1896</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This method is responsible for processing incoming chat requests and generating appropriate responses.</span>
</span><span id="AIAgentChatParticipant-1897"><a href="#AIAgentChatParticipant-1897"><span class="linenos">1897</span></a>
</span><span id="AIAgentChatParticipant-1898"><a href="#AIAgentChatParticipant-1898"><span class="linenos">1898</span></a><span class="sd">        Args:</span>
</span><span id="AIAgentChatParticipant-1899"><a href="#AIAgentChatParticipant-1899"><span class="linenos">1899</span></a><span class="sd">            request (ChatRequest): The incoming chat request.</span>
</span><span id="AIAgentChatParticipant-1900"><a href="#AIAgentChatParticipant-1900"><span class="linenos">1900</span></a><span class="sd">            response (ChatResponse): The chat response to be sent.</span>
</span><span id="AIAgentChatParticipant-1901"><a href="#AIAgentChatParticipant-1901"><span class="linenos">1901</span></a><span class="sd">            options (dict, optional): Additional options for handling the request.</span>
</span><span id="AIAgentChatParticipant-1902"><a href="#AIAgentChatParticipant-1902"><span class="linenos">1902</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1903"><a href="#AIAgentChatParticipant-1903"><span class="linenos">1903</span></a>        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;help&quot;</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant-1904"><a href="#AIAgentChatParticipant-1904"><span class="linenos">1904</span></a>            <span class="n">response</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span>
</span><span id="AIAgentChatParticipant-1905"><a href="#AIAgentChatParticipant-1905"><span class="linenos">1905</span></a>                <span class="n">MarkdownData</span><span class="p">(</span>
</span><span id="AIAgentChatParticipant-1906"><a href="#AIAgentChatParticipant-1906"><span class="linenos">1906</span></a><span class="w">                    </span><span class="sd">&quot;&quot;&quot;I am the senselab AI. I can help you with audio, text, and video analysis.</span>
</span><span id="AIAgentChatParticipant-1907"><a href="#AIAgentChatParticipant-1907"><span class="linenos">1907</span></a><span class="sd">                    Here are some example prompts you can try:\n</span>
</span><span id="AIAgentChatParticipant-1908"><a href="#AIAgentChatParticipant-1908"><span class="linenos">1908</span></a><span class="sd">                    \n```text\n@senselab-ai Read the audio files in &#39;&lt;directory_path&gt;&#39;, make them mono,</span>
</span><span id="AIAgentChatParticipant-1909"><a href="#AIAgentChatParticipant-1909"><span class="linenos">1909</span></a><span class="sd">                    resample them to 16KHz, and extract audio features.\n```\n</span>
</span><span id="AIAgentChatParticipant-1910"><a href="#AIAgentChatParticipant-1910"><span class="linenos">1910</span></a><span class="sd">                    \n```text\n@senselab-ai Read the audio files in &#39;&lt;directory_path&gt;&#39;, make them mono,</span>
</span><span id="AIAgentChatParticipant-1911"><a href="#AIAgentChatParticipant-1911"><span class="linenos">1911</span></a><span class="sd">                    resample them to 16KHz, and transcribe them with word-level timestamps.\n```\n</span>
</span><span id="AIAgentChatParticipant-1912"><a href="#AIAgentChatParticipant-1912"><span class="linenos">1912</span></a><span class="sd">                    \n```text\n@senselab-ai Share this notebook publicly.\n```\n</span>
</span><span id="AIAgentChatParticipant-1913"><a href="#AIAgentChatParticipant-1913"><span class="linenos">1913</span></a>
</span><span id="AIAgentChatParticipant-1914"><a href="#AIAgentChatParticipant-1914"><span class="linenos">1914</span></a>
</span><span id="AIAgentChatParticipant-1915"><a href="#AIAgentChatParticipant-1915"><span class="linenos">1915</span></a><span class="sd">                    &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1916"><a href="#AIAgentChatParticipant-1916"><span class="linenos">1916</span></a>                <span class="p">)</span>
</span><span id="AIAgentChatParticipant-1917"><a href="#AIAgentChatParticipant-1917"><span class="linenos">1917</span></a>            <span class="p">)</span>
</span><span id="AIAgentChatParticipant-1918"><a href="#AIAgentChatParticipant-1918"><span class="linenos">1918</span></a>            <span class="n">response</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</span><span id="AIAgentChatParticipant-1919"><a href="#AIAgentChatParticipant-1919"><span class="linenos">1919</span></a>            <span class="k">return</span>
</span><span id="AIAgentChatParticipant-1920"><a href="#AIAgentChatParticipant-1920"><span class="linenos">1920</span></a>
</span><span id="AIAgentChatParticipant-1921"><a href="#AIAgentChatParticipant-1921"><span class="linenos">1921</span></a>        <span class="n">system_prompt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1922"><a href="#AIAgentChatParticipant-1922"><span class="linenos">1922</span></a><span class="s2">        Try to answer the questions with `senselab` Python package (you can assume it&#39;s installed).</span>
</span><span id="AIAgentChatParticipant-1923"><a href="#AIAgentChatParticipant-1923"><span class="linenos">1923</span></a><span class="s2">        You **MUST** query the Deepwiki server (`deepwiki`) to verify every class, function,</span>
</span><span id="AIAgentChatParticipant-1924"><a href="#AIAgentChatParticipant-1924"><span class="linenos">1924</span></a><span class="s2">        or module **BEFORE** writing any code that uses it (repo: sensein/senselab).</span>
</span><span id="AIAgentChatParticipant-1925"><a href="#AIAgentChatParticipant-1925"><span class="linenos">1925</span></a><span class="s2">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant-1926"><a href="#AIAgentChatParticipant-1926"><span class="linenos">1926</span></a>
</span><span id="AIAgentChatParticipant-1927"><a href="#AIAgentChatParticipant-1927"><span class="linenos">1927</span></a>        <span class="n">options</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="AIAgentChatParticipant-1928"><a href="#AIAgentChatParticipant-1928"><span class="linenos">1928</span></a>        <span class="n">options</span><span class="p">[</span><span class="s2">&quot;system_prompt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">system_prompt</span>
</span><span id="AIAgentChatParticipant-1929"><a href="#AIAgentChatParticipant-1929"><span class="linenos">1929</span></a>
</span><span id="AIAgentChatParticipant-1930"><a href="#AIAgentChatParticipant-1930"><span class="linenos">1930</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_chat_request_with_tools</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A chat participant representing the senselab AI.</p>
</div>


                            <div id="AIAgentChatParticipant.__init__" class="classattr">
                                        <input id="AIAgentChatParticipant.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AIAgentChatParticipant</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">host</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">Host</span>,</span><span class="param">	<span class="n">servers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">MCPServer</span><span class="p">]</span></span>)</span>

                <label class="view-source-button" for="AIAgentChatParticipant.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentChatParticipant.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentChatParticipant.__init__-1810"><a href="#AIAgentChatParticipant.__init__-1810"><span class="linenos">1810</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="n">Host</span><span class="p">,</span> <span class="n">servers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MCPServer</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant.__init__-1811"><a href="#AIAgentChatParticipant.__init__-1811"><span class="linenos">1811</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the senselab AI chat participant.</span>
</span><span id="AIAgentChatParticipant.__init__-1812"><a href="#AIAgentChatParticipant.__init__-1812"><span class="linenos">1812</span></a>
</span><span id="AIAgentChatParticipant.__init__-1813"><a href="#AIAgentChatParticipant.__init__-1813"><span class="linenos">1813</span></a><span class="sd">        Args:</span>
</span><span id="AIAgentChatParticipant.__init__-1814"><a href="#AIAgentChatParticipant.__init__-1814"><span class="linenos">1814</span></a><span class="sd">            host (Host): The host of the chat participant.</span>
</span><span id="AIAgentChatParticipant.__init__-1815"><a href="#AIAgentChatParticipant.__init__-1815"><span class="linenos">1815</span></a><span class="sd">            servers (list[MCPServer]): The list of MCP servers the participant can access.</span>
</span><span id="AIAgentChatParticipant.__init__-1816"><a href="#AIAgentChatParticipant.__init__-1816"><span class="linenos">1816</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant.__init__-1817"><a href="#AIAgentChatParticipant.__init__-1817"><span class="linenos">1817</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
</span><span id="AIAgentChatParticipant.__init__-1818"><a href="#AIAgentChatParticipant.__init__-1818"><span class="linenos">1818</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;senselab-ai&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;senselab AI&quot;</span><span class="p">,</span> <span class="n">servers</span><span class="o">=</span><span class="n">servers</span><span class="p">,</span> <span class="n">nbi_tools</span><span class="o">=</span><span class="p">[])</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the senselab AI chat participant.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>host (Host):</strong>  The host of the chat participant.</li>
<li><strong>servers (list[MCPServer]):</strong>  The list of MCP servers the participant can access.</li>
</ul>
</div>


                            </div>
                            <div id="AIAgentChatParticipant.PREPROMPT" class="classattr">
                                <div class="attr variable">
            <span class="name">PREPROMPT</span>        =
<input id="AIAgentChatParticipant.PREPROMPT-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="AIAgentChatParticipant.PREPROMPT-view-value"></label><span class="default_value">&#39;You are senselab AI. Solve every user request using the senselab Python package\n    (assume it is installed and importable).\n    Before writing ANY import, function call, or data structure,\n    first consult the Deepwiki MCP server (sensein/senselab, server name: `deepwiki`)\n    to confirm the correct senselab utilities/classes/modules to use.\n    Do not invent functions or APIs.\n    If anything is unclear or ambiguous, STOP and query Deepwiki before coding.\n\n    Follow an iterative loop: Think  Act  Observe, repeating as needed.\n    1) Plan: briefly state your step-by-step plan for solving the task with senselab.\n    2) Act (discovery): call Deepwiki tools to confirm the exact senselab symbols\n    (module paths, class/function names, expected arguments, return types) and relevant usage notes.\n    3) Observe: summarize what you learned from Deepwiki and update your plan if needed.\n    4) Plan II: refine your plan based on the new knowledge.\n    5) Coding: write code one Jupyter cell at a time.\n    Each cell must be self-contained and minimal (anatomic), with only what is necessary for that step.\n    6) Execute: Run immediately after writing each cell.\n    7) If it fails, debug IN PLACE until it runs successfully.\n    Only then proceed to the next step. If user input is needed (e.g., paths, parameters, assumptions),\n    explicitly ask the user before continuing.\n\n    While acting, always name which Deepwiki tool you used (e.g., ask_question, read_wiki_structure,\n    read_wiki_contents) and what you asked. Keep responses concise and action-oriented.&#39;</span>

        
    </div>
    <a class="headerlink" href="#AIAgentChatParticipant.PREPROMPT"></a>
    
    

                            </div>
                            <div id="AIAgentChatParticipant.POSTPROMPT" class="classattr">
                                <div class="attr variable">
            <span class="name">POSTPROMPT</span>        =
<input id="AIAgentChatParticipant.POSTPROMPT-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="AIAgentChatParticipant.POSTPROMPT-view-value"></label><span class="default_value">&#39;Output format and discipline:\n    - Start with **Plan** (numbered steps).\n    - For each discovery step, show **Deepwiki query** (tool + question) and **Observation** (what you learned).\n    - For each coding step, output exactly one Jupyter cell, then immediately run it;\n    if an error occurs, show the error briefly and fix the SAME cell until it succeeds before moving on.\n    - Prefer runnable, minimal snippets over long narratives.\n    - Never fabricate senselab APIs; if uncertain, consult Deepwiki again.\n\n    Finalization:\n    - Conclude with a **Methods** and **Results** section in the Notebook,\n    as in a scientific report (concise, reproducible).\n    - In **Methods**, list senselab components used, key parameters, data handling, and the sequence of steps.\n    - In **Results**, report outputs/metrics/artifacts produced and any validations performed.\n    - If there are limitations or open questions, include a brief **Discussion/Next steps**.\n\n    Remember:\n    - senselab-first;\n    - Deepwiki for confirmation before coding;\n    - iterate with thinkactobserve;\n    - one self-contained cell at a time;\n    - run and fix before proceeding;\n    - convert any relative paths to absolute paths before using them with senselab utilities.\n    &#39;</span>

        
    </div>
    <a class="headerlink" href="#AIAgentChatParticipant.POSTPROMPT"></a>
    
    

                            </div>
                            <div id="AIAgentChatParticipant.host" class="classattr">
                                <div class="attr variable">
            <span class="name">host</span>

        
    </div>
    <a class="headerlink" href="#AIAgentChatParticipant.host"></a>
    
    

                            </div>
                            <div id="AIAgentChatParticipant.id" class="classattr">
                                        <input id="AIAgentChatParticipant.id-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">id</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AIAgentChatParticipant.id-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentChatParticipant.id"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentChatParticipant.id-1820"><a href="#AIAgentChatParticipant.id-1820"><span class="linenos">1820</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant.id-1821"><a href="#AIAgentChatParticipant.id-1821"><span class="linenos">1821</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant.id-1822"><a href="#AIAgentChatParticipant.id-1822"><span class="linenos">1822</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The ID of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.id-1823"><a href="#AIAgentChatParticipant.id-1823"><span class="linenos">1823</span></a>
</span><span id="AIAgentChatParticipant.id-1824"><a href="#AIAgentChatParticipant.id-1824"><span class="linenos">1824</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant.id-1825"><a href="#AIAgentChatParticipant.id-1825"><span class="linenos">1825</span></a><span class="sd">            str: The ID of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.id-1826"><a href="#AIAgentChatParticipant.id-1826"><span class="linenos">1826</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant.id-1827"><a href="#AIAgentChatParticipant.id-1827"><span class="linenos">1827</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab-ai&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The ID of the senselab AI Extension.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The ID of the senselab AI Extension.</p>
</blockquote>
</div>


                            </div>
                            <div id="AIAgentChatParticipant.name" class="classattr">
                                        <input id="AIAgentChatParticipant.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AIAgentChatParticipant.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentChatParticipant.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentChatParticipant.name-1829"><a href="#AIAgentChatParticipant.name-1829"><span class="linenos">1829</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant.name-1830"><a href="#AIAgentChatParticipant.name-1830"><span class="linenos">1830</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant.name-1831"><a href="#AIAgentChatParticipant.name-1831"><span class="linenos">1831</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.name-1832"><a href="#AIAgentChatParticipant.name-1832"><span class="linenos">1832</span></a>
</span><span id="AIAgentChatParticipant.name-1833"><a href="#AIAgentChatParticipant.name-1833"><span class="linenos">1833</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant.name-1834"><a href="#AIAgentChatParticipant.name-1834"><span class="linenos">1834</span></a><span class="sd">            str: The name of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.name-1835"><a href="#AIAgentChatParticipant.name-1835"><span class="linenos">1835</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant.name-1836"><a href="#AIAgentChatParticipant.name-1836"><span class="linenos">1836</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab AI&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The name of the senselab AI Extension.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the senselab AI Extension.</p>
</blockquote>
</div>


                            </div>
                            <div id="AIAgentChatParticipant.description" class="classattr">
                                        <input id="AIAgentChatParticipant.description-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">description</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AIAgentChatParticipant.description-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentChatParticipant.description"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentChatParticipant.description-1838"><a href="#AIAgentChatParticipant.description-1838"><span class="linenos">1838</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant.description-1839"><a href="#AIAgentChatParticipant.description-1839"><span class="linenos">1839</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant.description-1840"><a href="#AIAgentChatParticipant.description-1840"><span class="linenos">1840</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The description of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.description-1841"><a href="#AIAgentChatParticipant.description-1841"><span class="linenos">1841</span></a>
</span><span id="AIAgentChatParticipant.description-1842"><a href="#AIAgentChatParticipant.description-1842"><span class="linenos">1842</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant.description-1843"><a href="#AIAgentChatParticipant.description-1843"><span class="linenos">1843</span></a><span class="sd">            str: The description of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.description-1844"><a href="#AIAgentChatParticipant.description-1844"><span class="linenos">1844</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant.description-1845"><a href="#AIAgentChatParticipant.description-1845"><span class="linenos">1845</span></a>        <span class="k">return</span> <span class="s2">&quot;The senselab AI that assists with using senselab for audio, video, and text analysis.&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The description of the senselab AI Extension.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The description of the senselab AI Extension.</p>
</blockquote>
</div>


                            </div>
                            <div id="AIAgentChatParticipant.icon_path" class="classattr">
                                        <input id="AIAgentChatParticipant.icon_path-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">icon_path</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AIAgentChatParticipant.icon_path-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentChatParticipant.icon_path"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentChatParticipant.icon_path-1847"><a href="#AIAgentChatParticipant.icon_path-1847"><span class="linenos">1847</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant.icon_path-1848"><a href="#AIAgentChatParticipant.icon_path-1848"><span class="linenos">1848</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">icon_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant.icon_path-1849"><a href="#AIAgentChatParticipant.icon_path-1849"><span class="linenos">1849</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The icon path of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.icon_path-1850"><a href="#AIAgentChatParticipant.icon_path-1850"><span class="linenos">1850</span></a>
</span><span id="AIAgentChatParticipant.icon_path-1851"><a href="#AIAgentChatParticipant.icon_path-1851"><span class="linenos">1851</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant.icon_path-1852"><a href="#AIAgentChatParticipant.icon_path-1852"><span class="linenos">1852</span></a><span class="sd">            str: The icon path of the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.icon_path-1853"><a href="#AIAgentChatParticipant.icon_path-1853"><span class="linenos">1853</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant.icon_path-1854"><a href="#AIAgentChatParticipant.icon_path-1854"><span class="linenos">1854</span></a>        <span class="k">return</span> <span class="n">PARTICIPANT_ICON_URL</span>
</span></pre></div>


            <div class="docstring"><p>The icon path of the senselab AI Extension.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The icon path of the senselab AI Extension.</p>
</blockquote>
</div>


                            </div>
                            <div id="AIAgentChatParticipant.commands" class="classattr">
                                        <input id="AIAgentChatParticipant.commands-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">commands</span><span class="annotation">: list[notebook_intelligence.api.ChatCommand]</span>

                <label class="view-source-button" for="AIAgentChatParticipant.commands-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentChatParticipant.commands"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentChatParticipant.commands-1856"><a href="#AIAgentChatParticipant.commands-1856"><span class="linenos">1856</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant.commands-1857"><a href="#AIAgentChatParticipant.commands-1857"><span class="linenos">1857</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">commands</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ChatCommand</span><span class="p">]:</span>
</span><span id="AIAgentChatParticipant.commands-1858"><a href="#AIAgentChatParticipant.commands-1858"><span class="linenos">1858</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of commands available for the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.commands-1859"><a href="#AIAgentChatParticipant.commands-1859"><span class="linenos">1859</span></a>
</span><span id="AIAgentChatParticipant.commands-1860"><a href="#AIAgentChatParticipant.commands-1860"><span class="linenos">1860</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant.commands-1861"><a href="#AIAgentChatParticipant.commands-1861"><span class="linenos">1861</span></a><span class="sd">            list[ChatCommand]: The list of commands available for the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.commands-1862"><a href="#AIAgentChatParticipant.commands-1862"><span class="linenos">1862</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant.commands-1863"><a href="#AIAgentChatParticipant.commands-1863"><span class="linenos">1863</span></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="AIAgentChatParticipant.commands-1864"><a href="#AIAgentChatParticipant.commands-1864"><span class="linenos">1864</span></a>            <span class="o">*</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">commands</span><span class="p">,</span>  <span class="c1"># keep anything parent exposes</span>
</span><span id="AIAgentChatParticipant.commands-1865"><a href="#AIAgentChatParticipant.commands-1865"><span class="linenos">1865</span></a>            <span class="n">ChatCommand</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Show help&quot;</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.commands-1866"><a href="#AIAgentChatParticipant.commands-1866"><span class="linenos">1866</span></a>        <span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>The list of commands available for the senselab AI Extension.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[ChatCommand]: The list of commands available for the senselab AI Extension.</p>
</blockquote>
</div>


                            </div>
                            <div id="AIAgentChatParticipant.tools" class="classattr">
                                        <input id="AIAgentChatParticipant.tools-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">tools</span><span class="annotation">: list[notebook_intelligence.api.Tool]</span>

                <label class="view-source-button" for="AIAgentChatParticipant.tools-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentChatParticipant.tools"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentChatParticipant.tools-1868"><a href="#AIAgentChatParticipant.tools-1868"><span class="linenos">1868</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentChatParticipant.tools-1869"><a href="#AIAgentChatParticipant.tools-1869"><span class="linenos">1869</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">tools</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Tool</span><span class="p">]:</span>
</span><span id="AIAgentChatParticipant.tools-1870"><a href="#AIAgentChatParticipant.tools-1870"><span class="linenos">1870</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The list of tools available for the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.tools-1871"><a href="#AIAgentChatParticipant.tools-1871"><span class="linenos">1871</span></a>
</span><span id="AIAgentChatParticipant.tools-1872"><a href="#AIAgentChatParticipant.tools-1872"><span class="linenos">1872</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentChatParticipant.tools-1873"><a href="#AIAgentChatParticipant.tools-1873"><span class="linenos">1873</span></a><span class="sd">            list[Tool]: The list of tools available for the senselab AI Extension.</span>
</span><span id="AIAgentChatParticipant.tools-1874"><a href="#AIAgentChatParticipant.tools-1874"><span class="linenos">1874</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant.tools-1875"><a href="#AIAgentChatParticipant.tools-1875"><span class="linenos">1875</span></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="AIAgentChatParticipant.tools-1876"><a href="#AIAgentChatParticipant.tools-1876"><span class="linenos">1876</span></a>            <span class="o">*</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">tools</span><span class="p">,</span>  <span class="c1"># keep anything parent exposes</span>
</span><span id="AIAgentChatParticipant.tools-1877"><a href="#AIAgentChatParticipant.tools-1877"><span class="linenos">1877</span></a>            <span class="n">CreateNewNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1878"><a href="#AIAgentChatParticipant.tools-1878"><span class="linenos">1878</span></a>            <span class="n">AddMarkdownCellToNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1879"><a href="#AIAgentChatParticipant.tools-1879"><span class="linenos">1879</span></a>            <span class="n">AddCodeCellTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1880"><a href="#AIAgentChatParticipant.tools-1880"><span class="linenos">1880</span></a>            <span class="n">RunCellAtIndexTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1881"><a href="#AIAgentChatParticipant.tools-1881"><span class="linenos">1881</span></a>            <span class="n">RenameNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1882"><a href="#AIAgentChatParticipant.tools-1882"><span class="linenos">1882</span></a>            <span class="n">GetNumberOfCellsTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1883"><a href="#AIAgentChatParticipant.tools-1883"><span class="linenos">1883</span></a>            <span class="n">GetCellTypeAndSourceTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1884"><a href="#AIAgentChatParticipant.tools-1884"><span class="linenos">1884</span></a>            <span class="n">GetCellOutputTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1885"><a href="#AIAgentChatParticipant.tools-1885"><span class="linenos">1885</span></a>            <span class="n">SetCellTypeAndSourceTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1886"><a href="#AIAgentChatParticipant.tools-1886"><span class="linenos">1886</span></a>            <span class="n">DeleteCellAtIndexTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1887"><a href="#AIAgentChatParticipant.tools-1887"><span class="linenos">1887</span></a>            <span class="n">InsertCellAtIndexTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1888"><a href="#AIAgentChatParticipant.tools-1888"><span class="linenos">1888</span></a>            <span class="n">SaveNotebookTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1889"><a href="#AIAgentChatParticipant.tools-1889"><span class="linenos">1889</span></a>            <span class="n">CreateNewPythonFileTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1890"><a href="#AIAgentChatParticipant.tools-1890"><span class="linenos">1890</span></a>            <span class="n">GetCurrentFileContentTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1891"><a href="#AIAgentChatParticipant.tools-1891"><span class="linenos">1891</span></a>            <span class="n">SetCurrentFileContentTool</span><span class="p">(</span><span class="n">auto_approve</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
</span><span id="AIAgentChatParticipant.tools-1892"><a href="#AIAgentChatParticipant.tools-1892"><span class="linenos">1892</span></a>            <span class="n">NotebookShareTool</span><span class="p">(),</span>
</span><span id="AIAgentChatParticipant.tools-1893"><a href="#AIAgentChatParticipant.tools-1893"><span class="linenos">1893</span></a>        <span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>The list of tools available for the senselab AI Extension.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>list[Tool]: The list of tools available for the senselab AI Extension.</p>
</blockquote>
</div>


                            </div>
                            <div id="AIAgentChatParticipant.handle_chat_request" class="classattr">
                                        <input id="AIAgentChatParticipant.handle_chat_request-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">async def</span>
        <span class="name">handle_chat_request</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">request</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatRequest</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ChatResponse</span>,</span><span class="param">	<span class="n">options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="AIAgentChatParticipant.handle_chat_request-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentChatParticipant.handle_chat_request"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentChatParticipant.handle_chat_request-1895"><a href="#AIAgentChatParticipant.handle_chat_request-1895"><span class="linenos">1895</span></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_chat_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">:</span> <span class="n">ChatRequest</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="n">ChatResponse</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1896"><a href="#AIAgentChatParticipant.handle_chat_request-1896"><span class="linenos">1896</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This method is responsible for processing incoming chat requests and generating appropriate responses.</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1897"><a href="#AIAgentChatParticipant.handle_chat_request-1897"><span class="linenos">1897</span></a>
</span><span id="AIAgentChatParticipant.handle_chat_request-1898"><a href="#AIAgentChatParticipant.handle_chat_request-1898"><span class="linenos">1898</span></a><span class="sd">        Args:</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1899"><a href="#AIAgentChatParticipant.handle_chat_request-1899"><span class="linenos">1899</span></a><span class="sd">            request (ChatRequest): The incoming chat request.</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1900"><a href="#AIAgentChatParticipant.handle_chat_request-1900"><span class="linenos">1900</span></a><span class="sd">            response (ChatResponse): The chat response to be sent.</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1901"><a href="#AIAgentChatParticipant.handle_chat_request-1901"><span class="linenos">1901</span></a><span class="sd">            options (dict, optional): Additional options for handling the request.</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1902"><a href="#AIAgentChatParticipant.handle_chat_request-1902"><span class="linenos">1902</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1903"><a href="#AIAgentChatParticipant.handle_chat_request-1903"><span class="linenos">1903</span></a>        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;help&quot;</span><span class="p">:</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1904"><a href="#AIAgentChatParticipant.handle_chat_request-1904"><span class="linenos">1904</span></a>            <span class="n">response</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1905"><a href="#AIAgentChatParticipant.handle_chat_request-1905"><span class="linenos">1905</span></a>                <span class="n">MarkdownData</span><span class="p">(</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1906"><a href="#AIAgentChatParticipant.handle_chat_request-1906"><span class="linenos">1906</span></a><span class="w">                    </span><span class="sd">&quot;&quot;&quot;I am the senselab AI. I can help you with audio, text, and video analysis.</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1907"><a href="#AIAgentChatParticipant.handle_chat_request-1907"><span class="linenos">1907</span></a><span class="sd">                    Here are some example prompts you can try:\n</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1908"><a href="#AIAgentChatParticipant.handle_chat_request-1908"><span class="linenos">1908</span></a><span class="sd">                    \n```text\n@senselab-ai Read the audio files in &#39;&lt;directory_path&gt;&#39;, make them mono,</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1909"><a href="#AIAgentChatParticipant.handle_chat_request-1909"><span class="linenos">1909</span></a><span class="sd">                    resample them to 16KHz, and extract audio features.\n```\n</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1910"><a href="#AIAgentChatParticipant.handle_chat_request-1910"><span class="linenos">1910</span></a><span class="sd">                    \n```text\n@senselab-ai Read the audio files in &#39;&lt;directory_path&gt;&#39;, make them mono,</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1911"><a href="#AIAgentChatParticipant.handle_chat_request-1911"><span class="linenos">1911</span></a><span class="sd">                    resample them to 16KHz, and transcribe them with word-level timestamps.\n```\n</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1912"><a href="#AIAgentChatParticipant.handle_chat_request-1912"><span class="linenos">1912</span></a><span class="sd">                    \n```text\n@senselab-ai Share this notebook publicly.\n```\n</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1913"><a href="#AIAgentChatParticipant.handle_chat_request-1913"><span class="linenos">1913</span></a>
</span><span id="AIAgentChatParticipant.handle_chat_request-1914"><a href="#AIAgentChatParticipant.handle_chat_request-1914"><span class="linenos">1914</span></a>
</span><span id="AIAgentChatParticipant.handle_chat_request-1915"><a href="#AIAgentChatParticipant.handle_chat_request-1915"><span class="linenos">1915</span></a><span class="sd">                    &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1916"><a href="#AIAgentChatParticipant.handle_chat_request-1916"><span class="linenos">1916</span></a>                <span class="p">)</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1917"><a href="#AIAgentChatParticipant.handle_chat_request-1917"><span class="linenos">1917</span></a>            <span class="p">)</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1918"><a href="#AIAgentChatParticipant.handle_chat_request-1918"><span class="linenos">1918</span></a>            <span class="n">response</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1919"><a href="#AIAgentChatParticipant.handle_chat_request-1919"><span class="linenos">1919</span></a>            <span class="k">return</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1920"><a href="#AIAgentChatParticipant.handle_chat_request-1920"><span class="linenos">1920</span></a>
</span><span id="AIAgentChatParticipant.handle_chat_request-1921"><a href="#AIAgentChatParticipant.handle_chat_request-1921"><span class="linenos">1921</span></a>        <span class="n">system_prompt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1922"><a href="#AIAgentChatParticipant.handle_chat_request-1922"><span class="linenos">1922</span></a><span class="s2">        Try to answer the questions with `senselab` Python package (you can assume it&#39;s installed).</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1923"><a href="#AIAgentChatParticipant.handle_chat_request-1923"><span class="linenos">1923</span></a><span class="s2">        You **MUST** query the Deepwiki server (`deepwiki`) to verify every class, function,</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1924"><a href="#AIAgentChatParticipant.handle_chat_request-1924"><span class="linenos">1924</span></a><span class="s2">        or module **BEFORE** writing any code that uses it (repo: sensein/senselab).</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1925"><a href="#AIAgentChatParticipant.handle_chat_request-1925"><span class="linenos">1925</span></a><span class="s2">        &quot;&quot;&quot;</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1926"><a href="#AIAgentChatParticipant.handle_chat_request-1926"><span class="linenos">1926</span></a>
</span><span id="AIAgentChatParticipant.handle_chat_request-1927"><a href="#AIAgentChatParticipant.handle_chat_request-1927"><span class="linenos">1927</span></a>        <span class="n">options</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1928"><a href="#AIAgentChatParticipant.handle_chat_request-1928"><span class="linenos">1928</span></a>        <span class="n">options</span><span class="p">[</span><span class="s2">&quot;system_prompt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">system_prompt</span>
</span><span id="AIAgentChatParticipant.handle_chat_request-1929"><a href="#AIAgentChatParticipant.handle_chat_request-1929"><span class="linenos">1929</span></a>
</span><span id="AIAgentChatParticipant.handle_chat_request-1930"><a href="#AIAgentChatParticipant.handle_chat_request-1930"><span class="linenos">1930</span></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle_chat_request_with_tools</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This method is responsible for processing incoming chat requests and generating appropriate responses.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>request (ChatRequest):</strong>  The incoming chat request.</li>
<li><strong>response (ChatResponse):</strong>  The chat response to be sent.</li>
<li><strong>options (dict, optional):</strong>  Additional options for handling the request.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="AIAgentExtension">
                            <input id="AIAgentExtension-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AIAgentExtension</span><wbr>(<span class="base">notebook_intelligence.api.NotebookIntelligenceExtension</span>):

                <label class="view-source-button" for="AIAgentExtension-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentExtension"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentExtension-1933"><a href="#AIAgentExtension-1933"><span class="linenos">1933</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AIAgentExtension</span><span class="p">(</span><span class="n">NotebookIntelligenceExtension</span><span class="p">):</span>
</span><span id="AIAgentExtension-1934"><a href="#AIAgentExtension-1934"><span class="linenos">1934</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;AI Agent Extension for Jupyter lab.&quot;&quot;&quot;</span>
</span><span id="AIAgentExtension-1935"><a href="#AIAgentExtension-1935"><span class="linenos">1935</span></a>
</span><span id="AIAgentExtension-1936"><a href="#AIAgentExtension-1936"><span class="linenos">1936</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentExtension-1937"><a href="#AIAgentExtension-1937"><span class="linenos">1937</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentExtension-1938"><a href="#AIAgentExtension-1938"><span class="linenos">1938</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The ID of the senselab AI Extension.</span>
</span><span id="AIAgentExtension-1939"><a href="#AIAgentExtension-1939"><span class="linenos">1939</span></a>
</span><span id="AIAgentExtension-1940"><a href="#AIAgentExtension-1940"><span class="linenos">1940</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentExtension-1941"><a href="#AIAgentExtension-1941"><span class="linenos">1941</span></a><span class="sd">            str: The ID of the senselab AI Extension.</span>
</span><span id="AIAgentExtension-1942"><a href="#AIAgentExtension-1942"><span class="linenos">1942</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentExtension-1943"><a href="#AIAgentExtension-1943"><span class="linenos">1943</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab-agentic-interface-extension&quot;</span>
</span><span id="AIAgentExtension-1944"><a href="#AIAgentExtension-1944"><span class="linenos">1944</span></a>
</span><span id="AIAgentExtension-1945"><a href="#AIAgentExtension-1945"><span class="linenos">1945</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentExtension-1946"><a href="#AIAgentExtension-1946"><span class="linenos">1946</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentExtension-1947"><a href="#AIAgentExtension-1947"><span class="linenos">1947</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the senselab AI Extension.</span>
</span><span id="AIAgentExtension-1948"><a href="#AIAgentExtension-1948"><span class="linenos">1948</span></a>
</span><span id="AIAgentExtension-1949"><a href="#AIAgentExtension-1949"><span class="linenos">1949</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentExtension-1950"><a href="#AIAgentExtension-1950"><span class="linenos">1950</span></a><span class="sd">            str: The name of the senselab AI Extension.</span>
</span><span id="AIAgentExtension-1951"><a href="#AIAgentExtension-1951"><span class="linenos">1951</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentExtension-1952"><a href="#AIAgentExtension-1952"><span class="linenos">1952</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab AI Extension&quot;</span>
</span><span id="AIAgentExtension-1953"><a href="#AIAgentExtension-1953"><span class="linenos">1953</span></a>
</span><span id="AIAgentExtension-1954"><a href="#AIAgentExtension-1954"><span class="linenos">1954</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentExtension-1955"><a href="#AIAgentExtension-1955"><span class="linenos">1955</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">provider</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentExtension-1956"><a href="#AIAgentExtension-1956"><span class="linenos">1956</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The provider of the senselab AI Extension.</span>
</span><span id="AIAgentExtension-1957"><a href="#AIAgentExtension-1957"><span class="linenos">1957</span></a>
</span><span id="AIAgentExtension-1958"><a href="#AIAgentExtension-1958"><span class="linenos">1958</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentExtension-1959"><a href="#AIAgentExtension-1959"><span class="linenos">1959</span></a><span class="sd">            str: The provider of the senselab AI Extension.</span>
</span><span id="AIAgentExtension-1960"><a href="#AIAgentExtension-1960"><span class="linenos">1960</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentExtension-1961"><a href="#AIAgentExtension-1961"><span class="linenos">1961</span></a>        <span class="k">return</span> <span class="s2">&quot;sensein/senselab&quot;</span>
</span><span id="AIAgentExtension-1962"><a href="#AIAgentExtension-1962"><span class="linenos">1962</span></a>
</span><span id="AIAgentExtension-1963"><a href="#AIAgentExtension-1963"><span class="linenos">1963</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentExtension-1964"><a href="#AIAgentExtension-1964"><span class="linenos">1964</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentExtension-1965"><a href="#AIAgentExtension-1965"><span class="linenos">1965</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The URL for the senselab AI Extension repository.</span>
</span><span id="AIAgentExtension-1966"><a href="#AIAgentExtension-1966"><span class="linenos">1966</span></a>
</span><span id="AIAgentExtension-1967"><a href="#AIAgentExtension-1967"><span class="linenos">1967</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentExtension-1968"><a href="#AIAgentExtension-1968"><span class="linenos">1968</span></a><span class="sd">            str: The URL for the senselab AI Extension repository.</span>
</span><span id="AIAgentExtension-1969"><a href="#AIAgentExtension-1969"><span class="linenos">1969</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentExtension-1970"><a href="#AIAgentExtension-1970"><span class="linenos">1970</span></a>        <span class="k">return</span> <span class="s2">&quot;https://github.com/sensein/senselab&quot;</span>
</span><span id="AIAgentExtension-1971"><a href="#AIAgentExtension-1971"><span class="linenos">1971</span></a>
</span><span id="AIAgentExtension-1972"><a href="#AIAgentExtension-1972"><span class="linenos">1972</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_make_deepwiki_server</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MCPServer</span><span class="p">:</span>
</span><span id="AIAgentExtension-1973"><a href="#AIAgentExtension-1973"><span class="linenos">1973</span></a>        <span class="k">return</span> <span class="n">MCPServerImpl</span><span class="p">(</span>
</span><span id="AIAgentExtension-1974"><a href="#AIAgentExtension-1974"><span class="linenos">1974</span></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;deepwiki&quot;</span><span class="p">,</span>
</span><span id="AIAgentExtension-1975"><a href="#AIAgentExtension-1975"><span class="linenos">1975</span></a>            <span class="n">sse_params</span><span class="o">=</span><span class="n">SSEServerParameters</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://mcp.deepwiki.com/sse&quot;</span><span class="p">),</span>
</span><span id="AIAgentExtension-1976"><a href="#AIAgentExtension-1976"><span class="linenos">1976</span></a>            <span class="n">auto_approve_tools</span><span class="o">=</span><span class="p">[],</span>
</span><span id="AIAgentExtension-1977"><a href="#AIAgentExtension-1977"><span class="linenos">1977</span></a>        <span class="p">)</span>
</span><span id="AIAgentExtension-1978"><a href="#AIAgentExtension-1978"><span class="linenos">1978</span></a>
</span><span id="AIAgentExtension-1979"><a href="#AIAgentExtension-1979"><span class="linenos">1979</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_init_tool_lists_bg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">servers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MCPServer</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AIAgentExtension-1980"><a href="#AIAgentExtension-1980"><span class="linenos">1980</span></a>        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_go</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AIAgentExtension-1981"><a href="#AIAgentExtension-1981"><span class="linenos">1981</span></a>            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">servers</span><span class="p">:</span>
</span><span id="AIAgentExtension-1982"><a href="#AIAgentExtension-1982"><span class="linenos">1982</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="AIAgentExtension-1983"><a href="#AIAgentExtension-1983"><span class="linenos">1983</span></a>                    <span class="k">await</span> <span class="n">s</span><span class="o">.</span><span class="n">update_tool_list</span><span class="p">()</span>
</span><span id="AIAgentExtension-1984"><a href="#AIAgentExtension-1984"><span class="linenos">1984</span></a>                    <span class="c1"># Optional: log discovered tools for quick inspection</span>
</span><span id="AIAgentExtension-1985"><a href="#AIAgentExtension-1985"><span class="linenos">1985</span></a>                    <span class="k">try</span><span class="p">:</span>
</span><span id="AIAgentExtension-1986"><a href="#AIAgentExtension-1986"><span class="linenos">1986</span></a>                        <span class="n">tools</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">get_tools</span><span class="p">()</span>
</span><span id="AIAgentExtension-1987"><a href="#AIAgentExtension-1987"><span class="linenos">1987</span></a>                        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tools</span><span class="p">]</span>
</span><span id="AIAgentExtension-1988"><a href="#AIAgentExtension-1988"><span class="linenos">1988</span></a>                        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[MCP:</span><span class="si">{</span><span class="n">s</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">] tools discovered: </span><span class="si">{</span><span class="n">names</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="AIAgentExtension-1989"><a href="#AIAgentExtension-1989"><span class="linenos">1989</span></a>                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AIAgentExtension-1990"><a href="#AIAgentExtension-1990"><span class="linenos">1990</span></a>                        <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[MCP:</span><span class="si">{</span><span class="n">s</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">] failed listing tools locally: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="AIAgentExtension-1991"><a href="#AIAgentExtension-1991"><span class="linenos">1991</span></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="AIAgentExtension-1992"><a href="#AIAgentExtension-1992"><span class="linenos">1992</span></a>                    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error initializing tool list for server </span><span class="si">{</span><span class="n">s</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="AIAgentExtension-1993"><a href="#AIAgentExtension-1993"><span class="linenos">1993</span></a>
</span><span id="AIAgentExtension-1994"><a href="#AIAgentExtension-1994"><span class="linenos">1994</span></a>        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">_go</span><span class="p">()),</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="AIAgentExtension-1995"><a href="#AIAgentExtension-1995"><span class="linenos">1995</span></a>
</span><span id="AIAgentExtension-1996"><a href="#AIAgentExtension-1996"><span class="linenos">1996</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="n">Host</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AIAgentExtension-1997"><a href="#AIAgentExtension-1997"><span class="linenos">1997</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Activate the senselab AI extension.</span>
</span><span id="AIAgentExtension-1998"><a href="#AIAgentExtension-1998"><span class="linenos">1998</span></a>
</span><span id="AIAgentExtension-1999"><a href="#AIAgentExtension-1999"><span class="linenos">1999</span></a><span class="sd">        The senselab AI extension includes a custom AI agent chat participant</span>
</span><span id="AIAgentExtension-2000"><a href="#AIAgentExtension-2000"><span class="linenos">2000</span></a><span class="sd">        that interacts with the user through natural language following</span>
</span><span id="AIAgentExtension-2001"><a href="#AIAgentExtension-2001"><span class="linenos">2001</span></a><span class="sd">        a predefined prompt and a set of tools, like Deepwiki.</span>
</span><span id="AIAgentExtension-2002"><a href="#AIAgentExtension-2002"><span class="linenos">2002</span></a>
</span><span id="AIAgentExtension-2003"><a href="#AIAgentExtension-2003"><span class="linenos">2003</span></a><span class="sd">        Args:</span>
</span><span id="AIAgentExtension-2004"><a href="#AIAgentExtension-2004"><span class="linenos">2004</span></a><span class="sd">            host (Host): The host environment to activate the extension in.</span>
</span><span id="AIAgentExtension-2005"><a href="#AIAgentExtension-2005"><span class="linenos">2005</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentExtension-2006"><a href="#AIAgentExtension-2006"><span class="linenos">2006</span></a>        <span class="c1"># Build the single Deepwiki server in code</span>
</span><span id="AIAgentExtension-2007"><a href="#AIAgentExtension-2007"><span class="linenos">2007</span></a>        <span class="n">deepwiki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_deepwiki_server</span><span class="p">()</span>
</span><span id="AIAgentExtension-2008"><a href="#AIAgentExtension-2008"><span class="linenos">2008</span></a>        <span class="n">servers</span> <span class="o">=</span> <span class="p">[</span><span class="n">deepwiki</span><span class="p">]</span>
</span><span id="AIAgentExtension-2009"><a href="#AIAgentExtension-2009"><span class="linenos">2009</span></a>
</span><span id="AIAgentExtension-2010"><a href="#AIAgentExtension-2010"><span class="linenos">2010</span></a>        <span class="c1"># Create + register your participant</span>
</span><span id="AIAgentExtension-2011"><a href="#AIAgentExtension-2011"><span class="linenos">2011</span></a>        <span class="n">participant</span> <span class="o">=</span> <span class="n">AIAgentChatParticipant</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">servers</span><span class="o">=</span><span class="n">servers</span><span class="p">)</span>
</span><span id="AIAgentExtension-2012"><a href="#AIAgentExtension-2012"><span class="linenos">2012</span></a>        <span class="n">host</span><span class="o">.</span><span class="n">register_chat_participant</span><span class="p">(</span><span class="n">participant</span><span class="p">)</span>
</span><span id="AIAgentExtension-2013"><a href="#AIAgentExtension-2013"><span class="linenos">2013</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">participant</span> <span class="o">=</span> <span class="n">participant</span>
</span><span id="AIAgentExtension-2014"><a href="#AIAgentExtension-2014"><span class="linenos">2014</span></a>
</span><span id="AIAgentExtension-2015"><a href="#AIAgentExtension-2015"><span class="linenos">2015</span></a>        <span class="c1"># Populate MCP tool lists in the background so tools appear promptly</span>
</span><span id="AIAgentExtension-2016"><a href="#AIAgentExtension-2016"><span class="linenos">2016</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_init_tool_lists_bg</span><span class="p">(</span><span class="n">servers</span><span class="p">)</span>
</span><span id="AIAgentExtension-2017"><a href="#AIAgentExtension-2017"><span class="linenos">2017</span></a>
</span><span id="AIAgentExtension-2018"><a href="#AIAgentExtension-2018"><span class="linenos">2018</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;senselab AI Extension activated.&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>AI Agent Extension for Jupyter lab.</p>
</div>


                            <div id="AIAgentExtension.id" class="classattr">
                                        <input id="AIAgentExtension.id-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">id</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AIAgentExtension.id-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentExtension.id"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentExtension.id-1936"><a href="#AIAgentExtension.id-1936"><span class="linenos">1936</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentExtension.id-1937"><a href="#AIAgentExtension.id-1937"><span class="linenos">1937</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentExtension.id-1938"><a href="#AIAgentExtension.id-1938"><span class="linenos">1938</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The ID of the senselab AI Extension.</span>
</span><span id="AIAgentExtension.id-1939"><a href="#AIAgentExtension.id-1939"><span class="linenos">1939</span></a>
</span><span id="AIAgentExtension.id-1940"><a href="#AIAgentExtension.id-1940"><span class="linenos">1940</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentExtension.id-1941"><a href="#AIAgentExtension.id-1941"><span class="linenos">1941</span></a><span class="sd">            str: The ID of the senselab AI Extension.</span>
</span><span id="AIAgentExtension.id-1942"><a href="#AIAgentExtension.id-1942"><span class="linenos">1942</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentExtension.id-1943"><a href="#AIAgentExtension.id-1943"><span class="linenos">1943</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab-agentic-interface-extension&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The ID of the senselab AI Extension.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The ID of the senselab AI Extension.</p>
</blockquote>
</div>


                            </div>
                            <div id="AIAgentExtension.name" class="classattr">
                                        <input id="AIAgentExtension.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AIAgentExtension.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentExtension.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentExtension.name-1945"><a href="#AIAgentExtension.name-1945"><span class="linenos">1945</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentExtension.name-1946"><a href="#AIAgentExtension.name-1946"><span class="linenos">1946</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentExtension.name-1947"><a href="#AIAgentExtension.name-1947"><span class="linenos">1947</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The name of the senselab AI Extension.</span>
</span><span id="AIAgentExtension.name-1948"><a href="#AIAgentExtension.name-1948"><span class="linenos">1948</span></a>
</span><span id="AIAgentExtension.name-1949"><a href="#AIAgentExtension.name-1949"><span class="linenos">1949</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentExtension.name-1950"><a href="#AIAgentExtension.name-1950"><span class="linenos">1950</span></a><span class="sd">            str: The name of the senselab AI Extension.</span>
</span><span id="AIAgentExtension.name-1951"><a href="#AIAgentExtension.name-1951"><span class="linenos">1951</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentExtension.name-1952"><a href="#AIAgentExtension.name-1952"><span class="linenos">1952</span></a>        <span class="k">return</span> <span class="s2">&quot;senselab AI Extension&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The name of the senselab AI Extension.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The name of the senselab AI Extension.</p>
</blockquote>
</div>


                            </div>
                            <div id="AIAgentExtension.provider" class="classattr">
                                        <input id="AIAgentExtension.provider-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">provider</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AIAgentExtension.provider-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentExtension.provider"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentExtension.provider-1954"><a href="#AIAgentExtension.provider-1954"><span class="linenos">1954</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentExtension.provider-1955"><a href="#AIAgentExtension.provider-1955"><span class="linenos">1955</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">provider</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentExtension.provider-1956"><a href="#AIAgentExtension.provider-1956"><span class="linenos">1956</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The provider of the senselab AI Extension.</span>
</span><span id="AIAgentExtension.provider-1957"><a href="#AIAgentExtension.provider-1957"><span class="linenos">1957</span></a>
</span><span id="AIAgentExtension.provider-1958"><a href="#AIAgentExtension.provider-1958"><span class="linenos">1958</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentExtension.provider-1959"><a href="#AIAgentExtension.provider-1959"><span class="linenos">1959</span></a><span class="sd">            str: The provider of the senselab AI Extension.</span>
</span><span id="AIAgentExtension.provider-1960"><a href="#AIAgentExtension.provider-1960"><span class="linenos">1960</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentExtension.provider-1961"><a href="#AIAgentExtension.provider-1961"><span class="linenos">1961</span></a>        <span class="k">return</span> <span class="s2">&quot;sensein/senselab&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The provider of the senselab AI Extension.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The provider of the senselab AI Extension.</p>
</blockquote>
</div>


                            </div>
                            <div id="AIAgentExtension.url" class="classattr">
                                        <input id="AIAgentExtension.url-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">url</span><span class="annotation">: str</span>

                <label class="view-source-button" for="AIAgentExtension.url-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentExtension.url"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentExtension.url-1963"><a href="#AIAgentExtension.url-1963"><span class="linenos">1963</span></a>    <span class="nd">@property</span>
</span><span id="AIAgentExtension.url-1964"><a href="#AIAgentExtension.url-1964"><span class="linenos">1964</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="AIAgentExtension.url-1965"><a href="#AIAgentExtension.url-1965"><span class="linenos">1965</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The URL for the senselab AI Extension repository.</span>
</span><span id="AIAgentExtension.url-1966"><a href="#AIAgentExtension.url-1966"><span class="linenos">1966</span></a>
</span><span id="AIAgentExtension.url-1967"><a href="#AIAgentExtension.url-1967"><span class="linenos">1967</span></a><span class="sd">        Return:</span>
</span><span id="AIAgentExtension.url-1968"><a href="#AIAgentExtension.url-1968"><span class="linenos">1968</span></a><span class="sd">            str: The URL for the senselab AI Extension repository.</span>
</span><span id="AIAgentExtension.url-1969"><a href="#AIAgentExtension.url-1969"><span class="linenos">1969</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentExtension.url-1970"><a href="#AIAgentExtension.url-1970"><span class="linenos">1970</span></a>        <span class="k">return</span> <span class="s2">&quot;https://github.com/sensein/senselab&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The URL for the senselab AI Extension repository.</p>

<h6 id="return">Return:</h6>

<blockquote>
  <p>str: The URL for the senselab AI Extension repository.</p>
</blockquote>
</div>


                            </div>
                            <div id="AIAgentExtension.activate" class="classattr">
                                        <input id="AIAgentExtension.activate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">activate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">host</span><span class="p">:</span> <span class="n">notebook_intelligence</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">Host</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="AIAgentExtension.activate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AIAgentExtension.activate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AIAgentExtension.activate-1996"><a href="#AIAgentExtension.activate-1996"><span class="linenos">1996</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">:</span> <span class="n">Host</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AIAgentExtension.activate-1997"><a href="#AIAgentExtension.activate-1997"><span class="linenos">1997</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Activate the senselab AI extension.</span>
</span><span id="AIAgentExtension.activate-1998"><a href="#AIAgentExtension.activate-1998"><span class="linenos">1998</span></a>
</span><span id="AIAgentExtension.activate-1999"><a href="#AIAgentExtension.activate-1999"><span class="linenos">1999</span></a><span class="sd">        The senselab AI extension includes a custom AI agent chat participant</span>
</span><span id="AIAgentExtension.activate-2000"><a href="#AIAgentExtension.activate-2000"><span class="linenos">2000</span></a><span class="sd">        that interacts with the user through natural language following</span>
</span><span id="AIAgentExtension.activate-2001"><a href="#AIAgentExtension.activate-2001"><span class="linenos">2001</span></a><span class="sd">        a predefined prompt and a set of tools, like Deepwiki.</span>
</span><span id="AIAgentExtension.activate-2002"><a href="#AIAgentExtension.activate-2002"><span class="linenos">2002</span></a>
</span><span id="AIAgentExtension.activate-2003"><a href="#AIAgentExtension.activate-2003"><span class="linenos">2003</span></a><span class="sd">        Args:</span>
</span><span id="AIAgentExtension.activate-2004"><a href="#AIAgentExtension.activate-2004"><span class="linenos">2004</span></a><span class="sd">            host (Host): The host environment to activate the extension in.</span>
</span><span id="AIAgentExtension.activate-2005"><a href="#AIAgentExtension.activate-2005"><span class="linenos">2005</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AIAgentExtension.activate-2006"><a href="#AIAgentExtension.activate-2006"><span class="linenos">2006</span></a>        <span class="c1"># Build the single Deepwiki server in code</span>
</span><span id="AIAgentExtension.activate-2007"><a href="#AIAgentExtension.activate-2007"><span class="linenos">2007</span></a>        <span class="n">deepwiki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_deepwiki_server</span><span class="p">()</span>
</span><span id="AIAgentExtension.activate-2008"><a href="#AIAgentExtension.activate-2008"><span class="linenos">2008</span></a>        <span class="n">servers</span> <span class="o">=</span> <span class="p">[</span><span class="n">deepwiki</span><span class="p">]</span>
</span><span id="AIAgentExtension.activate-2009"><a href="#AIAgentExtension.activate-2009"><span class="linenos">2009</span></a>
</span><span id="AIAgentExtension.activate-2010"><a href="#AIAgentExtension.activate-2010"><span class="linenos">2010</span></a>        <span class="c1"># Create + register your participant</span>
</span><span id="AIAgentExtension.activate-2011"><a href="#AIAgentExtension.activate-2011"><span class="linenos">2011</span></a>        <span class="n">participant</span> <span class="o">=</span> <span class="n">AIAgentChatParticipant</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">servers</span><span class="o">=</span><span class="n">servers</span><span class="p">)</span>
</span><span id="AIAgentExtension.activate-2012"><a href="#AIAgentExtension.activate-2012"><span class="linenos">2012</span></a>        <span class="n">host</span><span class="o">.</span><span class="n">register_chat_participant</span><span class="p">(</span><span class="n">participant</span><span class="p">)</span>
</span><span id="AIAgentExtension.activate-2013"><a href="#AIAgentExtension.activate-2013"><span class="linenos">2013</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">participant</span> <span class="o">=</span> <span class="n">participant</span>
</span><span id="AIAgentExtension.activate-2014"><a href="#AIAgentExtension.activate-2014"><span class="linenos">2014</span></a>
</span><span id="AIAgentExtension.activate-2015"><a href="#AIAgentExtension.activate-2015"><span class="linenos">2015</span></a>        <span class="c1"># Populate MCP tool lists in the background so tools appear promptly</span>
</span><span id="AIAgentExtension.activate-2016"><a href="#AIAgentExtension.activate-2016"><span class="linenos">2016</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_init_tool_lists_bg</span><span class="p">(</span><span class="n">servers</span><span class="p">)</span>
</span><span id="AIAgentExtension.activate-2017"><a href="#AIAgentExtension.activate-2017"><span class="linenos">2017</span></a>
</span><span id="AIAgentExtension.activate-2018"><a href="#AIAgentExtension.activate-2018"><span class="linenos">2018</span></a>        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;senselab AI Extension activated.&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Activate the senselab AI extension.</p>

<p>The senselab AI extension includes a custom AI agent chat participant
that interacts with the user through natural language following
a predefined prompt and a set of tools, like Deepwiki.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>host (Host):</strong>  The host environment to activate the extension in.</li>
</ul>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>