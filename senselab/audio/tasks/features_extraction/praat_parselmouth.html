<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>senselab.audio.tasks.features_extraction.praat_parselmouth API documentation</title>
            <link rel="icon" href="https://readthedocs.org/favicon.ico"/>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');body{font-family:'Roboto', sans-serif;}pre{line-height:1.5;font-family:'Roboto', sans-serif;}span.linenos{color:inherit;background-color:transparent;padding-left:5px;padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc;}.pdoc-code{background:#f5f5f5;font-family:'Roboto Mono', monospace;}.pdoc-code .c{color:#6a737d;font-style:italic;}.pdoc-code .err{border:1px solid #ff0000;}.pdoc-code .k{color:#d73a49;font-weight:bold;}.pdoc-code .o{color:#6a737d;}.pdoc-code .ch{color:#6a737d;font-style:italic;}.pdoc-code .cm{color:#6a737d;font-style:italic;}.pdoc-code .cp{color:#999988;}.pdoc-code .cpf{color:#6a737d;font-style:italic;}.pdoc-code .c1{color:#6a737d;font-style:italic;}.pdoc-code .cs{color:#6a737d;font-style:italic;}.pdoc-code .gd{color:#a00000;}.pdoc-code .ge{font-style:italic;}.pdoc-code .gr{color:#e40000;}.pdoc-code .gh{color:#005cc5;font-weight:bold;}.pdoc-code .gi{color:#22863a;}.pdoc-code .go{color:#6a737d;}.pdoc-code .gp{color:#005cc5;font-weight:bold;}.pdoc-code .gs{font-weight:bold;}.pdoc-code .gu{color:#005cc5;font-weight:bold;}.pdoc-code .gt{color:#d73a49;}.pdoc-code .kc{color:#d73a49;font-weight:bold;}.pdoc-code .kd{color:#d73a49;font-weight:bold;}.pdoc-code .kn{color:#d73a49;font-weight:bold;}.pdoc-code .kp{color:#d73a49;}.pdoc-code .kr{color:#d73a49;font-weight:bold;}.pdoc-code .kt{color:#b31d28;}.pdoc-code .m{color:#005cc5;}.pdoc-code .s{color:#032f62;}.pdoc-code .na{color:#6f42c1;}.pdoc-code .nb{color:#d73a49;}.pdoc-code .nc{color:#005cc5;font-weight:bold;}.pdoc-code .no{color:#d73a49;}.pdoc-code .nd{color:#6f42c1;}.pdoc-code .ni{color:#6a737d;font-weight:bold;}.pdoc-code .ne{color:#e36209;font-weight:bold;}.pdoc-code .nf{color:#005cc5;}.pdoc-code .nl{color:#6a737d;}.pdoc-code .nn{color:#005cc5;font-weight:bold;}.pdoc-code .nt{color:#22863a;font-weight:bold;}.pdoc-code .nv{color:#e36209;}.pdoc-code .ow{color:#d73a49;font-weight:bold;}.pdoc-code .w{color:#bbbbbb;}.pdoc-code .mb{color:#005cc5;}.pdoc-code .mf{color:#005cc5;}.pdoc-code .mh{color:#005cc5;}.pdoc-code .mi{color:#005cc5;}.pdoc-code .mo{color:#005cc5;}.pdoc-code .sa{color:#032f62;}.pdoc-code .sb{color:#032f62;}.pdoc-code .sc{color:#032f62;}.pdoc-code .dl{color:#032f62;}.pdoc-code .sd{color:#032f62;font-style:italic;}.pdoc-code .s2{color:#032f62;}.pdoc-code .se{color:#005cc5;font-weight:bold;}.pdoc-code .sh{color:#032f62;}.pdoc-code .si{color:#6a737d;font-weight:bold;}.pdoc-code .sx{color:#22863a;}.pdoc-code .sr{color:#6a737d;}.pdoc-code .s1{color:#032f62;}.pdoc-code .ss{color:#22863a;}.pdoc-code .bp{color:#d73a49;}.pdoc-code .fm{color:#005cc5;}.pdoc-code .vc{color:#e36209;}.pdoc-code .vg{color:#e36209;}.pdoc-code .vi{color:#e36209;}.pdoc-code .vm{color:#e36209;}.pdoc-code .il{color:#005cc5;}.tutorial-button{background-color:#3660a5;border:1px solid #3660a5;color:white;padding:5px 10px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;cursor:pointer;border-radius:12px;transition-duration:0.4s;}.tutorial-button:hover{background-color:white;color:black;border:1px solid #3660a5;}@media (prefers-color-scheme:dark){pre{line-height:1.5;font-family:'Roboto', sans-serif;}span.linenos{color:inherit;background-color:transparent;padding-left:5px;padding-right:20px;}.pdoc-code .hll{background-color:#49483e;}.pdoc-code{background:#272822;color:#f8f8f2;font-family:'Roboto Mono', monospace;}.pdoc-code .c{color:#75715e;}.pdoc-code .err{color:#960050;background-color:#1e0010;}.pdoc-code .esc{color:#f8f8f2;}.pdoc-code .g{color:#f8f8f2;}.pdoc-code .k{color:#66d9ef;}.pdoc-code .l{color:#ae81ff;}.pdoc-code .n{color:#f8f8f2;}.pdoc-code .o{color:#f92672;}.pdoc-code .x{color:#f8f8f2;}.pdoc-code .p{color:#f8f8f2;}.pdoc-code .ch{color:#75715e;}.pdoc-code .cm{color:#75715e;}.pdoc-code .cp{color:#75715e;}.pdoc-code .cpf{color:#75715e;}.pdoc-code .c1{color:#75715e;}.pdoc-code .cs{color:#75715e;}.pdoc-code .gd{color:#f92672;}.pdoc-code .ge{color:#f8f8f2;font-style:italic;}.pdoc-code .gr{color:#f8f8f2;}.pdoc-code .gh{color:#f8f8f2;}.pdoc-code .gi{color:#a6e22e;}.pdoc-code .go{color:#66d9ef;}.pdoc-code .gp{color:#f92672;font-weight:bold;}.pdoc-code .gs{color:#f8f8f2;font-weight:bold;}.pdoc-code .gu{color:#75715e;}.pdoc-code .gt{color:#f8f8f2;}.pdoc-code .kc{color:#66d9ef;}.pdoc-code .kd{color:#66d9ef;}.pdoc-code .kn{color:#f92672;}.pdoc-code .kp{color:#66d9ef;}.pdoc-code .kr{color:#66d9ef;}.pdoc-code .kt{color:#66d9ef;}.pdoc-code .ld{color:#e6db74;}.pdoc-code .m{color:#ae81ff;}.pdoc-code .s{color:#e6db74;}.pdoc-code .na{color:#a6e22e;}.pdoc-code .nb{color:#f8f8f2;}.pdoc-code .nc{color:#a6e22e;}.pdoc-code .no{color:#66d9ef;}.pdoc-code .nd{color:#a6e22e;}.pdoc-code .ni{color:#f8f8f2;}.pdoc-code .ne{color:#a6e22e;}.pdoc-code .nf{color:#a6e22e;}.pdoc-code .nl{color:#f8f8f2;}.pdoc-code .nn{color:#f8f8f2;}.pdoc-code .nx{color:#a6e22e;}.pdoc-code .py{color:#f8f8f2;}.pdoc-code .nt{color:#f92672;}.pdoc-code .nv{color:#f8f8f2;}.pdoc-code .ow{color:#f92672;}.pdoc-code .w{color:#f8f8f2;}.pdoc-code .mb{color:#ae81ff;}.pdoc-code .mf{color:#ae81ff;}.pdoc-code .mh{color:#ae81ff;}.pdoc-code .mi{color:#ae81ff;}.pdoc-code .mo{color:#ae81ff;}.pdoc-code .sa{color:#e6db74;}.pdoc-code .sb{color:#e6db74;}.pdoc-code .sc{color:#e6db74;}.pdoc-code .dl{color:#e6db74;}.pdoc-code .sd{color:#e6db74;font-style:italic;}.pdoc-code .s2{color:#e6db74;}.pdoc-code .se{color:#ae81ff;}.pdoc-code .sh{color:#e6db74;}.pdoc-code .si{color:#e6db74;}.pdoc-code .sx{color:#e6db74;}.pdoc-code .sr{color:#e6db74;}.pdoc-code .s1{color:#e6db74;}.pdoc-code .ss{color:#e6db74;}.pdoc-code .bp{color:#f8f8f2;}.pdoc-code .fm{color:#a6e22e;}.pdoc-code .vc{color:#f8f8f2;}.pdoc-code .vg{color:#f8f8f2;}.pdoc-code .vi{color:#f8f8f2;}.pdoc-code .vm{color:#f8f8f2;}}.pdoc-button.module-list-button{background-color:#0072b2;color:#ffffff !important;border:2px solid #0072b2;padding:10px 20px;font-size:16px;font-weight:500;text-align:center;cursor:pointer;transition:background-color 0.3s ease, border-color 0.3s ease;border-radius:20px; box-shadow:none; }.pdoc-button.module-list-button:hover{background-color:#005ea6;border-color:#005ea6;}</style>
    <style>/*! theme.css */:root{--pdoc-background:#ffffff;}.pdoc{--text:#000000; --muted:#6d6d6d; --link:#0072b2; --link-hover:#004d80; --code:#f5f5f5; --active:#ffd700; --accent:#3989b529; --accent2:#b3b3b3; --nav-hover:rgba(245, 245, 245, 0.5); --name:#d55e00; --def:#009e73; --annotation:#cc79a7; }@media (prefers-color-scheme:dark){:root{--pdoc-background:#202020; }.pdoc{--text:#e0e0e0; --muted:#a0a0a0; --link:#56b4e9; --link-hover:#1f78b4; --code:#2a2a2a; --active:#ffd700; --accent:#3a3a3a; --accent2:#555555; --nav-hover:rgba(50, 50, 50, 0.5); --name:#e69f00; --def:#009e73; --annotation:#f0e442; }}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../features_extraction.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;senselab.audio.tasks.features_extraction</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="function" href="#get_sound">get_sound</a>
            </li>
            <li>
                    <a class="function" href="#extract_speech_rate">extract_speech_rate</a>
            </li>
            <li>
                    <a class="function" href="#extract_pitch_values">extract_pitch_values</a>
            </li>
            <li>
                    <a class="function" href="#extract_pitch_descriptors">extract_pitch_descriptors</a>
            </li>
            <li>
                    <a class="function" href="#extract_intensity_descriptors">extract_intensity_descriptors</a>
            </li>
            <li>
                    <a class="function" href="#extract_harmonicity_descriptors">extract_harmonicity_descriptors</a>
            </li>
            <li>
                    <a class="function" href="#extract_slope_tilt">extract_slope_tilt</a>
            </li>
            <li>
                    <a class="function" href="#extract_cpp_descriptors">extract_cpp_descriptors</a>
            </li>
            <li>
                    <a class="function" href="#measure_f1f2_formants_bandwidths">measure_f1f2_formants_bandwidths</a>
            </li>
            <li>
                    <a class="function" href="#extract_spectral_moments">extract_spectral_moments</a>
            </li>
            <li>
                    <a class="function" href="#extract_audio_duration">extract_audio_duration</a>
            </li>
            <li>
                    <a class="function" href="#extract_jitter">extract_jitter</a>
            </li>
            <li>
                    <a class="function" href="#extract_shimmer">extract_shimmer</a>
            </li>
            <li>
                    <a class="function" href="#extract_praat_parselmouth_features_from_audios">extract_praat_parselmouth_features_from_audios</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../../../senselab.html">senselab</a><wbr>.<a href="./../../../audio.html">audio</a><wbr>.<a href="./../../tasks.html">tasks</a><wbr>.<a href="./../features_extraction.html">features_extraction</a><wbr>.praat_parselmouth    </h1>

                        <div class="docstring"><p>This module contains functions that extract features from audio files using the PRAAT library.</p>

<p>The initial implementation of this features extraction was started by Nicholas Cummins
from King's College London and has since been further developed and maintained
by the senselab community.</p>
</div>

                        <input id="mod-praat_parselmouth-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-praat_parselmouth-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="sd">&quot;&quot;&quot;This module contains functions that extract features from audio files using the PRAAT library.</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="sd">The initial implementation of this features extraction was started by Nicholas Cummins</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="sd">from King&#39;s College London and has since been further developed and maintained</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="sd">by the senselab community.</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="kn">import</span> <span class="nn">inspect</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="kn">import</span> <span class="nn">parselmouth</span>  <span class="c1"># type: ignore</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="kn">import</span> <span class="nn">pydra</span>  <span class="c1"># type: ignore</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="kn">from</span> <span class="nn">senselab.audio.data_structures</span> <span class="kn">import</span> <span class="n">Audio</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="kn">from</span> <span class="nn">senselab.utils.data_structures</span> <span class="kn">import</span> <span class="n">logger</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a><span class="k">def</span> <span class="nf">get_sound</span><span class="p">(</span><span class="n">audio</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">sampling_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">:</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a sound object from a given audio file or Audio object.</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="sd">    Args:</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="sd">        audio (Union[Path, Audio]): A path to an audio file or an Audio object.</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a><span class="sd">        sampling_rate (int, optional): The sampling rate of the audio. Defaults to 16000.</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="sd">    Returns:</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a><span class="sd">        parselmouth.Sound: A Parselmouth Sound object.</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="sd">    Raises:</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a><span class="sd">        FileNotFoundError: If the file is not found at the given path.</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a>        <span class="c1"># Loading the sound</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">audio</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>            <span class="n">audio</span> <span class="o">=</span> <span class="n">audio</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">audio</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a>                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File does not exist: </span><span class="si">{</span><span class="n">audio</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a>                <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File does not exist: </span><span class="si">{</span><span class="n">audio</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a>            <span class="n">snd_full</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">audio</span><span class="p">))</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">audio</span><span class="p">,</span> <span class="n">Audio</span><span class="p">):</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a>            <span class="n">snd_full</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="n">audio</span><span class="o">.</span><span class="n">waveform</span><span class="p">,</span> <span class="n">audio</span><span class="o">.</span><span class="n">sampling_rate</span><span class="p">)</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a>        <span class="c1"># Preprocessing</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a>        <span class="k">if</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd_full</span><span class="p">,</span> <span class="s2">&quot;Get number of channels&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a>            <span class="n">snd_full</span> <span class="o">=</span> <span class="n">snd_full</span><span class="o">.</span><span class="n">convert_to_mono</span><span class="p">()</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a>        <span class="k">if</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd_full</span><span class="p">,</span> <span class="s2">&quot;Get sampling frequency&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">sampling_rate</span><span class="p">:</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a>            <span class="n">snd_full</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd_full</span><span class="p">,</span> <span class="s2">&quot;Resample&quot;</span><span class="p">,</span> <span class="n">sampling_rate</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a>            <span class="c1"># Details of queery: https://www.fon.hum.uva.nl/praat/manual/Get_sampling_frequency.html</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>            <span class="c1"># Details of conversion: https://www.fon.hum.uva.nl/praat/manual/Sound__Resample___.html</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error loading sound: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a>    <span class="k">return</span> <span class="n">snd_full</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a><span class="k">def</span> <span class="nf">extract_speech_rate</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract speech timing and pausing features from a given sound object.</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="sd">    Args:</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a><span class="sd">    Returns:</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a><span class="sd">        Dict[str, float]: A dictionary containing the following features:</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="sd">            - speaking_rate (float): Number of syllables divided by duration.</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a><span class="sd">            - articulation_rate (float): Number of syllables divided by phonation time.</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a><span class="sd">            - phonation_ratio (float): Phonation time divided by duration.</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a><span class="sd">            - pause_rate (float): Number of pauses divided by duration.</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a><span class="sd">            - mean_pause_dur (float): Total time pausing divided by the number of identified pauses.</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="sd">    Examples:</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a><span class="sd">        ```python</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="sd">        &gt;&gt;&gt; extract_speech_rate(snd)</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a><span class="sd">        {</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="sd">            &#39;speaking_rate&#39;: 5.3,</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a><span class="sd">            &#39;articulation_rate&#39;: 4.7,</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a><span class="sd">            &#39;phonation_ratio&#39;: 0.9,</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="sd">            &#39;pause_rate&#39;: 2.1,</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a><span class="sd">            &#39;mean_pause_dur&#39;: 0.5</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a><span class="sd">        }</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a><span class="sd">        ```</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a><span class="sd">    Useful sources for this code:</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a><span class="sd">        - https://sites.google.com/view/uhm-o-meter/scripts/syllablenuclei_v3?pli=1</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="sd">        - https://drive.google.com/file/d/1o3mNdN5FKTiYQC9GHB1XoZ8JJIGZk_AK/view</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="sd">        - (2009 paper) https://doi.org/10.3758/BRM.41.2.385</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a><span class="sd">        - (2021 paper) https://doi.org/10.1080/0969594X.2021.1951162</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a>        <span class="c1"># _____________________________________________________________________________________________________________</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a>        <span class="c1"># Load the sound object into parselmouth if it is an Audio object</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>        <span class="c1"># _____________________________________________________________________________________________________________</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>        <span class="c1"># Key pause detection hyperparameters</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>        <span class="c1"># Silence Threshold (dB) - standard setting to detect silence in the &quot;To TextGrid (silences)&quot; function.</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a>        <span class="c1"># The higher this number, the lower the chances of finding silent pauses</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>        <span class="n">silence_db</span> <span class="o">=</span> <span class="o">-</span><span class="mi">25</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>        <span class="c1"># Minimum_dip_between_peaks_(dB) - if there are decreases in intensity</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>        <span class="c1"># of at least this value surrounding the peak, the peak is labelled to be a syllable nucleus</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>        <span class="c1"># I.e. the size of the dip between two possible peakes</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>        <span class="c1"># The higher this number, the less syllables will be found</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>        <span class="c1"># For clean and filtered signal use 4, if not use 2 (recommend thresholds)</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>        <span class="n">min_dip</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>        <span class="c1"># Code for determining if the signal not clean/filtered</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>        <span class="n">hnr</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>            <span class="n">snd</span><span class="o">.</span><span class="n">to_harmonicity_cc</span><span class="p">(),</span> <span class="s2">&quot;Get mean&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>        <span class="p">)</span>  <span class="c1"># Note: (0,0) is the time range for extraction, setting both two zero tells praat to use the full file</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>        <span class="k">if</span> <span class="n">hnr</span> <span class="o">&lt;</span> <span class="mi">60</span><span class="p">:</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>            <span class="n">min_dip</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>        <span class="c1"># Minimum pause duration (s): How long should a pause be to be counted as a silent pause?</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>        <span class="c1"># The higher this number, the fewer pauses will be found</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>        <span class="n">min_pause</span> <span class="o">=</span> <span class="mf">0.3</span>  <span class="c1"># the default for this is 0.1 in Praat, the de Jong&#39;s script has this set at 0.3</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>        <span class="c1"># Based on values in: Toward an understanding of fluency:</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>        <span class="c1"># A microanalysis of nonnative speaker conversations (Riggenbach)</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>        <span class="c1"># – Micropause (silence of .2s or less)</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>        <span class="c1"># – Hesitation (silence of .3 to .4s)</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>        <span class="c1"># – Unfilled pause (silence of .5s or more)</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a>        <span class="c1"># Intensity information</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>        <span class="n">intensity</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_intensity</span><span class="p">(</span><span class="n">minimum_pitch</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">time_step</span><span class="o">=</span><span class="mf">0.016</span><span class="p">,</span> <span class="n">subtract_mean</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>        <span class="c1"># These are the setting recommended by de jong - minimum pitch” set to 50 Hz,.</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>        <span class="c1"># With this parameter setting, we extract intensity smoothed over a time window of (3.2/minimum_pitch)=64 msec,</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>        <span class="c1">#  with 16-msec time steps explanation on these calculations are found at:</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a>        <span class="c1"># https://www.fon.hum.uva.nl/praat/manual/Sound__To_Intensity___.html</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>        <span class="n">min_intensity</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get minimum&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Parabolic&quot;</span><span class="p">)</span>  <span class="c1"># time range, Interpolation</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>        <span class="n">max_intensity</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get maximum&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Parabolic&quot;</span><span class="p">)</span>  <span class="c1"># time range, Interpolation</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>        <span class="c1"># Silince is detected by measuring whether the intensity is 25 dB below the 99% highest peak</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>        <span class="c1"># 99% is chosen to eliminate short loud bursts in intensity that may not have been speech</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>        <span class="c1"># get .99 quantile to get maximum (without influence of non-speech sound bursts)</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>        <span class="n">max_99_intensity</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get quantile&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">)</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>        <span class="c1"># estimate Intensity threshold</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>        <span class="n">silence_db_1</span> <span class="o">=</span> <span class="n">max_99_intensity</span> <span class="o">+</span> <span class="n">silence_db</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>        <span class="n">db_adjustment</span> <span class="o">=</span> <span class="n">max_intensity</span> <span class="o">-</span> <span class="n">max_99_intensity</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a>        <span class="n">silence_db_2</span> <span class="o">=</span> <span class="n">silence_db</span> <span class="o">-</span> <span class="n">db_adjustment</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a>        <span class="k">if</span> <span class="n">silence_db_1</span> <span class="o">&lt;</span> <span class="n">min_intensity</span><span class="p">:</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a>            <span class="n">silence_db_1</span> <span class="o">=</span> <span class="n">min_intensity</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a>        <span class="c1"># Create a TextGrid in which the silent and sounding intervals, store these intervals</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>        <span class="n">textgrid</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>            <span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;To TextGrid (silences)&quot;</span><span class="p">,</span> <span class="n">silence_db_2</span><span class="p">,</span> <span class="n">min_pause</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="s2">&quot;silent&quot;</span><span class="p">,</span> <span class="s2">&quot;sounding&quot;</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>        <span class="p">)</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>        <span class="c1"># Hyperparameters:</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a>        <span class="c1"># Silence threshold (dB),</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a>        <span class="c1"># Minimum silent interval (s) - minimum duration for an interval to be considered as silent</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>        <span class="c1"># Minimum sounding interval (s) - minimum duration for an interval to be not considered as silent</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>        <span class="c1"># Silent interval label</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a>        <span class="c1"># Sounding interval label</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a>        <span class="c1"># Loop through intervals and extract times of identified silent and sounding sections</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>        <span class="n">silencetier</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">textgrid</span><span class="p">,</span> <span class="s2">&quot;Extract tier&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>        <span class="n">silencetable</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">silencetier</span><span class="p">,</span> <span class="s2">&quot;Down to TableOfReal&quot;</span><span class="p">,</span> <span class="s2">&quot;sounding&quot;</span><span class="p">)</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>        <span class="n">npauses</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">silencetable</span><span class="p">,</span> <span class="s2">&quot;Get number of rows&quot;</span><span class="p">)</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a>        <span class="n">phonation_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>        <span class="k">for</span> <span class="n">ipause</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">npauses</span><span class="p">):</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>            <span class="n">pause</span> <span class="o">=</span> <span class="n">ipause</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>            <span class="n">beginsound</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">silencetable</span><span class="p">,</span> <span class="s2">&quot;Get value&quot;</span><span class="p">,</span> <span class="n">pause</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>            <span class="n">endsound</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">silencetable</span><span class="p">,</span> <span class="s2">&quot;Get value&quot;</span><span class="p">,</span> <span class="n">pause</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>            <span class="n">speakingdur</span> <span class="o">=</span> <span class="n">endsound</span> <span class="o">-</span> <span class="n">beginsound</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>            <span class="n">phonation_time</span> <span class="o">+=</span> <span class="n">speakingdur</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>            <span class="c1"># This is to remove the first (before first word) and last (after last word) silence from consideration</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>            <span class="k">if</span> <span class="n">pause</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a>                <span class="n">begin_speak</span> <span class="o">=</span> <span class="n">beginsound</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a>            <span class="k">if</span> <span class="n">pause</span> <span class="o">==</span> <span class="p">(</span><span class="n">npauses</span><span class="p">):</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>                <span class="n">end_speak</span> <span class="o">=</span> <span class="n">endsound</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>        <span class="c1"># Next block of code finds all possible peaks</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>        <span class="c1"># Convert intensity countor into sound representation</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>        <span class="n">intensity_matrix</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Down to Matrix&quot;</span><span class="p">)</span>  <span class="c1"># convert intensity to 2d representation</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>        <span class="c1"># Convert intensity countor into sound representation</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>        <span class="n">sound_from_intensity_matrix</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity_matrix</span><span class="p">,</span> <span class="s2">&quot;To Sound (slice)&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>        <span class="c1"># find positive extrema, maxima in sound_from_intensity_matrix, which correspond to steepest rises in Intensity;</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>        <span class="n">point_process</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>            <span class="n">sound_from_intensity_matrix</span><span class="p">,</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>            <span class="s2">&quot;To PointProcess (extrema)&quot;</span><span class="p">,</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a>            <span class="s2">&quot;Left&quot;</span><span class="p">,</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a>            <span class="s2">&quot;yes&quot;</span><span class="p">,</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a>            <span class="s2">&quot;no&quot;</span><span class="p">,</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>            <span class="s2">&quot;Sinc70&quot;</span><span class="p">,</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>        <span class="p">)</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>        <span class="c1"># estimate peak positions (all peaks)</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>        <span class="n">t</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>        <span class="n">numpeaks</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">point_process</span><span class="p">,</span> <span class="s2">&quot;Get number of points&quot;</span><span class="p">)</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numpeaks</span><span class="p">):</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>            <span class="n">t</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">point_process</span><span class="p">,</span> <span class="s2">&quot;Get time from index&quot;</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>        <span class="c1"># Find the time and values of all peaks</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>        <span class="c1"># fill array with intensity values</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>        <span class="n">timepeaks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>        <span class="n">peakcount</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>        <span class="n">intensities</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numpeaks</span><span class="p">):</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">sound_from_intensity_matrix</span><span class="p">,</span> <span class="s2">&quot;Get value at time&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;Cubic&quot;</span><span class="p">)</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="n">silence_db_1</span><span class="p">:</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>                <span class="n">peakcount</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>                <span class="n">intensities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>                <span class="n">timepeaks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>        <span class="c1"># Now find all valid peaks</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>        <span class="c1"># fill array with valid peaks: only intensity values if preceding</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>        <span class="c1"># dip in intensity is greater than min_dip</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a>        <span class="n">validpeakcount</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>        <span class="n">currenttime</span> <span class="o">=</span> <span class="n">timepeaks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>        <span class="n">currentint</span> <span class="o">=</span> <span class="n">intensities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>        <span class="n">validtime</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">peakcount</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>            <span class="n">following</span> <span class="o">=</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>            <span class="n">followingtime</span> <span class="o">=</span> <span class="n">timepeaks</span><span class="p">[</span><span class="n">following</span><span class="p">]</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>            <span class="n">dip</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>                <span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get minimum&quot;</span><span class="p">,</span> <span class="n">currenttime</span><span class="p">,</span> <span class="n">followingtime</span><span class="p">,</span> <span class="s2">&quot;None&quot;</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>            <span class="p">)</span>  <span class="c1"># Gets minimiun value between two time points, doesn&#39;t intepolote/filter</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>            <span class="n">diffint</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">currentint</span> <span class="o">-</span> <span class="n">dip</span><span class="p">)</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>            <span class="k">if</span> <span class="n">diffint</span> <span class="o">&gt;</span> <span class="n">min_dip</span><span class="p">:</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>                <span class="n">validpeakcount</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>                <span class="n">validtime</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timepeaks</span><span class="p">[</span><span class="n">p</span><span class="p">])</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>            <span class="c1"># Update current time and intensity values for next loop</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>            <span class="n">currenttime</span> <span class="o">=</span> <span class="n">timepeaks</span><span class="p">[</span><span class="n">following</span><span class="p">]</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>            <span class="n">currentint</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get value at time&quot;</span><span class="p">,</span> <span class="n">timepeaks</span><span class="p">[</span><span class="n">following</span><span class="p">],</span> <span class="s2">&quot;Cubic&quot;</span><span class="p">)</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>        <span class="c1"># Extract voicing information</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>        <span class="n">pitch</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_ac</span><span class="p">(</span><span class="mf">0.02</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mi">450</span><span class="p">)</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>        <span class="c1"># Praat page for hyperparamters https://www.fon.hum.uva.nl/praat/manual/Sound__To_Pitch__ac____.html</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>        <span class="c1"># From de Jong&#39;s 2009 paper - We extract the pitch contour, this time using a window size of 100 msec</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>        <span class="c1"># and 20-msec time steps, and exclude all peaks that are unvoiced</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>        <span class="c1"># Key Hyperparamter are different to praat recommended - can&#39;t find a reason for this</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>        <span class="c1"># time_step: Optional[Positive[float]] = None,  - set per De jong&#39;s recommendation</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a>        <span class="c1"># pitch_floor: Positive[float] = 75.0 set per dejong recommendation - 3/30 gives 100ms</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>        <span class="c1"># max_number_of_candidates: Positive[int] = 15 (can&#39;t find a reason for this value being lower)</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>        <span class="c1"># very_accurate: bool = False,</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>        <span class="c1"># silence_threshold: float = 0.03,</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>        <span class="c1"># voicing_threshold: float = 0.45, (can&#39;t find a reason for this value being different)</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>        <span class="c1"># octave_cost: float = 0.01,</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a>        <span class="c1"># octave_jump_cost: float = 0.35,</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>        <span class="c1"># voiced_unvoiced_cost: float = 0.14, (can&#39;t find a reason for this value being different)</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>        <span class="c1"># pitch_ceiling: Positive[float] = 600.0 (can&#39;t find a reason for this value being lower, might change to value</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>        <span class="c1"># from pitch_value function)</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>        <span class="c1"># Loop through valid peaks, count ones that are voiced (i.e., have valid pitch value at the same time)</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>        <span class="n">number_syllables</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>        <span class="k">for</span> <span class="n">time</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">validpeakcount</span><span class="p">):</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>            <span class="n">querytime</span> <span class="o">=</span> <span class="n">validtime</span><span class="p">[</span><span class="n">time</span><span class="p">]</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>            <span class="n">whichinterval</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">textgrid</span><span class="p">,</span> <span class="s2">&quot;Get interval at time&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">querytime</span><span class="p">)</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>            <span class="n">whichlabel</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">textgrid</span><span class="p">,</span> <span class="s2">&quot;Get label of interval&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">whichinterval</span><span class="p">)</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">pitch</span><span class="o">.</span><span class="n">get_value_at_time</span><span class="p">(</span><span class="n">querytime</span><span class="p">)</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>                <span class="k">if</span> <span class="n">whichlabel</span> <span class="o">==</span> <span class="s2">&quot;sounding&quot;</span><span class="p">:</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>                    <span class="n">number_syllables</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>        <span class="c1"># return results</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>        <span class="n">original_dur</span> <span class="o">=</span> <span class="n">end_speak</span> <span class="o">-</span> <span class="n">begin_speak</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>        <span class="n">speaking_rate</span> <span class="o">=</span> <span class="n">number_syllables</span> <span class="o">/</span> <span class="n">original_dur</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>        <span class="n">articulation_rate</span> <span class="o">=</span> <span class="n">number_syllables</span> <span class="o">/</span> <span class="n">phonation_time</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>        <span class="n">phonation_ratio</span> <span class="o">=</span> <span class="n">phonation_time</span> <span class="o">/</span> <span class="n">original_dur</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>        <span class="n">number_pauses</span> <span class="o">=</span> <span class="n">npauses</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>        <span class="n">pause_time</span> <span class="o">=</span> <span class="n">original_dur</span> <span class="o">-</span> <span class="n">phonation_time</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>        <span class="n">pause_rate</span> <span class="o">=</span> <span class="n">number_pauses</span> <span class="o">/</span> <span class="n">original_dur</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>        <span class="n">mean_pause_dur</span> <span class="o">=</span> <span class="n">pause_time</span> <span class="o">/</span> <span class="n">number_pauses</span> <span class="k">if</span> <span class="n">number_pauses</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">0.0</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>            <span class="s2">&quot;speaking_rate&quot;</span><span class="p">:</span> <span class="n">speaking_rate</span><span class="p">,</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>            <span class="s2">&quot;articulation_rate&quot;</span><span class="p">:</span> <span class="n">articulation_rate</span><span class="p">,</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>            <span class="s2">&quot;phonation_ratio&quot;</span><span class="p">:</span> <span class="n">phonation_ratio</span><span class="p">,</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>            <span class="s2">&quot;pause_rate&quot;</span><span class="p">:</span> <span class="n">pause_rate</span><span class="p">,</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>            <span class="s2">&quot;mean_pause_dur&quot;</span><span class="p">:</span> <span class="n">mean_pause_dur</span><span class="p">,</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>        <span class="p">}</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>            <span class="s2">&quot;speaking_rate&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>            <span class="s2">&quot;articulation_rate&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>            <span class="s2">&quot;phonation_ratio&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>            <span class="s2">&quot;pause_rate&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>            <span class="s2">&quot;mean_pause_dur&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>        <span class="p">}</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a><span class="k">def</span> <span class="nf">extract_pitch_values</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Estimate Pitch Range.</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a><span class="sd">    Calculates the mean pitch using a wide range and uses this to shorten the range for future pitch extraction</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a><span class="sd">    algorithms.</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a><span class="sd">    Args:</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a><span class="sd">    Returns:</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a><span class="sd">            - pitch_floor (float): The lowest pitch value to use in future pitch extraction algorithms.</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a><span class="sd">            - pitch_ceiling (float): The highest pitch value to use in future pitch extraction algorithms.</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a><span class="sd">    Notes:</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a><span class="sd">        Values are taken from: [Standardization of pitch-range settings in voice acoustic analysis](https://doi.org/10.3758/BRM.41.2.318)</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a><span class="sd">        The problem observed with doing a really broad pitch search was the occasional error if F1 was low.</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a><span class="sd">        So crude outlier detection is used to help with this.</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a><span class="sd">        Important: These values are used within other functions, they are not outputs of the full code.</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a><span class="sd">        Different pitch extraction methods in Praat:</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a><span class="sd">        - Cross-correlation (Praat default) vs auto-correlation pitch extraction:</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a><span class="sd">        both are used in different functions below.</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a><span class="sd">        - Cross-correlation is better than auto-correlation at finding period-level variation,</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a><span class="sd">        such as jitter and shimmer, whereas auto-correlation is better at finding intended intonation contours.</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a><span class="sd">        - [Discussion on this on a Praat Forum](https://groups.io/g/Praat-Users-List/topic/pitch_detection_ac_vs_cc/78829266?p=,,,20,0,0,0::recentpostdate/sticky,,,20,2,20,78829266,previd=1612369050729515119,nextid=1605568402827788039&amp;previd=1612369050729515119&amp;nextid=1605568402827788039)</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a><span class="sd">    Examples:</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a><span class="sd">        ```python</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a><span class="sd">        &gt;&gt;&gt; pitch_values(snd)</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a><span class="sd">        {&#39;pitch_floor&#39;: 60, &#39;pitch_ceiling&#39;: 250}</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a><span class="sd">        ```</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>        <span class="n">pitch_wide</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_ac</span><span class="p">(</span><span class="n">time_step</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">pitch_floor</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">pitch_ceiling</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>        <span class="c1"># Other than values above, I&#39;m using default hyperparamters</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>        <span class="c1"># Details: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Pitch__ac____.html</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>        <span class="c1"># remove outliers from wide pitch search</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>        <span class="n">pitch_values</span> <span class="o">=</span> <span class="n">pitch_wide</span><span class="o">.</span><span class="n">selected_array</span><span class="p">[</span><span class="s2">&quot;frequency&quot;</span><span class="p">]</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>        <span class="n">pitch_values</span> <span class="o">=</span> <span class="n">pitch_values</span><span class="p">[</span><span class="n">pitch_values</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a>        <span class="n">pitch_values_Z</span> <span class="o">=</span> <span class="p">(</span><span class="n">pitch_values</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">pitch_values</span><span class="p">))</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">pitch_values</span><span class="p">)</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>        <span class="n">pitch_values_filtered</span> <span class="o">=</span> <span class="n">pitch_values</span><span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">pitch_values_Z</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">]</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>        <span class="n">mean_pitch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">pitch_values_filtered</span><span class="p">)</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>        <span class="c1"># Here there is an interesting alternative solution to discuss: https://praatscripting.lingphon.net/conditionals-1.html</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>        <span class="k">if</span> <span class="n">mean_pitch</span> <span class="o">&lt;</span> <span class="mi">170</span><span class="p">:</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a>            <span class="c1"># &#39;male&#39; settings</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>            <span class="n">pitch_floor</span> <span class="o">=</span> <span class="mf">60.0</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>            <span class="n">pitch_ceiling</span> <span class="o">=</span> <span class="mf">250.0</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>            <span class="c1"># &#39;female&#39; and &#39;child&#39; settings</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>            <span class="n">pitch_floor</span> <span class="o">=</span> <span class="mf">100.0</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>            <span class="n">pitch_ceiling</span> <span class="o">=</span> <span class="mf">500.0</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;pitch_floor&quot;</span><span class="p">:</span> <span class="n">pitch_floor</span><span class="p">,</span> <span class="s2">&quot;pitch_ceiling&quot;</span><span class="p">:</span> <span class="n">pitch_ceiling</span><span class="p">}</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;pitch_floor&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;pitch_ceiling&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a><span class="k">def</span> <span class="nf">extract_pitch_descriptors</span><span class="p">(</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>    <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>    <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>    <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.005</span><span class="p">,</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>    <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract Pitch Features.</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a><span class="sd">    Function to extract key pitch features from a given sound object.</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a><span class="sd">    This function uses the pitch_ac method as autocorrelation is better at finding intended intonation contours.</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a><span class="sd">    Args:</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a><span class="sd">        ceiling (float): Maximum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new pitch value, typically set to 5 ms.</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">            Defaults to 0.005.</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a><span class="sd">        unit (str, optional): The unit in which the pitch is returned. Defaults to &quot;Hertz&quot;.</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a><span class="sd">            Could be &quot;semitones&quot;.</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a><span class="sd">    Returns:</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a><span class="sd">            - mean_f0_{unit} (float): Mean pitch in {unit}.</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a><span class="sd">            - stdev_f0_{unit} (float): Standard deviation in {unit}.</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a><span class="sd">    Notes:</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a><span class="sd">        - Uses pitch_ac as autocorrelation is better at finding intended intonation contours.</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a><span class="sd">        - stdev_f0_semitone is used in DOI: 10.1080/02699200400008353, which used this as a marker for dysphonia.</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a><span class="sd">    Examples:</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a><span class="sd">        ```python</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a><span class="sd">        &gt;&gt;&gt; extract_pitch_descriptors(snd, 75, 500, 0.01, &quot;Hertz&quot;)</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a><span class="sd">        {&#39;mean_f0_hertz&#39;: 220.5, &#39;stdev_f0_hertz&#39;: 2.5}</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a><span class="sd">        ```</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>        <span class="c1"># Extract pitch object</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>        <span class="n">pitch</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_ac</span><span class="p">(</span><span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">pitch_floor</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">pitch_ceiling</span><span class="o">=</span><span class="n">ceiling</span><span class="p">)</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>        <span class="c1"># Other than values above, I&#39;m using default hyperparameters</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>        <span class="c1"># Details: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Pitch__ac____.html</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>        <span class="c1"># Extract mean, median, and standard deviation</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>        <span class="n">mean_f0</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="s2">&quot;Get mean&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span>  <span class="c1"># time range, units</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>        <span class="n">stdev_f0</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="s2">&quot;Get standard deviation&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>        <span class="c1"># Return results</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>        <span class="k">return</span> <span class="p">{</span><span class="sa">f</span><span class="s2">&quot;mean_f0_</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">mean_f0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;stdev_f0_</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">stdev_f0</span><span class="p">}</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>        <span class="k">return</span> <span class="p">{</span><span class="sa">f</span><span class="s2">&quot;mean_f0_</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;stdev_f0_</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a><span class="k">def</span> <span class="nf">extract_intensity_descriptors</span><span class="p">(</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract Intensity Features.</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a><span class="sd">    Function to extract key intensity information from a given sound object.</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a><span class="sd">    This function is based on default Praat code adapted to work with Parselmouth.</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a><span class="sd">    Args:</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new intensity value, typically set to 5 ms.</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a><span class="sd">    Returns:</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a><span class="sd">            - mean_db (float): Mean intensity in dB.</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a><span class="sd">            - std_db (float): Standard deviation in dB.</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a><span class="sd">            - range_db_ratio (float): Intensity range, expressed as a ratio in dB.</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a><span class="sd">    Examples:</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a><span class="sd">        ```python</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a><span class="sd">        &gt;&gt;&gt; extract_intensity_descriptors(snd, 75, 0.01)</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a><span class="sd">        {&#39;mean_db&#39;: 70.5, &#39;std_db&#39;: 0.5, &#39;range_db_ratio&#39;: 2.5}</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a><span class="sd">        ```</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a><span class="sd">    Notes:</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a><span class="sd">        - Hyperparameters: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Intensity___.html</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a><span class="sd">        - For notes on extracting mean settings: https://www.fon.hum.uva.nl/praat/manual/Intro_6_2__Configuring_the_intensity_contour.html</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>        <span class="c1"># Extract intensity object</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>        <span class="n">intensity</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_intensity</span><span class="p">(</span><span class="n">minimum_pitch</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">subtract_mean</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>        <span class="c1"># Hyperparameters: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Intensity___.html</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>        <span class="c1"># Extract descriptors</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>        <span class="n">mean_db</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>            <span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get mean&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;energy&quot;</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>        <span class="p">)</span>  <span class="c1"># get mean - time range, time range, averaging method</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>        <span class="n">std_db</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get standard deviation&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>        <span class="n">min_dB</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get minimum&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;parabolic&quot;</span><span class="p">)</span>  <span class="c1"># time range, Interpolation</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>        <span class="n">max_dB</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get maximum&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;parabolic&quot;</span><span class="p">)</span>  <span class="c1"># time range, Interpolation</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>        <span class="n">range_db_ratio</span> <span class="o">=</span> <span class="n">max_dB</span> <span class="o">/</span> <span class="n">min_dB</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>        <span class="c1"># Return results</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;mean_db&quot;</span><span class="p">:</span> <span class="n">mean_db</span><span class="p">,</span> <span class="s2">&quot;std_db&quot;</span><span class="p">:</span> <span class="n">std_db</span><span class="p">,</span> <span class="s2">&quot;range_db_ratio&quot;</span><span class="p">:</span> <span class="n">range_db_ratio</span><span class="p">}</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;mean_db&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;std_db&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;range_db_ratio&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a><span class="k">def</span> <span class="nf">extract_harmonicity_descriptors</span><span class="p">(</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Voice Quality - HNR.</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a><span class="sd">    Function to calculate the Harmonic to Noise Ratio (HNR) in dB from a given sound object.</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a><span class="sd">    This function uses the CC method as recommended by Praat.</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a><span class="sd">    Args:</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new pitch value, typically set to 5 ms.</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a><span class="sd">    Returns:</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a><span class="sd">        dict: A dictionary containing the following key:</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a><span class="sd">            - hnr_db_mean (float): Mean Harmonic to Noise Ratio in dB.</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a><span class="sd">            - hnr_db_std_dev (float): Harmonic to Noise Ratio standard deviation in dB.</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a><span class="sd">    Examples:</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a><span class="sd">        ```python</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a><span class="sd">        &gt;&gt;&gt; extract_harmonicity_descriptors(snd, 75, 0.01)</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a><span class="sd">        {&#39;hnr_db_mean&#39;: 15.3, &#39;hnr_db_std_dev&#39;: 0.5}</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a><span class="sd">        ```</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a><span class="sd">    Notes:</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a><span class="sd">        - Praat recommends using the CC method: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Harmonicity__cc____.html</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a><span class="sd">        - Default settings can be found at: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Harmonicity__ac____.html</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>        <span class="c1"># Extract HNR information</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>        <span class="n">harmonicity</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_harmonicity_cc</span><span class="p">(</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>            <span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">minimum_pitch</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">silence_threshold</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">periods_per_window</span><span class="o">=</span><span class="mf">4.5</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>        <span class="p">)</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>        <span class="c1"># Praat recommends using the CC method here: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Harmonicity__cc____.html</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>        <span class="n">hnr_db_mean</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">harmonicity</span><span class="p">,</span> <span class="s2">&quot;Get mean&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>        <span class="n">hnr_db_std_dev</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">harmonicity</span><span class="p">,</span> <span class="s2">&quot;Get standard deviation&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;hnr_db_mean&quot;</span><span class="p">:</span> <span class="n">hnr_db_mean</span><span class="p">,</span> <span class="s2">&quot;hnr_db_std_dev&quot;</span><span class="p">:</span> <span class="n">hnr_db_std_dev</span><span class="p">}</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;hnr_db_mean&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;hnr_db_std_dev&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a><span class="k">def</span> <span class="nf">extract_slope_tilt</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Voice Quality - Spectral Slope/Tilt.</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a><span class="sd">    Function to extract spectral slope and tilt from a given sound object. This function is based on default</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a><span class="sd">    Praat code adapted to work with Parselmouth.</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a><span class="sd">    Args:</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a><span class="sd">        ceiling (float): Maximum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a><span class="sd">    Returns:</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a><span class="sd">            - spectral_slope (float): Mean spectral slope.</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a><span class="sd">            - spectral_tilt (float): Mean spectral tilt.</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a><span class="sd">    Examples:</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a><span class="sd">        ```python</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a><span class="sd">        &gt;&gt;&gt; extract_slope_tilt(snd, 75, 500)</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a><span class="sd">        {&#39;spectral_slope&#39;: -0.8, &#39;spectral_tilt&#39;: -2.5}</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a><span class="sd">        ```</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a><span class="sd">    Notes:</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a><span class="sd">        - Spectral Slope: Ratio of energy in a spectra between 10-1000Hz over 1000-4000Hz.</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a><span class="sd">        - Spectral Tilt: Linear slope of energy distribution between 100-5000Hz.</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a><span class="sd">        - Using pitch-corrected LTAS to remove the effect of F0 and harmonics on the slope calculation:</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a><span class="sd">        https://www.fon.hum.uva.nl/paul/papers/BoersmaKovacic2006.pdf</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>        <span class="n">ltas_rep</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>            <span class="n">snd</span><span class="p">,</span> <span class="s2">&quot;To Ltas (pitch-corrected)...&quot;</span><span class="p">,</span> <span class="n">floor</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">1.3</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>        <span class="p">)</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>        <span class="c1"># Hyperparameters: Min Pitch (Hz), Max Pitch (Hz), Maximum Frequency (Hz), Bandwidth (Hz), Shortest Period (s),</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>        <span class="c1"># Longest Period (s), Maximum period factor</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a>        <span class="n">spectral_slope</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">ltas_rep</span><span class="p">,</span> <span class="s2">&quot;Get slope&quot;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="s2">&quot;dB&quot;</span><span class="p">)</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>        <span class="c1"># Hyperparameters: f1min, f1max, f2min, f2max, averagingUnits</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>        <span class="n">spectral_tilt_Report</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">ltas_rep</span><span class="p">,</span> <span class="s2">&quot;Report spectral tilt&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">,</span> <span class="s2">&quot;Robust&quot;</span><span class="p">)</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>        <span class="c1"># Hyperparameters: minimumFrequency, maximumFrequency, Frequency Scale (linear or logarithmic),</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>        <span class="c1"># Fit method (least squares or robust)</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>        <span class="n">srt_st</span> <span class="o">=</span> <span class="n">spectral_tilt_Report</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;Slope: &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Slope: &quot;</span><span class="p">)</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a>        <span class="n">end_st</span> <span class="o">=</span> <span class="n">spectral_tilt_Report</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">srt_st</span><span class="p">)</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>        <span class="n">spectral_tilt</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">spectral_tilt_Report</span><span class="p">[</span><span class="n">srt_st</span><span class="p">:</span><span class="n">end_st</span><span class="p">])</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a>        <span class="c1"># Return results</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;spectral_slope&quot;</span><span class="p">:</span> <span class="n">spectral_slope</span><span class="p">,</span> <span class="s2">&quot;spectral_tilt&quot;</span><span class="p">:</span> <span class="n">spectral_tilt</span><span class="p">}</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;spectral_slope&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;spectral_tilt&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a><span class="k">def</span> <span class="nf">extract_cpp_descriptors</span><span class="p">(</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract Cepstral Peak Prominence (CPP).</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a><span class="sd">    Function to calculate the Cepstral Peak Prominence (CPP) from a given sound object.</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a><span class="sd">    This function is adapted from default Praat code to work with Parselmouth.</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a><span class="sd">    Args:</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a><span class="sd">        ceiling (float): Maximum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new pitch value, typically set to 5 ms.</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a><span class="sd">    Returns:</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a><span class="sd">        dict: A dictionary containing the following key:</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a><span class="sd">            - mean_cpp (float): Mean Cepstral Peak Prominence.</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a><span class="sd">            - std_dev_cpp (float): Standard deviation in Cepstral Peak Prominence.</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a><span class="sd">    Examples:</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a><span class="sd">        ```python</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a><span class="sd">        &gt;&gt;&gt; extract_CPP(snd, 75, 500, 0.01)</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a><span class="sd">        {&#39;mean_cpp&#39;: 20.3, &#39;std_dev_cpp&#39;: 0.5}</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a><span class="sd">        ```</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a><span class="sd">    Notes:</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a><span class="sd">        - Cepstral Peak Prominence: The height (i.e., “prominence”) of that peak relative to a regression line</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a><span class="sd">        through the overall cepstrum.</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a><span class="sd">        - Adapted from: https://osf.io/ctwgr and http://phonetics.linguistics.ucla.edu/facilities/acoustic/voiced_extract_auto.txt</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>        <span class="c1"># Extract pitch object for voiced checking</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>        <span class="n">pitch</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_ac</span><span class="p">(</span><span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">pitch_floor</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">pitch_ceiling</span><span class="o">=</span><span class="n">ceiling</span><span class="p">,</span> <span class="n">voicing_threshold</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>        <span class="n">pulses</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="n">snd</span><span class="p">,</span> <span class="n">pitch</span><span class="p">],</span> <span class="s2">&quot;To PointProcess (cc)&quot;</span><span class="p">)</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>        <span class="n">textgrid</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">pulses</span><span class="p">,</span> <span class="s2">&quot;To TextGrid (vuv)&quot;</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>        <span class="n">vuv_table</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">textgrid</span><span class="p">,</span> <span class="s2">&quot;Down to Table&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">)</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>        <span class="c1"># Variables - include line number, Time decimals, include tier names, include empty intervals</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>        <span class="n">cpp_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>        <span class="n">n_intervals</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">vuv_table</span><span class="p">,</span> <span class="s2">&quot;Get number of rows&quot;</span><span class="p">)</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_intervals</span><span class="p">):</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>            <span class="n">label</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">vuv_table</span><span class="p">,</span> <span class="s2">&quot;Get value&quot;</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">)</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>            <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="s2">&quot;V&quot;</span><span class="p">:</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>                <span class="n">tmin</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">vuv_table</span><span class="p">,</span> <span class="s2">&quot;Get value&quot;</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;tmin&quot;</span><span class="p">)</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>                <span class="n">tmax</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">vuv_table</span><span class="p">,</span> <span class="s2">&quot;Get value&quot;</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;tmax&quot;</span><span class="p">)</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>                <span class="n">snd_segment</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">extract_part</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">tmin</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">tmax</span><span class="p">))</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>                <span class="n">PowerCepstrogram</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd_segment</span><span class="p">,</span> <span class="s2">&quot;To PowerCepstrogram&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>                <span class="c1"># PowerCepstrogram (60-Hz pitch floor, 2-ms time step, 5-kHz maximum frequency,</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>                <span class="c1"># and pre-emphasis from 50 Hz)</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>                    <span class="n">CPP_Value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>                        <span class="n">PowerCepstrogram</span><span class="p">,</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>                        <span class="s2">&quot;Get CPPS...&quot;</span><span class="p">,</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>                        <span class="s2">&quot;no&quot;</span><span class="p">,</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>                        <span class="mf">0.01</span><span class="p">,</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>                        <span class="mf">0.001</span><span class="p">,</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>                        <span class="mi">60</span><span class="p">,</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>                        <span class="mi">330</span><span class="p">,</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>                        <span class="mf">0.05</span><span class="p">,</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>                        <span class="s2">&quot;parabolic&quot;</span><span class="p">,</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>                        <span class="mf">0.001</span><span class="p">,</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>                        <span class="mi">0</span><span class="p">,</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>                        <span class="s2">&quot;Straight&quot;</span><span class="p">,</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>                        <span class="s2">&quot;Robust&quot;</span><span class="p">,</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>                    <span class="p">)</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>                    <span class="c1"># Subtract tilt before smoothing = “no”; time averaging window = 0.01 s;</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>                    <span class="c1"># quefrency averaging window = 0.001 s;</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>                    <span class="c1"># Peak search pitch range = 60–330 Hz; tolerance = 0.05; interpolation = “Parabolic”;</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>                    <span class="c1"># tilt line frequency range = 0.001–0 s (no upper bound);</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>                    <span class="c1"># Line type = “Straight”; fit method = “Robust.”</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>                    <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>                    <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>                        <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>                    <span class="n">CPP_Value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">CPP_Value</span><span class="p">)</span> <span class="ow">and</span> <span class="n">CPP_Value</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>                    <span class="n">cpp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CPP_Value</span><span class="p">)</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>        <span class="c1"># Calculate Final Features</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>        <span class="k">if</span> <span class="n">cpp_list</span><span class="p">:</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>            <span class="n">CPP_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">cpp_list</span><span class="p">)</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>            <span class="n">CPP_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">CPP_array</span><span class="p">)</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>            <span class="n">CPP_std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">CPP_array</span><span class="p">)</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>            <span class="n">CPP_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>            <span class="n">CPP_std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>        <span class="c1"># Return Result</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;mean_cpp&quot;</span><span class="p">:</span> <span class="n">CPP_mean</span><span class="p">,</span> <span class="s2">&quot;std_dev_cpp&quot;</span><span class="p">:</span> <span class="n">CPP_std</span><span class="p">}</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;mean_cpp&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;std_dev_cpp&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a><span class="k">def</span> <span class="nf">measure_f1f2_formants_bandwidths</span><span class="p">(</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract Formant Frequency Features.</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a><span class="sd">    Function to extract formant frequency features from a given sound object. This function is adapted from default</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a><span class="sd">    Praat code to work with Parselmouth.</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a><span class="sd">    Args:</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a><span class="sd">        ceiling (float): Maximum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new pitch value, typically set to 5 ms.</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a><span class="sd">    Returns:</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a><span class="sd">            - f1_mean (float): Mean F1 location.</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a><span class="sd">            - f1_std (float): Standard deviation of F1 location.</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a><span class="sd">            - b1_mean (float): Mean F1 bandwidth.</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a><span class="sd">            - b1_std (float): Standard deviation of F1 bandwidth.</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a><span class="sd">            - f2_mean (float): Mean F2 location.</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a><span class="sd">            - f2_std (float): Standard deviation of F2 location.</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a><span class="sd">            - b2_mean (float): Mean F2 bandwidth.</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a><span class="sd">            - b2_std (float): Standard deviation of F2 bandwidth.</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a><span class="sd">    Examples:</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a><span class="sd">        ```python</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a><span class="sd">        &gt;&gt;&gt; measureFormants(snd, 75, 500, 0.01)</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a><span class="sd">        {&#39;f1_mean&#39;: 500.0, &#39;f1_std&#39;: 50.0, &#39;b1_mean&#39;: 80.0, &#39;b1_std&#39;: 10.0, &#39;f2_mean&#39;: 1500.0,</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a><span class="sd">        &#39;f2_std&#39;: 100.0, &#39;b2_mean&#39;: 120.0, &#39;b2_std&#39;: 20.0}</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a><span class="sd">        ```</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a><span class="sd">    Notes:</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a><span class="sd">        - Formants are the resonances of the vocal tract, determined by tongue placement and vocal tract shape.</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a><span class="sd">        - Mean F1 typically varies between 300 to 750 Hz, while mean F2 typically varies between 900 to 2300 Hz.</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a><span class="sd">        - Formant bandwidth is measured by taking the width of the band forming 3 dB down from the formant peak.</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a><span class="sd">        - Formant extraction occurs per pitch period (pulses), meaning that the analysis identifies the points in the</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a><span class="sd">          sound where the vocal folds come together, helping to align the formant measurements precisely with the</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a><span class="sd">          pitch periods.</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a><span class="sd">        - Adapted from code at this [link](https://osf.io/6dwr3/).</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>        <span class="c1"># Extract formants</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>        <span class="n">formants</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="s2">&quot;To Formant (burg)&quot;</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mf">0.025</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>        <span class="c1"># Key Hyperparameters: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Formant__burg____.html</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>        <span class="c1"># Extract pitch using CC method</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>        <span class="n">pitch</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_cc</span><span class="p">(</span><span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">pitch_floor</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">pitch_ceiling</span><span class="o">=</span><span class="n">ceiling</span><span class="p">)</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>        <span class="n">pulses</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="n">snd</span><span class="p">,</span> <span class="n">pitch</span><span class="p">],</span> <span class="s2">&quot;To PointProcess (cc)&quot;</span><span class="p">)</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>        <span class="n">F1_list</span><span class="p">,</span> <span class="n">F2_list</span><span class="p">,</span> <span class="n">B1_list</span><span class="p">,</span> <span class="n">B2_list</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>        <span class="n">numPoints</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">pulses</span><span class="p">,</span> <span class="s2">&quot;Get number of points&quot;</span><span class="p">)</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numPoints</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>            <span class="n">t</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">pulses</span><span class="p">,</span> <span class="s2">&quot;Get time from index&quot;</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>            <span class="n">F1_value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">formants</span><span class="p">,</span> <span class="s2">&quot;Get value at time&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">)</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">F1_value</span><span class="p">):</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>                <span class="n">F1_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">F1_value</span><span class="p">)</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>            <span class="n">B1_value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">formants</span><span class="p">,</span> <span class="s2">&quot;Get bandwidth at time&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">)</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">B1_value</span><span class="p">):</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>                <span class="n">B1_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">B1_value</span><span class="p">)</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>            <span class="n">F2_value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">formants</span><span class="p">,</span> <span class="s2">&quot;Get value at time&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">)</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">F2_value</span><span class="p">):</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>                <span class="n">F2_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">F2_value</span><span class="p">)</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>            <span class="n">B2_value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">formants</span><span class="p">,</span> <span class="s2">&quot;Get bandwidth at time&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">)</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">B2_value</span><span class="p">):</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>                <span class="n">B2_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">B2_value</span><span class="p">)</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>        <span class="n">f1_mean</span><span class="p">,</span> <span class="n">f1_std</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">F1_list</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">F1_list</span><span class="p">))</span> <span class="k">if</span> <span class="n">F1_list</span> <span class="k">else</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>        <span class="n">b1_mean</span><span class="p">,</span> <span class="n">b1_std</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">B1_list</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">B1_list</span><span class="p">))</span> <span class="k">if</span> <span class="n">B1_list</span> <span class="k">else</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>        <span class="n">f2_mean</span><span class="p">,</span> <span class="n">f2_std</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">F2_list</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">F2_list</span><span class="p">))</span> <span class="k">if</span> <span class="n">F2_list</span> <span class="k">else</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>        <span class="n">b2_mean</span><span class="p">,</span> <span class="n">b2_std</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">B2_list</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">B2_list</span><span class="p">))</span> <span class="k">if</span> <span class="n">B2_list</span> <span class="k">else</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>            <span class="s2">&quot;f1_mean&quot;</span><span class="p">:</span> <span class="n">f1_mean</span><span class="p">,</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>            <span class="s2">&quot;f1_std&quot;</span><span class="p">:</span> <span class="n">f1_std</span><span class="p">,</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>            <span class="s2">&quot;b1_mean&quot;</span><span class="p">:</span> <span class="n">b1_mean</span><span class="p">,</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>            <span class="s2">&quot;b1_std&quot;</span><span class="p">:</span> <span class="n">b1_std</span><span class="p">,</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>            <span class="s2">&quot;f2_mean&quot;</span><span class="p">:</span> <span class="n">f2_mean</span><span class="p">,</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>            <span class="s2">&quot;f2_std&quot;</span><span class="p">:</span> <span class="n">f2_std</span><span class="p">,</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>            <span class="s2">&quot;b2_mean&quot;</span><span class="p">:</span> <span class="n">b2_mean</span><span class="p">,</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>            <span class="s2">&quot;b2_std&quot;</span><span class="p">:</span> <span class="n">b2_std</span><span class="p">,</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>        <span class="p">}</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>            <span class="s2">&quot;f1_mean&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>            <span class="s2">&quot;f1_std&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>            <span class="s2">&quot;b1_mean&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>            <span class="s2">&quot;b1_std&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>            <span class="s2">&quot;f2_mean&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>            <span class="s2">&quot;f2_std&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>            <span class="s2">&quot;b2_mean&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>            <span class="s2">&quot;b2_std&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>        <span class="p">}</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a><span class="k">def</span> <span class="nf">extract_spectral_moments</span><span class="p">(</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">window_size</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract Spectral Moments.</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a><span class="sd">    Function to extract spectral moments from a given sound object. This function is adapted from default</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a><span class="sd">    Praat code to work with Parselmouth.</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a><span class="sd">    Args:</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a><span class="sd">        ceiling (float): Maximum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a><span class="sd">        window_size (float): Time frame over which the spectra is calculated, typically set to 25 ms.</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new pitch value, typically set to 5 ms.</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a><span class="sd">    Returns:</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a><span class="sd">            - spectral_gravity (float): Mean spectral gravity.</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a><span class="sd">            - spectral_std_dev (float): Mean spectral standard deviation.</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a><span class="sd">            - spectral_skewness (float): Mean spectral skewness.</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a><span class="sd">            - spectral_kurtosis (float): Mean spectral kurtosis.</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a><span class="sd">    Examples:</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a><span class="sd">        ```python</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a><span class="sd">        &gt;&gt;&gt; extract_spectral_moments(snd, 75, 500, 0.025, 0.01)</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a><span class="sd">        {&#39;spectral_gravity&#39;: 5000.0, &#39;spectral_std_dev&#39;: 150.0, &#39;spectral_skewness&#39;: -0.5, &#39;spectral_kurtosis&#39;: 3.0}</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a><span class="sd">        ```</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a><span class="sd">    Notes:</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a><span class="sd">        - Spectral Gravity: Measure for how high the frequencies in a spectrum are on average over the entire frequency</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a><span class="sd">        domain weighted by the power spectrum.</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a><span class="sd">        - Spectral Standard Deviation: Measure for how much the frequencies in a spectrum can deviate from the centre</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a><span class="sd">        of gravity.</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a><span class="sd">        - Spectral Skewness: Measure for how much the shape of the spectrum below the centre of gravity is different</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a><span class="sd">        from the shape above the mean frequency.</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a><span class="sd">        - Spectral Kurtosis: Measure for how much the shape of the spectrum around the centre of gravity is different</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a><span class="sd">          from a Gaussian shape.</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a><span class="sd">        - Details: https://www.fon.hum.uva.nl/praat/manual/Spectrum__Get_central_moment___.html</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>        <span class="c1"># Extract pitch object for voiced checking</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>        <span class="n">pitch</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_ac</span><span class="p">(</span><span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">pitch_floor</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">pitch_ceiling</span><span class="o">=</span><span class="n">ceiling</span><span class="p">)</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>        <span class="c1"># Calculate Spectrogram</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>        <span class="n">spectrogram</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_spectrogram</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="n">window_size</span><span class="p">,</span> <span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">)</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>        <span class="c1"># Using default settings other than window length and frame shift</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>        <span class="c1"># Details: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Spectrogram___.html</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>        <span class="n">Gravity_list</span><span class="p">,</span> <span class="n">STD_list</span><span class="p">,</span> <span class="n">Skew_list</span><span class="p">,</span> <span class="n">Kurt_list</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>        <span class="n">num_steps</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">spectrogram</span><span class="p">,</span> <span class="s2">&quot;Get number of frames&quot;</span><span class="p">)</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_steps</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>            <span class="n">t</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">spectrogram</span><span class="p">,</span> <span class="s2">&quot;Get time from frame number&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>            <span class="n">pitch_value</span> <span class="o">=</span> <span class="n">pitch</span><span class="o">.</span><span class="n">get_value_at_time</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">pitch_value</span><span class="p">):</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>                <span class="n">voiced_spectrum</span> <span class="o">=</span> <span class="n">spectrogram</span><span class="o">.</span><span class="n">to_spectrum_slice</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>                <span class="c1"># Details: https://www.fon.hum.uva.nl/praat/manual/Spectrogram__To_Spectrum__slice____.html</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>                <span class="n">Gravity_LLD</span> <span class="o">=</span> <span class="n">voiced_spectrum</span><span class="o">.</span><span class="n">get_centre_of_gravity</span><span class="p">(</span><span class="n">power</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">Gravity_LLD</span><span class="p">):</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>                    <span class="n">Gravity_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Gravity_LLD</span><span class="p">)</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>                <span class="n">STD_LLD</span> <span class="o">=</span> <span class="n">voiced_spectrum</span><span class="o">.</span><span class="n">get_standard_deviation</span><span class="p">(</span><span class="n">power</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">STD_LLD</span><span class="p">):</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>                    <span class="n">STD_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">STD_LLD</span><span class="p">)</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>                <span class="n">Skew_LLD</span> <span class="o">=</span> <span class="n">voiced_spectrum</span><span class="o">.</span><span class="n">get_skewness</span><span class="p">(</span><span class="n">power</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">Skew_LLD</span><span class="p">):</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>                    <span class="n">Skew_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Skew_LLD</span><span class="p">)</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>                <span class="n">Kurt_LLD</span> <span class="o">=</span> <span class="n">voiced_spectrum</span><span class="o">.</span><span class="n">get_kurtosis</span><span class="p">(</span><span class="n">power</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">Kurt_LLD</span><span class="p">):</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>                    <span class="n">Kurt_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Kurt_LLD</span><span class="p">)</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>        <span class="n">gravity_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">Gravity_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">Gravity_list</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>        <span class="n">std_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">STD_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">STD_list</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>        <span class="n">skew_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">Skew_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">Skew_list</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>        <span class="n">kurt_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">Kurt_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">Kurt_list</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>            <span class="s2">&quot;spectral_gravity&quot;</span><span class="p">:</span> <span class="n">gravity_mean</span><span class="p">,</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>            <span class="s2">&quot;spectral_std_dev&quot;</span><span class="p">:</span> <span class="n">std_mean</span><span class="p">,</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>            <span class="s2">&quot;spectral_skewness&quot;</span><span class="p">:</span> <span class="n">skew_mean</span><span class="p">,</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>            <span class="s2">&quot;spectral_kurtosis&quot;</span><span class="p">:</span> <span class="n">kurt_mean</span><span class="p">,</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>        <span class="p">}</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>            <span class="s2">&quot;spectral_gravity&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>            <span class="s2">&quot;spectral_std_dev&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>            <span class="s2">&quot;spectral_skewness&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>            <span class="s2">&quot;spectral_kurtosis&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>        <span class="p">}</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a><span class="c1">### More functions ###</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a><span class="k">def</span> <span class="nf">extract_audio_duration</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the duration of a given audio file or Audio object.</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a><span class="sd">    This function calculates the total duration of an audio file or audio object</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a><span class="sd">    by creating a Parselmouth `Sound` object and then calling a Praat method</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a><span class="sd">    to retrieve the duration of the audio in seconds.</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a><span class="sd">    Args:</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object,</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a><span class="sd">        a file path (Path), or an `Audio` object containing the audio waveform and</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a><span class="sd">        its corresponding sampling rate.</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a><span class="sd">    Returns:</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a><span class="sd">        Dict[str, float]: A dictionary containing:</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a><span class="sd">            - &quot;duration&quot; (float): The total duration of the audio in seconds.</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a><span class="sd">    Raises:</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a><span class="sd">        FileNotFoundError: If a provided file path does not exist.</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a><span class="sd">    Example:</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a><span class="sd">        ```python</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a><span class="sd">        &gt;&gt;&gt; snd = Audio(waveform=[...], sampling_rate=16000)</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a><span class="sd">        &gt;&gt;&gt; extract_audio_duration(snd)</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a><span class="sd">        {&#39;duration&#39;: 5.23}</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a><span class="sd">        ```</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>    <span class="c1"># Check if the input is a Path, in which case we load the audio from the file</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>        <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>        <span class="c1"># Get the total duration of the sound</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>        <span class="n">duration</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="s2">&quot;Get total duration&quot;</span><span class="p">)</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>        <span class="c1"># Return the duration in a dictionary</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="n">duration</span><span class="p">}</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a><span class="k">def</span> <span class="nf">extract_jitter</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the jitter descriptors for the given sound or audio file.</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a><span class="sd">    Args:</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object, a file path (Path),</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a><span class="sd">        or an `Audio` object containing the audio waveform and its corresponding sampling rate.</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a><span class="sd">        floor (float): Minimum fundamental frequency (F0) in Hz.</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a><span class="sd">        ceiling (float): Maximum fundamental frequency (F0) in Hz.</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a><span class="sd">    Returns:</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a><span class="sd">        Dict[str, float]: A dictionary containing various jitter measurements.</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>    <span class="k">def</span> <span class="nf">_to_point_process</span><span class="p">(</span><span class="n">sound</span><span class="p">:</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">f0min</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">f0max</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Data</span><span class="p">:</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>        <span class="k">return</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">sound</span><span class="p">,</span> <span class="s2">&quot;To PointProcess (periodic, cc)&quot;</span><span class="p">,</span> <span class="n">f0min</span><span class="p">,</span> <span class="n">f0max</span><span class="p">)</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>    <span class="k">def</span> <span class="nf">_extract_jitter</span><span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">point_process</span><span class="p">:</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>        <span class="k">return</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">point_process</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Get jitter (</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">)</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>    <span class="c1"># Check if the input is a Path or Audio, and convert to Parselmouth Sound if necessary</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a>        <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>        <span class="c1"># Convert the sound to a point process for jitter measurement</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>        <span class="n">point_process</span> <span class="o">=</span> <span class="n">_to_point_process</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">floor</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">)</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>        <span class="c1"># Extract jitter measures from the point process</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>            <span class="s2">&quot;local_jitter&quot;</span><span class="p">:</span> <span class="n">_extract_jitter</span><span class="p">(</span><span class="s2">&quot;local&quot;</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>            <span class="s2">&quot;localabsolute_jitter&quot;</span><span class="p">:</span> <span class="n">_extract_jitter</span><span class="p">(</span><span class="s2">&quot;local, absolute&quot;</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>            <span class="s2">&quot;rap_jitter&quot;</span><span class="p">:</span> <span class="n">_extract_jitter</span><span class="p">(</span><span class="s2">&quot;rap&quot;</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>            <span class="s2">&quot;ppq5_jitter&quot;</span><span class="p">:</span> <span class="n">_extract_jitter</span><span class="p">(</span><span class="s2">&quot;ppq5&quot;</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>            <span class="s2">&quot;ddp_jitter&quot;</span><span class="p">:</span> <span class="n">_extract_jitter</span><span class="p">(</span><span class="s2">&quot;ddp&quot;</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>        <span class="p">}</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>            <span class="s2">&quot;local_jitter&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>            <span class="s2">&quot;localabsolute_jitter&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>            <span class="s2">&quot;rap_jitter&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>            <span class="s2">&quot;ppq5_jitter&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>            <span class="s2">&quot;ddp_jitter&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>        <span class="p">}</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a><span class="k">def</span> <span class="nf">extract_shimmer</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the shimmer descriptors for the given sound or audio file.</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a><span class="sd">    Args:</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object, a file path (Path),</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a><span class="sd">        or an `Audio` object containing the audio waveform and its corresponding sampling rate.</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a><span class="sd">        floor (float): Minimum fundamental frequency (F0) in Hz.</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a><span class="sd">        ceiling (float): Maximum fundamental frequency (F0) in Hz.</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a><span class="sd">    Returns:</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a><span class="sd">        Dict[str, float]: A dictionary containing various shimmer measurements.</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>    <span class="k">def</span> <span class="nf">_to_point_process</span><span class="p">(</span><span class="n">sound</span><span class="p">:</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">f0min</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">f0max</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Data</span><span class="p">:</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>        <span class="k">return</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">sound</span><span class="p">,</span> <span class="s2">&quot;To PointProcess (periodic, cc)&quot;</span><span class="p">,</span> <span class="n">f0min</span><span class="p">,</span> <span class="n">f0max</span><span class="p">)</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>    <span class="k">def</span> <span class="nf">_extract_shimmer</span><span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sound</span><span class="p">:</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">point_process</span><span class="p">:</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>        <span class="k">return</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="n">sound</span><span class="p">,</span> <span class="n">point_process</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;Get shimmer (</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">)</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>    <span class="c1"># Check if the input is a Path or Audio, and convert to Parselmouth Sound if necessary</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>        <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>        <span class="c1"># Convert the sound to a point process for shimmer measurement</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>        <span class="n">point_process</span> <span class="o">=</span> <span class="n">_to_point_process</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">floor</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">)</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>        <span class="c1"># Extract shimmer measures from the sound and point process</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>            <span class="s2">&quot;local_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;local&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>            <span class="s2">&quot;localDB_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;local_dB&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>            <span class="s2">&quot;apq3_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;apq3&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>            <span class="s2">&quot;apq5_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;apq5&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>            <span class="s2">&quot;apq11_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;apq11&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>            <span class="s2">&quot;dda_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;dda&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>        <span class="p">}</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>            <span class="s2">&quot;local_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>            <span class="s2">&quot;localDB_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>            <span class="s2">&quot;apq3_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>            <span class="s2">&quot;apq5_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>            <span class="s2">&quot;apq11_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>            <span class="s2">&quot;dda_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>        <span class="p">}</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a><span class="c1">### Wrapper ###</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a><span class="k">def</span> <span class="nf">extract_praat_parselmouth_features_from_audios</span><span class="p">(</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>    <span class="n">audios</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Audio</span><span class="p">],</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>    <span class="n">time_step</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.005</span><span class="p">,</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>    <span class="n">window_length</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.025</span><span class="p">,</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>    <span class="n">pitch_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>    <span class="n">cache_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>    <span class="n">speech_rate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>    <span class="n">intensity_descriptors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>    <span class="n">harmonicity_descriptors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>    <span class="n">formants</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>    <span class="n">spectral_moments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>    <span class="n">pitch</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>    <span class="n">slope_tilt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>    <span class="n">cpp_descriptors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>    <span class="n">duration</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>    <span class="n">jitter</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>    <span class="n">shimmer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>    <span class="n">plugin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;serial&quot;</span><span class="p">,</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>    <span class="n">plugin_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract features from a list of Audio objects and return a JSON-like dictionary.</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a><span class="sd">    Args:</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a><span class="sd">        audios (list): List of Audio objects to extract features from.</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a><span class="sd">        pitch_unit (str): Unit for pitch measurements. Defaults to &quot;Hertz&quot;.</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a><span class="sd">        time_step (float): Time rate at which to extract features. Defaults to 0.005.</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a><span class="sd">        window_length (float): Window length in seconds for spectral features. Defaults to 0.025.</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a><span class="sd">        cache_dir (Optional[str]): Directory to use for caching by pydra. Defaults to None.</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a><span class="sd">        speech_rate (bool): Whether to extract speech rate. Defaults to True.</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a><span class="sd">        intensity_descriptors (bool): Whether to extract intensity descriptors. Defaults to True.</span>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a><span class="sd">        harmonicity_descriptors (bool): Whether to extract harmonic descriptors. Defaults to True.</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a><span class="sd">        formants (bool): Whether to extract formants. Defaults to True.</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a><span class="sd">        spectral_moments (bool): Whether to extract spectral moments. Defaults to True.</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a><span class="sd">        pitch (bool): Whether to extract pitch. Defaults to True.</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a><span class="sd">        slope_tilt (bool): Whether to extract slope and tilt. Defaults to True.</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a><span class="sd">        cpp_descriptors (bool): Whether to extract CPP descriptors. Defaults to True.</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a><span class="sd">        duration (bool): Whether to extract duration. Defaults to True.</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a><span class="sd">        jitter (bool): Whether to extract jitter. Defaults to True.</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a><span class="sd">        shimmer (bool): Whether to extract shimmer. Defaults to True.</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a><span class="sd">        plugin (str): Plugin to use for feature extraction. Defaults to &quot;serial&quot;.</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a><span class="sd">        plugin_args (Optional[Dict[str, Any]]): Arguments for the pydra plugin. Defaults to {}.</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a><span class="sd">    Returns:</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a><span class="sd">        dict: A JSON-like dictionary with extracted features structured under &quot;praat_parselmouth&quot;.</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>    <span class="c1"># Mark tasks with Pydra</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>    <span class="n">extract_pitch_values_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_pitch_values</span><span class="p">)</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>    <span class="k">def</span> <span class="nf">_extract_pitch_floor</span><span class="p">(</span><span class="n">pitch_values_out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>        <span class="k">return</span> <span class="n">pitch_values_out</span><span class="p">[</span><span class="s2">&quot;pitch_floor&quot;</span><span class="p">]</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>    <span class="n">_extract_pitch_floor_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">_extract_pitch_floor</span><span class="p">)</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>    <span class="k">def</span> <span class="nf">_extract_pitch_ceiling</span><span class="p">(</span><span class="n">pitch_values_out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>        <span class="k">return</span> <span class="n">pitch_values_out</span><span class="p">[</span><span class="s2">&quot;pitch_ceiling&quot;</span><span class="p">]</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>    <span class="n">_extract_pitch_ceiling_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">_extract_pitch_ceiling</span><span class="p">)</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>    <span class="k">if</span> <span class="n">speech_rate</span><span class="p">:</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>        <span class="n">extract_speech_rate_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_speech_rate</span><span class="p">)</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>    <span class="k">if</span> <span class="n">intensity_descriptors</span><span class="p">:</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>        <span class="n">extract_intensity_descriptors_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_intensity_descriptors</span><span class="p">)</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>    <span class="k">if</span> <span class="n">harmonicity_descriptors</span><span class="p">:</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>        <span class="n">extract_harmonicity_descriptors_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_harmonicity_descriptors</span><span class="p">)</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>    <span class="k">if</span> <span class="n">formants</span><span class="p">:</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>        <span class="n">measure_f1f2_formants_bandwidths_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">measure_f1f2_formants_bandwidths</span><span class="p">)</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>    <span class="k">if</span> <span class="n">spectral_moments</span><span class="p">:</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>        <span class="n">extract_spectral_moments_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_spectral_moments</span><span class="p">)</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>    <span class="k">if</span> <span class="n">pitch</span><span class="p">:</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>        <span class="n">extract_pitch_descriptors_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_pitch_descriptors</span><span class="p">)</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>    <span class="k">if</span> <span class="n">slope_tilt</span><span class="p">:</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>        <span class="n">extract_slope_tilt_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_slope_tilt</span><span class="p">)</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>    <span class="k">if</span> <span class="n">cpp_descriptors</span><span class="p">:</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>        <span class="n">extract_cpp_descriptors_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_cpp_descriptors</span><span class="p">)</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>        <span class="n">extract_audio_duration_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_audio_duration</span><span class="p">)</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>    <span class="k">if</span> <span class="n">jitter</span><span class="p">:</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>        <span class="n">extract_jitter_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_jitter</span><span class="p">)</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>    <span class="k">if</span> <span class="n">shimmer</span><span class="p">:</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>        <span class="n">extract_shimmer_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_shimmer</span><span class="p">)</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>    <span class="c1"># Create the workflow</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>    <span class="n">wf</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">Workflow</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;wf&quot;</span><span class="p">,</span> <span class="n">input_spec</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">cache_dir</span><span class="o">=</span><span class="n">cache_dir</span><span class="p">)</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>    <span class="n">wf</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">audios</span><span class="p">)</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>    <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">extract_pitch_values_pt</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_pitch_values_pt&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>    <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>        <span class="n">_extract_pitch_floor_pt</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;_extract_pitch_floor_pt&quot;</span><span class="p">,</span> <span class="n">pitch_values_out</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">extract_pitch_values_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">)</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>    <span class="p">)</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a>    <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>        <span class="n">_extract_pitch_ceiling_pt</span><span class="p">(</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;_extract_pitch_ceiling_pt&quot;</span><span class="p">,</span> <span class="n">pitch_values_out</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">extract_pitch_values_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>        <span class="p">)</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a>    <span class="p">)</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>    <span class="k">if</span> <span class="n">speech_rate</span><span class="p">:</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">extract_speech_rate_pt</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_speech_rate_pt&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a>    <span class="k">if</span> <span class="n">pitch</span><span class="p">:</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>            <span class="n">extract_pitch_descriptors_pt</span><span class="p">(</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_pitch_descriptors_pt&quot;</span><span class="p">,</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>                <span class="n">unit</span><span class="o">=</span><span class="n">pitch_unit</span><span class="p">,</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>            <span class="p">)</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>        <span class="p">)</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>    <span class="k">if</span> <span class="n">intensity_descriptors</span><span class="p">:</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>            <span class="n">extract_intensity_descriptors_pt</span><span class="p">(</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_intensity_descriptors_pt&quot;</span><span class="p">,</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>            <span class="p">)</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>        <span class="p">)</span>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a>    <span class="k">if</span> <span class="n">harmonicity_descriptors</span><span class="p">:</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>            <span class="n">extract_harmonicity_descriptors_pt</span><span class="p">(</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_harmonicity_descriptors_pt&quot;</span><span class="p">,</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>            <span class="p">)</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>        <span class="p">)</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>    <span class="k">if</span> <span class="n">formants</span><span class="p">:</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a>            <span class="n">measure_f1f2_formants_bandwidths_pt</span><span class="p">(</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;measure_f1f2_formants_bandwidths_pt&quot;</span><span class="p">,</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a>            <span class="p">)</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a>        <span class="p">)</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a>    <span class="k">if</span> <span class="n">spectral_moments</span><span class="p">:</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>            <span class="n">extract_spectral_moments_pt</span><span class="p">(</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_spectral_moments_pt&quot;</span><span class="p">,</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a>                <span class="n">window_size</span><span class="o">=</span><span class="n">window_length</span><span class="p">,</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>            <span class="p">)</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>        <span class="p">)</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>    <span class="k">if</span> <span class="n">slope_tilt</span><span class="p">:</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>            <span class="n">extract_slope_tilt_pt</span><span class="p">(</span>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_slope_tilt_pt&quot;</span><span class="p">,</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a>            <span class="p">)</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>        <span class="p">)</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>    <span class="k">if</span> <span class="n">cpp_descriptors</span><span class="p">:</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a>            <span class="n">extract_cpp_descriptors_pt</span><span class="p">(</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_cpp_descriptors_pt&quot;</span><span class="p">,</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a>            <span class="p">)</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a>        <span class="p">)</span>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a>    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">extract_audio_duration_pt</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_audio_duration_pt&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>    <span class="k">if</span> <span class="n">jitter</span><span class="p">:</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a>            <span class="n">extract_jitter_pt</span><span class="p">(</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_jitter_pt&quot;</span><span class="p">,</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>            <span class="p">)</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a>        <span class="p">)</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a>    <span class="k">if</span> <span class="n">shimmer</span><span class="p">:</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a>            <span class="n">extract_shimmer_pt</span><span class="p">(</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_shimmer_pt&quot;</span><span class="p">,</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a>            <span class="p">)</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a>        <span class="p">)</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>    <span class="c1"># setting multiple workflow outputs</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a>    <span class="n">output_connections</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;pitch_values_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_pitch_values_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">)]</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a>    <span class="k">if</span> <span class="n">speech_rate</span><span class="p">:</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;speech_rate_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_speech_rate_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>    <span class="k">if</span> <span class="n">pitch</span><span class="p">:</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;pitch_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_pitch_descriptors_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>    <span class="k">if</span> <span class="n">intensity_descriptors</span><span class="p">:</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;intensity_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_intensity_descriptors_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>    <span class="k">if</span> <span class="n">harmonicity_descriptors</span><span class="p">:</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;harmonicity_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_harmonicity_descriptors_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>    <span class="k">if</span> <span class="n">formants</span><span class="p">:</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;formants_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">measure_f1f2_formants_bandwidths_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a>    <span class="k">if</span> <span class="n">spectral_moments</span><span class="p">:</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;spectral_moments_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_spectral_moments_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a>    <span class="k">if</span> <span class="n">slope_tilt</span><span class="p">:</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;slope_tilt_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_slope_tilt_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>    <span class="k">if</span> <span class="n">cpp_descriptors</span><span class="p">:</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;cpp_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_cpp_descriptors_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a>    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;audio_duration&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_audio_duration_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>    <span class="k">if</span> <span class="n">jitter</span><span class="p">:</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;jitter_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_jitter_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a>    <span class="k">if</span> <span class="n">shimmer</span><span class="p">:</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;shimmer_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_shimmer_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>    <span class="n">wf</span><span class="o">.</span><span class="n">set_output</span><span class="p">(</span><span class="n">output_connections</span><span class="p">)</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a>    <span class="k">with</span> <span class="n">pydra</span><span class="o">.</span><span class="n">Submitter</span><span class="p">(</span><span class="n">plugin</span><span class="o">=</span><span class="n">plugin</span><span class="p">,</span> <span class="o">**</span><span class="n">plugin_args</span><span class="p">)</span> <span class="k">as</span> <span class="n">sub</span><span class="p">:</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a>        <span class="n">sub</span><span class="p">(</span><span class="n">wf</span><span class="p">)</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a>    <span class="n">outputs</span> <span class="o">=</span> <span class="n">wf</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>    <span class="n">extracted_data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a>    <span class="k">for</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">outputs</span><span class="p">:</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a>        <span class="n">feature_data</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a>        <span class="c1"># Audio duration</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>        <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">audio_duration</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a>        <span class="c1"># Timing and Pausing</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a>        <span class="k">if</span> <span class="n">speech_rate</span><span class="p">:</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;speaking_rate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">speech_rate_out</span><span class="p">[</span><span class="s2">&quot;speaking_rate&quot;</span><span class="p">]</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;articulation_rate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">speech_rate_out</span><span class="p">[</span><span class="s2">&quot;articulation_rate&quot;</span><span class="p">]</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;phonation_ratio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">speech_rate_out</span><span class="p">[</span><span class="s2">&quot;phonation_ratio&quot;</span><span class="p">]</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;pause_rate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">speech_rate_out</span><span class="p">[</span><span class="s2">&quot;pause_rate&quot;</span><span class="p">]</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_pause_duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">speech_rate_out</span><span class="p">[</span><span class="s2">&quot;mean_pause_dur&quot;</span><span class="p">]</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a>        <span class="c1"># Pitch and Intensity:</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>        <span class="k">if</span> <span class="n">pitch</span><span class="p">:</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;mean_f0_</span><span class="si">{</span><span class="n">pitch_unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">pitch_out</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;mean_f0_</span><span class="si">{</span><span class="n">pitch_unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;std_f0_</span><span class="si">{</span><span class="n">pitch_unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">pitch_out</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;stdev_f0_</span><span class="si">{</span><span class="n">pitch_unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_intensity_db&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">intensity_out</span><span class="p">[</span><span class="s2">&quot;mean_db&quot;</span><span class="p">]</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_intensity_db&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">intensity_out</span><span class="p">[</span><span class="s2">&quot;std_db&quot;</span><span class="p">]</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;range_ratio_intensity_db&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">intensity_out</span><span class="p">[</span><span class="s2">&quot;range_db_ratio&quot;</span><span class="p">]</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a>            <span class="c1"># feature_data[&quot;pitch_floor&quot;] = output.output.pitch_values_out[&quot;pitch_floor&quot;]</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a>            <span class="c1"># feature_data[&quot;pitch_ceiling&quot;] = output.output.pitch_values_out[&quot;pitch_ceiling&quot;]</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a>        <span class="c1"># Quality Features:</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>        <span class="k">if</span> <span class="n">harmonicity_descriptors</span><span class="p">:</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_hnr_db&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">harmonicity_out</span><span class="p">[</span><span class="s2">&quot;hnr_db_mean&quot;</span><span class="p">]</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_hnr_db&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">harmonicity_out</span><span class="p">[</span><span class="s2">&quot;hnr_db_std_dev&quot;</span><span class="p">]</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_slope&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">slope_tilt_out</span><span class="p">[</span><span class="s2">&quot;spectral_slope&quot;</span><span class="p">]</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_tilt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">slope_tilt_out</span><span class="p">[</span><span class="s2">&quot;spectral_tilt&quot;</span><span class="p">]</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;cepstral_peak_prominence_mean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">cpp_out</span><span class="p">[</span><span class="s2">&quot;mean_cpp&quot;</span><span class="p">]</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;cepstral_peak_prominence_std&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">cpp_out</span><span class="p">[</span><span class="s2">&quot;std_dev_cpp&quot;</span><span class="p">]</span>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a>        <span class="c1"># Formant (F1, F2):</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a>        <span class="k">if</span> <span class="n">formants</span><span class="p">:</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_f1_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;f1_mean&quot;</span><span class="p">]</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_f1_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;f1_std&quot;</span><span class="p">]</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_b1_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;b1_mean&quot;</span><span class="p">]</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_b1_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;b1_std&quot;</span><span class="p">]</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_f2_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;f2_mean&quot;</span><span class="p">]</span>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_f2_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;f2_std&quot;</span><span class="p">]</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_b2_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;b2_mean&quot;</span><span class="p">]</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_b2_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;b2_std&quot;</span><span class="p">]</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a>        <span class="c1"># Spectral Moments:</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a>        <span class="k">if</span> <span class="n">spectral_moments</span><span class="p">:</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_gravity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">spectral_moments_out</span><span class="p">[</span><span class="s2">&quot;spectral_gravity&quot;</span><span class="p">]</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_std_dev&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">spectral_moments_out</span><span class="p">[</span><span class="s2">&quot;spectral_std_dev&quot;</span><span class="p">]</span>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_skewness&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">spectral_moments_out</span><span class="p">[</span><span class="s2">&quot;spectral_skewness&quot;</span><span class="p">]</span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_kurtosis&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">spectral_moments_out</span><span class="p">[</span><span class="s2">&quot;spectral_kurtosis&quot;</span><span class="p">]</span>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a>        <span class="c1"># Jitter Descriptors:</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a>        <span class="k">if</span> <span class="n">jitter</span><span class="p">:</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;local_jitter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">jitter_out</span><span class="p">[</span><span class="s2">&quot;local_jitter&quot;</span><span class="p">]</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;localabsolute_jitter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">jitter_out</span><span class="p">[</span><span class="s2">&quot;localabsolute_jitter&quot;</span><span class="p">]</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;rap_jitter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">jitter_out</span><span class="p">[</span><span class="s2">&quot;rap_jitter&quot;</span><span class="p">]</span>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;ppq5_jitter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">jitter_out</span><span class="p">[</span><span class="s2">&quot;ppq5_jitter&quot;</span><span class="p">]</span>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;ddp_jitter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">jitter_out</span><span class="p">[</span><span class="s2">&quot;ddp_jitter&quot;</span><span class="p">]</span>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a>        <span class="c1"># Shimmer Descriptors:</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a>        <span class="k">if</span> <span class="n">shimmer</span><span class="p">:</span>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;local_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;local_shimmer&quot;</span><span class="p">]</span>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;localDB_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;localDB_shimmer&quot;</span><span class="p">]</span>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;apq3_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;apq3_shimmer&quot;</span><span class="p">]</span>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;apq5_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;apq5_shimmer&quot;</span><span class="p">]</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;apq11_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;apq11_shimmer&quot;</span><span class="p">]</span>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;dda_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;dda_shimmer&quot;</span><span class="p">]</span>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a>        <span class="n">extracted_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature_data</span><span class="p">)</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a>    <span class="k">return</span> <span class="n">extracted_data</span>
</span></pre></div>


            </section>
                <section id="get_sound">
                            <input id="get_sound-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_sound</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">audio</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">sampling_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16000</span></span><span class="return-annotation">) -> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span>:</span></span>

                <label class="view-source-button" for="get_sound-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#get_sound"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_sound-22"><a href="#get_sound-22"><span class="linenos">22</span></a><span class="k">def</span> <span class="nf">get_sound</span><span class="p">(</span><span class="n">audio</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">sampling_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">:</span>
</span><span id="get_sound-23"><a href="#get_sound-23"><span class="linenos">23</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a sound object from a given audio file or Audio object.</span>
</span><span id="get_sound-24"><a href="#get_sound-24"><span class="linenos">24</span></a>
</span><span id="get_sound-25"><a href="#get_sound-25"><span class="linenos">25</span></a><span class="sd">    Args:</span>
</span><span id="get_sound-26"><a href="#get_sound-26"><span class="linenos">26</span></a><span class="sd">        audio (Union[Path, Audio]): A path to an audio file or an Audio object.</span>
</span><span id="get_sound-27"><a href="#get_sound-27"><span class="linenos">27</span></a><span class="sd">        sampling_rate (int, optional): The sampling rate of the audio. Defaults to 16000.</span>
</span><span id="get_sound-28"><a href="#get_sound-28"><span class="linenos">28</span></a>
</span><span id="get_sound-29"><a href="#get_sound-29"><span class="linenos">29</span></a><span class="sd">    Returns:</span>
</span><span id="get_sound-30"><a href="#get_sound-30"><span class="linenos">30</span></a><span class="sd">        parselmouth.Sound: A Parselmouth Sound object.</span>
</span><span id="get_sound-31"><a href="#get_sound-31"><span class="linenos">31</span></a>
</span><span id="get_sound-32"><a href="#get_sound-32"><span class="linenos">32</span></a><span class="sd">    Raises:</span>
</span><span id="get_sound-33"><a href="#get_sound-33"><span class="linenos">33</span></a><span class="sd">        FileNotFoundError: If the file is not found at the given path.</span>
</span><span id="get_sound-34"><a href="#get_sound-34"><span class="linenos">34</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="get_sound-35"><a href="#get_sound-35"><span class="linenos">35</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="get_sound-36"><a href="#get_sound-36"><span class="linenos">36</span></a>        <span class="c1"># Loading the sound</span>
</span><span id="get_sound-37"><a href="#get_sound-37"><span class="linenos">37</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">audio</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
</span><span id="get_sound-38"><a href="#get_sound-38"><span class="linenos">38</span></a>            <span class="n">audio</span> <span class="o">=</span> <span class="n">audio</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</span><span id="get_sound-39"><a href="#get_sound-39"><span class="linenos">39</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">audio</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="get_sound-40"><a href="#get_sound-40"><span class="linenos">40</span></a>                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File does not exist: </span><span class="si">{</span><span class="n">audio</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="get_sound-41"><a href="#get_sound-41"><span class="linenos">41</span></a>                <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File does not exist: </span><span class="si">{</span><span class="n">audio</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="get_sound-42"><a href="#get_sound-42"><span class="linenos">42</span></a>            <span class="n">snd_full</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">audio</span><span class="p">))</span>
</span><span id="get_sound-43"><a href="#get_sound-43"><span class="linenos">43</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">audio</span><span class="p">,</span> <span class="n">Audio</span><span class="p">):</span>
</span><span id="get_sound-44"><a href="#get_sound-44"><span class="linenos">44</span></a>            <span class="n">snd_full</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="n">audio</span><span class="o">.</span><span class="n">waveform</span><span class="p">,</span> <span class="n">audio</span><span class="o">.</span><span class="n">sampling_rate</span><span class="p">)</span>
</span><span id="get_sound-45"><a href="#get_sound-45"><span class="linenos">45</span></a>
</span><span id="get_sound-46"><a href="#get_sound-46"><span class="linenos">46</span></a>        <span class="c1"># Preprocessing</span>
</span><span id="get_sound-47"><a href="#get_sound-47"><span class="linenos">47</span></a>        <span class="k">if</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd_full</span><span class="p">,</span> <span class="s2">&quot;Get number of channels&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="get_sound-48"><a href="#get_sound-48"><span class="linenos">48</span></a>            <span class="n">snd_full</span> <span class="o">=</span> <span class="n">snd_full</span><span class="o">.</span><span class="n">convert_to_mono</span><span class="p">()</span>
</span><span id="get_sound-49"><a href="#get_sound-49"><span class="linenos">49</span></a>        <span class="k">if</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd_full</span><span class="p">,</span> <span class="s2">&quot;Get sampling frequency&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">sampling_rate</span><span class="p">:</span>
</span><span id="get_sound-50"><a href="#get_sound-50"><span class="linenos">50</span></a>            <span class="n">snd_full</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd_full</span><span class="p">,</span> <span class="s2">&quot;Resample&quot;</span><span class="p">,</span> <span class="n">sampling_rate</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="get_sound-51"><a href="#get_sound-51"><span class="linenos">51</span></a>            <span class="c1"># Details of queery: https://www.fon.hum.uva.nl/praat/manual/Get_sampling_frequency.html</span>
</span><span id="get_sound-52"><a href="#get_sound-52"><span class="linenos">52</span></a>            <span class="c1"># Details of conversion: https://www.fon.hum.uva.nl/praat/manual/Sound__Resample___.html</span>
</span><span id="get_sound-53"><a href="#get_sound-53"><span class="linenos">53</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="get_sound-54"><a href="#get_sound-54"><span class="linenos">54</span></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error loading sound: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="get_sound-55"><a href="#get_sound-55"><span class="linenos">55</span></a>    <span class="k">return</span> <span class="n">snd_full</span>
</span></pre></div>


            <div class="docstring"><p>Get a sound object from a given audio file or Audio object.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>audio (Union[Path, Audio]):</strong>  A path to an audio file or an Audio object.</li>
<li><strong>sampling_rate (int, optional):</strong>  The sampling rate of the audio. Defaults to 16000.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>parselmouth.Sound: A Parselmouth Sound object.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>FileNotFoundError:</strong>  If the file is not found at the given path.</li>
</ul>
</div>


                </section>
                <section id="extract_speech_rate">
                            <input id="extract_speech_rate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_speech_rate</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="extract_speech_rate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_speech_rate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_speech_rate-58"><a href="#extract_speech_rate-58"><span class="linenos"> 58</span></a><span class="k">def</span> <span class="nf">extract_speech_rate</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="extract_speech_rate-59"><a href="#extract_speech_rate-59"><span class="linenos"> 59</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract speech timing and pausing features from a given sound object.</span>
</span><span id="extract_speech_rate-60"><a href="#extract_speech_rate-60"><span class="linenos"> 60</span></a>
</span><span id="extract_speech_rate-61"><a href="#extract_speech_rate-61"><span class="linenos"> 61</span></a><span class="sd">    Args:</span>
</span><span id="extract_speech_rate-62"><a href="#extract_speech_rate-62"><span class="linenos"> 62</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="extract_speech_rate-63"><a href="#extract_speech_rate-63"><span class="linenos"> 63</span></a>
</span><span id="extract_speech_rate-64"><a href="#extract_speech_rate-64"><span class="linenos"> 64</span></a><span class="sd">    Returns:</span>
</span><span id="extract_speech_rate-65"><a href="#extract_speech_rate-65"><span class="linenos"> 65</span></a><span class="sd">        Dict[str, float]: A dictionary containing the following features:</span>
</span><span id="extract_speech_rate-66"><a href="#extract_speech_rate-66"><span class="linenos"> 66</span></a>
</span><span id="extract_speech_rate-67"><a href="#extract_speech_rate-67"><span class="linenos"> 67</span></a><span class="sd">            - speaking_rate (float): Number of syllables divided by duration.</span>
</span><span id="extract_speech_rate-68"><a href="#extract_speech_rate-68"><span class="linenos"> 68</span></a><span class="sd">            - articulation_rate (float): Number of syllables divided by phonation time.</span>
</span><span id="extract_speech_rate-69"><a href="#extract_speech_rate-69"><span class="linenos"> 69</span></a><span class="sd">            - phonation_ratio (float): Phonation time divided by duration.</span>
</span><span id="extract_speech_rate-70"><a href="#extract_speech_rate-70"><span class="linenos"> 70</span></a><span class="sd">            - pause_rate (float): Number of pauses divided by duration.</span>
</span><span id="extract_speech_rate-71"><a href="#extract_speech_rate-71"><span class="linenos"> 71</span></a><span class="sd">            - mean_pause_dur (float): Total time pausing divided by the number of identified pauses.</span>
</span><span id="extract_speech_rate-72"><a href="#extract_speech_rate-72"><span class="linenos"> 72</span></a>
</span><span id="extract_speech_rate-73"><a href="#extract_speech_rate-73"><span class="linenos"> 73</span></a><span class="sd">    Examples:</span>
</span><span id="extract_speech_rate-74"><a href="#extract_speech_rate-74"><span class="linenos"> 74</span></a><span class="sd">        ```python</span>
</span><span id="extract_speech_rate-75"><a href="#extract_speech_rate-75"><span class="linenos"> 75</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="extract_speech_rate-76"><a href="#extract_speech_rate-76"><span class="linenos"> 76</span></a><span class="sd">        &gt;&gt;&gt; extract_speech_rate(snd)</span>
</span><span id="extract_speech_rate-77"><a href="#extract_speech_rate-77"><span class="linenos"> 77</span></a><span class="sd">        {</span>
</span><span id="extract_speech_rate-78"><a href="#extract_speech_rate-78"><span class="linenos"> 78</span></a><span class="sd">            &#39;speaking_rate&#39;: 5.3,</span>
</span><span id="extract_speech_rate-79"><a href="#extract_speech_rate-79"><span class="linenos"> 79</span></a><span class="sd">            &#39;articulation_rate&#39;: 4.7,</span>
</span><span id="extract_speech_rate-80"><a href="#extract_speech_rate-80"><span class="linenos"> 80</span></a><span class="sd">            &#39;phonation_ratio&#39;: 0.9,</span>
</span><span id="extract_speech_rate-81"><a href="#extract_speech_rate-81"><span class="linenos"> 81</span></a><span class="sd">            &#39;pause_rate&#39;: 2.1,</span>
</span><span id="extract_speech_rate-82"><a href="#extract_speech_rate-82"><span class="linenos"> 82</span></a><span class="sd">            &#39;mean_pause_dur&#39;: 0.5</span>
</span><span id="extract_speech_rate-83"><a href="#extract_speech_rate-83"><span class="linenos"> 83</span></a><span class="sd">        }</span>
</span><span id="extract_speech_rate-84"><a href="#extract_speech_rate-84"><span class="linenos"> 84</span></a><span class="sd">        ```</span>
</span><span id="extract_speech_rate-85"><a href="#extract_speech_rate-85"><span class="linenos"> 85</span></a>
</span><span id="extract_speech_rate-86"><a href="#extract_speech_rate-86"><span class="linenos"> 86</span></a><span class="sd">    Useful sources for this code:</span>
</span><span id="extract_speech_rate-87"><a href="#extract_speech_rate-87"><span class="linenos"> 87</span></a>
</span><span id="extract_speech_rate-88"><a href="#extract_speech_rate-88"><span class="linenos"> 88</span></a><span class="sd">        - https://sites.google.com/view/uhm-o-meter/scripts/syllablenuclei_v3?pli=1</span>
</span><span id="extract_speech_rate-89"><a href="#extract_speech_rate-89"><span class="linenos"> 89</span></a><span class="sd">        - https://drive.google.com/file/d/1o3mNdN5FKTiYQC9GHB1XoZ8JJIGZk_AK/view</span>
</span><span id="extract_speech_rate-90"><a href="#extract_speech_rate-90"><span class="linenos"> 90</span></a><span class="sd">        - (2009 paper) https://doi.org/10.3758/BRM.41.2.385</span>
</span><span id="extract_speech_rate-91"><a href="#extract_speech_rate-91"><span class="linenos"> 91</span></a><span class="sd">        - (2021 paper) https://doi.org/10.1080/0969594X.2021.1951162</span>
</span><span id="extract_speech_rate-92"><a href="#extract_speech_rate-92"><span class="linenos"> 92</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_speech_rate-93"><a href="#extract_speech_rate-93"><span class="linenos"> 93</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_speech_rate-94"><a href="#extract_speech_rate-94"><span class="linenos"> 94</span></a>        <span class="c1"># _____________________________________________________________________________________________________________</span>
</span><span id="extract_speech_rate-95"><a href="#extract_speech_rate-95"><span class="linenos"> 95</span></a>        <span class="c1"># Load the sound object into parselmouth if it is an Audio object</span>
</span><span id="extract_speech_rate-96"><a href="#extract_speech_rate-96"><span class="linenos"> 96</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="extract_speech_rate-97"><a href="#extract_speech_rate-97"><span class="linenos"> 97</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="extract_speech_rate-98"><a href="#extract_speech_rate-98"><span class="linenos"> 98</span></a>
</span><span id="extract_speech_rate-99"><a href="#extract_speech_rate-99"><span class="linenos"> 99</span></a>        <span class="c1"># _____________________________________________________________________________________________________________</span>
</span><span id="extract_speech_rate-100"><a href="#extract_speech_rate-100"><span class="linenos">100</span></a>        <span class="c1"># Key pause detection hyperparameters</span>
</span><span id="extract_speech_rate-101"><a href="#extract_speech_rate-101"><span class="linenos">101</span></a>
</span><span id="extract_speech_rate-102"><a href="#extract_speech_rate-102"><span class="linenos">102</span></a>        <span class="c1"># Silence Threshold (dB) - standard setting to detect silence in the &quot;To TextGrid (silences)&quot; function.</span>
</span><span id="extract_speech_rate-103"><a href="#extract_speech_rate-103"><span class="linenos">103</span></a>        <span class="c1"># The higher this number, the lower the chances of finding silent pauses</span>
</span><span id="extract_speech_rate-104"><a href="#extract_speech_rate-104"><span class="linenos">104</span></a>        <span class="n">silence_db</span> <span class="o">=</span> <span class="o">-</span><span class="mi">25</span>
</span><span id="extract_speech_rate-105"><a href="#extract_speech_rate-105"><span class="linenos">105</span></a>
</span><span id="extract_speech_rate-106"><a href="#extract_speech_rate-106"><span class="linenos">106</span></a>        <span class="c1"># Minimum_dip_between_peaks_(dB) - if there are decreases in intensity</span>
</span><span id="extract_speech_rate-107"><a href="#extract_speech_rate-107"><span class="linenos">107</span></a>        <span class="c1"># of at least this value surrounding the peak, the peak is labelled to be a syllable nucleus</span>
</span><span id="extract_speech_rate-108"><a href="#extract_speech_rate-108"><span class="linenos">108</span></a>        <span class="c1"># I.e. the size of the dip between two possible peakes</span>
</span><span id="extract_speech_rate-109"><a href="#extract_speech_rate-109"><span class="linenos">109</span></a>        <span class="c1"># The higher this number, the less syllables will be found</span>
</span><span id="extract_speech_rate-110"><a href="#extract_speech_rate-110"><span class="linenos">110</span></a>        <span class="c1"># For clean and filtered signal use 4, if not use 2 (recommend thresholds)</span>
</span><span id="extract_speech_rate-111"><a href="#extract_speech_rate-111"><span class="linenos">111</span></a>        <span class="n">min_dip</span> <span class="o">=</span> <span class="mi">4</span>
</span><span id="extract_speech_rate-112"><a href="#extract_speech_rate-112"><span class="linenos">112</span></a>        <span class="c1"># Code for determining if the signal not clean/filtered</span>
</span><span id="extract_speech_rate-113"><a href="#extract_speech_rate-113"><span class="linenos">113</span></a>        <span class="n">hnr</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="extract_speech_rate-114"><a href="#extract_speech_rate-114"><span class="linenos">114</span></a>            <span class="n">snd</span><span class="o">.</span><span class="n">to_harmonicity_cc</span><span class="p">(),</span> <span class="s2">&quot;Get mean&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
</span><span id="extract_speech_rate-115"><a href="#extract_speech_rate-115"><span class="linenos">115</span></a>        <span class="p">)</span>  <span class="c1"># Note: (0,0) is the time range for extraction, setting both two zero tells praat to use the full file</span>
</span><span id="extract_speech_rate-116"><a href="#extract_speech_rate-116"><span class="linenos">116</span></a>        <span class="k">if</span> <span class="n">hnr</span> <span class="o">&lt;</span> <span class="mi">60</span><span class="p">:</span>
</span><span id="extract_speech_rate-117"><a href="#extract_speech_rate-117"><span class="linenos">117</span></a>            <span class="n">min_dip</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="extract_speech_rate-118"><a href="#extract_speech_rate-118"><span class="linenos">118</span></a>
</span><span id="extract_speech_rate-119"><a href="#extract_speech_rate-119"><span class="linenos">119</span></a>        <span class="c1"># Minimum pause duration (s): How long should a pause be to be counted as a silent pause?</span>
</span><span id="extract_speech_rate-120"><a href="#extract_speech_rate-120"><span class="linenos">120</span></a>        <span class="c1"># The higher this number, the fewer pauses will be found</span>
</span><span id="extract_speech_rate-121"><a href="#extract_speech_rate-121"><span class="linenos">121</span></a>        <span class="n">min_pause</span> <span class="o">=</span> <span class="mf">0.3</span>  <span class="c1"># the default for this is 0.1 in Praat, the de Jong&#39;s script has this set at 0.3</span>
</span><span id="extract_speech_rate-122"><a href="#extract_speech_rate-122"><span class="linenos">122</span></a>        <span class="c1"># Based on values in: Toward an understanding of fluency:</span>
</span><span id="extract_speech_rate-123"><a href="#extract_speech_rate-123"><span class="linenos">123</span></a>        <span class="c1"># A microanalysis of nonnative speaker conversations (Riggenbach)</span>
</span><span id="extract_speech_rate-124"><a href="#extract_speech_rate-124"><span class="linenos">124</span></a>        <span class="c1"># – Micropause (silence of .2s or less)</span>
</span><span id="extract_speech_rate-125"><a href="#extract_speech_rate-125"><span class="linenos">125</span></a>        <span class="c1"># – Hesitation (silence of .3 to .4s)</span>
</span><span id="extract_speech_rate-126"><a href="#extract_speech_rate-126"><span class="linenos">126</span></a>        <span class="c1"># – Unfilled pause (silence of .5s or more)</span>
</span><span id="extract_speech_rate-127"><a href="#extract_speech_rate-127"><span class="linenos">127</span></a>
</span><span id="extract_speech_rate-128"><a href="#extract_speech_rate-128"><span class="linenos">128</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="extract_speech_rate-129"><a href="#extract_speech_rate-129"><span class="linenos">129</span></a>        <span class="c1"># Intensity information</span>
</span><span id="extract_speech_rate-130"><a href="#extract_speech_rate-130"><span class="linenos">130</span></a>
</span><span id="extract_speech_rate-131"><a href="#extract_speech_rate-131"><span class="linenos">131</span></a>        <span class="n">intensity</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_intensity</span><span class="p">(</span><span class="n">minimum_pitch</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">time_step</span><span class="o">=</span><span class="mf">0.016</span><span class="p">,</span> <span class="n">subtract_mean</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="extract_speech_rate-132"><a href="#extract_speech_rate-132"><span class="linenos">132</span></a>        <span class="c1"># These are the setting recommended by de jong - minimum pitch” set to 50 Hz,.</span>
</span><span id="extract_speech_rate-133"><a href="#extract_speech_rate-133"><span class="linenos">133</span></a>        <span class="c1"># With this parameter setting, we extract intensity smoothed over a time window of (3.2/minimum_pitch)=64 msec,</span>
</span><span id="extract_speech_rate-134"><a href="#extract_speech_rate-134"><span class="linenos">134</span></a>        <span class="c1">#  with 16-msec time steps explanation on these calculations are found at:</span>
</span><span id="extract_speech_rate-135"><a href="#extract_speech_rate-135"><span class="linenos">135</span></a>        <span class="c1"># https://www.fon.hum.uva.nl/praat/manual/Sound__To_Intensity___.html</span>
</span><span id="extract_speech_rate-136"><a href="#extract_speech_rate-136"><span class="linenos">136</span></a>
</span><span id="extract_speech_rate-137"><a href="#extract_speech_rate-137"><span class="linenos">137</span></a>        <span class="n">min_intensity</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get minimum&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Parabolic&quot;</span><span class="p">)</span>  <span class="c1"># time range, Interpolation</span>
</span><span id="extract_speech_rate-138"><a href="#extract_speech_rate-138"><span class="linenos">138</span></a>        <span class="n">max_intensity</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get maximum&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Parabolic&quot;</span><span class="p">)</span>  <span class="c1"># time range, Interpolation</span>
</span><span id="extract_speech_rate-139"><a href="#extract_speech_rate-139"><span class="linenos">139</span></a>
</span><span id="extract_speech_rate-140"><a href="#extract_speech_rate-140"><span class="linenos">140</span></a>        <span class="c1"># Silince is detected by measuring whether the intensity is 25 dB below the 99% highest peak</span>
</span><span id="extract_speech_rate-141"><a href="#extract_speech_rate-141"><span class="linenos">141</span></a>        <span class="c1"># 99% is chosen to eliminate short loud bursts in intensity that may not have been speech</span>
</span><span id="extract_speech_rate-142"><a href="#extract_speech_rate-142"><span class="linenos">142</span></a>
</span><span id="extract_speech_rate-143"><a href="#extract_speech_rate-143"><span class="linenos">143</span></a>        <span class="c1"># get .99 quantile to get maximum (without influence of non-speech sound bursts)</span>
</span><span id="extract_speech_rate-144"><a href="#extract_speech_rate-144"><span class="linenos">144</span></a>        <span class="n">max_99_intensity</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get quantile&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">)</span>
</span><span id="extract_speech_rate-145"><a href="#extract_speech_rate-145"><span class="linenos">145</span></a>
</span><span id="extract_speech_rate-146"><a href="#extract_speech_rate-146"><span class="linenos">146</span></a>        <span class="c1"># estimate Intensity threshold</span>
</span><span id="extract_speech_rate-147"><a href="#extract_speech_rate-147"><span class="linenos">147</span></a>        <span class="n">silence_db_1</span> <span class="o">=</span> <span class="n">max_99_intensity</span> <span class="o">+</span> <span class="n">silence_db</span>
</span><span id="extract_speech_rate-148"><a href="#extract_speech_rate-148"><span class="linenos">148</span></a>        <span class="n">db_adjustment</span> <span class="o">=</span> <span class="n">max_intensity</span> <span class="o">-</span> <span class="n">max_99_intensity</span>
</span><span id="extract_speech_rate-149"><a href="#extract_speech_rate-149"><span class="linenos">149</span></a>        <span class="n">silence_db_2</span> <span class="o">=</span> <span class="n">silence_db</span> <span class="o">-</span> <span class="n">db_adjustment</span>
</span><span id="extract_speech_rate-150"><a href="#extract_speech_rate-150"><span class="linenos">150</span></a>        <span class="k">if</span> <span class="n">silence_db_1</span> <span class="o">&lt;</span> <span class="n">min_intensity</span><span class="p">:</span>
</span><span id="extract_speech_rate-151"><a href="#extract_speech_rate-151"><span class="linenos">151</span></a>            <span class="n">silence_db_1</span> <span class="o">=</span> <span class="n">min_intensity</span>
</span><span id="extract_speech_rate-152"><a href="#extract_speech_rate-152"><span class="linenos">152</span></a>
</span><span id="extract_speech_rate-153"><a href="#extract_speech_rate-153"><span class="linenos">153</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="extract_speech_rate-154"><a href="#extract_speech_rate-154"><span class="linenos">154</span></a>        <span class="c1"># Create a TextGrid in which the silent and sounding intervals, store these intervals</span>
</span><span id="extract_speech_rate-155"><a href="#extract_speech_rate-155"><span class="linenos">155</span></a>
</span><span id="extract_speech_rate-156"><a href="#extract_speech_rate-156"><span class="linenos">156</span></a>        <span class="n">textgrid</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="extract_speech_rate-157"><a href="#extract_speech_rate-157"><span class="linenos">157</span></a>            <span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;To TextGrid (silences)&quot;</span><span class="p">,</span> <span class="n">silence_db_2</span><span class="p">,</span> <span class="n">min_pause</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="s2">&quot;silent&quot;</span><span class="p">,</span> <span class="s2">&quot;sounding&quot;</span>
</span><span id="extract_speech_rate-158"><a href="#extract_speech_rate-158"><span class="linenos">158</span></a>        <span class="p">)</span>
</span><span id="extract_speech_rate-159"><a href="#extract_speech_rate-159"><span class="linenos">159</span></a>        <span class="c1"># Hyperparameters:</span>
</span><span id="extract_speech_rate-160"><a href="#extract_speech_rate-160"><span class="linenos">160</span></a>        <span class="c1"># Silence threshold (dB),</span>
</span><span id="extract_speech_rate-161"><a href="#extract_speech_rate-161"><span class="linenos">161</span></a>        <span class="c1"># Minimum silent interval (s) - minimum duration for an interval to be considered as silent</span>
</span><span id="extract_speech_rate-162"><a href="#extract_speech_rate-162"><span class="linenos">162</span></a>        <span class="c1"># Minimum sounding interval (s) - minimum duration for an interval to be not considered as silent</span>
</span><span id="extract_speech_rate-163"><a href="#extract_speech_rate-163"><span class="linenos">163</span></a>        <span class="c1"># Silent interval label</span>
</span><span id="extract_speech_rate-164"><a href="#extract_speech_rate-164"><span class="linenos">164</span></a>        <span class="c1"># Sounding interval label</span>
</span><span id="extract_speech_rate-165"><a href="#extract_speech_rate-165"><span class="linenos">165</span></a>
</span><span id="extract_speech_rate-166"><a href="#extract_speech_rate-166"><span class="linenos">166</span></a>        <span class="c1"># Loop through intervals and extract times of identified silent and sounding sections</span>
</span><span id="extract_speech_rate-167"><a href="#extract_speech_rate-167"><span class="linenos">167</span></a>        <span class="n">silencetier</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">textgrid</span><span class="p">,</span> <span class="s2">&quot;Extract tier&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="extract_speech_rate-168"><a href="#extract_speech_rate-168"><span class="linenos">168</span></a>        <span class="n">silencetable</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">silencetier</span><span class="p">,</span> <span class="s2">&quot;Down to TableOfReal&quot;</span><span class="p">,</span> <span class="s2">&quot;sounding&quot;</span><span class="p">)</span>
</span><span id="extract_speech_rate-169"><a href="#extract_speech_rate-169"><span class="linenos">169</span></a>        <span class="n">npauses</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">silencetable</span><span class="p">,</span> <span class="s2">&quot;Get number of rows&quot;</span><span class="p">)</span>
</span><span id="extract_speech_rate-170"><a href="#extract_speech_rate-170"><span class="linenos">170</span></a>
</span><span id="extract_speech_rate-171"><a href="#extract_speech_rate-171"><span class="linenos">171</span></a>        <span class="n">phonation_time</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="extract_speech_rate-172"><a href="#extract_speech_rate-172"><span class="linenos">172</span></a>        <span class="k">for</span> <span class="n">ipause</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">npauses</span><span class="p">):</span>
</span><span id="extract_speech_rate-173"><a href="#extract_speech_rate-173"><span class="linenos">173</span></a>            <span class="n">pause</span> <span class="o">=</span> <span class="n">ipause</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="extract_speech_rate-174"><a href="#extract_speech_rate-174"><span class="linenos">174</span></a>            <span class="n">beginsound</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">silencetable</span><span class="p">,</span> <span class="s2">&quot;Get value&quot;</span><span class="p">,</span> <span class="n">pause</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="extract_speech_rate-175"><a href="#extract_speech_rate-175"><span class="linenos">175</span></a>            <span class="n">endsound</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">silencetable</span><span class="p">,</span> <span class="s2">&quot;Get value&quot;</span><span class="p">,</span> <span class="n">pause</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="extract_speech_rate-176"><a href="#extract_speech_rate-176"><span class="linenos">176</span></a>            <span class="n">speakingdur</span> <span class="o">=</span> <span class="n">endsound</span> <span class="o">-</span> <span class="n">beginsound</span>
</span><span id="extract_speech_rate-177"><a href="#extract_speech_rate-177"><span class="linenos">177</span></a>
</span><span id="extract_speech_rate-178"><a href="#extract_speech_rate-178"><span class="linenos">178</span></a>            <span class="n">phonation_time</span> <span class="o">+=</span> <span class="n">speakingdur</span>
</span><span id="extract_speech_rate-179"><a href="#extract_speech_rate-179"><span class="linenos">179</span></a>
</span><span id="extract_speech_rate-180"><a href="#extract_speech_rate-180"><span class="linenos">180</span></a>            <span class="c1"># This is to remove the first (before first word) and last (after last word) silence from consideration</span>
</span><span id="extract_speech_rate-181"><a href="#extract_speech_rate-181"><span class="linenos">181</span></a>            <span class="k">if</span> <span class="n">pause</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="extract_speech_rate-182"><a href="#extract_speech_rate-182"><span class="linenos">182</span></a>                <span class="n">begin_speak</span> <span class="o">=</span> <span class="n">beginsound</span>
</span><span id="extract_speech_rate-183"><a href="#extract_speech_rate-183"><span class="linenos">183</span></a>            <span class="k">if</span> <span class="n">pause</span> <span class="o">==</span> <span class="p">(</span><span class="n">npauses</span><span class="p">):</span>
</span><span id="extract_speech_rate-184"><a href="#extract_speech_rate-184"><span class="linenos">184</span></a>                <span class="n">end_speak</span> <span class="o">=</span> <span class="n">endsound</span>
</span><span id="extract_speech_rate-185"><a href="#extract_speech_rate-185"><span class="linenos">185</span></a>
</span><span id="extract_speech_rate-186"><a href="#extract_speech_rate-186"><span class="linenos">186</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="extract_speech_rate-187"><a href="#extract_speech_rate-187"><span class="linenos">187</span></a>        <span class="c1"># Next block of code finds all possible peaks</span>
</span><span id="extract_speech_rate-188"><a href="#extract_speech_rate-188"><span class="linenos">188</span></a>
</span><span id="extract_speech_rate-189"><a href="#extract_speech_rate-189"><span class="linenos">189</span></a>        <span class="c1"># Convert intensity countor into sound representation</span>
</span><span id="extract_speech_rate-190"><a href="#extract_speech_rate-190"><span class="linenos">190</span></a>        <span class="n">intensity_matrix</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Down to Matrix&quot;</span><span class="p">)</span>  <span class="c1"># convert intensity to 2d representation</span>
</span><span id="extract_speech_rate-191"><a href="#extract_speech_rate-191"><span class="linenos">191</span></a>
</span><span id="extract_speech_rate-192"><a href="#extract_speech_rate-192"><span class="linenos">192</span></a>        <span class="c1"># Convert intensity countor into sound representation</span>
</span><span id="extract_speech_rate-193"><a href="#extract_speech_rate-193"><span class="linenos">193</span></a>        <span class="n">sound_from_intensity_matrix</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity_matrix</span><span class="p">,</span> <span class="s2">&quot;To Sound (slice)&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="extract_speech_rate-194"><a href="#extract_speech_rate-194"><span class="linenos">194</span></a>
</span><span id="extract_speech_rate-195"><a href="#extract_speech_rate-195"><span class="linenos">195</span></a>        <span class="c1"># find positive extrema, maxima in sound_from_intensity_matrix, which correspond to steepest rises in Intensity;</span>
</span><span id="extract_speech_rate-196"><a href="#extract_speech_rate-196"><span class="linenos">196</span></a>        <span class="n">point_process</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="extract_speech_rate-197"><a href="#extract_speech_rate-197"><span class="linenos">197</span></a>            <span class="n">sound_from_intensity_matrix</span><span class="p">,</span>
</span><span id="extract_speech_rate-198"><a href="#extract_speech_rate-198"><span class="linenos">198</span></a>            <span class="s2">&quot;To PointProcess (extrema)&quot;</span><span class="p">,</span>
</span><span id="extract_speech_rate-199"><a href="#extract_speech_rate-199"><span class="linenos">199</span></a>            <span class="s2">&quot;Left&quot;</span><span class="p">,</span>
</span><span id="extract_speech_rate-200"><a href="#extract_speech_rate-200"><span class="linenos">200</span></a>            <span class="s2">&quot;yes&quot;</span><span class="p">,</span>
</span><span id="extract_speech_rate-201"><a href="#extract_speech_rate-201"><span class="linenos">201</span></a>            <span class="s2">&quot;no&quot;</span><span class="p">,</span>
</span><span id="extract_speech_rate-202"><a href="#extract_speech_rate-202"><span class="linenos">202</span></a>            <span class="s2">&quot;Sinc70&quot;</span><span class="p">,</span>
</span><span id="extract_speech_rate-203"><a href="#extract_speech_rate-203"><span class="linenos">203</span></a>        <span class="p">)</span>
</span><span id="extract_speech_rate-204"><a href="#extract_speech_rate-204"><span class="linenos">204</span></a>
</span><span id="extract_speech_rate-205"><a href="#extract_speech_rate-205"><span class="linenos">205</span></a>        <span class="c1"># estimate peak positions (all peaks)</span>
</span><span id="extract_speech_rate-206"><a href="#extract_speech_rate-206"><span class="linenos">206</span></a>        <span class="n">t</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="extract_speech_rate-207"><a href="#extract_speech_rate-207"><span class="linenos">207</span></a>        <span class="n">numpeaks</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">point_process</span><span class="p">,</span> <span class="s2">&quot;Get number of points&quot;</span><span class="p">)</span>
</span><span id="extract_speech_rate-208"><a href="#extract_speech_rate-208"><span class="linenos">208</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numpeaks</span><span class="p">):</span>
</span><span id="extract_speech_rate-209"><a href="#extract_speech_rate-209"><span class="linenos">209</span></a>            <span class="n">t</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">point_process</span><span class="p">,</span> <span class="s2">&quot;Get time from index&quot;</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="extract_speech_rate-210"><a href="#extract_speech_rate-210"><span class="linenos">210</span></a>
</span><span id="extract_speech_rate-211"><a href="#extract_speech_rate-211"><span class="linenos">211</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="extract_speech_rate-212"><a href="#extract_speech_rate-212"><span class="linenos">212</span></a>        <span class="c1"># Find the time and values of all peaks</span>
</span><span id="extract_speech_rate-213"><a href="#extract_speech_rate-213"><span class="linenos">213</span></a>
</span><span id="extract_speech_rate-214"><a href="#extract_speech_rate-214"><span class="linenos">214</span></a>        <span class="c1"># fill array with intensity values</span>
</span><span id="extract_speech_rate-215"><a href="#extract_speech_rate-215"><span class="linenos">215</span></a>        <span class="n">timepeaks</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="extract_speech_rate-216"><a href="#extract_speech_rate-216"><span class="linenos">216</span></a>        <span class="n">peakcount</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="extract_speech_rate-217"><a href="#extract_speech_rate-217"><span class="linenos">217</span></a>        <span class="n">intensities</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="extract_speech_rate-218"><a href="#extract_speech_rate-218"><span class="linenos">218</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numpeaks</span><span class="p">):</span>
</span><span id="extract_speech_rate-219"><a href="#extract_speech_rate-219"><span class="linenos">219</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">sound_from_intensity_matrix</span><span class="p">,</span> <span class="s2">&quot;Get value at time&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;Cubic&quot;</span><span class="p">)</span>
</span><span id="extract_speech_rate-220"><a href="#extract_speech_rate-220"><span class="linenos">220</span></a>            <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="n">silence_db_1</span><span class="p">:</span>
</span><span id="extract_speech_rate-221"><a href="#extract_speech_rate-221"><span class="linenos">221</span></a>                <span class="n">peakcount</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="extract_speech_rate-222"><a href="#extract_speech_rate-222"><span class="linenos">222</span></a>                <span class="n">intensities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="extract_speech_rate-223"><a href="#extract_speech_rate-223"><span class="linenos">223</span></a>                <span class="n">timepeaks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="extract_speech_rate-224"><a href="#extract_speech_rate-224"><span class="linenos">224</span></a>
</span><span id="extract_speech_rate-225"><a href="#extract_speech_rate-225"><span class="linenos">225</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="extract_speech_rate-226"><a href="#extract_speech_rate-226"><span class="linenos">226</span></a>        <span class="c1"># Now find all valid peaks</span>
</span><span id="extract_speech_rate-227"><a href="#extract_speech_rate-227"><span class="linenos">227</span></a>
</span><span id="extract_speech_rate-228"><a href="#extract_speech_rate-228"><span class="linenos">228</span></a>        <span class="c1"># fill array with valid peaks: only intensity values if preceding</span>
</span><span id="extract_speech_rate-229"><a href="#extract_speech_rate-229"><span class="linenos">229</span></a>        <span class="c1"># dip in intensity is greater than min_dip</span>
</span><span id="extract_speech_rate-230"><a href="#extract_speech_rate-230"><span class="linenos">230</span></a>        <span class="n">validpeakcount</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="extract_speech_rate-231"><a href="#extract_speech_rate-231"><span class="linenos">231</span></a>        <span class="n">currenttime</span> <span class="o">=</span> <span class="n">timepeaks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="extract_speech_rate-232"><a href="#extract_speech_rate-232"><span class="linenos">232</span></a>        <span class="n">currentint</span> <span class="o">=</span> <span class="n">intensities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="extract_speech_rate-233"><a href="#extract_speech_rate-233"><span class="linenos">233</span></a>        <span class="n">validtime</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="extract_speech_rate-234"><a href="#extract_speech_rate-234"><span class="linenos">234</span></a>
</span><span id="extract_speech_rate-235"><a href="#extract_speech_rate-235"><span class="linenos">235</span></a>        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">peakcount</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="extract_speech_rate-236"><a href="#extract_speech_rate-236"><span class="linenos">236</span></a>            <span class="n">following</span> <span class="o">=</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="extract_speech_rate-237"><a href="#extract_speech_rate-237"><span class="linenos">237</span></a>            <span class="n">followingtime</span> <span class="o">=</span> <span class="n">timepeaks</span><span class="p">[</span><span class="n">following</span><span class="p">]</span>
</span><span id="extract_speech_rate-238"><a href="#extract_speech_rate-238"><span class="linenos">238</span></a>            <span class="n">dip</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="extract_speech_rate-239"><a href="#extract_speech_rate-239"><span class="linenos">239</span></a>                <span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get minimum&quot;</span><span class="p">,</span> <span class="n">currenttime</span><span class="p">,</span> <span class="n">followingtime</span><span class="p">,</span> <span class="s2">&quot;None&quot;</span>
</span><span id="extract_speech_rate-240"><a href="#extract_speech_rate-240"><span class="linenos">240</span></a>            <span class="p">)</span>  <span class="c1"># Gets minimiun value between two time points, doesn&#39;t intepolote/filter</span>
</span><span id="extract_speech_rate-241"><a href="#extract_speech_rate-241"><span class="linenos">241</span></a>            <span class="n">diffint</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">currentint</span> <span class="o">-</span> <span class="n">dip</span><span class="p">)</span>
</span><span id="extract_speech_rate-242"><a href="#extract_speech_rate-242"><span class="linenos">242</span></a>            <span class="k">if</span> <span class="n">diffint</span> <span class="o">&gt;</span> <span class="n">min_dip</span><span class="p">:</span>
</span><span id="extract_speech_rate-243"><a href="#extract_speech_rate-243"><span class="linenos">243</span></a>                <span class="n">validpeakcount</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="extract_speech_rate-244"><a href="#extract_speech_rate-244"><span class="linenos">244</span></a>                <span class="n">validtime</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timepeaks</span><span class="p">[</span><span class="n">p</span><span class="p">])</span>
</span><span id="extract_speech_rate-245"><a href="#extract_speech_rate-245"><span class="linenos">245</span></a>            <span class="c1"># Update current time and intensity values for next loop</span>
</span><span id="extract_speech_rate-246"><a href="#extract_speech_rate-246"><span class="linenos">246</span></a>            <span class="n">currenttime</span> <span class="o">=</span> <span class="n">timepeaks</span><span class="p">[</span><span class="n">following</span><span class="p">]</span>
</span><span id="extract_speech_rate-247"><a href="#extract_speech_rate-247"><span class="linenos">247</span></a>            <span class="n">currentint</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get value at time&quot;</span><span class="p">,</span> <span class="n">timepeaks</span><span class="p">[</span><span class="n">following</span><span class="p">],</span> <span class="s2">&quot;Cubic&quot;</span><span class="p">)</span>
</span><span id="extract_speech_rate-248"><a href="#extract_speech_rate-248"><span class="linenos">248</span></a>
</span><span id="extract_speech_rate-249"><a href="#extract_speech_rate-249"><span class="linenos">249</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="extract_speech_rate-250"><a href="#extract_speech_rate-250"><span class="linenos">250</span></a>        <span class="c1"># Extract voicing information</span>
</span><span id="extract_speech_rate-251"><a href="#extract_speech_rate-251"><span class="linenos">251</span></a>
</span><span id="extract_speech_rate-252"><a href="#extract_speech_rate-252"><span class="linenos">252</span></a>        <span class="n">pitch</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_ac</span><span class="p">(</span><span class="mf">0.02</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mi">450</span><span class="p">)</span>
</span><span id="extract_speech_rate-253"><a href="#extract_speech_rate-253"><span class="linenos">253</span></a>        <span class="c1"># Praat page for hyperparamters https://www.fon.hum.uva.nl/praat/manual/Sound__To_Pitch__ac____.html</span>
</span><span id="extract_speech_rate-254"><a href="#extract_speech_rate-254"><span class="linenos">254</span></a>        <span class="c1"># From de Jong&#39;s 2009 paper - We extract the pitch contour, this time using a window size of 100 msec</span>
</span><span id="extract_speech_rate-255"><a href="#extract_speech_rate-255"><span class="linenos">255</span></a>        <span class="c1"># and 20-msec time steps, and exclude all peaks that are unvoiced</span>
</span><span id="extract_speech_rate-256"><a href="#extract_speech_rate-256"><span class="linenos">256</span></a>        <span class="c1"># Key Hyperparamter are different to praat recommended - can&#39;t find a reason for this</span>
</span><span id="extract_speech_rate-257"><a href="#extract_speech_rate-257"><span class="linenos">257</span></a>        <span class="c1"># time_step: Optional[Positive[float]] = None,  - set per De jong&#39;s recommendation</span>
</span><span id="extract_speech_rate-258"><a href="#extract_speech_rate-258"><span class="linenos">258</span></a>        <span class="c1"># pitch_floor: Positive[float] = 75.0 set per dejong recommendation - 3/30 gives 100ms</span>
</span><span id="extract_speech_rate-259"><a href="#extract_speech_rate-259"><span class="linenos">259</span></a>        <span class="c1"># max_number_of_candidates: Positive[int] = 15 (can&#39;t find a reason for this value being lower)</span>
</span><span id="extract_speech_rate-260"><a href="#extract_speech_rate-260"><span class="linenos">260</span></a>        <span class="c1"># very_accurate: bool = False,</span>
</span><span id="extract_speech_rate-261"><a href="#extract_speech_rate-261"><span class="linenos">261</span></a>        <span class="c1"># silence_threshold: float = 0.03,</span>
</span><span id="extract_speech_rate-262"><a href="#extract_speech_rate-262"><span class="linenos">262</span></a>        <span class="c1"># voicing_threshold: float = 0.45, (can&#39;t find a reason for this value being different)</span>
</span><span id="extract_speech_rate-263"><a href="#extract_speech_rate-263"><span class="linenos">263</span></a>        <span class="c1"># octave_cost: float = 0.01,</span>
</span><span id="extract_speech_rate-264"><a href="#extract_speech_rate-264"><span class="linenos">264</span></a>        <span class="c1"># octave_jump_cost: float = 0.35,</span>
</span><span id="extract_speech_rate-265"><a href="#extract_speech_rate-265"><span class="linenos">265</span></a>        <span class="c1"># voiced_unvoiced_cost: float = 0.14, (can&#39;t find a reason for this value being different)</span>
</span><span id="extract_speech_rate-266"><a href="#extract_speech_rate-266"><span class="linenos">266</span></a>        <span class="c1"># pitch_ceiling: Positive[float] = 600.0 (can&#39;t find a reason for this value being lower, might change to value</span>
</span><span id="extract_speech_rate-267"><a href="#extract_speech_rate-267"><span class="linenos">267</span></a>        <span class="c1"># from pitch_value function)</span>
</span><span id="extract_speech_rate-268"><a href="#extract_speech_rate-268"><span class="linenos">268</span></a>
</span><span id="extract_speech_rate-269"><a href="#extract_speech_rate-269"><span class="linenos">269</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="extract_speech_rate-270"><a href="#extract_speech_rate-270"><span class="linenos">270</span></a>        <span class="c1"># Loop through valid peaks, count ones that are voiced (i.e., have valid pitch value at the same time)</span>
</span><span id="extract_speech_rate-271"><a href="#extract_speech_rate-271"><span class="linenos">271</span></a>
</span><span id="extract_speech_rate-272"><a href="#extract_speech_rate-272"><span class="linenos">272</span></a>        <span class="n">number_syllables</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="extract_speech_rate-273"><a href="#extract_speech_rate-273"><span class="linenos">273</span></a>        <span class="k">for</span> <span class="n">time</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">validpeakcount</span><span class="p">):</span>
</span><span id="extract_speech_rate-274"><a href="#extract_speech_rate-274"><span class="linenos">274</span></a>            <span class="n">querytime</span> <span class="o">=</span> <span class="n">validtime</span><span class="p">[</span><span class="n">time</span><span class="p">]</span>
</span><span id="extract_speech_rate-275"><a href="#extract_speech_rate-275"><span class="linenos">275</span></a>            <span class="n">whichinterval</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">textgrid</span><span class="p">,</span> <span class="s2">&quot;Get interval at time&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">querytime</span><span class="p">)</span>
</span><span id="extract_speech_rate-276"><a href="#extract_speech_rate-276"><span class="linenos">276</span></a>            <span class="n">whichlabel</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">textgrid</span><span class="p">,</span> <span class="s2">&quot;Get label of interval&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">whichinterval</span><span class="p">)</span>
</span><span id="extract_speech_rate-277"><a href="#extract_speech_rate-277"><span class="linenos">277</span></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">pitch</span><span class="o">.</span><span class="n">get_value_at_time</span><span class="p">(</span><span class="n">querytime</span><span class="p">)</span>
</span><span id="extract_speech_rate-278"><a href="#extract_speech_rate-278"><span class="linenos">278</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
</span><span id="extract_speech_rate-279"><a href="#extract_speech_rate-279"><span class="linenos">279</span></a>                <span class="k">if</span> <span class="n">whichlabel</span> <span class="o">==</span> <span class="s2">&quot;sounding&quot;</span><span class="p">:</span>
</span><span id="extract_speech_rate-280"><a href="#extract_speech_rate-280"><span class="linenos">280</span></a>                    <span class="n">number_syllables</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="extract_speech_rate-281"><a href="#extract_speech_rate-281"><span class="linenos">281</span></a>
</span><span id="extract_speech_rate-282"><a href="#extract_speech_rate-282"><span class="linenos">282</span></a>        <span class="c1"># ______________________________________________________________________________________________________________</span>
</span><span id="extract_speech_rate-283"><a href="#extract_speech_rate-283"><span class="linenos">283</span></a>        <span class="c1"># return results</span>
</span><span id="extract_speech_rate-284"><a href="#extract_speech_rate-284"><span class="linenos">284</span></a>
</span><span id="extract_speech_rate-285"><a href="#extract_speech_rate-285"><span class="linenos">285</span></a>        <span class="n">original_dur</span> <span class="o">=</span> <span class="n">end_speak</span> <span class="o">-</span> <span class="n">begin_speak</span>
</span><span id="extract_speech_rate-286"><a href="#extract_speech_rate-286"><span class="linenos">286</span></a>
</span><span id="extract_speech_rate-287"><a href="#extract_speech_rate-287"><span class="linenos">287</span></a>        <span class="n">speaking_rate</span> <span class="o">=</span> <span class="n">number_syllables</span> <span class="o">/</span> <span class="n">original_dur</span>
</span><span id="extract_speech_rate-288"><a href="#extract_speech_rate-288"><span class="linenos">288</span></a>        <span class="n">articulation_rate</span> <span class="o">=</span> <span class="n">number_syllables</span> <span class="o">/</span> <span class="n">phonation_time</span>
</span><span id="extract_speech_rate-289"><a href="#extract_speech_rate-289"><span class="linenos">289</span></a>        <span class="n">phonation_ratio</span> <span class="o">=</span> <span class="n">phonation_time</span> <span class="o">/</span> <span class="n">original_dur</span>
</span><span id="extract_speech_rate-290"><a href="#extract_speech_rate-290"><span class="linenos">290</span></a>
</span><span id="extract_speech_rate-291"><a href="#extract_speech_rate-291"><span class="linenos">291</span></a>        <span class="n">number_pauses</span> <span class="o">=</span> <span class="n">npauses</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="extract_speech_rate-292"><a href="#extract_speech_rate-292"><span class="linenos">292</span></a>        <span class="n">pause_time</span> <span class="o">=</span> <span class="n">original_dur</span> <span class="o">-</span> <span class="n">phonation_time</span>
</span><span id="extract_speech_rate-293"><a href="#extract_speech_rate-293"><span class="linenos">293</span></a>
</span><span id="extract_speech_rate-294"><a href="#extract_speech_rate-294"><span class="linenos">294</span></a>        <span class="n">pause_rate</span> <span class="o">=</span> <span class="n">number_pauses</span> <span class="o">/</span> <span class="n">original_dur</span>
</span><span id="extract_speech_rate-295"><a href="#extract_speech_rate-295"><span class="linenos">295</span></a>        <span class="n">mean_pause_dur</span> <span class="o">=</span> <span class="n">pause_time</span> <span class="o">/</span> <span class="n">number_pauses</span> <span class="k">if</span> <span class="n">number_pauses</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">0.0</span>
</span><span id="extract_speech_rate-296"><a href="#extract_speech_rate-296"><span class="linenos">296</span></a>
</span><span id="extract_speech_rate-297"><a href="#extract_speech_rate-297"><span class="linenos">297</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="extract_speech_rate-298"><a href="#extract_speech_rate-298"><span class="linenos">298</span></a>            <span class="s2">&quot;speaking_rate&quot;</span><span class="p">:</span> <span class="n">speaking_rate</span><span class="p">,</span>
</span><span id="extract_speech_rate-299"><a href="#extract_speech_rate-299"><span class="linenos">299</span></a>            <span class="s2">&quot;articulation_rate&quot;</span><span class="p">:</span> <span class="n">articulation_rate</span><span class="p">,</span>
</span><span id="extract_speech_rate-300"><a href="#extract_speech_rate-300"><span class="linenos">300</span></a>            <span class="s2">&quot;phonation_ratio&quot;</span><span class="p">:</span> <span class="n">phonation_ratio</span><span class="p">,</span>
</span><span id="extract_speech_rate-301"><a href="#extract_speech_rate-301"><span class="linenos">301</span></a>            <span class="s2">&quot;pause_rate&quot;</span><span class="p">:</span> <span class="n">pause_rate</span><span class="p">,</span>
</span><span id="extract_speech_rate-302"><a href="#extract_speech_rate-302"><span class="linenos">302</span></a>            <span class="s2">&quot;mean_pause_dur&quot;</span><span class="p">:</span> <span class="n">mean_pause_dur</span><span class="p">,</span>
</span><span id="extract_speech_rate-303"><a href="#extract_speech_rate-303"><span class="linenos">303</span></a>        <span class="p">}</span>
</span><span id="extract_speech_rate-304"><a href="#extract_speech_rate-304"><span class="linenos">304</span></a>
</span><span id="extract_speech_rate-305"><a href="#extract_speech_rate-305"><span class="linenos">305</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_speech_rate-306"><a href="#extract_speech_rate-306"><span class="linenos">306</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_speech_rate-307"><a href="#extract_speech_rate-307"><span class="linenos">307</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_speech_rate-308"><a href="#extract_speech_rate-308"><span class="linenos">308</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_speech_rate-309"><a href="#extract_speech_rate-309"><span class="linenos">309</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_speech_rate-310"><a href="#extract_speech_rate-310"><span class="linenos">310</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="extract_speech_rate-311"><a href="#extract_speech_rate-311"><span class="linenos">311</span></a>            <span class="s2">&quot;speaking_rate&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_speech_rate-312"><a href="#extract_speech_rate-312"><span class="linenos">312</span></a>            <span class="s2">&quot;articulation_rate&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_speech_rate-313"><a href="#extract_speech_rate-313"><span class="linenos">313</span></a>            <span class="s2">&quot;phonation_ratio&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_speech_rate-314"><a href="#extract_speech_rate-314"><span class="linenos">314</span></a>            <span class="s2">&quot;pause_rate&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_speech_rate-315"><a href="#extract_speech_rate-315"><span class="linenos">315</span></a>            <span class="s2">&quot;mean_pause_dur&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_speech_rate-316"><a href="#extract_speech_rate-316"><span class="linenos">316</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Extract speech timing and pausing features from a given sound object.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object or a file path or an Audio object.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Dict[str, float]: A dictionary containing the following features:</p>

<pre><code>- speaking_rate (float): Number of syllables divided by duration.
- articulation_rate (float): Number of syllables divided by phonation time.
- phonation_ratio (float): Phonation time divided by duration.
- pause_rate (float): Number of pauses divided by duration.
- mean_pause_dur (float): Total time pausing divided by the number of identified pauses.
</code></pre>
</blockquote>

<h6 id="examples">Examples:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">snd</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="s2">&quot;path_to_audio.wav&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">extract_speech_rate</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;speaking_rate&#39;</span><span class="p">:</span> <span class="mf">5.3</span><span class="p">,</span>
    <span class="s1">&#39;articulation_rate&#39;</span><span class="p">:</span> <span class="mf">4.7</span><span class="p">,</span>
    <span class="s1">&#39;phonation_ratio&#39;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span>
    <span class="s1">&#39;pause_rate&#39;</span><span class="p">:</span> <span class="mf">2.1</span><span class="p">,</span>
    <span class="s1">&#39;mean_pause_dur&#39;</span><span class="p">:</span> <span class="mf">0.5</span>
<span class="p">}</span>
</code></pre>
  </div>
</blockquote>

<h6 id="useful-sources-for-this-code">Useful sources for this code:</h6>

<blockquote>
  <ul>
  <li><a href="https://sites.google.com/view/uhm-o-meter/scripts/syllablenuclei_v3?pli=1">https://sites.google.com/view/uhm-o-meter/scripts/syllablenuclei_v3?pli=1</a></li>
  <li><a href="https://drive.google.com/file/d/1o3mNdN5FKTiYQC9GHB1XoZ8JJIGZk_AK/view">https://drive.google.com/file/d/1o3mNdN5FKTiYQC9GHB1XoZ8JJIGZk_AK/view</a></li>
  <li>(2009 paper) <a href="https://doi.org/10.3758/BRM.41.2.385">https://doi.org/10.3758/BRM.41.2.385</a></li>
  <li>(2021 paper) <a href="https://doi.org/10.1080/0969594X.2021.1951162">https://doi.org/10.1080/0969594X.2021.1951162</a></li>
  </ul>
</blockquote>
</div>


                </section>
                <section id="extract_pitch_values">
                            <input id="extract_pitch_values-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_pitch_values</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="extract_pitch_values-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_pitch_values"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_pitch_values-319"><a href="#extract_pitch_values-319"><span class="linenos">319</span></a><span class="k">def</span> <span class="nf">extract_pitch_values</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="extract_pitch_values-320"><a href="#extract_pitch_values-320"><span class="linenos">320</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Estimate Pitch Range.</span>
</span><span id="extract_pitch_values-321"><a href="#extract_pitch_values-321"><span class="linenos">321</span></a>
</span><span id="extract_pitch_values-322"><a href="#extract_pitch_values-322"><span class="linenos">322</span></a><span class="sd">    Calculates the mean pitch using a wide range and uses this to shorten the range for future pitch extraction</span>
</span><span id="extract_pitch_values-323"><a href="#extract_pitch_values-323"><span class="linenos">323</span></a><span class="sd">    algorithms.</span>
</span><span id="extract_pitch_values-324"><a href="#extract_pitch_values-324"><span class="linenos">324</span></a>
</span><span id="extract_pitch_values-325"><a href="#extract_pitch_values-325"><span class="linenos">325</span></a><span class="sd">    Args:</span>
</span><span id="extract_pitch_values-326"><a href="#extract_pitch_values-326"><span class="linenos">326</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="extract_pitch_values-327"><a href="#extract_pitch_values-327"><span class="linenos">327</span></a>
</span><span id="extract_pitch_values-328"><a href="#extract_pitch_values-328"><span class="linenos">328</span></a><span class="sd">    Returns:</span>
</span><span id="extract_pitch_values-329"><a href="#extract_pitch_values-329"><span class="linenos">329</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="extract_pitch_values-330"><a href="#extract_pitch_values-330"><span class="linenos">330</span></a>
</span><span id="extract_pitch_values-331"><a href="#extract_pitch_values-331"><span class="linenos">331</span></a><span class="sd">            - pitch_floor (float): The lowest pitch value to use in future pitch extraction algorithms.</span>
</span><span id="extract_pitch_values-332"><a href="#extract_pitch_values-332"><span class="linenos">332</span></a><span class="sd">            - pitch_ceiling (float): The highest pitch value to use in future pitch extraction algorithms.</span>
</span><span id="extract_pitch_values-333"><a href="#extract_pitch_values-333"><span class="linenos">333</span></a>
</span><span id="extract_pitch_values-334"><a href="#extract_pitch_values-334"><span class="linenos">334</span></a><span class="sd">    Notes:</span>
</span><span id="extract_pitch_values-335"><a href="#extract_pitch_values-335"><span class="linenos">335</span></a><span class="sd">        Values are taken from: [Standardization of pitch-range settings in voice acoustic analysis](https://doi.org/10.3758/BRM.41.2.318)</span>
</span><span id="extract_pitch_values-336"><a href="#extract_pitch_values-336"><span class="linenos">336</span></a>
</span><span id="extract_pitch_values-337"><a href="#extract_pitch_values-337"><span class="linenos">337</span></a><span class="sd">        The problem observed with doing a really broad pitch search was the occasional error if F1 was low.</span>
</span><span id="extract_pitch_values-338"><a href="#extract_pitch_values-338"><span class="linenos">338</span></a><span class="sd">        So crude outlier detection is used to help with this.</span>
</span><span id="extract_pitch_values-339"><a href="#extract_pitch_values-339"><span class="linenos">339</span></a>
</span><span id="extract_pitch_values-340"><a href="#extract_pitch_values-340"><span class="linenos">340</span></a><span class="sd">        Important: These values are used within other functions, they are not outputs of the full code.</span>
</span><span id="extract_pitch_values-341"><a href="#extract_pitch_values-341"><span class="linenos">341</span></a>
</span><span id="extract_pitch_values-342"><a href="#extract_pitch_values-342"><span class="linenos">342</span></a><span class="sd">        Different pitch extraction methods in Praat:</span>
</span><span id="extract_pitch_values-343"><a href="#extract_pitch_values-343"><span class="linenos">343</span></a>
</span><span id="extract_pitch_values-344"><a href="#extract_pitch_values-344"><span class="linenos">344</span></a><span class="sd">        - Cross-correlation (Praat default) vs auto-correlation pitch extraction:</span>
</span><span id="extract_pitch_values-345"><a href="#extract_pitch_values-345"><span class="linenos">345</span></a><span class="sd">        both are used in different functions below.</span>
</span><span id="extract_pitch_values-346"><a href="#extract_pitch_values-346"><span class="linenos">346</span></a><span class="sd">        - Cross-correlation is better than auto-correlation at finding period-level variation,</span>
</span><span id="extract_pitch_values-347"><a href="#extract_pitch_values-347"><span class="linenos">347</span></a><span class="sd">        such as jitter and shimmer, whereas auto-correlation is better at finding intended intonation contours.</span>
</span><span id="extract_pitch_values-348"><a href="#extract_pitch_values-348"><span class="linenos">348</span></a><span class="sd">        - [Discussion on this on a Praat Forum](https://groups.io/g/Praat-Users-List/topic/pitch_detection_ac_vs_cc/78829266?p=,,,20,0,0,0::recentpostdate/sticky,,,20,2,20,78829266,previd=1612369050729515119,nextid=1605568402827788039&amp;previd=1612369050729515119&amp;nextid=1605568402827788039)</span>
</span><span id="extract_pitch_values-349"><a href="#extract_pitch_values-349"><span class="linenos">349</span></a>
</span><span id="extract_pitch_values-350"><a href="#extract_pitch_values-350"><span class="linenos">350</span></a><span class="sd">    Examples:</span>
</span><span id="extract_pitch_values-351"><a href="#extract_pitch_values-351"><span class="linenos">351</span></a><span class="sd">        ```python</span>
</span><span id="extract_pitch_values-352"><a href="#extract_pitch_values-352"><span class="linenos">352</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="extract_pitch_values-353"><a href="#extract_pitch_values-353"><span class="linenos">353</span></a><span class="sd">        &gt;&gt;&gt; pitch_values(snd)</span>
</span><span id="extract_pitch_values-354"><a href="#extract_pitch_values-354"><span class="linenos">354</span></a><span class="sd">        {&#39;pitch_floor&#39;: 60, &#39;pitch_ceiling&#39;: 250}</span>
</span><span id="extract_pitch_values-355"><a href="#extract_pitch_values-355"><span class="linenos">355</span></a><span class="sd">        ```</span>
</span><span id="extract_pitch_values-356"><a href="#extract_pitch_values-356"><span class="linenos">356</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_pitch_values-357"><a href="#extract_pitch_values-357"><span class="linenos">357</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_pitch_values-358"><a href="#extract_pitch_values-358"><span class="linenos">358</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="extract_pitch_values-359"><a href="#extract_pitch_values-359"><span class="linenos">359</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="extract_pitch_values-360"><a href="#extract_pitch_values-360"><span class="linenos">360</span></a>
</span><span id="extract_pitch_values-361"><a href="#extract_pitch_values-361"><span class="linenos">361</span></a>        <span class="n">pitch_wide</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_ac</span><span class="p">(</span><span class="n">time_step</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span> <span class="n">pitch_floor</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">pitch_ceiling</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</span><span id="extract_pitch_values-362"><a href="#extract_pitch_values-362"><span class="linenos">362</span></a>        <span class="c1"># Other than values above, I&#39;m using default hyperparamters</span>
</span><span id="extract_pitch_values-363"><a href="#extract_pitch_values-363"><span class="linenos">363</span></a>        <span class="c1"># Details: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Pitch__ac____.html</span>
</span><span id="extract_pitch_values-364"><a href="#extract_pitch_values-364"><span class="linenos">364</span></a>
</span><span id="extract_pitch_values-365"><a href="#extract_pitch_values-365"><span class="linenos">365</span></a>        <span class="c1"># remove outliers from wide pitch search</span>
</span><span id="extract_pitch_values-366"><a href="#extract_pitch_values-366"><span class="linenos">366</span></a>        <span class="n">pitch_values</span> <span class="o">=</span> <span class="n">pitch_wide</span><span class="o">.</span><span class="n">selected_array</span><span class="p">[</span><span class="s2">&quot;frequency&quot;</span><span class="p">]</span>
</span><span id="extract_pitch_values-367"><a href="#extract_pitch_values-367"><span class="linenos">367</span></a>        <span class="n">pitch_values</span> <span class="o">=</span> <span class="n">pitch_values</span><span class="p">[</span><span class="n">pitch_values</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="extract_pitch_values-368"><a href="#extract_pitch_values-368"><span class="linenos">368</span></a>        <span class="n">pitch_values_Z</span> <span class="o">=</span> <span class="p">(</span><span class="n">pitch_values</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">pitch_values</span><span class="p">))</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">pitch_values</span><span class="p">)</span>
</span><span id="extract_pitch_values-369"><a href="#extract_pitch_values-369"><span class="linenos">369</span></a>        <span class="n">pitch_values_filtered</span> <span class="o">=</span> <span class="n">pitch_values</span><span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">pitch_values_Z</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">]</span>
</span><span id="extract_pitch_values-370"><a href="#extract_pitch_values-370"><span class="linenos">370</span></a>
</span><span id="extract_pitch_values-371"><a href="#extract_pitch_values-371"><span class="linenos">371</span></a>        <span class="n">mean_pitch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">pitch_values_filtered</span><span class="p">)</span>
</span><span id="extract_pitch_values-372"><a href="#extract_pitch_values-372"><span class="linenos">372</span></a>
</span><span id="extract_pitch_values-373"><a href="#extract_pitch_values-373"><span class="linenos">373</span></a>        <span class="c1"># Here there is an interesting alternative solution to discuss: https://praatscripting.lingphon.net/conditionals-1.html</span>
</span><span id="extract_pitch_values-374"><a href="#extract_pitch_values-374"><span class="linenos">374</span></a>        <span class="k">if</span> <span class="n">mean_pitch</span> <span class="o">&lt;</span> <span class="mi">170</span><span class="p">:</span>
</span><span id="extract_pitch_values-375"><a href="#extract_pitch_values-375"><span class="linenos">375</span></a>            <span class="c1"># &#39;male&#39; settings</span>
</span><span id="extract_pitch_values-376"><a href="#extract_pitch_values-376"><span class="linenos">376</span></a>            <span class="n">pitch_floor</span> <span class="o">=</span> <span class="mf">60.0</span>
</span><span id="extract_pitch_values-377"><a href="#extract_pitch_values-377"><span class="linenos">377</span></a>            <span class="n">pitch_ceiling</span> <span class="o">=</span> <span class="mf">250.0</span>
</span><span id="extract_pitch_values-378"><a href="#extract_pitch_values-378"><span class="linenos">378</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="extract_pitch_values-379"><a href="#extract_pitch_values-379"><span class="linenos">379</span></a>            <span class="c1"># &#39;female&#39; and &#39;child&#39; settings</span>
</span><span id="extract_pitch_values-380"><a href="#extract_pitch_values-380"><span class="linenos">380</span></a>            <span class="n">pitch_floor</span> <span class="o">=</span> <span class="mf">100.0</span>
</span><span id="extract_pitch_values-381"><a href="#extract_pitch_values-381"><span class="linenos">381</span></a>            <span class="n">pitch_ceiling</span> <span class="o">=</span> <span class="mf">500.0</span>
</span><span id="extract_pitch_values-382"><a href="#extract_pitch_values-382"><span class="linenos">382</span></a>
</span><span id="extract_pitch_values-383"><a href="#extract_pitch_values-383"><span class="linenos">383</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;pitch_floor&quot;</span><span class="p">:</span> <span class="n">pitch_floor</span><span class="p">,</span> <span class="s2">&quot;pitch_ceiling&quot;</span><span class="p">:</span> <span class="n">pitch_ceiling</span><span class="p">}</span>
</span><span id="extract_pitch_values-384"><a href="#extract_pitch_values-384"><span class="linenos">384</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_pitch_values-385"><a href="#extract_pitch_values-385"><span class="linenos">385</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_pitch_values-386"><a href="#extract_pitch_values-386"><span class="linenos">386</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_pitch_values-387"><a href="#extract_pitch_values-387"><span class="linenos">387</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_pitch_values-388"><a href="#extract_pitch_values-388"><span class="linenos">388</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_pitch_values-389"><a href="#extract_pitch_values-389"><span class="linenos">389</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;pitch_floor&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;pitch_ceiling&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Estimate Pitch Range.</p>

<p>Calculates the mean pitch using a wide range and uses this to shorten the range for future pitch extraction
algorithms.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object or a file path or an Audio object.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>dict: A dictionary containing the following keys:</p>

<pre><code>- pitch_floor (float): The lowest pitch value to use in future pitch extraction algorithms.
- pitch_ceiling (float): The highest pitch value to use in future pitch extraction algorithms.
</code></pre>
</blockquote>

<h6 id="notes">Notes:</h6>

<blockquote>
  <p>Values are taken from: <a href="https://doi.org/10.3758/BRM.41.2.318">Standardization of pitch-range settings in voice acoustic analysis</a></p>
  
  <p>The problem observed with doing a really broad pitch search was the occasional error if F1 was low.
  So crude outlier detection is used to help with this.</p>
  
  <p>Important: These values are used within other functions, they are not outputs of the full code.</p>
  
  <p>Different pitch extraction methods in Praat:</p>
  
  <ul>
  <li>Cross-correlation (Praat default) vs auto-correlation pitch extraction:
  both are used in different functions below.</li>
  <li>Cross-correlation is better than auto-correlation at finding period-level variation,
  such as jitter and shimmer, whereas auto-correlation is better at finding intended intonation contours.</li>
  <li><a href="https://groups.io/g/Praat-Users-List/topic/pitch_detection_ac_vs_cc/78829266?p=,,,20,0,0,0::recentpostdate/sticky,,,20,2,20,78829266,previd=1612369050729515119,nextid=1605568402827788039&previd=1612369050729515119&nextid=1605568402827788039">Discussion on this on a Praat Forum</a></li>
  </ul>
</blockquote>

<h6 id="examples">Examples:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">snd</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="s2">&quot;path_to_audio.wav&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pitch_values</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;pitch_floor&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s1">&#39;pitch_ceiling&#39;</span><span class="p">:</span> <span class="mi">250</span><span class="p">}</span>
</code></pre>
  </div>
</blockquote>
</div>


                </section>
                <section id="extract_pitch_descriptors">
                            <input id="extract_pitch_descriptors-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_pitch_descriptors</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">floor</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.005</span>,</span><span class="param">	<span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Hertz&#39;</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="extract_pitch_descriptors-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_pitch_descriptors"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_pitch_descriptors-392"><a href="#extract_pitch_descriptors-392"><span class="linenos">392</span></a><span class="k">def</span> <span class="nf">extract_pitch_descriptors</span><span class="p">(</span>
</span><span id="extract_pitch_descriptors-393"><a href="#extract_pitch_descriptors-393"><span class="linenos">393</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span>
</span><span id="extract_pitch_descriptors-394"><a href="#extract_pitch_descriptors-394"><span class="linenos">394</span></a>    <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="extract_pitch_descriptors-395"><a href="#extract_pitch_descriptors-395"><span class="linenos">395</span></a>    <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="extract_pitch_descriptors-396"><a href="#extract_pitch_descriptors-396"><span class="linenos">396</span></a>    <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.005</span><span class="p">,</span>
</span><span id="extract_pitch_descriptors-397"><a href="#extract_pitch_descriptors-397"><span class="linenos">397</span></a>    <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span>
</span><span id="extract_pitch_descriptors-398"><a href="#extract_pitch_descriptors-398"><span class="linenos">398</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="extract_pitch_descriptors-399"><a href="#extract_pitch_descriptors-399"><span class="linenos">399</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract Pitch Features.</span>
</span><span id="extract_pitch_descriptors-400"><a href="#extract_pitch_descriptors-400"><span class="linenos">400</span></a>
</span><span id="extract_pitch_descriptors-401"><a href="#extract_pitch_descriptors-401"><span class="linenos">401</span></a><span class="sd">    Function to extract key pitch features from a given sound object.</span>
</span><span id="extract_pitch_descriptors-402"><a href="#extract_pitch_descriptors-402"><span class="linenos">402</span></a><span class="sd">    This function uses the pitch_ac method as autocorrelation is better at finding intended intonation contours.</span>
</span><span id="extract_pitch_descriptors-403"><a href="#extract_pitch_descriptors-403"><span class="linenos">403</span></a>
</span><span id="extract_pitch_descriptors-404"><a href="#extract_pitch_descriptors-404"><span class="linenos">404</span></a><span class="sd">    Args:</span>
</span><span id="extract_pitch_descriptors-405"><a href="#extract_pitch_descriptors-405"><span class="linenos">405</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="extract_pitch_descriptors-406"><a href="#extract_pitch_descriptors-406"><span class="linenos">406</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="extract_pitch_descriptors-407"><a href="#extract_pitch_descriptors-407"><span class="linenos">407</span></a><span class="sd">        ceiling (float): Maximum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="extract_pitch_descriptors-408"><a href="#extract_pitch_descriptors-408"><span class="linenos">408</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new pitch value, typically set to 5 ms.</span>
</span><span id="extract_pitch_descriptors-409"><a href="#extract_pitch_descriptors-409"><span class="linenos">409</span></a><span class="sd">            Defaults to 0.005.</span>
</span><span id="extract_pitch_descriptors-410"><a href="#extract_pitch_descriptors-410"><span class="linenos">410</span></a><span class="sd">        unit (str, optional): The unit in which the pitch is returned. Defaults to &quot;Hertz&quot;.</span>
</span><span id="extract_pitch_descriptors-411"><a href="#extract_pitch_descriptors-411"><span class="linenos">411</span></a><span class="sd">            Could be &quot;semitones&quot;.</span>
</span><span id="extract_pitch_descriptors-412"><a href="#extract_pitch_descriptors-412"><span class="linenos">412</span></a>
</span><span id="extract_pitch_descriptors-413"><a href="#extract_pitch_descriptors-413"><span class="linenos">413</span></a><span class="sd">    Returns:</span>
</span><span id="extract_pitch_descriptors-414"><a href="#extract_pitch_descriptors-414"><span class="linenos">414</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="extract_pitch_descriptors-415"><a href="#extract_pitch_descriptors-415"><span class="linenos">415</span></a>
</span><span id="extract_pitch_descriptors-416"><a href="#extract_pitch_descriptors-416"><span class="linenos">416</span></a><span class="sd">            - mean_f0_{unit} (float): Mean pitch in {unit}.</span>
</span><span id="extract_pitch_descriptors-417"><a href="#extract_pitch_descriptors-417"><span class="linenos">417</span></a><span class="sd">            - stdev_f0_{unit} (float): Standard deviation in {unit}.</span>
</span><span id="extract_pitch_descriptors-418"><a href="#extract_pitch_descriptors-418"><span class="linenos">418</span></a>
</span><span id="extract_pitch_descriptors-419"><a href="#extract_pitch_descriptors-419"><span class="linenos">419</span></a><span class="sd">    Notes:</span>
</span><span id="extract_pitch_descriptors-420"><a href="#extract_pitch_descriptors-420"><span class="linenos">420</span></a><span class="sd">        - Uses pitch_ac as autocorrelation is better at finding intended intonation contours.</span>
</span><span id="extract_pitch_descriptors-421"><a href="#extract_pitch_descriptors-421"><span class="linenos">421</span></a><span class="sd">        - stdev_f0_semitone is used in DOI: 10.1080/02699200400008353, which used this as a marker for dysphonia.</span>
</span><span id="extract_pitch_descriptors-422"><a href="#extract_pitch_descriptors-422"><span class="linenos">422</span></a>
</span><span id="extract_pitch_descriptors-423"><a href="#extract_pitch_descriptors-423"><span class="linenos">423</span></a><span class="sd">    Examples:</span>
</span><span id="extract_pitch_descriptors-424"><a href="#extract_pitch_descriptors-424"><span class="linenos">424</span></a><span class="sd">        ```python</span>
</span><span id="extract_pitch_descriptors-425"><a href="#extract_pitch_descriptors-425"><span class="linenos">425</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="extract_pitch_descriptors-426"><a href="#extract_pitch_descriptors-426"><span class="linenos">426</span></a><span class="sd">        &gt;&gt;&gt; extract_pitch_descriptors(snd, 75, 500, 0.01, &quot;Hertz&quot;)</span>
</span><span id="extract_pitch_descriptors-427"><a href="#extract_pitch_descriptors-427"><span class="linenos">427</span></a><span class="sd">        {&#39;mean_f0_hertz&#39;: 220.5, &#39;stdev_f0_hertz&#39;: 2.5}</span>
</span><span id="extract_pitch_descriptors-428"><a href="#extract_pitch_descriptors-428"><span class="linenos">428</span></a><span class="sd">        ```</span>
</span><span id="extract_pitch_descriptors-429"><a href="#extract_pitch_descriptors-429"><span class="linenos">429</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_pitch_descriptors-430"><a href="#extract_pitch_descriptors-430"><span class="linenos">430</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_pitch_descriptors-431"><a href="#extract_pitch_descriptors-431"><span class="linenos">431</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="extract_pitch_descriptors-432"><a href="#extract_pitch_descriptors-432"><span class="linenos">432</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="extract_pitch_descriptors-433"><a href="#extract_pitch_descriptors-433"><span class="linenos">433</span></a>
</span><span id="extract_pitch_descriptors-434"><a href="#extract_pitch_descriptors-434"><span class="linenos">434</span></a>        <span class="c1"># Extract pitch object</span>
</span><span id="extract_pitch_descriptors-435"><a href="#extract_pitch_descriptors-435"><span class="linenos">435</span></a>        <span class="n">pitch</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_ac</span><span class="p">(</span><span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">pitch_floor</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">pitch_ceiling</span><span class="o">=</span><span class="n">ceiling</span><span class="p">)</span>
</span><span id="extract_pitch_descriptors-436"><a href="#extract_pitch_descriptors-436"><span class="linenos">436</span></a>        <span class="c1"># Other than values above, I&#39;m using default hyperparameters</span>
</span><span id="extract_pitch_descriptors-437"><a href="#extract_pitch_descriptors-437"><span class="linenos">437</span></a>        <span class="c1"># Details: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Pitch__ac____.html</span>
</span><span id="extract_pitch_descriptors-438"><a href="#extract_pitch_descriptors-438"><span class="linenos">438</span></a>
</span><span id="extract_pitch_descriptors-439"><a href="#extract_pitch_descriptors-439"><span class="linenos">439</span></a>        <span class="c1"># Extract mean, median, and standard deviation</span>
</span><span id="extract_pitch_descriptors-440"><a href="#extract_pitch_descriptors-440"><span class="linenos">440</span></a>        <span class="n">mean_f0</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="s2">&quot;Get mean&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span>  <span class="c1"># time range, units</span>
</span><span id="extract_pitch_descriptors-441"><a href="#extract_pitch_descriptors-441"><span class="linenos">441</span></a>        <span class="n">stdev_f0</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">pitch</span><span class="p">,</span> <span class="s2">&quot;Get standard deviation&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span>
</span><span id="extract_pitch_descriptors-442"><a href="#extract_pitch_descriptors-442"><span class="linenos">442</span></a>
</span><span id="extract_pitch_descriptors-443"><a href="#extract_pitch_descriptors-443"><span class="linenos">443</span></a>        <span class="c1"># Return results</span>
</span><span id="extract_pitch_descriptors-444"><a href="#extract_pitch_descriptors-444"><span class="linenos">444</span></a>        <span class="k">return</span> <span class="p">{</span><span class="sa">f</span><span class="s2">&quot;mean_f0_</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">mean_f0</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;stdev_f0_</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">stdev_f0</span><span class="p">}</span>
</span><span id="extract_pitch_descriptors-445"><a href="#extract_pitch_descriptors-445"><span class="linenos">445</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_pitch_descriptors-446"><a href="#extract_pitch_descriptors-446"><span class="linenos">446</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_pitch_descriptors-447"><a href="#extract_pitch_descriptors-447"><span class="linenos">447</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_pitch_descriptors-448"><a href="#extract_pitch_descriptors-448"><span class="linenos">448</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_pitch_descriptors-449"><a href="#extract_pitch_descriptors-449"><span class="linenos">449</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_pitch_descriptors-450"><a href="#extract_pitch_descriptors-450"><span class="linenos">450</span></a>        <span class="k">return</span> <span class="p">{</span><span class="sa">f</span><span class="s2">&quot;mean_f0_</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;stdev_f0_</span><span class="si">{</span><span class="n">unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Extract Pitch Features.</p>

<p>Function to extract key pitch features from a given sound object.
This function uses the pitch_ac method as autocorrelation is better at finding intended intonation contours.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object or a file path or an Audio object.</li>
<li><strong>floor (float):</strong>  Minimum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
<li><strong>ceiling (float):</strong>  Maximum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
<li><strong>frame_shift (float):</strong>  Time rate at which to extract a new pitch value, typically set to 5 ms.
Defaults to 0.005.</li>
<li><strong>unit (str, optional):</strong>  The unit in which the pitch is returned. Defaults to "Hertz".
Could be "semitones".</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>dict: A dictionary containing the following keys:</p>

<pre><code>- mean_f0_{unit} (float): Mean pitch in {unit}.
- stdev_f0_{unit} (float): Standard deviation in {unit}.
</code></pre>
</blockquote>

<h6 id="notes">Notes:</h6>

<blockquote>
  <ul>
  <li>Uses pitch_ac as autocorrelation is better at finding intended intonation contours.</li>
  <li>stdev_f0_semitone is used in DOI: 10.1080/02699200400008353, which used this as a marker for dysphonia.</li>
  </ul>
</blockquote>

<h6 id="examples">Examples:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">snd</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="s2">&quot;path_to_audio.wav&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">extract_pitch_descriptors</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;mean_f0_hertz&#39;</span><span class="p">:</span> <span class="mf">220.5</span><span class="p">,</span> <span class="s1">&#39;stdev_f0_hertz&#39;</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">}</span>
</code></pre>
  </div>
</blockquote>
</div>


                </section>
                <section id="extract_intensity_descriptors">
                            <input id="extract_intensity_descriptors-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_intensity_descriptors</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">floor</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="extract_intensity_descriptors-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_intensity_descriptors"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_intensity_descriptors-453"><a href="#extract_intensity_descriptors-453"><span class="linenos">453</span></a><span class="k">def</span> <span class="nf">extract_intensity_descriptors</span><span class="p">(</span>
</span><span id="extract_intensity_descriptors-454"><a href="#extract_intensity_descriptors-454"><span class="linenos">454</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="extract_intensity_descriptors-455"><a href="#extract_intensity_descriptors-455"><span class="linenos">455</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="extract_intensity_descriptors-456"><a href="#extract_intensity_descriptors-456"><span class="linenos">456</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract Intensity Features.</span>
</span><span id="extract_intensity_descriptors-457"><a href="#extract_intensity_descriptors-457"><span class="linenos">457</span></a>
</span><span id="extract_intensity_descriptors-458"><a href="#extract_intensity_descriptors-458"><span class="linenos">458</span></a><span class="sd">    Function to extract key intensity information from a given sound object.</span>
</span><span id="extract_intensity_descriptors-459"><a href="#extract_intensity_descriptors-459"><span class="linenos">459</span></a><span class="sd">    This function is based on default Praat code adapted to work with Parselmouth.</span>
</span><span id="extract_intensity_descriptors-460"><a href="#extract_intensity_descriptors-460"><span class="linenos">460</span></a>
</span><span id="extract_intensity_descriptors-461"><a href="#extract_intensity_descriptors-461"><span class="linenos">461</span></a><span class="sd">    Args:</span>
</span><span id="extract_intensity_descriptors-462"><a href="#extract_intensity_descriptors-462"><span class="linenos">462</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="extract_intensity_descriptors-463"><a href="#extract_intensity_descriptors-463"><span class="linenos">463</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="extract_intensity_descriptors-464"><a href="#extract_intensity_descriptors-464"><span class="linenos">464</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new intensity value, typically set to 5 ms.</span>
</span><span id="extract_intensity_descriptors-465"><a href="#extract_intensity_descriptors-465"><span class="linenos">465</span></a>
</span><span id="extract_intensity_descriptors-466"><a href="#extract_intensity_descriptors-466"><span class="linenos">466</span></a><span class="sd">    Returns:</span>
</span><span id="extract_intensity_descriptors-467"><a href="#extract_intensity_descriptors-467"><span class="linenos">467</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="extract_intensity_descriptors-468"><a href="#extract_intensity_descriptors-468"><span class="linenos">468</span></a>
</span><span id="extract_intensity_descriptors-469"><a href="#extract_intensity_descriptors-469"><span class="linenos">469</span></a><span class="sd">            - mean_db (float): Mean intensity in dB.</span>
</span><span id="extract_intensity_descriptors-470"><a href="#extract_intensity_descriptors-470"><span class="linenos">470</span></a><span class="sd">            - std_db (float): Standard deviation in dB.</span>
</span><span id="extract_intensity_descriptors-471"><a href="#extract_intensity_descriptors-471"><span class="linenos">471</span></a><span class="sd">            - range_db_ratio (float): Intensity range, expressed as a ratio in dB.</span>
</span><span id="extract_intensity_descriptors-472"><a href="#extract_intensity_descriptors-472"><span class="linenos">472</span></a>
</span><span id="extract_intensity_descriptors-473"><a href="#extract_intensity_descriptors-473"><span class="linenos">473</span></a><span class="sd">    Examples:</span>
</span><span id="extract_intensity_descriptors-474"><a href="#extract_intensity_descriptors-474"><span class="linenos">474</span></a><span class="sd">        ```python</span>
</span><span id="extract_intensity_descriptors-475"><a href="#extract_intensity_descriptors-475"><span class="linenos">475</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="extract_intensity_descriptors-476"><a href="#extract_intensity_descriptors-476"><span class="linenos">476</span></a><span class="sd">        &gt;&gt;&gt; extract_intensity_descriptors(snd, 75, 0.01)</span>
</span><span id="extract_intensity_descriptors-477"><a href="#extract_intensity_descriptors-477"><span class="linenos">477</span></a><span class="sd">        {&#39;mean_db&#39;: 70.5, &#39;std_db&#39;: 0.5, &#39;range_db_ratio&#39;: 2.5}</span>
</span><span id="extract_intensity_descriptors-478"><a href="#extract_intensity_descriptors-478"><span class="linenos">478</span></a><span class="sd">        ```</span>
</span><span id="extract_intensity_descriptors-479"><a href="#extract_intensity_descriptors-479"><span class="linenos">479</span></a>
</span><span id="extract_intensity_descriptors-480"><a href="#extract_intensity_descriptors-480"><span class="linenos">480</span></a><span class="sd">    Notes:</span>
</span><span id="extract_intensity_descriptors-481"><a href="#extract_intensity_descriptors-481"><span class="linenos">481</span></a><span class="sd">        - Hyperparameters: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Intensity___.html</span>
</span><span id="extract_intensity_descriptors-482"><a href="#extract_intensity_descriptors-482"><span class="linenos">482</span></a><span class="sd">        - For notes on extracting mean settings: https://www.fon.hum.uva.nl/praat/manual/Intro_6_2__Configuring_the_intensity_contour.html</span>
</span><span id="extract_intensity_descriptors-483"><a href="#extract_intensity_descriptors-483"><span class="linenos">483</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_intensity_descriptors-484"><a href="#extract_intensity_descriptors-484"><span class="linenos">484</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_intensity_descriptors-485"><a href="#extract_intensity_descriptors-485"><span class="linenos">485</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="extract_intensity_descriptors-486"><a href="#extract_intensity_descriptors-486"><span class="linenos">486</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="extract_intensity_descriptors-487"><a href="#extract_intensity_descriptors-487"><span class="linenos">487</span></a>
</span><span id="extract_intensity_descriptors-488"><a href="#extract_intensity_descriptors-488"><span class="linenos">488</span></a>        <span class="c1"># Extract intensity object</span>
</span><span id="extract_intensity_descriptors-489"><a href="#extract_intensity_descriptors-489"><span class="linenos">489</span></a>        <span class="n">intensity</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_intensity</span><span class="p">(</span><span class="n">minimum_pitch</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">subtract_mean</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="extract_intensity_descriptors-490"><a href="#extract_intensity_descriptors-490"><span class="linenos">490</span></a>        <span class="c1"># Hyperparameters: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Intensity___.html</span>
</span><span id="extract_intensity_descriptors-491"><a href="#extract_intensity_descriptors-491"><span class="linenos">491</span></a>
</span><span id="extract_intensity_descriptors-492"><a href="#extract_intensity_descriptors-492"><span class="linenos">492</span></a>        <span class="c1"># Extract descriptors</span>
</span><span id="extract_intensity_descriptors-493"><a href="#extract_intensity_descriptors-493"><span class="linenos">493</span></a>        <span class="n">mean_db</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="extract_intensity_descriptors-494"><a href="#extract_intensity_descriptors-494"><span class="linenos">494</span></a>            <span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get mean&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;energy&quot;</span>
</span><span id="extract_intensity_descriptors-495"><a href="#extract_intensity_descriptors-495"><span class="linenos">495</span></a>        <span class="p">)</span>  <span class="c1"># get mean - time range, time range, averaging method</span>
</span><span id="extract_intensity_descriptors-496"><a href="#extract_intensity_descriptors-496"><span class="linenos">496</span></a>        <span class="n">std_db</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get standard deviation&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="extract_intensity_descriptors-497"><a href="#extract_intensity_descriptors-497"><span class="linenos">497</span></a>        <span class="n">min_dB</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get minimum&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;parabolic&quot;</span><span class="p">)</span>  <span class="c1"># time range, Interpolation</span>
</span><span id="extract_intensity_descriptors-498"><a href="#extract_intensity_descriptors-498"><span class="linenos">498</span></a>        <span class="n">max_dB</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="s2">&quot;Get maximum&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;parabolic&quot;</span><span class="p">)</span>  <span class="c1"># time range, Interpolation</span>
</span><span id="extract_intensity_descriptors-499"><a href="#extract_intensity_descriptors-499"><span class="linenos">499</span></a>        <span class="n">range_db_ratio</span> <span class="o">=</span> <span class="n">max_dB</span> <span class="o">/</span> <span class="n">min_dB</span>
</span><span id="extract_intensity_descriptors-500"><a href="#extract_intensity_descriptors-500"><span class="linenos">500</span></a>
</span><span id="extract_intensity_descriptors-501"><a href="#extract_intensity_descriptors-501"><span class="linenos">501</span></a>        <span class="c1"># Return results</span>
</span><span id="extract_intensity_descriptors-502"><a href="#extract_intensity_descriptors-502"><span class="linenos">502</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;mean_db&quot;</span><span class="p">:</span> <span class="n">mean_db</span><span class="p">,</span> <span class="s2">&quot;std_db&quot;</span><span class="p">:</span> <span class="n">std_db</span><span class="p">,</span> <span class="s2">&quot;range_db_ratio&quot;</span><span class="p">:</span> <span class="n">range_db_ratio</span><span class="p">}</span>
</span><span id="extract_intensity_descriptors-503"><a href="#extract_intensity_descriptors-503"><span class="linenos">503</span></a>
</span><span id="extract_intensity_descriptors-504"><a href="#extract_intensity_descriptors-504"><span class="linenos">504</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_intensity_descriptors-505"><a href="#extract_intensity_descriptors-505"><span class="linenos">505</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_intensity_descriptors-506"><a href="#extract_intensity_descriptors-506"><span class="linenos">506</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_intensity_descriptors-507"><a href="#extract_intensity_descriptors-507"><span class="linenos">507</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_intensity_descriptors-508"><a href="#extract_intensity_descriptors-508"><span class="linenos">508</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_intensity_descriptors-509"><a href="#extract_intensity_descriptors-509"><span class="linenos">509</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;mean_db&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;std_db&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;range_db_ratio&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Extract Intensity Features.</p>

<p>Function to extract key intensity information from a given sound object.
This function is based on default Praat code adapted to work with Parselmouth.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object or a file path or an Audio object.</li>
<li><strong>floor (float):</strong>  Minimum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
<li><strong>frame_shift (float):</strong>  Time rate at which to extract a new intensity value, typically set to 5 ms.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>dict: A dictionary containing the following keys:</p>

<pre><code>- mean_db (float): Mean intensity in dB.
- std_db (float): Standard deviation in dB.
- range_db_ratio (float): Intensity range, expressed as a ratio in dB.
</code></pre>
</blockquote>

<h6 id="examples">Examples:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">snd</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="s2">&quot;path_to_audio.wav&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">extract_intensity_descriptors</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;mean_db&#39;</span><span class="p">:</span> <span class="mf">70.5</span><span class="p">,</span> <span class="s1">&#39;std_db&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;range_db_ratio&#39;</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">}</span>
</code></pre>
  </div>
</blockquote>

<h6 id="notes">Notes:</h6>

<blockquote>
  <ul>
  <li>Hyperparameters: <a href="https://www.fon.hum.uva.nl/praat/manual/Sound__To_Intensity___.html">https://www.fon.hum.uva.nl/praat/manual/Sound__To_Intensity___.html</a></li>
  <li>For notes on extracting mean settings: <a href="https://www.fon.hum.uva.nl/praat/manual/Intro_6_2__Configuring_the_intensity_contour.html">https://www.fon.hum.uva.nl/praat/manual/Intro_6_2__Configuring_the_intensity_contour.html</a></li>
  </ul>
</blockquote>
</div>


                </section>
                <section id="extract_harmonicity_descriptors">
                            <input id="extract_harmonicity_descriptors-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_harmonicity_descriptors</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">floor</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="extract_harmonicity_descriptors-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_harmonicity_descriptors"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_harmonicity_descriptors-512"><a href="#extract_harmonicity_descriptors-512"><span class="linenos">512</span></a><span class="k">def</span> <span class="nf">extract_harmonicity_descriptors</span><span class="p">(</span>
</span><span id="extract_harmonicity_descriptors-513"><a href="#extract_harmonicity_descriptors-513"><span class="linenos">513</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="extract_harmonicity_descriptors-514"><a href="#extract_harmonicity_descriptors-514"><span class="linenos">514</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="extract_harmonicity_descriptors-515"><a href="#extract_harmonicity_descriptors-515"><span class="linenos">515</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Voice Quality - HNR.</span>
</span><span id="extract_harmonicity_descriptors-516"><a href="#extract_harmonicity_descriptors-516"><span class="linenos">516</span></a>
</span><span id="extract_harmonicity_descriptors-517"><a href="#extract_harmonicity_descriptors-517"><span class="linenos">517</span></a><span class="sd">    Function to calculate the Harmonic to Noise Ratio (HNR) in dB from a given sound object.</span>
</span><span id="extract_harmonicity_descriptors-518"><a href="#extract_harmonicity_descriptors-518"><span class="linenos">518</span></a><span class="sd">    This function uses the CC method as recommended by Praat.</span>
</span><span id="extract_harmonicity_descriptors-519"><a href="#extract_harmonicity_descriptors-519"><span class="linenos">519</span></a>
</span><span id="extract_harmonicity_descriptors-520"><a href="#extract_harmonicity_descriptors-520"><span class="linenos">520</span></a><span class="sd">    Args:</span>
</span><span id="extract_harmonicity_descriptors-521"><a href="#extract_harmonicity_descriptors-521"><span class="linenos">521</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="extract_harmonicity_descriptors-522"><a href="#extract_harmonicity_descriptors-522"><span class="linenos">522</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="extract_harmonicity_descriptors-523"><a href="#extract_harmonicity_descriptors-523"><span class="linenos">523</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new pitch value, typically set to 5 ms.</span>
</span><span id="extract_harmonicity_descriptors-524"><a href="#extract_harmonicity_descriptors-524"><span class="linenos">524</span></a>
</span><span id="extract_harmonicity_descriptors-525"><a href="#extract_harmonicity_descriptors-525"><span class="linenos">525</span></a><span class="sd">    Returns:</span>
</span><span id="extract_harmonicity_descriptors-526"><a href="#extract_harmonicity_descriptors-526"><span class="linenos">526</span></a><span class="sd">        dict: A dictionary containing the following key:</span>
</span><span id="extract_harmonicity_descriptors-527"><a href="#extract_harmonicity_descriptors-527"><span class="linenos">527</span></a>
</span><span id="extract_harmonicity_descriptors-528"><a href="#extract_harmonicity_descriptors-528"><span class="linenos">528</span></a><span class="sd">            - hnr_db_mean (float): Mean Harmonic to Noise Ratio in dB.</span>
</span><span id="extract_harmonicity_descriptors-529"><a href="#extract_harmonicity_descriptors-529"><span class="linenos">529</span></a><span class="sd">            - hnr_db_std_dev (float): Harmonic to Noise Ratio standard deviation in dB.</span>
</span><span id="extract_harmonicity_descriptors-530"><a href="#extract_harmonicity_descriptors-530"><span class="linenos">530</span></a>
</span><span id="extract_harmonicity_descriptors-531"><a href="#extract_harmonicity_descriptors-531"><span class="linenos">531</span></a><span class="sd">    Examples:</span>
</span><span id="extract_harmonicity_descriptors-532"><a href="#extract_harmonicity_descriptors-532"><span class="linenos">532</span></a><span class="sd">        ```python</span>
</span><span id="extract_harmonicity_descriptors-533"><a href="#extract_harmonicity_descriptors-533"><span class="linenos">533</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="extract_harmonicity_descriptors-534"><a href="#extract_harmonicity_descriptors-534"><span class="linenos">534</span></a><span class="sd">        &gt;&gt;&gt; extract_harmonicity_descriptors(snd, 75, 0.01)</span>
</span><span id="extract_harmonicity_descriptors-535"><a href="#extract_harmonicity_descriptors-535"><span class="linenos">535</span></a><span class="sd">        {&#39;hnr_db_mean&#39;: 15.3, &#39;hnr_db_std_dev&#39;: 0.5}</span>
</span><span id="extract_harmonicity_descriptors-536"><a href="#extract_harmonicity_descriptors-536"><span class="linenos">536</span></a><span class="sd">        ```</span>
</span><span id="extract_harmonicity_descriptors-537"><a href="#extract_harmonicity_descriptors-537"><span class="linenos">537</span></a>
</span><span id="extract_harmonicity_descriptors-538"><a href="#extract_harmonicity_descriptors-538"><span class="linenos">538</span></a><span class="sd">    Notes:</span>
</span><span id="extract_harmonicity_descriptors-539"><a href="#extract_harmonicity_descriptors-539"><span class="linenos">539</span></a><span class="sd">        - Praat recommends using the CC method: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Harmonicity__cc____.html</span>
</span><span id="extract_harmonicity_descriptors-540"><a href="#extract_harmonicity_descriptors-540"><span class="linenos">540</span></a><span class="sd">        - Default settings can be found at: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Harmonicity__ac____.html</span>
</span><span id="extract_harmonicity_descriptors-541"><a href="#extract_harmonicity_descriptors-541"><span class="linenos">541</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_harmonicity_descriptors-542"><a href="#extract_harmonicity_descriptors-542"><span class="linenos">542</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_harmonicity_descriptors-543"><a href="#extract_harmonicity_descriptors-543"><span class="linenos">543</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="extract_harmonicity_descriptors-544"><a href="#extract_harmonicity_descriptors-544"><span class="linenos">544</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="extract_harmonicity_descriptors-545"><a href="#extract_harmonicity_descriptors-545"><span class="linenos">545</span></a>
</span><span id="extract_harmonicity_descriptors-546"><a href="#extract_harmonicity_descriptors-546"><span class="linenos">546</span></a>        <span class="c1"># Extract HNR information</span>
</span><span id="extract_harmonicity_descriptors-547"><a href="#extract_harmonicity_descriptors-547"><span class="linenos">547</span></a>        <span class="n">harmonicity</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_harmonicity_cc</span><span class="p">(</span>
</span><span id="extract_harmonicity_descriptors-548"><a href="#extract_harmonicity_descriptors-548"><span class="linenos">548</span></a>            <span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">minimum_pitch</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">silence_threshold</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">periods_per_window</span><span class="o">=</span><span class="mf">4.5</span>
</span><span id="extract_harmonicity_descriptors-549"><a href="#extract_harmonicity_descriptors-549"><span class="linenos">549</span></a>        <span class="p">)</span>
</span><span id="extract_harmonicity_descriptors-550"><a href="#extract_harmonicity_descriptors-550"><span class="linenos">550</span></a>        <span class="c1"># Praat recommends using the CC method here: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Harmonicity__cc____.html</span>
</span><span id="extract_harmonicity_descriptors-551"><a href="#extract_harmonicity_descriptors-551"><span class="linenos">551</span></a>
</span><span id="extract_harmonicity_descriptors-552"><a href="#extract_harmonicity_descriptors-552"><span class="linenos">552</span></a>        <span class="n">hnr_db_mean</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">harmonicity</span><span class="p">,</span> <span class="s2">&quot;Get mean&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="extract_harmonicity_descriptors-553"><a href="#extract_harmonicity_descriptors-553"><span class="linenos">553</span></a>        <span class="n">hnr_db_std_dev</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">harmonicity</span><span class="p">,</span> <span class="s2">&quot;Get standard deviation&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="extract_harmonicity_descriptors-554"><a href="#extract_harmonicity_descriptors-554"><span class="linenos">554</span></a>
</span><span id="extract_harmonicity_descriptors-555"><a href="#extract_harmonicity_descriptors-555"><span class="linenos">555</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;hnr_db_mean&quot;</span><span class="p">:</span> <span class="n">hnr_db_mean</span><span class="p">,</span> <span class="s2">&quot;hnr_db_std_dev&quot;</span><span class="p">:</span> <span class="n">hnr_db_std_dev</span><span class="p">}</span>
</span><span id="extract_harmonicity_descriptors-556"><a href="#extract_harmonicity_descriptors-556"><span class="linenos">556</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_harmonicity_descriptors-557"><a href="#extract_harmonicity_descriptors-557"><span class="linenos">557</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_harmonicity_descriptors-558"><a href="#extract_harmonicity_descriptors-558"><span class="linenos">558</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_harmonicity_descriptors-559"><a href="#extract_harmonicity_descriptors-559"><span class="linenos">559</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_harmonicity_descriptors-560"><a href="#extract_harmonicity_descriptors-560"><span class="linenos">560</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_harmonicity_descriptors-561"><a href="#extract_harmonicity_descriptors-561"><span class="linenos">561</span></a>
</span><span id="extract_harmonicity_descriptors-562"><a href="#extract_harmonicity_descriptors-562"><span class="linenos">562</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;hnr_db_mean&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;hnr_db_std_dev&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Voice Quality - HNR.</p>

<p>Function to calculate the Harmonic to Noise Ratio (HNR) in dB from a given sound object.
This function uses the CC method as recommended by Praat.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object or a file path or an Audio object.</li>
<li><strong>floor (float):</strong>  Minimum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
<li><strong>frame_shift (float):</strong>  Time rate at which to extract a new pitch value, typically set to 5 ms.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>dict: A dictionary containing the following key:</p>

<pre><code>- hnr_db_mean (float): Mean Harmonic to Noise Ratio in dB.
- hnr_db_std_dev (float): Harmonic to Noise Ratio standard deviation in dB.
</code></pre>
</blockquote>

<h6 id="examples">Examples:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">snd</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="s2">&quot;path_to_audio.wav&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">extract_harmonicity_descriptors</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;hnr_db_mean&#39;</span><span class="p">:</span> <span class="mf">15.3</span><span class="p">,</span> <span class="s1">&#39;hnr_db_std_dev&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">}</span>
</code></pre>
  </div>
</blockquote>

<h6 id="notes">Notes:</h6>

<blockquote>
  <ul>
  <li>Praat recommends using the CC method: <a href="https://www.fon.hum.uva.nl/praat/manual/Sound__To_Harmonicity__cc____.html">https://www.fon.hum.uva.nl/praat/manual/Sound__To_Harmonicity__cc____.html</a></li>
  <li>Default settings can be found at: <a href="https://www.fon.hum.uva.nl/praat/manual/Sound__To_Harmonicity__ac____.html">https://www.fon.hum.uva.nl/praat/manual/Sound__To_Harmonicity__ac____.html</a></li>
  </ul>
</blockquote>
</div>


                </section>
                <section id="extract_slope_tilt">
                            <input id="extract_slope_tilt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_slope_tilt</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">floor</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="extract_slope_tilt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_slope_tilt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_slope_tilt-565"><a href="#extract_slope_tilt-565"><span class="linenos">565</span></a><span class="k">def</span> <span class="nf">extract_slope_tilt</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="extract_slope_tilt-566"><a href="#extract_slope_tilt-566"><span class="linenos">566</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Voice Quality - Spectral Slope/Tilt.</span>
</span><span id="extract_slope_tilt-567"><a href="#extract_slope_tilt-567"><span class="linenos">567</span></a>
</span><span id="extract_slope_tilt-568"><a href="#extract_slope_tilt-568"><span class="linenos">568</span></a><span class="sd">    Function to extract spectral slope and tilt from a given sound object. This function is based on default</span>
</span><span id="extract_slope_tilt-569"><a href="#extract_slope_tilt-569"><span class="linenos">569</span></a><span class="sd">    Praat code adapted to work with Parselmouth.</span>
</span><span id="extract_slope_tilt-570"><a href="#extract_slope_tilt-570"><span class="linenos">570</span></a>
</span><span id="extract_slope_tilt-571"><a href="#extract_slope_tilt-571"><span class="linenos">571</span></a><span class="sd">    Args:</span>
</span><span id="extract_slope_tilt-572"><a href="#extract_slope_tilt-572"><span class="linenos">572</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="extract_slope_tilt-573"><a href="#extract_slope_tilt-573"><span class="linenos">573</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="extract_slope_tilt-574"><a href="#extract_slope_tilt-574"><span class="linenos">574</span></a><span class="sd">        ceiling (float): Maximum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="extract_slope_tilt-575"><a href="#extract_slope_tilt-575"><span class="linenos">575</span></a>
</span><span id="extract_slope_tilt-576"><a href="#extract_slope_tilt-576"><span class="linenos">576</span></a><span class="sd">    Returns:</span>
</span><span id="extract_slope_tilt-577"><a href="#extract_slope_tilt-577"><span class="linenos">577</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="extract_slope_tilt-578"><a href="#extract_slope_tilt-578"><span class="linenos">578</span></a>
</span><span id="extract_slope_tilt-579"><a href="#extract_slope_tilt-579"><span class="linenos">579</span></a><span class="sd">            - spectral_slope (float): Mean spectral slope.</span>
</span><span id="extract_slope_tilt-580"><a href="#extract_slope_tilt-580"><span class="linenos">580</span></a><span class="sd">            - spectral_tilt (float): Mean spectral tilt.</span>
</span><span id="extract_slope_tilt-581"><a href="#extract_slope_tilt-581"><span class="linenos">581</span></a>
</span><span id="extract_slope_tilt-582"><a href="#extract_slope_tilt-582"><span class="linenos">582</span></a><span class="sd">    Examples:</span>
</span><span id="extract_slope_tilt-583"><a href="#extract_slope_tilt-583"><span class="linenos">583</span></a><span class="sd">        ```python</span>
</span><span id="extract_slope_tilt-584"><a href="#extract_slope_tilt-584"><span class="linenos">584</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="extract_slope_tilt-585"><a href="#extract_slope_tilt-585"><span class="linenos">585</span></a><span class="sd">        &gt;&gt;&gt; extract_slope_tilt(snd, 75, 500)</span>
</span><span id="extract_slope_tilt-586"><a href="#extract_slope_tilt-586"><span class="linenos">586</span></a><span class="sd">        {&#39;spectral_slope&#39;: -0.8, &#39;spectral_tilt&#39;: -2.5}</span>
</span><span id="extract_slope_tilt-587"><a href="#extract_slope_tilt-587"><span class="linenos">587</span></a><span class="sd">        ```</span>
</span><span id="extract_slope_tilt-588"><a href="#extract_slope_tilt-588"><span class="linenos">588</span></a>
</span><span id="extract_slope_tilt-589"><a href="#extract_slope_tilt-589"><span class="linenos">589</span></a><span class="sd">    Notes:</span>
</span><span id="extract_slope_tilt-590"><a href="#extract_slope_tilt-590"><span class="linenos">590</span></a><span class="sd">        - Spectral Slope: Ratio of energy in a spectra between 10-1000Hz over 1000-4000Hz.</span>
</span><span id="extract_slope_tilt-591"><a href="#extract_slope_tilt-591"><span class="linenos">591</span></a><span class="sd">        - Spectral Tilt: Linear slope of energy distribution between 100-5000Hz.</span>
</span><span id="extract_slope_tilt-592"><a href="#extract_slope_tilt-592"><span class="linenos">592</span></a><span class="sd">        - Using pitch-corrected LTAS to remove the effect of F0 and harmonics on the slope calculation:</span>
</span><span id="extract_slope_tilt-593"><a href="#extract_slope_tilt-593"><span class="linenos">593</span></a><span class="sd">        https://www.fon.hum.uva.nl/paul/papers/BoersmaKovacic2006.pdf</span>
</span><span id="extract_slope_tilt-594"><a href="#extract_slope_tilt-594"><span class="linenos">594</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_slope_tilt-595"><a href="#extract_slope_tilt-595"><span class="linenos">595</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_slope_tilt-596"><a href="#extract_slope_tilt-596"><span class="linenos">596</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="extract_slope_tilt-597"><a href="#extract_slope_tilt-597"><span class="linenos">597</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="extract_slope_tilt-598"><a href="#extract_slope_tilt-598"><span class="linenos">598</span></a>
</span><span id="extract_slope_tilt-599"><a href="#extract_slope_tilt-599"><span class="linenos">599</span></a>        <span class="n">ltas_rep</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="extract_slope_tilt-600"><a href="#extract_slope_tilt-600"><span class="linenos">600</span></a>            <span class="n">snd</span><span class="p">,</span> <span class="s2">&quot;To Ltas (pitch-corrected)...&quot;</span><span class="p">,</span> <span class="n">floor</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">1.3</span>
</span><span id="extract_slope_tilt-601"><a href="#extract_slope_tilt-601"><span class="linenos">601</span></a>        <span class="p">)</span>
</span><span id="extract_slope_tilt-602"><a href="#extract_slope_tilt-602"><span class="linenos">602</span></a>        <span class="c1"># Hyperparameters: Min Pitch (Hz), Max Pitch (Hz), Maximum Frequency (Hz), Bandwidth (Hz), Shortest Period (s),</span>
</span><span id="extract_slope_tilt-603"><a href="#extract_slope_tilt-603"><span class="linenos">603</span></a>        <span class="c1"># Longest Period (s), Maximum period factor</span>
</span><span id="extract_slope_tilt-604"><a href="#extract_slope_tilt-604"><span class="linenos">604</span></a>
</span><span id="extract_slope_tilt-605"><a href="#extract_slope_tilt-605"><span class="linenos">605</span></a>        <span class="n">spectral_slope</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">ltas_rep</span><span class="p">,</span> <span class="s2">&quot;Get slope&quot;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="s2">&quot;dB&quot;</span><span class="p">)</span>
</span><span id="extract_slope_tilt-606"><a href="#extract_slope_tilt-606"><span class="linenos">606</span></a>        <span class="c1"># Hyperparameters: f1min, f1max, f2min, f2max, averagingUnits</span>
</span><span id="extract_slope_tilt-607"><a href="#extract_slope_tilt-607"><span class="linenos">607</span></a>
</span><span id="extract_slope_tilt-608"><a href="#extract_slope_tilt-608"><span class="linenos">608</span></a>        <span class="n">spectral_tilt_Report</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">ltas_rep</span><span class="p">,</span> <span class="s2">&quot;Report spectral tilt&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">,</span> <span class="s2">&quot;Robust&quot;</span><span class="p">)</span>
</span><span id="extract_slope_tilt-609"><a href="#extract_slope_tilt-609"><span class="linenos">609</span></a>        <span class="c1"># Hyperparameters: minimumFrequency, maximumFrequency, Frequency Scale (linear or logarithmic),</span>
</span><span id="extract_slope_tilt-610"><a href="#extract_slope_tilt-610"><span class="linenos">610</span></a>        <span class="c1"># Fit method (least squares or robust)</span>
</span><span id="extract_slope_tilt-611"><a href="#extract_slope_tilt-611"><span class="linenos">611</span></a>
</span><span id="extract_slope_tilt-612"><a href="#extract_slope_tilt-612"><span class="linenos">612</span></a>        <span class="n">srt_st</span> <span class="o">=</span> <span class="n">spectral_tilt_Report</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;Slope: &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Slope: &quot;</span><span class="p">)</span>
</span><span id="extract_slope_tilt-613"><a href="#extract_slope_tilt-613"><span class="linenos">613</span></a>        <span class="n">end_st</span> <span class="o">=</span> <span class="n">spectral_tilt_Report</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">srt_st</span><span class="p">)</span>
</span><span id="extract_slope_tilt-614"><a href="#extract_slope_tilt-614"><span class="linenos">614</span></a>        <span class="n">spectral_tilt</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">spectral_tilt_Report</span><span class="p">[</span><span class="n">srt_st</span><span class="p">:</span><span class="n">end_st</span><span class="p">])</span>
</span><span id="extract_slope_tilt-615"><a href="#extract_slope_tilt-615"><span class="linenos">615</span></a>
</span><span id="extract_slope_tilt-616"><a href="#extract_slope_tilt-616"><span class="linenos">616</span></a>        <span class="c1"># Return results</span>
</span><span id="extract_slope_tilt-617"><a href="#extract_slope_tilt-617"><span class="linenos">617</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;spectral_slope&quot;</span><span class="p">:</span> <span class="n">spectral_slope</span><span class="p">,</span> <span class="s2">&quot;spectral_tilt&quot;</span><span class="p">:</span> <span class="n">spectral_tilt</span><span class="p">}</span>
</span><span id="extract_slope_tilt-618"><a href="#extract_slope_tilt-618"><span class="linenos">618</span></a>
</span><span id="extract_slope_tilt-619"><a href="#extract_slope_tilt-619"><span class="linenos">619</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_slope_tilt-620"><a href="#extract_slope_tilt-620"><span class="linenos">620</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_slope_tilt-621"><a href="#extract_slope_tilt-621"><span class="linenos">621</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_slope_tilt-622"><a href="#extract_slope_tilt-622"><span class="linenos">622</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_slope_tilt-623"><a href="#extract_slope_tilt-623"><span class="linenos">623</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_slope_tilt-624"><a href="#extract_slope_tilt-624"><span class="linenos">624</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;spectral_slope&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;spectral_tilt&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Voice Quality - Spectral Slope/Tilt.</p>

<p>Function to extract spectral slope and tilt from a given sound object. This function is based on default
Praat code adapted to work with Parselmouth.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object or a file path or an Audio object.</li>
<li><strong>floor (float):</strong>  Minimum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
<li><strong>ceiling (float):</strong>  Maximum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>dict: A dictionary containing the following keys:</p>

<pre><code>- spectral_slope (float): Mean spectral slope.
- spectral_tilt (float): Mean spectral tilt.
</code></pre>
</blockquote>

<h6 id="examples">Examples:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">snd</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="s2">&quot;path_to_audio.wav&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">extract_slope_tilt</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;spectral_slope&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.8</span><span class="p">,</span> <span class="s1">&#39;spectral_tilt&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">2.5</span><span class="p">}</span>
</code></pre>
  </div>
</blockquote>

<h6 id="notes">Notes:</h6>

<blockquote>
  <ul>
  <li>Spectral Slope: Ratio of energy in a spectra between 10-1000Hz over 1000-4000Hz.</li>
  <li>Spectral Tilt: Linear slope of energy distribution between 100-5000Hz.</li>
  <li>Using pitch-corrected LTAS to remove the effect of F0 and harmonics on the slope calculation:
  <a href="https://www.fon.hum.uva.nl/paul/papers/BoersmaKovacic2006.pdf">https://www.fon.hum.uva.nl/paul/papers/BoersmaKovacic2006.pdf</a></li>
  </ul>
</blockquote>
</div>


                </section>
                <section id="extract_cpp_descriptors">
                            <input id="extract_cpp_descriptors-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_cpp_descriptors</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">floor</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="extract_cpp_descriptors-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_cpp_descriptors"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_cpp_descriptors-627"><a href="#extract_cpp_descriptors-627"><span class="linenos">627</span></a><span class="k">def</span> <span class="nf">extract_cpp_descriptors</span><span class="p">(</span>
</span><span id="extract_cpp_descriptors-628"><a href="#extract_cpp_descriptors-628"><span class="linenos">628</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="extract_cpp_descriptors-629"><a href="#extract_cpp_descriptors-629"><span class="linenos">629</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="extract_cpp_descriptors-630"><a href="#extract_cpp_descriptors-630"><span class="linenos">630</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract Cepstral Peak Prominence (CPP).</span>
</span><span id="extract_cpp_descriptors-631"><a href="#extract_cpp_descriptors-631"><span class="linenos">631</span></a>
</span><span id="extract_cpp_descriptors-632"><a href="#extract_cpp_descriptors-632"><span class="linenos">632</span></a><span class="sd">    Function to calculate the Cepstral Peak Prominence (CPP) from a given sound object.</span>
</span><span id="extract_cpp_descriptors-633"><a href="#extract_cpp_descriptors-633"><span class="linenos">633</span></a><span class="sd">    This function is adapted from default Praat code to work with Parselmouth.</span>
</span><span id="extract_cpp_descriptors-634"><a href="#extract_cpp_descriptors-634"><span class="linenos">634</span></a>
</span><span id="extract_cpp_descriptors-635"><a href="#extract_cpp_descriptors-635"><span class="linenos">635</span></a><span class="sd">    Args:</span>
</span><span id="extract_cpp_descriptors-636"><a href="#extract_cpp_descriptors-636"><span class="linenos">636</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="extract_cpp_descriptors-637"><a href="#extract_cpp_descriptors-637"><span class="linenos">637</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="extract_cpp_descriptors-638"><a href="#extract_cpp_descriptors-638"><span class="linenos">638</span></a><span class="sd">        ceiling (float): Maximum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="extract_cpp_descriptors-639"><a href="#extract_cpp_descriptors-639"><span class="linenos">639</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new pitch value, typically set to 5 ms.</span>
</span><span id="extract_cpp_descriptors-640"><a href="#extract_cpp_descriptors-640"><span class="linenos">640</span></a>
</span><span id="extract_cpp_descriptors-641"><a href="#extract_cpp_descriptors-641"><span class="linenos">641</span></a><span class="sd">    Returns:</span>
</span><span id="extract_cpp_descriptors-642"><a href="#extract_cpp_descriptors-642"><span class="linenos">642</span></a><span class="sd">        dict: A dictionary containing the following key:</span>
</span><span id="extract_cpp_descriptors-643"><a href="#extract_cpp_descriptors-643"><span class="linenos">643</span></a>
</span><span id="extract_cpp_descriptors-644"><a href="#extract_cpp_descriptors-644"><span class="linenos">644</span></a><span class="sd">            - mean_cpp (float): Mean Cepstral Peak Prominence.</span>
</span><span id="extract_cpp_descriptors-645"><a href="#extract_cpp_descriptors-645"><span class="linenos">645</span></a><span class="sd">            - std_dev_cpp (float): Standard deviation in Cepstral Peak Prominence.</span>
</span><span id="extract_cpp_descriptors-646"><a href="#extract_cpp_descriptors-646"><span class="linenos">646</span></a>
</span><span id="extract_cpp_descriptors-647"><a href="#extract_cpp_descriptors-647"><span class="linenos">647</span></a><span class="sd">    Examples:</span>
</span><span id="extract_cpp_descriptors-648"><a href="#extract_cpp_descriptors-648"><span class="linenos">648</span></a><span class="sd">        ```python</span>
</span><span id="extract_cpp_descriptors-649"><a href="#extract_cpp_descriptors-649"><span class="linenos">649</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="extract_cpp_descriptors-650"><a href="#extract_cpp_descriptors-650"><span class="linenos">650</span></a><span class="sd">        &gt;&gt;&gt; extract_CPP(snd, 75, 500, 0.01)</span>
</span><span id="extract_cpp_descriptors-651"><a href="#extract_cpp_descriptors-651"><span class="linenos">651</span></a><span class="sd">        {&#39;mean_cpp&#39;: 20.3, &#39;std_dev_cpp&#39;: 0.5}</span>
</span><span id="extract_cpp_descriptors-652"><a href="#extract_cpp_descriptors-652"><span class="linenos">652</span></a><span class="sd">        ```</span>
</span><span id="extract_cpp_descriptors-653"><a href="#extract_cpp_descriptors-653"><span class="linenos">653</span></a>
</span><span id="extract_cpp_descriptors-654"><a href="#extract_cpp_descriptors-654"><span class="linenos">654</span></a><span class="sd">    Notes:</span>
</span><span id="extract_cpp_descriptors-655"><a href="#extract_cpp_descriptors-655"><span class="linenos">655</span></a><span class="sd">        - Cepstral Peak Prominence: The height (i.e., “prominence”) of that peak relative to a regression line</span>
</span><span id="extract_cpp_descriptors-656"><a href="#extract_cpp_descriptors-656"><span class="linenos">656</span></a><span class="sd">        through the overall cepstrum.</span>
</span><span id="extract_cpp_descriptors-657"><a href="#extract_cpp_descriptors-657"><span class="linenos">657</span></a><span class="sd">        - Adapted from: https://osf.io/ctwgr and http://phonetics.linguistics.ucla.edu/facilities/acoustic/voiced_extract_auto.txt</span>
</span><span id="extract_cpp_descriptors-658"><a href="#extract_cpp_descriptors-658"><span class="linenos">658</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_cpp_descriptors-659"><a href="#extract_cpp_descriptors-659"><span class="linenos">659</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_cpp_descriptors-660"><a href="#extract_cpp_descriptors-660"><span class="linenos">660</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="extract_cpp_descriptors-661"><a href="#extract_cpp_descriptors-661"><span class="linenos">661</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-662"><a href="#extract_cpp_descriptors-662"><span class="linenos">662</span></a>
</span><span id="extract_cpp_descriptors-663"><a href="#extract_cpp_descriptors-663"><span class="linenos">663</span></a>        <span class="c1"># Extract pitch object for voiced checking</span>
</span><span id="extract_cpp_descriptors-664"><a href="#extract_cpp_descriptors-664"><span class="linenos">664</span></a>        <span class="n">pitch</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_ac</span><span class="p">(</span><span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">pitch_floor</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">pitch_ceiling</span><span class="o">=</span><span class="n">ceiling</span><span class="p">,</span> <span class="n">voicing_threshold</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-665"><a href="#extract_cpp_descriptors-665"><span class="linenos">665</span></a>
</span><span id="extract_cpp_descriptors-666"><a href="#extract_cpp_descriptors-666"><span class="linenos">666</span></a>        <span class="n">pulses</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="n">snd</span><span class="p">,</span> <span class="n">pitch</span><span class="p">],</span> <span class="s2">&quot;To PointProcess (cc)&quot;</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-667"><a href="#extract_cpp_descriptors-667"><span class="linenos">667</span></a>
</span><span id="extract_cpp_descriptors-668"><a href="#extract_cpp_descriptors-668"><span class="linenos">668</span></a>        <span class="n">textgrid</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">pulses</span><span class="p">,</span> <span class="s2">&quot;To TextGrid (vuv)&quot;</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-669"><a href="#extract_cpp_descriptors-669"><span class="linenos">669</span></a>
</span><span id="extract_cpp_descriptors-670"><a href="#extract_cpp_descriptors-670"><span class="linenos">670</span></a>        <span class="n">vuv_table</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">textgrid</span><span class="p">,</span> <span class="s2">&quot;Down to Table&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-671"><a href="#extract_cpp_descriptors-671"><span class="linenos">671</span></a>        <span class="c1"># Variables - include line number, Time decimals, include tier names, include empty intervals</span>
</span><span id="extract_cpp_descriptors-672"><a href="#extract_cpp_descriptors-672"><span class="linenos">672</span></a>
</span><span id="extract_cpp_descriptors-673"><a href="#extract_cpp_descriptors-673"><span class="linenos">673</span></a>        <span class="n">cpp_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="extract_cpp_descriptors-674"><a href="#extract_cpp_descriptors-674"><span class="linenos">674</span></a>
</span><span id="extract_cpp_descriptors-675"><a href="#extract_cpp_descriptors-675"><span class="linenos">675</span></a>        <span class="n">n_intervals</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">vuv_table</span><span class="p">,</span> <span class="s2">&quot;Get number of rows&quot;</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-676"><a href="#extract_cpp_descriptors-676"><span class="linenos">676</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_intervals</span><span class="p">):</span>
</span><span id="extract_cpp_descriptors-677"><a href="#extract_cpp_descriptors-677"><span class="linenos">677</span></a>            <span class="n">label</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">vuv_table</span><span class="p">,</span> <span class="s2">&quot;Get value&quot;</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-678"><a href="#extract_cpp_descriptors-678"><span class="linenos">678</span></a>            <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="s2">&quot;V&quot;</span><span class="p">:</span>
</span><span id="extract_cpp_descriptors-679"><a href="#extract_cpp_descriptors-679"><span class="linenos">679</span></a>                <span class="n">tmin</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">vuv_table</span><span class="p">,</span> <span class="s2">&quot;Get value&quot;</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;tmin&quot;</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-680"><a href="#extract_cpp_descriptors-680"><span class="linenos">680</span></a>                <span class="n">tmax</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">vuv_table</span><span class="p">,</span> <span class="s2">&quot;Get value&quot;</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;tmax&quot;</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-681"><a href="#extract_cpp_descriptors-681"><span class="linenos">681</span></a>                <span class="n">snd_segment</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">extract_part</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">tmin</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">tmax</span><span class="p">))</span>
</span><span id="extract_cpp_descriptors-682"><a href="#extract_cpp_descriptors-682"><span class="linenos">682</span></a>
</span><span id="extract_cpp_descriptors-683"><a href="#extract_cpp_descriptors-683"><span class="linenos">683</span></a>                <span class="n">PowerCepstrogram</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd_segment</span><span class="p">,</span> <span class="s2">&quot;To PowerCepstrogram&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-684"><a href="#extract_cpp_descriptors-684"><span class="linenos">684</span></a>                <span class="c1"># PowerCepstrogram (60-Hz pitch floor, 2-ms time step, 5-kHz maximum frequency,</span>
</span><span id="extract_cpp_descriptors-685"><a href="#extract_cpp_descriptors-685"><span class="linenos">685</span></a>                <span class="c1"># and pre-emphasis from 50 Hz)</span>
</span><span id="extract_cpp_descriptors-686"><a href="#extract_cpp_descriptors-686"><span class="linenos">686</span></a>
</span><span id="extract_cpp_descriptors-687"><a href="#extract_cpp_descriptors-687"><span class="linenos">687</span></a>                <span class="k">try</span><span class="p">:</span>
</span><span id="extract_cpp_descriptors-688"><a href="#extract_cpp_descriptors-688"><span class="linenos">688</span></a>                    <span class="n">CPP_Value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
</span><span id="extract_cpp_descriptors-689"><a href="#extract_cpp_descriptors-689"><span class="linenos">689</span></a>                        <span class="n">PowerCepstrogram</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-690"><a href="#extract_cpp_descriptors-690"><span class="linenos">690</span></a>                        <span class="s2">&quot;Get CPPS...&quot;</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-691"><a href="#extract_cpp_descriptors-691"><span class="linenos">691</span></a>                        <span class="s2">&quot;no&quot;</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-692"><a href="#extract_cpp_descriptors-692"><span class="linenos">692</span></a>                        <span class="mf">0.01</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-693"><a href="#extract_cpp_descriptors-693"><span class="linenos">693</span></a>                        <span class="mf">0.001</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-694"><a href="#extract_cpp_descriptors-694"><span class="linenos">694</span></a>                        <span class="mi">60</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-695"><a href="#extract_cpp_descriptors-695"><span class="linenos">695</span></a>                        <span class="mi">330</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-696"><a href="#extract_cpp_descriptors-696"><span class="linenos">696</span></a>                        <span class="mf">0.05</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-697"><a href="#extract_cpp_descriptors-697"><span class="linenos">697</span></a>                        <span class="s2">&quot;parabolic&quot;</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-698"><a href="#extract_cpp_descriptors-698"><span class="linenos">698</span></a>                        <span class="mf">0.001</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-699"><a href="#extract_cpp_descriptors-699"><span class="linenos">699</span></a>                        <span class="mi">0</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-700"><a href="#extract_cpp_descriptors-700"><span class="linenos">700</span></a>                        <span class="s2">&quot;Straight&quot;</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-701"><a href="#extract_cpp_descriptors-701"><span class="linenos">701</span></a>                        <span class="s2">&quot;Robust&quot;</span><span class="p">,</span>
</span><span id="extract_cpp_descriptors-702"><a href="#extract_cpp_descriptors-702"><span class="linenos">702</span></a>                    <span class="p">)</span>
</span><span id="extract_cpp_descriptors-703"><a href="#extract_cpp_descriptors-703"><span class="linenos">703</span></a>                    <span class="c1"># Subtract tilt before smoothing = “no”; time averaging window = 0.01 s;</span>
</span><span id="extract_cpp_descriptors-704"><a href="#extract_cpp_descriptors-704"><span class="linenos">704</span></a>                    <span class="c1"># quefrency averaging window = 0.001 s;</span>
</span><span id="extract_cpp_descriptors-705"><a href="#extract_cpp_descriptors-705"><span class="linenos">705</span></a>                    <span class="c1"># Peak search pitch range = 60–330 Hz; tolerance = 0.05; interpolation = “Parabolic”;</span>
</span><span id="extract_cpp_descriptors-706"><a href="#extract_cpp_descriptors-706"><span class="linenos">706</span></a>                    <span class="c1"># tilt line frequency range = 0.001–0 s (no upper bound);</span>
</span><span id="extract_cpp_descriptors-707"><a href="#extract_cpp_descriptors-707"><span class="linenos">707</span></a>                    <span class="c1"># Line type = “Straight”; fit method = “Robust.”</span>
</span><span id="extract_cpp_descriptors-708"><a href="#extract_cpp_descriptors-708"><span class="linenos">708</span></a>                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_cpp_descriptors-709"><a href="#extract_cpp_descriptors-709"><span class="linenos">709</span></a>                    <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_cpp_descriptors-710"><a href="#extract_cpp_descriptors-710"><span class="linenos">710</span></a>                    <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_cpp_descriptors-711"><a href="#extract_cpp_descriptors-711"><span class="linenos">711</span></a>                        <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_cpp_descriptors-712"><a href="#extract_cpp_descriptors-712"><span class="linenos">712</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_cpp_descriptors-713"><a href="#extract_cpp_descriptors-713"><span class="linenos">713</span></a>                    <span class="n">CPP_Value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="extract_cpp_descriptors-714"><a href="#extract_cpp_descriptors-714"><span class="linenos">714</span></a>
</span><span id="extract_cpp_descriptors-715"><a href="#extract_cpp_descriptors-715"><span class="linenos">715</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">CPP_Value</span><span class="p">)</span> <span class="ow">and</span> <span class="n">CPP_Value</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
</span><span id="extract_cpp_descriptors-716"><a href="#extract_cpp_descriptors-716"><span class="linenos">716</span></a>                    <span class="n">cpp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CPP_Value</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-717"><a href="#extract_cpp_descriptors-717"><span class="linenos">717</span></a>
</span><span id="extract_cpp_descriptors-718"><a href="#extract_cpp_descriptors-718"><span class="linenos">718</span></a>        <span class="c1"># Calculate Final Features</span>
</span><span id="extract_cpp_descriptors-719"><a href="#extract_cpp_descriptors-719"><span class="linenos">719</span></a>        <span class="k">if</span> <span class="n">cpp_list</span><span class="p">:</span>
</span><span id="extract_cpp_descriptors-720"><a href="#extract_cpp_descriptors-720"><span class="linenos">720</span></a>            <span class="n">CPP_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">cpp_list</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-721"><a href="#extract_cpp_descriptors-721"><span class="linenos">721</span></a>            <span class="n">CPP_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">CPP_array</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-722"><a href="#extract_cpp_descriptors-722"><span class="linenos">722</span></a>            <span class="n">CPP_std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">CPP_array</span><span class="p">)</span>
</span><span id="extract_cpp_descriptors-723"><a href="#extract_cpp_descriptors-723"><span class="linenos">723</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="extract_cpp_descriptors-724"><a href="#extract_cpp_descriptors-724"><span class="linenos">724</span></a>            <span class="n">CPP_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="extract_cpp_descriptors-725"><a href="#extract_cpp_descriptors-725"><span class="linenos">725</span></a>            <span class="n">CPP_std</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="extract_cpp_descriptors-726"><a href="#extract_cpp_descriptors-726"><span class="linenos">726</span></a>
</span><span id="extract_cpp_descriptors-727"><a href="#extract_cpp_descriptors-727"><span class="linenos">727</span></a>        <span class="c1"># Return Result</span>
</span><span id="extract_cpp_descriptors-728"><a href="#extract_cpp_descriptors-728"><span class="linenos">728</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;mean_cpp&quot;</span><span class="p">:</span> <span class="n">CPP_mean</span><span class="p">,</span> <span class="s2">&quot;std_dev_cpp&quot;</span><span class="p">:</span> <span class="n">CPP_std</span><span class="p">}</span>
</span><span id="extract_cpp_descriptors-729"><a href="#extract_cpp_descriptors-729"><span class="linenos">729</span></a>
</span><span id="extract_cpp_descriptors-730"><a href="#extract_cpp_descriptors-730"><span class="linenos">730</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_cpp_descriptors-731"><a href="#extract_cpp_descriptors-731"><span class="linenos">731</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_cpp_descriptors-732"><a href="#extract_cpp_descriptors-732"><span class="linenos">732</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_cpp_descriptors-733"><a href="#extract_cpp_descriptors-733"><span class="linenos">733</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_cpp_descriptors-734"><a href="#extract_cpp_descriptors-734"><span class="linenos">734</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_cpp_descriptors-735"><a href="#extract_cpp_descriptors-735"><span class="linenos">735</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;mean_cpp&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s2">&quot;std_dev_cpp&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Extract Cepstral Peak Prominence (CPP).</p>

<p>Function to calculate the Cepstral Peak Prominence (CPP) from a given sound object.
This function is adapted from default Praat code to work with Parselmouth.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object or a file path or an Audio object.</li>
<li><strong>floor (float):</strong>  Minimum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
<li><strong>ceiling (float):</strong>  Maximum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
<li><strong>frame_shift (float):</strong>  Time rate at which to extract a new pitch value, typically set to 5 ms.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>dict: A dictionary containing the following key:</p>

<pre><code>- mean_cpp (float): Mean Cepstral Peak Prominence.
- std_dev_cpp (float): Standard deviation in Cepstral Peak Prominence.
</code></pre>
</blockquote>

<h6 id="examples">Examples:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">snd</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="s2">&quot;path_to_audio.wav&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">extract_CPP</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;mean_cpp&#39;</span><span class="p">:</span> <span class="mf">20.3</span><span class="p">,</span> <span class="s1">&#39;std_dev_cpp&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">}</span>
</code></pre>
  </div>
</blockquote>

<h6 id="notes">Notes:</h6>

<blockquote>
  <ul>
  <li>Cepstral Peak Prominence: The height (i.e., “prominence”) of that peak relative to a regression line
  through the overall cepstrum.</li>
  <li>Adapted from: <a href="https://osf.io/ctwgr">https://osf.io/ctwgr</a> and <a href="http://phonetics.linguistics.ucla.edu/facilities/acoustic/voiced_extract_auto.txt">http://phonetics.linguistics.ucla.edu/facilities/acoustic/voiced_extract_auto.txt</a></li>
  </ul>
</blockquote>
</div>


                </section>
                <section id="measure_f1f2_formants_bandwidths">
                            <input id="measure_f1f2_formants_bandwidths-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">measure_f1f2_formants_bandwidths</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">floor</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="measure_f1f2_formants_bandwidths-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#measure_f1f2_formants_bandwidths"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="measure_f1f2_formants_bandwidths-738"><a href="#measure_f1f2_formants_bandwidths-738"><span class="linenos">738</span></a><span class="k">def</span> <span class="nf">measure_f1f2_formants_bandwidths</span><span class="p">(</span>
</span><span id="measure_f1f2_formants_bandwidths-739"><a href="#measure_f1f2_formants_bandwidths-739"><span class="linenos">739</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="measure_f1f2_formants_bandwidths-740"><a href="#measure_f1f2_formants_bandwidths-740"><span class="linenos">740</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="measure_f1f2_formants_bandwidths-741"><a href="#measure_f1f2_formants_bandwidths-741"><span class="linenos">741</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract Formant Frequency Features.</span>
</span><span id="measure_f1f2_formants_bandwidths-742"><a href="#measure_f1f2_formants_bandwidths-742"><span class="linenos">742</span></a>
</span><span id="measure_f1f2_formants_bandwidths-743"><a href="#measure_f1f2_formants_bandwidths-743"><span class="linenos">743</span></a><span class="sd">    Function to extract formant frequency features from a given sound object. This function is adapted from default</span>
</span><span id="measure_f1f2_formants_bandwidths-744"><a href="#measure_f1f2_formants_bandwidths-744"><span class="linenos">744</span></a><span class="sd">    Praat code to work with Parselmouth.</span>
</span><span id="measure_f1f2_formants_bandwidths-745"><a href="#measure_f1f2_formants_bandwidths-745"><span class="linenos">745</span></a>
</span><span id="measure_f1f2_formants_bandwidths-746"><a href="#measure_f1f2_formants_bandwidths-746"><span class="linenos">746</span></a><span class="sd">    Args:</span>
</span><span id="measure_f1f2_formants_bandwidths-747"><a href="#measure_f1f2_formants_bandwidths-747"><span class="linenos">747</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="measure_f1f2_formants_bandwidths-748"><a href="#measure_f1f2_formants_bandwidths-748"><span class="linenos">748</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="measure_f1f2_formants_bandwidths-749"><a href="#measure_f1f2_formants_bandwidths-749"><span class="linenos">749</span></a><span class="sd">        ceiling (float): Maximum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="measure_f1f2_formants_bandwidths-750"><a href="#measure_f1f2_formants_bandwidths-750"><span class="linenos">750</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new pitch value, typically set to 5 ms.</span>
</span><span id="measure_f1f2_formants_bandwidths-751"><a href="#measure_f1f2_formants_bandwidths-751"><span class="linenos">751</span></a>
</span><span id="measure_f1f2_formants_bandwidths-752"><a href="#measure_f1f2_formants_bandwidths-752"><span class="linenos">752</span></a><span class="sd">    Returns:</span>
</span><span id="measure_f1f2_formants_bandwidths-753"><a href="#measure_f1f2_formants_bandwidths-753"><span class="linenos">753</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="measure_f1f2_formants_bandwidths-754"><a href="#measure_f1f2_formants_bandwidths-754"><span class="linenos">754</span></a>
</span><span id="measure_f1f2_formants_bandwidths-755"><a href="#measure_f1f2_formants_bandwidths-755"><span class="linenos">755</span></a><span class="sd">            - f1_mean (float): Mean F1 location.</span>
</span><span id="measure_f1f2_formants_bandwidths-756"><a href="#measure_f1f2_formants_bandwidths-756"><span class="linenos">756</span></a><span class="sd">            - f1_std (float): Standard deviation of F1 location.</span>
</span><span id="measure_f1f2_formants_bandwidths-757"><a href="#measure_f1f2_formants_bandwidths-757"><span class="linenos">757</span></a><span class="sd">            - b1_mean (float): Mean F1 bandwidth.</span>
</span><span id="measure_f1f2_formants_bandwidths-758"><a href="#measure_f1f2_formants_bandwidths-758"><span class="linenos">758</span></a><span class="sd">            - b1_std (float): Standard deviation of F1 bandwidth.</span>
</span><span id="measure_f1f2_formants_bandwidths-759"><a href="#measure_f1f2_formants_bandwidths-759"><span class="linenos">759</span></a><span class="sd">            - f2_mean (float): Mean F2 location.</span>
</span><span id="measure_f1f2_formants_bandwidths-760"><a href="#measure_f1f2_formants_bandwidths-760"><span class="linenos">760</span></a><span class="sd">            - f2_std (float): Standard deviation of F2 location.</span>
</span><span id="measure_f1f2_formants_bandwidths-761"><a href="#measure_f1f2_formants_bandwidths-761"><span class="linenos">761</span></a><span class="sd">            - b2_mean (float): Mean F2 bandwidth.</span>
</span><span id="measure_f1f2_formants_bandwidths-762"><a href="#measure_f1f2_formants_bandwidths-762"><span class="linenos">762</span></a><span class="sd">            - b2_std (float): Standard deviation of F2 bandwidth.</span>
</span><span id="measure_f1f2_formants_bandwidths-763"><a href="#measure_f1f2_formants_bandwidths-763"><span class="linenos">763</span></a>
</span><span id="measure_f1f2_formants_bandwidths-764"><a href="#measure_f1f2_formants_bandwidths-764"><span class="linenos">764</span></a><span class="sd">    Examples:</span>
</span><span id="measure_f1f2_formants_bandwidths-765"><a href="#measure_f1f2_formants_bandwidths-765"><span class="linenos">765</span></a><span class="sd">        ```python</span>
</span><span id="measure_f1f2_formants_bandwidths-766"><a href="#measure_f1f2_formants_bandwidths-766"><span class="linenos">766</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="measure_f1f2_formants_bandwidths-767"><a href="#measure_f1f2_formants_bandwidths-767"><span class="linenos">767</span></a><span class="sd">        &gt;&gt;&gt; measureFormants(snd, 75, 500, 0.01)</span>
</span><span id="measure_f1f2_formants_bandwidths-768"><a href="#measure_f1f2_formants_bandwidths-768"><span class="linenos">768</span></a><span class="sd">        {&#39;f1_mean&#39;: 500.0, &#39;f1_std&#39;: 50.0, &#39;b1_mean&#39;: 80.0, &#39;b1_std&#39;: 10.0, &#39;f2_mean&#39;: 1500.0,</span>
</span><span id="measure_f1f2_formants_bandwidths-769"><a href="#measure_f1f2_formants_bandwidths-769"><span class="linenos">769</span></a><span class="sd">        &#39;f2_std&#39;: 100.0, &#39;b2_mean&#39;: 120.0, &#39;b2_std&#39;: 20.0}</span>
</span><span id="measure_f1f2_formants_bandwidths-770"><a href="#measure_f1f2_formants_bandwidths-770"><span class="linenos">770</span></a><span class="sd">        ```</span>
</span><span id="measure_f1f2_formants_bandwidths-771"><a href="#measure_f1f2_formants_bandwidths-771"><span class="linenos">771</span></a>
</span><span id="measure_f1f2_formants_bandwidths-772"><a href="#measure_f1f2_formants_bandwidths-772"><span class="linenos">772</span></a><span class="sd">    Notes:</span>
</span><span id="measure_f1f2_formants_bandwidths-773"><a href="#measure_f1f2_formants_bandwidths-773"><span class="linenos">773</span></a><span class="sd">        - Formants are the resonances of the vocal tract, determined by tongue placement and vocal tract shape.</span>
</span><span id="measure_f1f2_formants_bandwidths-774"><a href="#measure_f1f2_formants_bandwidths-774"><span class="linenos">774</span></a><span class="sd">        - Mean F1 typically varies between 300 to 750 Hz, while mean F2 typically varies between 900 to 2300 Hz.</span>
</span><span id="measure_f1f2_formants_bandwidths-775"><a href="#measure_f1f2_formants_bandwidths-775"><span class="linenos">775</span></a><span class="sd">        - Formant bandwidth is measured by taking the width of the band forming 3 dB down from the formant peak.</span>
</span><span id="measure_f1f2_formants_bandwidths-776"><a href="#measure_f1f2_formants_bandwidths-776"><span class="linenos">776</span></a><span class="sd">        - Formant extraction occurs per pitch period (pulses), meaning that the analysis identifies the points in the</span>
</span><span id="measure_f1f2_formants_bandwidths-777"><a href="#measure_f1f2_formants_bandwidths-777"><span class="linenos">777</span></a><span class="sd">          sound where the vocal folds come together, helping to align the formant measurements precisely with the</span>
</span><span id="measure_f1f2_formants_bandwidths-778"><a href="#measure_f1f2_formants_bandwidths-778"><span class="linenos">778</span></a><span class="sd">          pitch periods.</span>
</span><span id="measure_f1f2_formants_bandwidths-779"><a href="#measure_f1f2_formants_bandwidths-779"><span class="linenos">779</span></a><span class="sd">        - Adapted from code at this [link](https://osf.io/6dwr3/).</span>
</span><span id="measure_f1f2_formants_bandwidths-780"><a href="#measure_f1f2_formants_bandwidths-780"><span class="linenos">780</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="measure_f1f2_formants_bandwidths-781"><a href="#measure_f1f2_formants_bandwidths-781"><span class="linenos">781</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="measure_f1f2_formants_bandwidths-782"><a href="#measure_f1f2_formants_bandwidths-782"><span class="linenos">782</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="measure_f1f2_formants_bandwidths-783"><a href="#measure_f1f2_formants_bandwidths-783"><span class="linenos">783</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-784"><a href="#measure_f1f2_formants_bandwidths-784"><span class="linenos">784</span></a>
</span><span id="measure_f1f2_formants_bandwidths-785"><a href="#measure_f1f2_formants_bandwidths-785"><span class="linenos">785</span></a>        <span class="c1"># Extract formants</span>
</span><span id="measure_f1f2_formants_bandwidths-786"><a href="#measure_f1f2_formants_bandwidths-786"><span class="linenos">786</span></a>        <span class="n">formants</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="s2">&quot;To Formant (burg)&quot;</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mf">0.025</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-787"><a href="#measure_f1f2_formants_bandwidths-787"><span class="linenos">787</span></a>        <span class="c1"># Key Hyperparameters: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Formant__burg____.html</span>
</span><span id="measure_f1f2_formants_bandwidths-788"><a href="#measure_f1f2_formants_bandwidths-788"><span class="linenos">788</span></a>
</span><span id="measure_f1f2_formants_bandwidths-789"><a href="#measure_f1f2_formants_bandwidths-789"><span class="linenos">789</span></a>        <span class="c1"># Extract pitch using CC method</span>
</span><span id="measure_f1f2_formants_bandwidths-790"><a href="#measure_f1f2_formants_bandwidths-790"><span class="linenos">790</span></a>        <span class="n">pitch</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_cc</span><span class="p">(</span><span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">pitch_floor</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">pitch_ceiling</span><span class="o">=</span><span class="n">ceiling</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-791"><a href="#measure_f1f2_formants_bandwidths-791"><span class="linenos">791</span></a>        <span class="n">pulses</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="n">snd</span><span class="p">,</span> <span class="n">pitch</span><span class="p">],</span> <span class="s2">&quot;To PointProcess (cc)&quot;</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-792"><a href="#measure_f1f2_formants_bandwidths-792"><span class="linenos">792</span></a>
</span><span id="measure_f1f2_formants_bandwidths-793"><a href="#measure_f1f2_formants_bandwidths-793"><span class="linenos">793</span></a>        <span class="n">F1_list</span><span class="p">,</span> <span class="n">F2_list</span><span class="p">,</span> <span class="n">B1_list</span><span class="p">,</span> <span class="n">B2_list</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
</span><span id="measure_f1f2_formants_bandwidths-794"><a href="#measure_f1f2_formants_bandwidths-794"><span class="linenos">794</span></a>        <span class="n">numPoints</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">pulses</span><span class="p">,</span> <span class="s2">&quot;Get number of points&quot;</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-795"><a href="#measure_f1f2_formants_bandwidths-795"><span class="linenos">795</span></a>
</span><span id="measure_f1f2_formants_bandwidths-796"><a href="#measure_f1f2_formants_bandwidths-796"><span class="linenos">796</span></a>        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numPoints</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="measure_f1f2_formants_bandwidths-797"><a href="#measure_f1f2_formants_bandwidths-797"><span class="linenos">797</span></a>            <span class="n">t</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">pulses</span><span class="p">,</span> <span class="s2">&quot;Get time from index&quot;</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-798"><a href="#measure_f1f2_formants_bandwidths-798"><span class="linenos">798</span></a>
</span><span id="measure_f1f2_formants_bandwidths-799"><a href="#measure_f1f2_formants_bandwidths-799"><span class="linenos">799</span></a>            <span class="n">F1_value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">formants</span><span class="p">,</span> <span class="s2">&quot;Get value at time&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-800"><a href="#measure_f1f2_formants_bandwidths-800"><span class="linenos">800</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">F1_value</span><span class="p">):</span>
</span><span id="measure_f1f2_formants_bandwidths-801"><a href="#measure_f1f2_formants_bandwidths-801"><span class="linenos">801</span></a>                <span class="n">F1_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">F1_value</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-802"><a href="#measure_f1f2_formants_bandwidths-802"><span class="linenos">802</span></a>
</span><span id="measure_f1f2_formants_bandwidths-803"><a href="#measure_f1f2_formants_bandwidths-803"><span class="linenos">803</span></a>            <span class="n">B1_value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">formants</span><span class="p">,</span> <span class="s2">&quot;Get bandwidth at time&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-804"><a href="#measure_f1f2_formants_bandwidths-804"><span class="linenos">804</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">B1_value</span><span class="p">):</span>
</span><span id="measure_f1f2_formants_bandwidths-805"><a href="#measure_f1f2_formants_bandwidths-805"><span class="linenos">805</span></a>                <span class="n">B1_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">B1_value</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-806"><a href="#measure_f1f2_formants_bandwidths-806"><span class="linenos">806</span></a>
</span><span id="measure_f1f2_formants_bandwidths-807"><a href="#measure_f1f2_formants_bandwidths-807"><span class="linenos">807</span></a>            <span class="n">F2_value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">formants</span><span class="p">,</span> <span class="s2">&quot;Get value at time&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-808"><a href="#measure_f1f2_formants_bandwidths-808"><span class="linenos">808</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">F2_value</span><span class="p">):</span>
</span><span id="measure_f1f2_formants_bandwidths-809"><a href="#measure_f1f2_formants_bandwidths-809"><span class="linenos">809</span></a>                <span class="n">F2_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">F2_value</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-810"><a href="#measure_f1f2_formants_bandwidths-810"><span class="linenos">810</span></a>
</span><span id="measure_f1f2_formants_bandwidths-811"><a href="#measure_f1f2_formants_bandwidths-811"><span class="linenos">811</span></a>            <span class="n">B2_value</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">formants</span><span class="p">,</span> <span class="s2">&quot;Get bandwidth at time&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span> <span class="s2">&quot;Linear&quot;</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-812"><a href="#measure_f1f2_formants_bandwidths-812"><span class="linenos">812</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">B2_value</span><span class="p">):</span>
</span><span id="measure_f1f2_formants_bandwidths-813"><a href="#measure_f1f2_formants_bandwidths-813"><span class="linenos">813</span></a>                <span class="n">B2_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">B2_value</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-814"><a href="#measure_f1f2_formants_bandwidths-814"><span class="linenos">814</span></a>
</span><span id="measure_f1f2_formants_bandwidths-815"><a href="#measure_f1f2_formants_bandwidths-815"><span class="linenos">815</span></a>        <span class="n">f1_mean</span><span class="p">,</span> <span class="n">f1_std</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">F1_list</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">F1_list</span><span class="p">))</span> <span class="k">if</span> <span class="n">F1_list</span> <span class="k">else</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-816"><a href="#measure_f1f2_formants_bandwidths-816"><span class="linenos">816</span></a>        <span class="n">b1_mean</span><span class="p">,</span> <span class="n">b1_std</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">B1_list</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">B1_list</span><span class="p">))</span> <span class="k">if</span> <span class="n">B1_list</span> <span class="k">else</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-817"><a href="#measure_f1f2_formants_bandwidths-817"><span class="linenos">817</span></a>        <span class="n">f2_mean</span><span class="p">,</span> <span class="n">f2_std</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">F2_list</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">F2_list</span><span class="p">))</span> <span class="k">if</span> <span class="n">F2_list</span> <span class="k">else</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-818"><a href="#measure_f1f2_formants_bandwidths-818"><span class="linenos">818</span></a>        <span class="n">b2_mean</span><span class="p">,</span> <span class="n">b2_std</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">B2_list</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">B2_list</span><span class="p">))</span> <span class="k">if</span> <span class="n">B2_list</span> <span class="k">else</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</span><span id="measure_f1f2_formants_bandwidths-819"><a href="#measure_f1f2_formants_bandwidths-819"><span class="linenos">819</span></a>
</span><span id="measure_f1f2_formants_bandwidths-820"><a href="#measure_f1f2_formants_bandwidths-820"><span class="linenos">820</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="measure_f1f2_formants_bandwidths-821"><a href="#measure_f1f2_formants_bandwidths-821"><span class="linenos">821</span></a>            <span class="s2">&quot;f1_mean&quot;</span><span class="p">:</span> <span class="n">f1_mean</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-822"><a href="#measure_f1f2_formants_bandwidths-822"><span class="linenos">822</span></a>            <span class="s2">&quot;f1_std&quot;</span><span class="p">:</span> <span class="n">f1_std</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-823"><a href="#measure_f1f2_formants_bandwidths-823"><span class="linenos">823</span></a>            <span class="s2">&quot;b1_mean&quot;</span><span class="p">:</span> <span class="n">b1_mean</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-824"><a href="#measure_f1f2_formants_bandwidths-824"><span class="linenos">824</span></a>            <span class="s2">&quot;b1_std&quot;</span><span class="p">:</span> <span class="n">b1_std</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-825"><a href="#measure_f1f2_formants_bandwidths-825"><span class="linenos">825</span></a>            <span class="s2">&quot;f2_mean&quot;</span><span class="p">:</span> <span class="n">f2_mean</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-826"><a href="#measure_f1f2_formants_bandwidths-826"><span class="linenos">826</span></a>            <span class="s2">&quot;f2_std&quot;</span><span class="p">:</span> <span class="n">f2_std</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-827"><a href="#measure_f1f2_formants_bandwidths-827"><span class="linenos">827</span></a>            <span class="s2">&quot;b2_mean&quot;</span><span class="p">:</span> <span class="n">b2_mean</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-828"><a href="#measure_f1f2_formants_bandwidths-828"><span class="linenos">828</span></a>            <span class="s2">&quot;b2_std&quot;</span><span class="p">:</span> <span class="n">b2_std</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-829"><a href="#measure_f1f2_formants_bandwidths-829"><span class="linenos">829</span></a>        <span class="p">}</span>
</span><span id="measure_f1f2_formants_bandwidths-830"><a href="#measure_f1f2_formants_bandwidths-830"><span class="linenos">830</span></a>
</span><span id="measure_f1f2_formants_bandwidths-831"><a href="#measure_f1f2_formants_bandwidths-831"><span class="linenos">831</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="measure_f1f2_formants_bandwidths-832"><a href="#measure_f1f2_formants_bandwidths-832"><span class="linenos">832</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="measure_f1f2_formants_bandwidths-833"><a href="#measure_f1f2_formants_bandwidths-833"><span class="linenos">833</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="measure_f1f2_formants_bandwidths-834"><a href="#measure_f1f2_formants_bandwidths-834"><span class="linenos">834</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="measure_f1f2_formants_bandwidths-835"><a href="#measure_f1f2_formants_bandwidths-835"><span class="linenos">835</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="measure_f1f2_formants_bandwidths-836"><a href="#measure_f1f2_formants_bandwidths-836"><span class="linenos">836</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="measure_f1f2_formants_bandwidths-837"><a href="#measure_f1f2_formants_bandwidths-837"><span class="linenos">837</span></a>            <span class="s2">&quot;f1_mean&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-838"><a href="#measure_f1f2_formants_bandwidths-838"><span class="linenos">838</span></a>            <span class="s2">&quot;f1_std&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-839"><a href="#measure_f1f2_formants_bandwidths-839"><span class="linenos">839</span></a>            <span class="s2">&quot;b1_mean&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-840"><a href="#measure_f1f2_formants_bandwidths-840"><span class="linenos">840</span></a>            <span class="s2">&quot;b1_std&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-841"><a href="#measure_f1f2_formants_bandwidths-841"><span class="linenos">841</span></a>            <span class="s2">&quot;f2_mean&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-842"><a href="#measure_f1f2_formants_bandwidths-842"><span class="linenos">842</span></a>            <span class="s2">&quot;f2_std&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-843"><a href="#measure_f1f2_formants_bandwidths-843"><span class="linenos">843</span></a>            <span class="s2">&quot;b2_mean&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-844"><a href="#measure_f1f2_formants_bandwidths-844"><span class="linenos">844</span></a>            <span class="s2">&quot;b2_std&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="measure_f1f2_formants_bandwidths-845"><a href="#measure_f1f2_formants_bandwidths-845"><span class="linenos">845</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Extract Formant Frequency Features.</p>

<p>Function to extract formant frequency features from a given sound object. This function is adapted from default
Praat code to work with Parselmouth.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object or a file path or an Audio object.</li>
<li><strong>floor (float):</strong>  Minimum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
<li><strong>ceiling (float):</strong>  Maximum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
<li><strong>frame_shift (float):</strong>  Time rate at which to extract a new pitch value, typically set to 5 ms.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>dict: A dictionary containing the following keys:</p>

<pre><code>- f1_mean (float): Mean F1 location.
- f1_std (float): Standard deviation of F1 location.
- b1_mean (float): Mean F1 bandwidth.
- b1_std (float): Standard deviation of F1 bandwidth.
- f2_mean (float): Mean F2 location.
- f2_std (float): Standard deviation of F2 location.
- b2_mean (float): Mean F2 bandwidth.
- b2_std (float): Standard deviation of F2 bandwidth.
</code></pre>
</blockquote>

<h6 id="examples">Examples:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">snd</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="s2">&quot;path_to_audio.wav&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">measureFormants</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;f1_mean&#39;</span><span class="p">:</span> <span class="mf">500.0</span><span class="p">,</span> <span class="s1">&#39;f1_std&#39;</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span> <span class="s1">&#39;b1_mean&#39;</span><span class="p">:</span> <span class="mf">80.0</span><span class="p">,</span> <span class="s1">&#39;b1_std&#39;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s1">&#39;f2_mean&#39;</span><span class="p">:</span> <span class="mf">1500.0</span><span class="p">,</span>
<span class="s1">&#39;f2_std&#39;</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span> <span class="s1">&#39;b2_mean&#39;</span><span class="p">:</span> <span class="mf">120.0</span><span class="p">,</span> <span class="s1">&#39;b2_std&#39;</span><span class="p">:</span> <span class="mf">20.0</span><span class="p">}</span>
</code></pre>
  </div>
</blockquote>

<h6 id="notes">Notes:</h6>

<blockquote>
  <ul>
  <li>Formants are the resonances of the vocal tract, determined by tongue placement and vocal tract shape.</li>
  <li>Mean F1 typically varies between 300 to 750 Hz, while mean F2 typically varies between 900 to 2300 Hz.</li>
  <li>Formant bandwidth is measured by taking the width of the band forming 3 dB down from the formant peak.</li>
  <li>Formant extraction occurs per pitch period (pulses), meaning that the analysis identifies the points in the
  sound where the vocal folds come together, helping to align the formant measurements precisely with the
  pitch periods.</li>
  <li>Adapted from code at this <a href="https://osf.io/6dwr3/">link</a>.</li>
  </ul>
</blockquote>
</div>


                </section>
                <section id="extract_spectral_moments">
                            <input id="extract_spectral_moments-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_spectral_moments</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">floor</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">window_size</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="extract_spectral_moments-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_spectral_moments"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_spectral_moments-848"><a href="#extract_spectral_moments-848"><span class="linenos">848</span></a><span class="k">def</span> <span class="nf">extract_spectral_moments</span><span class="p">(</span>
</span><span id="extract_spectral_moments-849"><a href="#extract_spectral_moments-849"><span class="linenos">849</span></a>    <span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">window_size</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">frame_shift</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="extract_spectral_moments-850"><a href="#extract_spectral_moments-850"><span class="linenos">850</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="extract_spectral_moments-851"><a href="#extract_spectral_moments-851"><span class="linenos">851</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract Spectral Moments.</span>
</span><span id="extract_spectral_moments-852"><a href="#extract_spectral_moments-852"><span class="linenos">852</span></a>
</span><span id="extract_spectral_moments-853"><a href="#extract_spectral_moments-853"><span class="linenos">853</span></a><span class="sd">    Function to extract spectral moments from a given sound object. This function is adapted from default</span>
</span><span id="extract_spectral_moments-854"><a href="#extract_spectral_moments-854"><span class="linenos">854</span></a><span class="sd">    Praat code to work with Parselmouth.</span>
</span><span id="extract_spectral_moments-855"><a href="#extract_spectral_moments-855"><span class="linenos">855</span></a>
</span><span id="extract_spectral_moments-856"><a href="#extract_spectral_moments-856"><span class="linenos">856</span></a><span class="sd">    Args:</span>
</span><span id="extract_spectral_moments-857"><a href="#extract_spectral_moments-857"><span class="linenos">857</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object or a file path or an Audio object.</span>
</span><span id="extract_spectral_moments-858"><a href="#extract_spectral_moments-858"><span class="linenos">858</span></a><span class="sd">        floor (float): Minimum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="extract_spectral_moments-859"><a href="#extract_spectral_moments-859"><span class="linenos">859</span></a><span class="sd">        ceiling (float): Maximum expected pitch value, set using value found in `pitch_values` function.</span>
</span><span id="extract_spectral_moments-860"><a href="#extract_spectral_moments-860"><span class="linenos">860</span></a><span class="sd">        window_size (float): Time frame over which the spectra is calculated, typically set to 25 ms.</span>
</span><span id="extract_spectral_moments-861"><a href="#extract_spectral_moments-861"><span class="linenos">861</span></a><span class="sd">        frame_shift (float): Time rate at which to extract a new pitch value, typically set to 5 ms.</span>
</span><span id="extract_spectral_moments-862"><a href="#extract_spectral_moments-862"><span class="linenos">862</span></a>
</span><span id="extract_spectral_moments-863"><a href="#extract_spectral_moments-863"><span class="linenos">863</span></a><span class="sd">    Returns:</span>
</span><span id="extract_spectral_moments-864"><a href="#extract_spectral_moments-864"><span class="linenos">864</span></a><span class="sd">        dict: A dictionary containing the following keys:</span>
</span><span id="extract_spectral_moments-865"><a href="#extract_spectral_moments-865"><span class="linenos">865</span></a>
</span><span id="extract_spectral_moments-866"><a href="#extract_spectral_moments-866"><span class="linenos">866</span></a><span class="sd">            - spectral_gravity (float): Mean spectral gravity.</span>
</span><span id="extract_spectral_moments-867"><a href="#extract_spectral_moments-867"><span class="linenos">867</span></a><span class="sd">            - spectral_std_dev (float): Mean spectral standard deviation.</span>
</span><span id="extract_spectral_moments-868"><a href="#extract_spectral_moments-868"><span class="linenos">868</span></a><span class="sd">            - spectral_skewness (float): Mean spectral skewness.</span>
</span><span id="extract_spectral_moments-869"><a href="#extract_spectral_moments-869"><span class="linenos">869</span></a><span class="sd">            - spectral_kurtosis (float): Mean spectral kurtosis.</span>
</span><span id="extract_spectral_moments-870"><a href="#extract_spectral_moments-870"><span class="linenos">870</span></a>
</span><span id="extract_spectral_moments-871"><a href="#extract_spectral_moments-871"><span class="linenos">871</span></a><span class="sd">    Examples:</span>
</span><span id="extract_spectral_moments-872"><a href="#extract_spectral_moments-872"><span class="linenos">872</span></a><span class="sd">        ```python</span>
</span><span id="extract_spectral_moments-873"><a href="#extract_spectral_moments-873"><span class="linenos">873</span></a><span class="sd">        &gt;&gt;&gt; snd = parselmouth.Sound(&quot;path_to_audio.wav&quot;)</span>
</span><span id="extract_spectral_moments-874"><a href="#extract_spectral_moments-874"><span class="linenos">874</span></a><span class="sd">        &gt;&gt;&gt; extract_spectral_moments(snd, 75, 500, 0.025, 0.01)</span>
</span><span id="extract_spectral_moments-875"><a href="#extract_spectral_moments-875"><span class="linenos">875</span></a><span class="sd">        {&#39;spectral_gravity&#39;: 5000.0, &#39;spectral_std_dev&#39;: 150.0, &#39;spectral_skewness&#39;: -0.5, &#39;spectral_kurtosis&#39;: 3.0}</span>
</span><span id="extract_spectral_moments-876"><a href="#extract_spectral_moments-876"><span class="linenos">876</span></a><span class="sd">        ```</span>
</span><span id="extract_spectral_moments-877"><a href="#extract_spectral_moments-877"><span class="linenos">877</span></a>
</span><span id="extract_spectral_moments-878"><a href="#extract_spectral_moments-878"><span class="linenos">878</span></a><span class="sd">    Notes:</span>
</span><span id="extract_spectral_moments-879"><a href="#extract_spectral_moments-879"><span class="linenos">879</span></a><span class="sd">        - Spectral Gravity: Measure for how high the frequencies in a spectrum are on average over the entire frequency</span>
</span><span id="extract_spectral_moments-880"><a href="#extract_spectral_moments-880"><span class="linenos">880</span></a><span class="sd">        domain weighted by the power spectrum.</span>
</span><span id="extract_spectral_moments-881"><a href="#extract_spectral_moments-881"><span class="linenos">881</span></a><span class="sd">        - Spectral Standard Deviation: Measure for how much the frequencies in a spectrum can deviate from the centre</span>
</span><span id="extract_spectral_moments-882"><a href="#extract_spectral_moments-882"><span class="linenos">882</span></a><span class="sd">        of gravity.</span>
</span><span id="extract_spectral_moments-883"><a href="#extract_spectral_moments-883"><span class="linenos">883</span></a><span class="sd">        - Spectral Skewness: Measure for how much the shape of the spectrum below the centre of gravity is different</span>
</span><span id="extract_spectral_moments-884"><a href="#extract_spectral_moments-884"><span class="linenos">884</span></a><span class="sd">        from the shape above the mean frequency.</span>
</span><span id="extract_spectral_moments-885"><a href="#extract_spectral_moments-885"><span class="linenos">885</span></a><span class="sd">        - Spectral Kurtosis: Measure for how much the shape of the spectrum around the centre of gravity is different</span>
</span><span id="extract_spectral_moments-886"><a href="#extract_spectral_moments-886"><span class="linenos">886</span></a><span class="sd">          from a Gaussian shape.</span>
</span><span id="extract_spectral_moments-887"><a href="#extract_spectral_moments-887"><span class="linenos">887</span></a><span class="sd">        - Details: https://www.fon.hum.uva.nl/praat/manual/Spectrum__Get_central_moment___.html</span>
</span><span id="extract_spectral_moments-888"><a href="#extract_spectral_moments-888"><span class="linenos">888</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_spectral_moments-889"><a href="#extract_spectral_moments-889"><span class="linenos">889</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_spectral_moments-890"><a href="#extract_spectral_moments-890"><span class="linenos">890</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="extract_spectral_moments-891"><a href="#extract_spectral_moments-891"><span class="linenos">891</span></a>            <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="extract_spectral_moments-892"><a href="#extract_spectral_moments-892"><span class="linenos">892</span></a>
</span><span id="extract_spectral_moments-893"><a href="#extract_spectral_moments-893"><span class="linenos">893</span></a>        <span class="c1"># Extract pitch object for voiced checking</span>
</span><span id="extract_spectral_moments-894"><a href="#extract_spectral_moments-894"><span class="linenos">894</span></a>        <span class="n">pitch</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_pitch_ac</span><span class="p">(</span><span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">,</span> <span class="n">pitch_floor</span><span class="o">=</span><span class="n">floor</span><span class="p">,</span> <span class="n">pitch_ceiling</span><span class="o">=</span><span class="n">ceiling</span><span class="p">)</span>
</span><span id="extract_spectral_moments-895"><a href="#extract_spectral_moments-895"><span class="linenos">895</span></a>
</span><span id="extract_spectral_moments-896"><a href="#extract_spectral_moments-896"><span class="linenos">896</span></a>        <span class="c1"># Calculate Spectrogram</span>
</span><span id="extract_spectral_moments-897"><a href="#extract_spectral_moments-897"><span class="linenos">897</span></a>        <span class="n">spectrogram</span> <span class="o">=</span> <span class="n">snd</span><span class="o">.</span><span class="n">to_spectrogram</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="n">window_size</span><span class="p">,</span> <span class="n">time_step</span><span class="o">=</span><span class="n">frame_shift</span><span class="p">)</span>
</span><span id="extract_spectral_moments-898"><a href="#extract_spectral_moments-898"><span class="linenos">898</span></a>        <span class="c1"># Using default settings other than window length and frame shift</span>
</span><span id="extract_spectral_moments-899"><a href="#extract_spectral_moments-899"><span class="linenos">899</span></a>        <span class="c1"># Details: https://www.fon.hum.uva.nl/praat/manual/Sound__To_Spectrogram___.html</span>
</span><span id="extract_spectral_moments-900"><a href="#extract_spectral_moments-900"><span class="linenos">900</span></a>
</span><span id="extract_spectral_moments-901"><a href="#extract_spectral_moments-901"><span class="linenos">901</span></a>        <span class="n">Gravity_list</span><span class="p">,</span> <span class="n">STD_list</span><span class="p">,</span> <span class="n">Skew_list</span><span class="p">,</span> <span class="n">Kurt_list</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
</span><span id="extract_spectral_moments-902"><a href="#extract_spectral_moments-902"><span class="linenos">902</span></a>
</span><span id="extract_spectral_moments-903"><a href="#extract_spectral_moments-903"><span class="linenos">903</span></a>        <span class="n">num_steps</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">spectrogram</span><span class="p">,</span> <span class="s2">&quot;Get number of frames&quot;</span><span class="p">)</span>
</span><span id="extract_spectral_moments-904"><a href="#extract_spectral_moments-904"><span class="linenos">904</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_steps</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="extract_spectral_moments-905"><a href="#extract_spectral_moments-905"><span class="linenos">905</span></a>            <span class="n">t</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">spectrogram</span><span class="p">,</span> <span class="s2">&quot;Get time from frame number&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="extract_spectral_moments-906"><a href="#extract_spectral_moments-906"><span class="linenos">906</span></a>            <span class="n">pitch_value</span> <span class="o">=</span> <span class="n">pitch</span><span class="o">.</span><span class="n">get_value_at_time</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="extract_spectral_moments-907"><a href="#extract_spectral_moments-907"><span class="linenos">907</span></a>
</span><span id="extract_spectral_moments-908"><a href="#extract_spectral_moments-908"><span class="linenos">908</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">pitch_value</span><span class="p">):</span>
</span><span id="extract_spectral_moments-909"><a href="#extract_spectral_moments-909"><span class="linenos">909</span></a>                <span class="n">voiced_spectrum</span> <span class="o">=</span> <span class="n">spectrogram</span><span class="o">.</span><span class="n">to_spectrum_slice</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="extract_spectral_moments-910"><a href="#extract_spectral_moments-910"><span class="linenos">910</span></a>                <span class="c1"># Details: https://www.fon.hum.uva.nl/praat/manual/Spectrogram__To_Spectrum__slice____.html</span>
</span><span id="extract_spectral_moments-911"><a href="#extract_spectral_moments-911"><span class="linenos">911</span></a>
</span><span id="extract_spectral_moments-912"><a href="#extract_spectral_moments-912"><span class="linenos">912</span></a>                <span class="n">Gravity_LLD</span> <span class="o">=</span> <span class="n">voiced_spectrum</span><span class="o">.</span><span class="n">get_centre_of_gravity</span><span class="p">(</span><span class="n">power</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="extract_spectral_moments-913"><a href="#extract_spectral_moments-913"><span class="linenos">913</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">Gravity_LLD</span><span class="p">):</span>
</span><span id="extract_spectral_moments-914"><a href="#extract_spectral_moments-914"><span class="linenos">914</span></a>                    <span class="n">Gravity_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Gravity_LLD</span><span class="p">)</span>
</span><span id="extract_spectral_moments-915"><a href="#extract_spectral_moments-915"><span class="linenos">915</span></a>
</span><span id="extract_spectral_moments-916"><a href="#extract_spectral_moments-916"><span class="linenos">916</span></a>                <span class="n">STD_LLD</span> <span class="o">=</span> <span class="n">voiced_spectrum</span><span class="o">.</span><span class="n">get_standard_deviation</span><span class="p">(</span><span class="n">power</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="extract_spectral_moments-917"><a href="#extract_spectral_moments-917"><span class="linenos">917</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">STD_LLD</span><span class="p">):</span>
</span><span id="extract_spectral_moments-918"><a href="#extract_spectral_moments-918"><span class="linenos">918</span></a>                    <span class="n">STD_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">STD_LLD</span><span class="p">)</span>
</span><span id="extract_spectral_moments-919"><a href="#extract_spectral_moments-919"><span class="linenos">919</span></a>
</span><span id="extract_spectral_moments-920"><a href="#extract_spectral_moments-920"><span class="linenos">920</span></a>                <span class="n">Skew_LLD</span> <span class="o">=</span> <span class="n">voiced_spectrum</span><span class="o">.</span><span class="n">get_skewness</span><span class="p">(</span><span class="n">power</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="extract_spectral_moments-921"><a href="#extract_spectral_moments-921"><span class="linenos">921</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">Skew_LLD</span><span class="p">):</span>
</span><span id="extract_spectral_moments-922"><a href="#extract_spectral_moments-922"><span class="linenos">922</span></a>                    <span class="n">Skew_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Skew_LLD</span><span class="p">)</span>
</span><span id="extract_spectral_moments-923"><a href="#extract_spectral_moments-923"><span class="linenos">923</span></a>
</span><span id="extract_spectral_moments-924"><a href="#extract_spectral_moments-924"><span class="linenos">924</span></a>                <span class="n">Kurt_LLD</span> <span class="o">=</span> <span class="n">voiced_spectrum</span><span class="o">.</span><span class="n">get_kurtosis</span><span class="p">(</span><span class="n">power</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="extract_spectral_moments-925"><a href="#extract_spectral_moments-925"><span class="linenos">925</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">Kurt_LLD</span><span class="p">):</span>
</span><span id="extract_spectral_moments-926"><a href="#extract_spectral_moments-926"><span class="linenos">926</span></a>                    <span class="n">Kurt_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Kurt_LLD</span><span class="p">)</span>
</span><span id="extract_spectral_moments-927"><a href="#extract_spectral_moments-927"><span class="linenos">927</span></a>
</span><span id="extract_spectral_moments-928"><a href="#extract_spectral_moments-928"><span class="linenos">928</span></a>        <span class="n">gravity_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">Gravity_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">Gravity_list</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="extract_spectral_moments-929"><a href="#extract_spectral_moments-929"><span class="linenos">929</span></a>        <span class="n">std_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">STD_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">STD_list</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="extract_spectral_moments-930"><a href="#extract_spectral_moments-930"><span class="linenos">930</span></a>        <span class="n">skew_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">Skew_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">Skew_list</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="extract_spectral_moments-931"><a href="#extract_spectral_moments-931"><span class="linenos">931</span></a>        <span class="n">kurt_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">Kurt_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">Kurt_list</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
</span><span id="extract_spectral_moments-932"><a href="#extract_spectral_moments-932"><span class="linenos">932</span></a>
</span><span id="extract_spectral_moments-933"><a href="#extract_spectral_moments-933"><span class="linenos">933</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="extract_spectral_moments-934"><a href="#extract_spectral_moments-934"><span class="linenos">934</span></a>            <span class="s2">&quot;spectral_gravity&quot;</span><span class="p">:</span> <span class="n">gravity_mean</span><span class="p">,</span>
</span><span id="extract_spectral_moments-935"><a href="#extract_spectral_moments-935"><span class="linenos">935</span></a>            <span class="s2">&quot;spectral_std_dev&quot;</span><span class="p">:</span> <span class="n">std_mean</span><span class="p">,</span>
</span><span id="extract_spectral_moments-936"><a href="#extract_spectral_moments-936"><span class="linenos">936</span></a>            <span class="s2">&quot;spectral_skewness&quot;</span><span class="p">:</span> <span class="n">skew_mean</span><span class="p">,</span>
</span><span id="extract_spectral_moments-937"><a href="#extract_spectral_moments-937"><span class="linenos">937</span></a>            <span class="s2">&quot;spectral_kurtosis&quot;</span><span class="p">:</span> <span class="n">kurt_mean</span><span class="p">,</span>
</span><span id="extract_spectral_moments-938"><a href="#extract_spectral_moments-938"><span class="linenos">938</span></a>        <span class="p">}</span>
</span><span id="extract_spectral_moments-939"><a href="#extract_spectral_moments-939"><span class="linenos">939</span></a>
</span><span id="extract_spectral_moments-940"><a href="#extract_spectral_moments-940"><span class="linenos">940</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_spectral_moments-941"><a href="#extract_spectral_moments-941"><span class="linenos">941</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_spectral_moments-942"><a href="#extract_spectral_moments-942"><span class="linenos">942</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_spectral_moments-943"><a href="#extract_spectral_moments-943"><span class="linenos">943</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_spectral_moments-944"><a href="#extract_spectral_moments-944"><span class="linenos">944</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_spectral_moments-945"><a href="#extract_spectral_moments-945"><span class="linenos">945</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="extract_spectral_moments-946"><a href="#extract_spectral_moments-946"><span class="linenos">946</span></a>            <span class="s2">&quot;spectral_gravity&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_spectral_moments-947"><a href="#extract_spectral_moments-947"><span class="linenos">947</span></a>            <span class="s2">&quot;spectral_std_dev&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_spectral_moments-948"><a href="#extract_spectral_moments-948"><span class="linenos">948</span></a>            <span class="s2">&quot;spectral_skewness&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_spectral_moments-949"><a href="#extract_spectral_moments-949"><span class="linenos">949</span></a>            <span class="s2">&quot;spectral_kurtosis&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_spectral_moments-950"><a href="#extract_spectral_moments-950"><span class="linenos">950</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Extract Spectral Moments.</p>

<p>Function to extract spectral moments from a given sound object. This function is adapted from default
Praat code to work with Parselmouth.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object or a file path or an Audio object.</li>
<li><strong>floor (float):</strong>  Minimum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
<li><strong>ceiling (float):</strong>  Maximum expected pitch value, set using value found in <code>pitch_values</code> function.</li>
<li><strong>window_size (float):</strong>  Time frame over which the spectra is calculated, typically set to 25 ms.</li>
<li><strong>frame_shift (float):</strong>  Time rate at which to extract a new pitch value, typically set to 5 ms.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>dict: A dictionary containing the following keys:</p>

<pre><code>- spectral_gravity (float): Mean spectral gravity.
- spectral_std_dev (float): Mean spectral standard deviation.
- spectral_skewness (float): Mean spectral skewness.
- spectral_kurtosis (float): Mean spectral kurtosis.
</code></pre>
</blockquote>

<h6 id="examples">Examples:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">snd</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">(</span><span class="s2">&quot;path_to_audio.wav&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">extract_spectral_moments</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mf">0.025</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;spectral_gravity&#39;</span><span class="p">:</span> <span class="mf">5000.0</span><span class="p">,</span> <span class="s1">&#39;spectral_std_dev&#39;</span><span class="p">:</span> <span class="mf">150.0</span><span class="p">,</span> <span class="s1">&#39;spectral_skewness&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;spectral_kurtosis&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">}</span>
</code></pre>
  </div>
</blockquote>

<h6 id="notes">Notes:</h6>

<blockquote>
  <ul>
  <li>Spectral Gravity: Measure for how high the frequencies in a spectrum are on average over the entire frequency
  domain weighted by the power spectrum.</li>
  <li>Spectral Standard Deviation: Measure for how much the frequencies in a spectrum can deviate from the centre
  of gravity.</li>
  <li>Spectral Skewness: Measure for how much the shape of the spectrum below the centre of gravity is different
  from the shape above the mean frequency.</li>
  <li>Spectral Kurtosis: Measure for how much the shape of the spectrum around the centre of gravity is different
  from a Gaussian shape.</li>
  <li>Details: <a href="https://www.fon.hum.uva.nl/praat/manual/Spectrum__Get_central_moment___.html">https://www.fon.hum.uva.nl/praat/manual/Spectrum__Get_central_moment___.html</a></li>
  </ul>
</blockquote>
</div>


                </section>
                <section id="extract_audio_duration">
                            <input id="extract_audio_duration-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_audio_duration</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="extract_audio_duration-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_audio_duration"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_audio_duration-956"><a href="#extract_audio_duration-956"><span class="linenos">956</span></a><span class="k">def</span> <span class="nf">extract_audio_duration</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="extract_audio_duration-957"><a href="#extract_audio_duration-957"><span class="linenos">957</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the duration of a given audio file or Audio object.</span>
</span><span id="extract_audio_duration-958"><a href="#extract_audio_duration-958"><span class="linenos">958</span></a>
</span><span id="extract_audio_duration-959"><a href="#extract_audio_duration-959"><span class="linenos">959</span></a><span class="sd">    This function calculates the total duration of an audio file or audio object</span>
</span><span id="extract_audio_duration-960"><a href="#extract_audio_duration-960"><span class="linenos">960</span></a><span class="sd">    by creating a Parselmouth `Sound` object and then calling a Praat method</span>
</span><span id="extract_audio_duration-961"><a href="#extract_audio_duration-961"><span class="linenos">961</span></a><span class="sd">    to retrieve the duration of the audio in seconds.</span>
</span><span id="extract_audio_duration-962"><a href="#extract_audio_duration-962"><span class="linenos">962</span></a>
</span><span id="extract_audio_duration-963"><a href="#extract_audio_duration-963"><span class="linenos">963</span></a><span class="sd">    Args:</span>
</span><span id="extract_audio_duration-964"><a href="#extract_audio_duration-964"><span class="linenos">964</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object,</span>
</span><span id="extract_audio_duration-965"><a href="#extract_audio_duration-965"><span class="linenos">965</span></a><span class="sd">        a file path (Path), or an `Audio` object containing the audio waveform and</span>
</span><span id="extract_audio_duration-966"><a href="#extract_audio_duration-966"><span class="linenos">966</span></a><span class="sd">        its corresponding sampling rate.</span>
</span><span id="extract_audio_duration-967"><a href="#extract_audio_duration-967"><span class="linenos">967</span></a>
</span><span id="extract_audio_duration-968"><a href="#extract_audio_duration-968"><span class="linenos">968</span></a><span class="sd">    Returns:</span>
</span><span id="extract_audio_duration-969"><a href="#extract_audio_duration-969"><span class="linenos">969</span></a><span class="sd">        Dict[str, float]: A dictionary containing:</span>
</span><span id="extract_audio_duration-970"><a href="#extract_audio_duration-970"><span class="linenos">970</span></a><span class="sd">            - &quot;duration&quot; (float): The total duration of the audio in seconds.</span>
</span><span id="extract_audio_duration-971"><a href="#extract_audio_duration-971"><span class="linenos">971</span></a>
</span><span id="extract_audio_duration-972"><a href="#extract_audio_duration-972"><span class="linenos">972</span></a><span class="sd">    Raises:</span>
</span><span id="extract_audio_duration-973"><a href="#extract_audio_duration-973"><span class="linenos">973</span></a><span class="sd">        FileNotFoundError: If a provided file path does not exist.</span>
</span><span id="extract_audio_duration-974"><a href="#extract_audio_duration-974"><span class="linenos">974</span></a>
</span><span id="extract_audio_duration-975"><a href="#extract_audio_duration-975"><span class="linenos">975</span></a><span class="sd">    Example:</span>
</span><span id="extract_audio_duration-976"><a href="#extract_audio_duration-976"><span class="linenos">976</span></a><span class="sd">        ```python</span>
</span><span id="extract_audio_duration-977"><a href="#extract_audio_duration-977"><span class="linenos">977</span></a><span class="sd">        &gt;&gt;&gt; snd = Audio(waveform=[...], sampling_rate=16000)</span>
</span><span id="extract_audio_duration-978"><a href="#extract_audio_duration-978"><span class="linenos">978</span></a><span class="sd">        &gt;&gt;&gt; extract_audio_duration(snd)</span>
</span><span id="extract_audio_duration-979"><a href="#extract_audio_duration-979"><span class="linenos">979</span></a><span class="sd">        {&#39;duration&#39;: 5.23}</span>
</span><span id="extract_audio_duration-980"><a href="#extract_audio_duration-980"><span class="linenos">980</span></a><span class="sd">        ```</span>
</span><span id="extract_audio_duration-981"><a href="#extract_audio_duration-981"><span class="linenos">981</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_audio_duration-982"><a href="#extract_audio_duration-982"><span class="linenos">982</span></a>    <span class="c1"># Check if the input is a Path, in which case we load the audio from the file</span>
</span><span id="extract_audio_duration-983"><a href="#extract_audio_duration-983"><span class="linenos">983</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="extract_audio_duration-984"><a href="#extract_audio_duration-984"><span class="linenos">984</span></a>        <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="extract_audio_duration-985"><a href="#extract_audio_duration-985"><span class="linenos">985</span></a>
</span><span id="extract_audio_duration-986"><a href="#extract_audio_duration-986"><span class="linenos">986</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_audio_duration-987"><a href="#extract_audio_duration-987"><span class="linenos">987</span></a>        <span class="c1"># Get the total duration of the sound</span>
</span><span id="extract_audio_duration-988"><a href="#extract_audio_duration-988"><span class="linenos">988</span></a>        <span class="n">duration</span> <span class="o">=</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="s2">&quot;Get total duration&quot;</span><span class="p">)</span>
</span><span id="extract_audio_duration-989"><a href="#extract_audio_duration-989"><span class="linenos">989</span></a>
</span><span id="extract_audio_duration-990"><a href="#extract_audio_duration-990"><span class="linenos">990</span></a>        <span class="c1"># Return the duration in a dictionary</span>
</span><span id="extract_audio_duration-991"><a href="#extract_audio_duration-991"><span class="linenos">991</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="n">duration</span><span class="p">}</span>
</span><span id="extract_audio_duration-992"><a href="#extract_audio_duration-992"><span class="linenos">992</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_audio_duration-993"><a href="#extract_audio_duration-993"><span class="linenos">993</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_audio_duration-994"><a href="#extract_audio_duration-994"><span class="linenos">994</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_audio_duration-995"><a href="#extract_audio_duration-995"><span class="linenos">995</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_audio_duration-996"><a href="#extract_audio_duration-996"><span class="linenos">996</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_audio_duration-997"><a href="#extract_audio_duration-997"><span class="linenos">997</span></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Get the duration of a given audio file or Audio object.</p>

<p>This function calculates the total duration of an audio file or audio object
by creating a Parselmouth <code>Sound</code> object and then calling a Praat method
to retrieve the duration of the audio in seconds.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object,</li>
<li>a file path (Path), or an <code>Audio</code> object containing the audio waveform and</li>
<li>its corresponding sampling rate.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Dict[str, float]: A dictionary containing:
      - "duration" (float): The total duration of the audio in seconds.</p>
</blockquote>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>FileNotFoundError:</strong>  If a provided file path does not exist.</li>
</ul>

<h6 id="example">Example:</h6>

<blockquote>
  <div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">snd</span> <span class="o">=</span> <span class="n">Audio</span><span class="p">(</span><span class="n">waveform</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">sampling_rate</span><span class="o">=</span><span class="mi">16000</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">extract_audio_duration</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mf">5.23</span><span class="p">}</span>
</code></pre>
  </div>
</blockquote>
</div>


                </section>
                <section id="extract_jitter">
                            <input id="extract_jitter-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_jitter</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">floor</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="extract_jitter-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_jitter"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_jitter-1000"><a href="#extract_jitter-1000"><span class="linenos">1000</span></a><span class="k">def</span> <span class="nf">extract_jitter</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="extract_jitter-1001"><a href="#extract_jitter-1001"><span class="linenos">1001</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the jitter descriptors for the given sound or audio file.</span>
</span><span id="extract_jitter-1002"><a href="#extract_jitter-1002"><span class="linenos">1002</span></a>
</span><span id="extract_jitter-1003"><a href="#extract_jitter-1003"><span class="linenos">1003</span></a><span class="sd">    Args:</span>
</span><span id="extract_jitter-1004"><a href="#extract_jitter-1004"><span class="linenos">1004</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object, a file path (Path),</span>
</span><span id="extract_jitter-1005"><a href="#extract_jitter-1005"><span class="linenos">1005</span></a><span class="sd">        or an `Audio` object containing the audio waveform and its corresponding sampling rate.</span>
</span><span id="extract_jitter-1006"><a href="#extract_jitter-1006"><span class="linenos">1006</span></a><span class="sd">        floor (float): Minimum fundamental frequency (F0) in Hz.</span>
</span><span id="extract_jitter-1007"><a href="#extract_jitter-1007"><span class="linenos">1007</span></a><span class="sd">        ceiling (float): Maximum fundamental frequency (F0) in Hz.</span>
</span><span id="extract_jitter-1008"><a href="#extract_jitter-1008"><span class="linenos">1008</span></a>
</span><span id="extract_jitter-1009"><a href="#extract_jitter-1009"><span class="linenos">1009</span></a><span class="sd">    Returns:</span>
</span><span id="extract_jitter-1010"><a href="#extract_jitter-1010"><span class="linenos">1010</span></a><span class="sd">        Dict[str, float]: A dictionary containing various jitter measurements.</span>
</span><span id="extract_jitter-1011"><a href="#extract_jitter-1011"><span class="linenos">1011</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_jitter-1012"><a href="#extract_jitter-1012"><span class="linenos">1012</span></a>
</span><span id="extract_jitter-1013"><a href="#extract_jitter-1013"><span class="linenos">1013</span></a>    <span class="k">def</span> <span class="nf">_to_point_process</span><span class="p">(</span><span class="n">sound</span><span class="p">:</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">f0min</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">f0max</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Data</span><span class="p">:</span>
</span><span id="extract_jitter-1014"><a href="#extract_jitter-1014"><span class="linenos">1014</span></a>        <span class="k">return</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">sound</span><span class="p">,</span> <span class="s2">&quot;To PointProcess (periodic, cc)&quot;</span><span class="p">,</span> <span class="n">f0min</span><span class="p">,</span> <span class="n">f0max</span><span class="p">)</span>
</span><span id="extract_jitter-1015"><a href="#extract_jitter-1015"><span class="linenos">1015</span></a>
</span><span id="extract_jitter-1016"><a href="#extract_jitter-1016"><span class="linenos">1016</span></a>    <span class="k">def</span> <span class="nf">_extract_jitter</span><span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">point_process</span><span class="p">:</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="extract_jitter-1017"><a href="#extract_jitter-1017"><span class="linenos">1017</span></a>        <span class="k">return</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">point_process</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Get jitter (</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">)</span>
</span><span id="extract_jitter-1018"><a href="#extract_jitter-1018"><span class="linenos">1018</span></a>
</span><span id="extract_jitter-1019"><a href="#extract_jitter-1019"><span class="linenos">1019</span></a>    <span class="c1"># Check if the input is a Path or Audio, and convert to Parselmouth Sound if necessary</span>
</span><span id="extract_jitter-1020"><a href="#extract_jitter-1020"><span class="linenos">1020</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="extract_jitter-1021"><a href="#extract_jitter-1021"><span class="linenos">1021</span></a>        <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="extract_jitter-1022"><a href="#extract_jitter-1022"><span class="linenos">1022</span></a>
</span><span id="extract_jitter-1023"><a href="#extract_jitter-1023"><span class="linenos">1023</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_jitter-1024"><a href="#extract_jitter-1024"><span class="linenos">1024</span></a>        <span class="c1"># Convert the sound to a point process for jitter measurement</span>
</span><span id="extract_jitter-1025"><a href="#extract_jitter-1025"><span class="linenos">1025</span></a>        <span class="n">point_process</span> <span class="o">=</span> <span class="n">_to_point_process</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">floor</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">)</span>
</span><span id="extract_jitter-1026"><a href="#extract_jitter-1026"><span class="linenos">1026</span></a>
</span><span id="extract_jitter-1027"><a href="#extract_jitter-1027"><span class="linenos">1027</span></a>        <span class="c1"># Extract jitter measures from the point process</span>
</span><span id="extract_jitter-1028"><a href="#extract_jitter-1028"><span class="linenos">1028</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="extract_jitter-1029"><a href="#extract_jitter-1029"><span class="linenos">1029</span></a>            <span class="s2">&quot;local_jitter&quot;</span><span class="p">:</span> <span class="n">_extract_jitter</span><span class="p">(</span><span class="s2">&quot;local&quot;</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="extract_jitter-1030"><a href="#extract_jitter-1030"><span class="linenos">1030</span></a>            <span class="s2">&quot;localabsolute_jitter&quot;</span><span class="p">:</span> <span class="n">_extract_jitter</span><span class="p">(</span><span class="s2">&quot;local, absolute&quot;</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="extract_jitter-1031"><a href="#extract_jitter-1031"><span class="linenos">1031</span></a>            <span class="s2">&quot;rap_jitter&quot;</span><span class="p">:</span> <span class="n">_extract_jitter</span><span class="p">(</span><span class="s2">&quot;rap&quot;</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="extract_jitter-1032"><a href="#extract_jitter-1032"><span class="linenos">1032</span></a>            <span class="s2">&quot;ppq5_jitter&quot;</span><span class="p">:</span> <span class="n">_extract_jitter</span><span class="p">(</span><span class="s2">&quot;ppq5&quot;</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="extract_jitter-1033"><a href="#extract_jitter-1033"><span class="linenos">1033</span></a>            <span class="s2">&quot;ddp_jitter&quot;</span><span class="p">:</span> <span class="n">_extract_jitter</span><span class="p">(</span><span class="s2">&quot;ddp&quot;</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="extract_jitter-1034"><a href="#extract_jitter-1034"><span class="linenos">1034</span></a>        <span class="p">}</span>
</span><span id="extract_jitter-1035"><a href="#extract_jitter-1035"><span class="linenos">1035</span></a>
</span><span id="extract_jitter-1036"><a href="#extract_jitter-1036"><span class="linenos">1036</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_jitter-1037"><a href="#extract_jitter-1037"><span class="linenos">1037</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_jitter-1038"><a href="#extract_jitter-1038"><span class="linenos">1038</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_jitter-1039"><a href="#extract_jitter-1039"><span class="linenos">1039</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_jitter-1040"><a href="#extract_jitter-1040"><span class="linenos">1040</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_jitter-1041"><a href="#extract_jitter-1041"><span class="linenos">1041</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="extract_jitter-1042"><a href="#extract_jitter-1042"><span class="linenos">1042</span></a>            <span class="s2">&quot;local_jitter&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_jitter-1043"><a href="#extract_jitter-1043"><span class="linenos">1043</span></a>            <span class="s2">&quot;localabsolute_jitter&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_jitter-1044"><a href="#extract_jitter-1044"><span class="linenos">1044</span></a>            <span class="s2">&quot;rap_jitter&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_jitter-1045"><a href="#extract_jitter-1045"><span class="linenos">1045</span></a>            <span class="s2">&quot;ppq5_jitter&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_jitter-1046"><a href="#extract_jitter-1046"><span class="linenos">1046</span></a>            <span class="s2">&quot;ddp_jitter&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_jitter-1047"><a href="#extract_jitter-1047"><span class="linenos">1047</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Returns the jitter descriptors for the given sound or audio file.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object, a file path (Path),</li>
<li>or an <code>Audio</code> object containing the audio waveform and its corresponding sampling rate.</li>
<li><strong>floor (float):</strong>  Minimum fundamental frequency (F0) in Hz.</li>
<li><strong>ceiling (float):</strong>  Maximum fundamental frequency (F0) in Hz.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Dict[str, float]: A dictionary containing various jitter measurements.</p>
</blockquote>
</div>


                </section>
                <section id="extract_shimmer">
                            <input id="extract_shimmer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_shimmer</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">floor</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="extract_shimmer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_shimmer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_shimmer-1050"><a href="#extract_shimmer-1050"><span class="linenos">1050</span></a><span class="k">def</span> <span class="nf">extract_shimmer</span><span class="p">(</span><span class="n">snd</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="n">Audio</span><span class="p">],</span> <span class="n">floor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="extract_shimmer-1051"><a href="#extract_shimmer-1051"><span class="linenos">1051</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the shimmer descriptors for the given sound or audio file.</span>
</span><span id="extract_shimmer-1052"><a href="#extract_shimmer-1052"><span class="linenos">1052</span></a>
</span><span id="extract_shimmer-1053"><a href="#extract_shimmer-1053"><span class="linenos">1053</span></a><span class="sd">    Args:</span>
</span><span id="extract_shimmer-1054"><a href="#extract_shimmer-1054"><span class="linenos">1054</span></a><span class="sd">        snd (Union[parselmouth.Sound, Path, Audio]): A Parselmouth Sound object, a file path (Path),</span>
</span><span id="extract_shimmer-1055"><a href="#extract_shimmer-1055"><span class="linenos">1055</span></a><span class="sd">        or an `Audio` object containing the audio waveform and its corresponding sampling rate.</span>
</span><span id="extract_shimmer-1056"><a href="#extract_shimmer-1056"><span class="linenos">1056</span></a><span class="sd">        floor (float): Minimum fundamental frequency (F0) in Hz.</span>
</span><span id="extract_shimmer-1057"><a href="#extract_shimmer-1057"><span class="linenos">1057</span></a><span class="sd">        ceiling (float): Maximum fundamental frequency (F0) in Hz.</span>
</span><span id="extract_shimmer-1058"><a href="#extract_shimmer-1058"><span class="linenos">1058</span></a>
</span><span id="extract_shimmer-1059"><a href="#extract_shimmer-1059"><span class="linenos">1059</span></a><span class="sd">    Returns:</span>
</span><span id="extract_shimmer-1060"><a href="#extract_shimmer-1060"><span class="linenos">1060</span></a><span class="sd">        Dict[str, float]: A dictionary containing various shimmer measurements.</span>
</span><span id="extract_shimmer-1061"><a href="#extract_shimmer-1061"><span class="linenos">1061</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_shimmer-1062"><a href="#extract_shimmer-1062"><span class="linenos">1062</span></a>
</span><span id="extract_shimmer-1063"><a href="#extract_shimmer-1063"><span class="linenos">1063</span></a>    <span class="k">def</span> <span class="nf">_to_point_process</span><span class="p">(</span><span class="n">sound</span><span class="p">:</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">f0min</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">f0max</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Data</span><span class="p">:</span>
</span><span id="extract_shimmer-1064"><a href="#extract_shimmer-1064"><span class="linenos">1064</span></a>        <span class="k">return</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">sound</span><span class="p">,</span> <span class="s2">&quot;To PointProcess (periodic, cc)&quot;</span><span class="p">,</span> <span class="n">f0min</span><span class="p">,</span> <span class="n">f0max</span><span class="p">)</span>
</span><span id="extract_shimmer-1065"><a href="#extract_shimmer-1065"><span class="linenos">1065</span></a>
</span><span id="extract_shimmer-1066"><a href="#extract_shimmer-1066"><span class="linenos">1066</span></a>    <span class="k">def</span> <span class="nf">_extract_shimmer</span><span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sound</span><span class="p">:</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">,</span> <span class="n">point_process</span><span class="p">:</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="extract_shimmer-1067"><a href="#extract_shimmer-1067"><span class="linenos">1067</span></a>        <span class="k">return</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">praat</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="n">sound</span><span class="p">,</span> <span class="n">point_process</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;Get shimmer (</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">)</span>
</span><span id="extract_shimmer-1068"><a href="#extract_shimmer-1068"><span class="linenos">1068</span></a>
</span><span id="extract_shimmer-1069"><a href="#extract_shimmer-1069"><span class="linenos">1069</span></a>    <span class="c1"># Check if the input is a Path or Audio, and convert to Parselmouth Sound if necessary</span>
</span><span id="extract_shimmer-1070"><a href="#extract_shimmer-1070"><span class="linenos">1070</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">parselmouth</span><span class="o">.</span><span class="n">Sound</span><span class="p">):</span>
</span><span id="extract_shimmer-1071"><a href="#extract_shimmer-1071"><span class="linenos">1071</span></a>        <span class="n">snd</span> <span class="o">=</span> <span class="n">get_sound</span><span class="p">(</span><span class="n">snd</span><span class="p">)</span>
</span><span id="extract_shimmer-1072"><a href="#extract_shimmer-1072"><span class="linenos">1072</span></a>
</span><span id="extract_shimmer-1073"><a href="#extract_shimmer-1073"><span class="linenos">1073</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="extract_shimmer-1074"><a href="#extract_shimmer-1074"><span class="linenos">1074</span></a>        <span class="c1"># Convert the sound to a point process for shimmer measurement</span>
</span><span id="extract_shimmer-1075"><a href="#extract_shimmer-1075"><span class="linenos">1075</span></a>        <span class="n">point_process</span> <span class="o">=</span> <span class="n">_to_point_process</span><span class="p">(</span><span class="n">snd</span><span class="p">,</span> <span class="n">floor</span><span class="p">,</span> <span class="n">ceiling</span><span class="p">)</span>
</span><span id="extract_shimmer-1076"><a href="#extract_shimmer-1076"><span class="linenos">1076</span></a>
</span><span id="extract_shimmer-1077"><a href="#extract_shimmer-1077"><span class="linenos">1077</span></a>        <span class="c1"># Extract shimmer measures from the sound and point process</span>
</span><span id="extract_shimmer-1078"><a href="#extract_shimmer-1078"><span class="linenos">1078</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="extract_shimmer-1079"><a href="#extract_shimmer-1079"><span class="linenos">1079</span></a>            <span class="s2">&quot;local_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;local&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="extract_shimmer-1080"><a href="#extract_shimmer-1080"><span class="linenos">1080</span></a>            <span class="s2">&quot;localDB_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;local_dB&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="extract_shimmer-1081"><a href="#extract_shimmer-1081"><span class="linenos">1081</span></a>            <span class="s2">&quot;apq3_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;apq3&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="extract_shimmer-1082"><a href="#extract_shimmer-1082"><span class="linenos">1082</span></a>            <span class="s2">&quot;apq5_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;apq5&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="extract_shimmer-1083"><a href="#extract_shimmer-1083"><span class="linenos">1083</span></a>            <span class="s2">&quot;apq11_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;apq11&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="extract_shimmer-1084"><a href="#extract_shimmer-1084"><span class="linenos">1084</span></a>            <span class="s2">&quot;dda_shimmer&quot;</span><span class="p">:</span> <span class="n">_extract_shimmer</span><span class="p">(</span><span class="s2">&quot;dda&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="p">,</span> <span class="n">point_process</span><span class="p">),</span>
</span><span id="extract_shimmer-1085"><a href="#extract_shimmer-1085"><span class="linenos">1085</span></a>        <span class="p">}</span>
</span><span id="extract_shimmer-1086"><a href="#extract_shimmer-1086"><span class="linenos">1086</span></a>
</span><span id="extract_shimmer-1087"><a href="#extract_shimmer-1087"><span class="linenos">1087</span></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="extract_shimmer-1088"><a href="#extract_shimmer-1088"><span class="linenos">1088</span></a>        <span class="n">current_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
</span><span id="extract_shimmer-1089"><a href="#extract_shimmer-1089"><span class="linenos">1089</span></a>        <span class="k">if</span> <span class="n">current_frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="extract_shimmer-1090"><a href="#extract_shimmer-1090"><span class="linenos">1090</span></a>            <span class="n">current_function_name</span> <span class="o">=</span> <span class="n">current_frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span>
</span><span id="extract_shimmer-1091"><a href="#extract_shimmer-1091"><span class="linenos">1091</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error in &quot;</span><span class="si">{</span><span class="n">current_function_name</span><span class="si">}</span><span class="s1">&quot;: </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="extract_shimmer-1092"><a href="#extract_shimmer-1092"><span class="linenos">1092</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="extract_shimmer-1093"><a href="#extract_shimmer-1093"><span class="linenos">1093</span></a>            <span class="s2">&quot;local_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_shimmer-1094"><a href="#extract_shimmer-1094"><span class="linenos">1094</span></a>            <span class="s2">&quot;localDB_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_shimmer-1095"><a href="#extract_shimmer-1095"><span class="linenos">1095</span></a>            <span class="s2">&quot;apq3_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_shimmer-1096"><a href="#extract_shimmer-1096"><span class="linenos">1096</span></a>            <span class="s2">&quot;apq5_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_shimmer-1097"><a href="#extract_shimmer-1097"><span class="linenos">1097</span></a>            <span class="s2">&quot;apq11_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_shimmer-1098"><a href="#extract_shimmer-1098"><span class="linenos">1098</span></a>            <span class="s2">&quot;dda_shimmer&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
</span><span id="extract_shimmer-1099"><a href="#extract_shimmer-1099"><span class="linenos">1099</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Returns the shimmer descriptors for the given sound or audio file.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>snd (Union[parselmouth.Sound, Path, Audio]):</strong>  A Parselmouth Sound object, a file path (Path),</li>
<li>or an <code>Audio</code> object containing the audio waveform and its corresponding sampling rate.</li>
<li><strong>floor (float):</strong>  Minimum fundamental frequency (F0) in Hz.</li>
<li><strong>ceiling (float):</strong>  Maximum fundamental frequency (F0) in Hz.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>Dict[str, float]: A dictionary containing various shimmer measurements.</p>
</blockquote>
</div>


                </section>
                <section id="extract_praat_parselmouth_features_from_audios">
                            <input id="extract_praat_parselmouth_features_from_audios-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extract_praat_parselmouth_features_from_audios</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">audios</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n"><a href="../../data_structures/audio.html#Audio">senselab.audio.data_structures.audio.Audio</a></span><span class="p">]</span>,</span><span class="param">	<span class="n">time_step</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.005</span>,</span><span class="param">	<span class="n">window_length</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.025</span>,</span><span class="param">	<span class="n">pitch_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Hertz&#39;</span>,</span><span class="param">	<span class="n">cache_dir</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">speech_rate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">intensity_descriptors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">harmonicity_descriptors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">formants</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">spectral_moments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">pitch</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">slope_tilt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">cpp_descriptors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">duration</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">jitter</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">shimmer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">plugin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;serial&#39;</span>,</span><span class="param">	<span class="n">plugin_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="extract_praat_parselmouth_features_from_audios-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#extract_praat_parselmouth_features_from_audios"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="extract_praat_parselmouth_features_from_audios-1103"><a href="#extract_praat_parselmouth_features_from_audios-1103"><span class="linenos">1103</span></a><span class="k">def</span> <span class="nf">extract_praat_parselmouth_features_from_audios</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1104"><a href="#extract_praat_parselmouth_features_from_audios-1104"><span class="linenos">1104</span></a>    <span class="n">audios</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Audio</span><span class="p">],</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1105"><a href="#extract_praat_parselmouth_features_from_audios-1105"><span class="linenos">1105</span></a>    <span class="n">time_step</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.005</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1106"><a href="#extract_praat_parselmouth_features_from_audios-1106"><span class="linenos">1106</span></a>    <span class="n">window_length</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.025</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1107"><a href="#extract_praat_parselmouth_features_from_audios-1107"><span class="linenos">1107</span></a>    <span class="n">pitch_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Hertz&quot;</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1108"><a href="#extract_praat_parselmouth_features_from_audios-1108"><span class="linenos">1108</span></a>    <span class="n">cache_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1109"><a href="#extract_praat_parselmouth_features_from_audios-1109"><span class="linenos">1109</span></a>    <span class="n">speech_rate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1110"><a href="#extract_praat_parselmouth_features_from_audios-1110"><span class="linenos">1110</span></a>    <span class="n">intensity_descriptors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1111"><a href="#extract_praat_parselmouth_features_from_audios-1111"><span class="linenos">1111</span></a>    <span class="n">harmonicity_descriptors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1112"><a href="#extract_praat_parselmouth_features_from_audios-1112"><span class="linenos">1112</span></a>    <span class="n">formants</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1113"><a href="#extract_praat_parselmouth_features_from_audios-1113"><span class="linenos">1113</span></a>    <span class="n">spectral_moments</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1114"><a href="#extract_praat_parselmouth_features_from_audios-1114"><span class="linenos">1114</span></a>    <span class="n">pitch</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1115"><a href="#extract_praat_parselmouth_features_from_audios-1115"><span class="linenos">1115</span></a>    <span class="n">slope_tilt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1116"><a href="#extract_praat_parselmouth_features_from_audios-1116"><span class="linenos">1116</span></a>    <span class="n">cpp_descriptors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1117"><a href="#extract_praat_parselmouth_features_from_audios-1117"><span class="linenos">1117</span></a>    <span class="n">duration</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1118"><a href="#extract_praat_parselmouth_features_from_audios-1118"><span class="linenos">1118</span></a>    <span class="n">jitter</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1119"><a href="#extract_praat_parselmouth_features_from_audios-1119"><span class="linenos">1119</span></a>    <span class="n">shimmer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1120"><a href="#extract_praat_parselmouth_features_from_audios-1120"><span class="linenos">1120</span></a>    <span class="n">plugin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;serial&quot;</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1121"><a href="#extract_praat_parselmouth_features_from_audios-1121"><span class="linenos">1121</span></a>    <span class="n">plugin_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1122"><a href="#extract_praat_parselmouth_features_from_audios-1122"><span class="linenos">1122</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1123"><a href="#extract_praat_parselmouth_features_from_audios-1123"><span class="linenos">1123</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract features from a list of Audio objects and return a JSON-like dictionary.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1124"><a href="#extract_praat_parselmouth_features_from_audios-1124"><span class="linenos">1124</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1125"><a href="#extract_praat_parselmouth_features_from_audios-1125"><span class="linenos">1125</span></a><span class="sd">    Args:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1126"><a href="#extract_praat_parselmouth_features_from_audios-1126"><span class="linenos">1126</span></a><span class="sd">        audios (list): List of Audio objects to extract features from.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1127"><a href="#extract_praat_parselmouth_features_from_audios-1127"><span class="linenos">1127</span></a><span class="sd">        pitch_unit (str): Unit for pitch measurements. Defaults to &quot;Hertz&quot;.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1128"><a href="#extract_praat_parselmouth_features_from_audios-1128"><span class="linenos">1128</span></a><span class="sd">        time_step (float): Time rate at which to extract features. Defaults to 0.005.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1129"><a href="#extract_praat_parselmouth_features_from_audios-1129"><span class="linenos">1129</span></a><span class="sd">        window_length (float): Window length in seconds for spectral features. Defaults to 0.025.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1130"><a href="#extract_praat_parselmouth_features_from_audios-1130"><span class="linenos">1130</span></a><span class="sd">        cache_dir (Optional[str]): Directory to use for caching by pydra. Defaults to None.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1131"><a href="#extract_praat_parselmouth_features_from_audios-1131"><span class="linenos">1131</span></a><span class="sd">        speech_rate (bool): Whether to extract speech rate. Defaults to True.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1132"><a href="#extract_praat_parselmouth_features_from_audios-1132"><span class="linenos">1132</span></a><span class="sd">        intensity_descriptors (bool): Whether to extract intensity descriptors. Defaults to True.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1133"><a href="#extract_praat_parselmouth_features_from_audios-1133"><span class="linenos">1133</span></a><span class="sd">        harmonicity_descriptors (bool): Whether to extract harmonic descriptors. Defaults to True.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1134"><a href="#extract_praat_parselmouth_features_from_audios-1134"><span class="linenos">1134</span></a><span class="sd">        formants (bool): Whether to extract formants. Defaults to True.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1135"><a href="#extract_praat_parselmouth_features_from_audios-1135"><span class="linenos">1135</span></a><span class="sd">        spectral_moments (bool): Whether to extract spectral moments. Defaults to True.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1136"><a href="#extract_praat_parselmouth_features_from_audios-1136"><span class="linenos">1136</span></a><span class="sd">        pitch (bool): Whether to extract pitch. Defaults to True.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1137"><a href="#extract_praat_parselmouth_features_from_audios-1137"><span class="linenos">1137</span></a><span class="sd">        slope_tilt (bool): Whether to extract slope and tilt. Defaults to True.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1138"><a href="#extract_praat_parselmouth_features_from_audios-1138"><span class="linenos">1138</span></a><span class="sd">        cpp_descriptors (bool): Whether to extract CPP descriptors. Defaults to True.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1139"><a href="#extract_praat_parselmouth_features_from_audios-1139"><span class="linenos">1139</span></a><span class="sd">        duration (bool): Whether to extract duration. Defaults to True.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1140"><a href="#extract_praat_parselmouth_features_from_audios-1140"><span class="linenos">1140</span></a><span class="sd">        jitter (bool): Whether to extract jitter. Defaults to True.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1141"><a href="#extract_praat_parselmouth_features_from_audios-1141"><span class="linenos">1141</span></a><span class="sd">        shimmer (bool): Whether to extract shimmer. Defaults to True.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1142"><a href="#extract_praat_parselmouth_features_from_audios-1142"><span class="linenos">1142</span></a><span class="sd">        plugin (str): Plugin to use for feature extraction. Defaults to &quot;serial&quot;.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1143"><a href="#extract_praat_parselmouth_features_from_audios-1143"><span class="linenos">1143</span></a><span class="sd">        plugin_args (Optional[Dict[str, Any]]): Arguments for the pydra plugin. Defaults to {}.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1144"><a href="#extract_praat_parselmouth_features_from_audios-1144"><span class="linenos">1144</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1145"><a href="#extract_praat_parselmouth_features_from_audios-1145"><span class="linenos">1145</span></a><span class="sd">    Returns:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1146"><a href="#extract_praat_parselmouth_features_from_audios-1146"><span class="linenos">1146</span></a><span class="sd">        dict: A JSON-like dictionary with extracted features structured under &quot;praat_parselmouth&quot;.</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1147"><a href="#extract_praat_parselmouth_features_from_audios-1147"><span class="linenos">1147</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1148"><a href="#extract_praat_parselmouth_features_from_audios-1148"><span class="linenos">1148</span></a>    <span class="c1"># Mark tasks with Pydra</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1149"><a href="#extract_praat_parselmouth_features_from_audios-1149"><span class="linenos">1149</span></a>    <span class="n">extract_pitch_values_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_pitch_values</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1150"><a href="#extract_praat_parselmouth_features_from_audios-1150"><span class="linenos">1150</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1151"><a href="#extract_praat_parselmouth_features_from_audios-1151"><span class="linenos">1151</span></a>    <span class="k">def</span> <span class="nf">_extract_pitch_floor</span><span class="p">(</span><span class="n">pitch_values_out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1152"><a href="#extract_praat_parselmouth_features_from_audios-1152"><span class="linenos">1152</span></a>        <span class="k">return</span> <span class="n">pitch_values_out</span><span class="p">[</span><span class="s2">&quot;pitch_floor&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1153"><a href="#extract_praat_parselmouth_features_from_audios-1153"><span class="linenos">1153</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1154"><a href="#extract_praat_parselmouth_features_from_audios-1154"><span class="linenos">1154</span></a>    <span class="n">_extract_pitch_floor_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">_extract_pitch_floor</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1155"><a href="#extract_praat_parselmouth_features_from_audios-1155"><span class="linenos">1155</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1156"><a href="#extract_praat_parselmouth_features_from_audios-1156"><span class="linenos">1156</span></a>    <span class="k">def</span> <span class="nf">_extract_pitch_ceiling</span><span class="p">(</span><span class="n">pitch_values_out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1157"><a href="#extract_praat_parselmouth_features_from_audios-1157"><span class="linenos">1157</span></a>        <span class="k">return</span> <span class="n">pitch_values_out</span><span class="p">[</span><span class="s2">&quot;pitch_ceiling&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1158"><a href="#extract_praat_parselmouth_features_from_audios-1158"><span class="linenos">1158</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1159"><a href="#extract_praat_parselmouth_features_from_audios-1159"><span class="linenos">1159</span></a>    <span class="n">_extract_pitch_ceiling_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">_extract_pitch_ceiling</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1160"><a href="#extract_praat_parselmouth_features_from_audios-1160"><span class="linenos">1160</span></a>    <span class="k">if</span> <span class="n">speech_rate</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1161"><a href="#extract_praat_parselmouth_features_from_audios-1161"><span class="linenos">1161</span></a>        <span class="n">extract_speech_rate_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_speech_rate</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1162"><a href="#extract_praat_parselmouth_features_from_audios-1162"><span class="linenos">1162</span></a>    <span class="k">if</span> <span class="n">intensity_descriptors</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1163"><a href="#extract_praat_parselmouth_features_from_audios-1163"><span class="linenos">1163</span></a>        <span class="n">extract_intensity_descriptors_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_intensity_descriptors</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1164"><a href="#extract_praat_parselmouth_features_from_audios-1164"><span class="linenos">1164</span></a>    <span class="k">if</span> <span class="n">harmonicity_descriptors</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1165"><a href="#extract_praat_parselmouth_features_from_audios-1165"><span class="linenos">1165</span></a>        <span class="n">extract_harmonicity_descriptors_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_harmonicity_descriptors</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1166"><a href="#extract_praat_parselmouth_features_from_audios-1166"><span class="linenos">1166</span></a>    <span class="k">if</span> <span class="n">formants</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1167"><a href="#extract_praat_parselmouth_features_from_audios-1167"><span class="linenos">1167</span></a>        <span class="n">measure_f1f2_formants_bandwidths_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">measure_f1f2_formants_bandwidths</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1168"><a href="#extract_praat_parselmouth_features_from_audios-1168"><span class="linenos">1168</span></a>    <span class="k">if</span> <span class="n">spectral_moments</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1169"><a href="#extract_praat_parselmouth_features_from_audios-1169"><span class="linenos">1169</span></a>        <span class="n">extract_spectral_moments_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_spectral_moments</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1170"><a href="#extract_praat_parselmouth_features_from_audios-1170"><span class="linenos">1170</span></a>    <span class="k">if</span> <span class="n">pitch</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1171"><a href="#extract_praat_parselmouth_features_from_audios-1171"><span class="linenos">1171</span></a>        <span class="n">extract_pitch_descriptors_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_pitch_descriptors</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1172"><a href="#extract_praat_parselmouth_features_from_audios-1172"><span class="linenos">1172</span></a>    <span class="k">if</span> <span class="n">slope_tilt</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1173"><a href="#extract_praat_parselmouth_features_from_audios-1173"><span class="linenos">1173</span></a>        <span class="n">extract_slope_tilt_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_slope_tilt</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1174"><a href="#extract_praat_parselmouth_features_from_audios-1174"><span class="linenos">1174</span></a>    <span class="k">if</span> <span class="n">cpp_descriptors</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1175"><a href="#extract_praat_parselmouth_features_from_audios-1175"><span class="linenos">1175</span></a>        <span class="n">extract_cpp_descriptors_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_cpp_descriptors</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1176"><a href="#extract_praat_parselmouth_features_from_audios-1176"><span class="linenos">1176</span></a>    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1177"><a href="#extract_praat_parselmouth_features_from_audios-1177"><span class="linenos">1177</span></a>        <span class="n">extract_audio_duration_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_audio_duration</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1178"><a href="#extract_praat_parselmouth_features_from_audios-1178"><span class="linenos">1178</span></a>    <span class="k">if</span> <span class="n">jitter</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1179"><a href="#extract_praat_parselmouth_features_from_audios-1179"><span class="linenos">1179</span></a>        <span class="n">extract_jitter_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_jitter</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1180"><a href="#extract_praat_parselmouth_features_from_audios-1180"><span class="linenos">1180</span></a>    <span class="k">if</span> <span class="n">shimmer</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1181"><a href="#extract_praat_parselmouth_features_from_audios-1181"><span class="linenos">1181</span></a>        <span class="n">extract_shimmer_pt</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">extract_shimmer</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1182"><a href="#extract_praat_parselmouth_features_from_audios-1182"><span class="linenos">1182</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1183"><a href="#extract_praat_parselmouth_features_from_audios-1183"><span class="linenos">1183</span></a>    <span class="c1"># Create the workflow</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1184"><a href="#extract_praat_parselmouth_features_from_audios-1184"><span class="linenos">1184</span></a>    <span class="n">wf</span> <span class="o">=</span> <span class="n">pydra</span><span class="o">.</span><span class="n">Workflow</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;wf&quot;</span><span class="p">,</span> <span class="n">input_spec</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">cache_dir</span><span class="o">=</span><span class="n">cache_dir</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1185"><a href="#extract_praat_parselmouth_features_from_audios-1185"><span class="linenos">1185</span></a>    <span class="n">wf</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">audios</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1186"><a href="#extract_praat_parselmouth_features_from_audios-1186"><span class="linenos">1186</span></a>    <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">extract_pitch_values_pt</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_pitch_values_pt&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1187"><a href="#extract_praat_parselmouth_features_from_audios-1187"><span class="linenos">1187</span></a>    <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1188"><a href="#extract_praat_parselmouth_features_from_audios-1188"><span class="linenos">1188</span></a>        <span class="n">_extract_pitch_floor_pt</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;_extract_pitch_floor_pt&quot;</span><span class="p">,</span> <span class="n">pitch_values_out</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">extract_pitch_values_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1189"><a href="#extract_praat_parselmouth_features_from_audios-1189"><span class="linenos">1189</span></a>    <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1190"><a href="#extract_praat_parselmouth_features_from_audios-1190"><span class="linenos">1190</span></a>    <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1191"><a href="#extract_praat_parselmouth_features_from_audios-1191"><span class="linenos">1191</span></a>        <span class="n">_extract_pitch_ceiling_pt</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1192"><a href="#extract_praat_parselmouth_features_from_audios-1192"><span class="linenos">1192</span></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;_extract_pitch_ceiling_pt&quot;</span><span class="p">,</span> <span class="n">pitch_values_out</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">extract_pitch_values_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1193"><a href="#extract_praat_parselmouth_features_from_audios-1193"><span class="linenos">1193</span></a>        <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1194"><a href="#extract_praat_parselmouth_features_from_audios-1194"><span class="linenos">1194</span></a>    <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1195"><a href="#extract_praat_parselmouth_features_from_audios-1195"><span class="linenos">1195</span></a>    <span class="k">if</span> <span class="n">speech_rate</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1196"><a href="#extract_praat_parselmouth_features_from_audios-1196"><span class="linenos">1196</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">extract_speech_rate_pt</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_speech_rate_pt&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1197"><a href="#extract_praat_parselmouth_features_from_audios-1197"><span class="linenos">1197</span></a>    <span class="k">if</span> <span class="n">pitch</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1198"><a href="#extract_praat_parselmouth_features_from_audios-1198"><span class="linenos">1198</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1199"><a href="#extract_praat_parselmouth_features_from_audios-1199"><span class="linenos">1199</span></a>            <span class="n">extract_pitch_descriptors_pt</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1200"><a href="#extract_praat_parselmouth_features_from_audios-1200"><span class="linenos">1200</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_pitch_descriptors_pt&quot;</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1201"><a href="#extract_praat_parselmouth_features_from_audios-1201"><span class="linenos">1201</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1202"><a href="#extract_praat_parselmouth_features_from_audios-1202"><span class="linenos">1202</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1203"><a href="#extract_praat_parselmouth_features_from_audios-1203"><span class="linenos">1203</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1204"><a href="#extract_praat_parselmouth_features_from_audios-1204"><span class="linenos">1204</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1205"><a href="#extract_praat_parselmouth_features_from_audios-1205"><span class="linenos">1205</span></a>                <span class="n">unit</span><span class="o">=</span><span class="n">pitch_unit</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1206"><a href="#extract_praat_parselmouth_features_from_audios-1206"><span class="linenos">1206</span></a>            <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1207"><a href="#extract_praat_parselmouth_features_from_audios-1207"><span class="linenos">1207</span></a>        <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1208"><a href="#extract_praat_parselmouth_features_from_audios-1208"><span class="linenos">1208</span></a>    <span class="k">if</span> <span class="n">intensity_descriptors</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1209"><a href="#extract_praat_parselmouth_features_from_audios-1209"><span class="linenos">1209</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1210"><a href="#extract_praat_parselmouth_features_from_audios-1210"><span class="linenos">1210</span></a>            <span class="n">extract_intensity_descriptors_pt</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1211"><a href="#extract_praat_parselmouth_features_from_audios-1211"><span class="linenos">1211</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_intensity_descriptors_pt&quot;</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1212"><a href="#extract_praat_parselmouth_features_from_audios-1212"><span class="linenos">1212</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1213"><a href="#extract_praat_parselmouth_features_from_audios-1213"><span class="linenos">1213</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1214"><a href="#extract_praat_parselmouth_features_from_audios-1214"><span class="linenos">1214</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1215"><a href="#extract_praat_parselmouth_features_from_audios-1215"><span class="linenos">1215</span></a>            <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1216"><a href="#extract_praat_parselmouth_features_from_audios-1216"><span class="linenos">1216</span></a>        <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1217"><a href="#extract_praat_parselmouth_features_from_audios-1217"><span class="linenos">1217</span></a>    <span class="k">if</span> <span class="n">harmonicity_descriptors</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1218"><a href="#extract_praat_parselmouth_features_from_audios-1218"><span class="linenos">1218</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1219"><a href="#extract_praat_parselmouth_features_from_audios-1219"><span class="linenos">1219</span></a>            <span class="n">extract_harmonicity_descriptors_pt</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1220"><a href="#extract_praat_parselmouth_features_from_audios-1220"><span class="linenos">1220</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_harmonicity_descriptors_pt&quot;</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1221"><a href="#extract_praat_parselmouth_features_from_audios-1221"><span class="linenos">1221</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1222"><a href="#extract_praat_parselmouth_features_from_audios-1222"><span class="linenos">1222</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1223"><a href="#extract_praat_parselmouth_features_from_audios-1223"><span class="linenos">1223</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1224"><a href="#extract_praat_parselmouth_features_from_audios-1224"><span class="linenos">1224</span></a>            <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1225"><a href="#extract_praat_parselmouth_features_from_audios-1225"><span class="linenos">1225</span></a>        <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1226"><a href="#extract_praat_parselmouth_features_from_audios-1226"><span class="linenos">1226</span></a>    <span class="k">if</span> <span class="n">formants</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1227"><a href="#extract_praat_parselmouth_features_from_audios-1227"><span class="linenos">1227</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1228"><a href="#extract_praat_parselmouth_features_from_audios-1228"><span class="linenos">1228</span></a>            <span class="n">measure_f1f2_formants_bandwidths_pt</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1229"><a href="#extract_praat_parselmouth_features_from_audios-1229"><span class="linenos">1229</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;measure_f1f2_formants_bandwidths_pt&quot;</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1230"><a href="#extract_praat_parselmouth_features_from_audios-1230"><span class="linenos">1230</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1231"><a href="#extract_praat_parselmouth_features_from_audios-1231"><span class="linenos">1231</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1232"><a href="#extract_praat_parselmouth_features_from_audios-1232"><span class="linenos">1232</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1233"><a href="#extract_praat_parselmouth_features_from_audios-1233"><span class="linenos">1233</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1234"><a href="#extract_praat_parselmouth_features_from_audios-1234"><span class="linenos">1234</span></a>            <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1235"><a href="#extract_praat_parselmouth_features_from_audios-1235"><span class="linenos">1235</span></a>        <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1236"><a href="#extract_praat_parselmouth_features_from_audios-1236"><span class="linenos">1236</span></a>    <span class="k">if</span> <span class="n">spectral_moments</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1237"><a href="#extract_praat_parselmouth_features_from_audios-1237"><span class="linenos">1237</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1238"><a href="#extract_praat_parselmouth_features_from_audios-1238"><span class="linenos">1238</span></a>            <span class="n">extract_spectral_moments_pt</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1239"><a href="#extract_praat_parselmouth_features_from_audios-1239"><span class="linenos">1239</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_spectral_moments_pt&quot;</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1240"><a href="#extract_praat_parselmouth_features_from_audios-1240"><span class="linenos">1240</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1241"><a href="#extract_praat_parselmouth_features_from_audios-1241"><span class="linenos">1241</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1242"><a href="#extract_praat_parselmouth_features_from_audios-1242"><span class="linenos">1242</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1243"><a href="#extract_praat_parselmouth_features_from_audios-1243"><span class="linenos">1243</span></a>                <span class="n">window_size</span><span class="o">=</span><span class="n">window_length</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1244"><a href="#extract_praat_parselmouth_features_from_audios-1244"><span class="linenos">1244</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1245"><a href="#extract_praat_parselmouth_features_from_audios-1245"><span class="linenos">1245</span></a>            <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1246"><a href="#extract_praat_parselmouth_features_from_audios-1246"><span class="linenos">1246</span></a>        <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1247"><a href="#extract_praat_parselmouth_features_from_audios-1247"><span class="linenos">1247</span></a>    <span class="k">if</span> <span class="n">slope_tilt</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1248"><a href="#extract_praat_parselmouth_features_from_audios-1248"><span class="linenos">1248</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1249"><a href="#extract_praat_parselmouth_features_from_audios-1249"><span class="linenos">1249</span></a>            <span class="n">extract_slope_tilt_pt</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1250"><a href="#extract_praat_parselmouth_features_from_audios-1250"><span class="linenos">1250</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_slope_tilt_pt&quot;</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1251"><a href="#extract_praat_parselmouth_features_from_audios-1251"><span class="linenos">1251</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1252"><a href="#extract_praat_parselmouth_features_from_audios-1252"><span class="linenos">1252</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1253"><a href="#extract_praat_parselmouth_features_from_audios-1253"><span class="linenos">1253</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1254"><a href="#extract_praat_parselmouth_features_from_audios-1254"><span class="linenos">1254</span></a>            <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1255"><a href="#extract_praat_parselmouth_features_from_audios-1255"><span class="linenos">1255</span></a>        <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1256"><a href="#extract_praat_parselmouth_features_from_audios-1256"><span class="linenos">1256</span></a>    <span class="k">if</span> <span class="n">cpp_descriptors</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1257"><a href="#extract_praat_parselmouth_features_from_audios-1257"><span class="linenos">1257</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1258"><a href="#extract_praat_parselmouth_features_from_audios-1258"><span class="linenos">1258</span></a>            <span class="n">extract_cpp_descriptors_pt</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1259"><a href="#extract_praat_parselmouth_features_from_audios-1259"><span class="linenos">1259</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_cpp_descriptors_pt&quot;</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1260"><a href="#extract_praat_parselmouth_features_from_audios-1260"><span class="linenos">1260</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1261"><a href="#extract_praat_parselmouth_features_from_audios-1261"><span class="linenos">1261</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1262"><a href="#extract_praat_parselmouth_features_from_audios-1262"><span class="linenos">1262</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1263"><a href="#extract_praat_parselmouth_features_from_audios-1263"><span class="linenos">1263</span></a>                <span class="n">frame_shift</span><span class="o">=</span><span class="n">time_step</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1264"><a href="#extract_praat_parselmouth_features_from_audios-1264"><span class="linenos">1264</span></a>            <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1265"><a href="#extract_praat_parselmouth_features_from_audios-1265"><span class="linenos">1265</span></a>        <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1266"><a href="#extract_praat_parselmouth_features_from_audios-1266"><span class="linenos">1266</span></a>    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1267"><a href="#extract_praat_parselmouth_features_from_audios-1267"><span class="linenos">1267</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">extract_audio_duration_pt</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_audio_duration_pt&quot;</span><span class="p">,</span> <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1268"><a href="#extract_praat_parselmouth_features_from_audios-1268"><span class="linenos">1268</span></a>    <span class="k">if</span> <span class="n">jitter</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1269"><a href="#extract_praat_parselmouth_features_from_audios-1269"><span class="linenos">1269</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1270"><a href="#extract_praat_parselmouth_features_from_audios-1270"><span class="linenos">1270</span></a>            <span class="n">extract_jitter_pt</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1271"><a href="#extract_praat_parselmouth_features_from_audios-1271"><span class="linenos">1271</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_jitter_pt&quot;</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1272"><a href="#extract_praat_parselmouth_features_from_audios-1272"><span class="linenos">1272</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1273"><a href="#extract_praat_parselmouth_features_from_audios-1273"><span class="linenos">1273</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1274"><a href="#extract_praat_parselmouth_features_from_audios-1274"><span class="linenos">1274</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1275"><a href="#extract_praat_parselmouth_features_from_audios-1275"><span class="linenos">1275</span></a>            <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1276"><a href="#extract_praat_parselmouth_features_from_audios-1276"><span class="linenos">1276</span></a>        <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1277"><a href="#extract_praat_parselmouth_features_from_audios-1277"><span class="linenos">1277</span></a>    <span class="k">if</span> <span class="n">shimmer</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1278"><a href="#extract_praat_parselmouth_features_from_audios-1278"><span class="linenos">1278</span></a>        <span class="n">wf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1279"><a href="#extract_praat_parselmouth_features_from_audios-1279"><span class="linenos">1279</span></a>            <span class="n">extract_shimmer_pt</span><span class="p">(</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1280"><a href="#extract_praat_parselmouth_features_from_audios-1280"><span class="linenos">1280</span></a>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extract_shimmer_pt&quot;</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1281"><a href="#extract_praat_parselmouth_features_from_audios-1281"><span class="linenos">1281</span></a>                <span class="n">snd</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">lzin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1282"><a href="#extract_praat_parselmouth_features_from_audios-1282"><span class="linenos">1282</span></a>                <span class="n">floor</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_floor_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1283"><a href="#extract_praat_parselmouth_features_from_audios-1283"><span class="linenos">1283</span></a>                <span class="n">ceiling</span><span class="o">=</span><span class="n">wf</span><span class="o">.</span><span class="n">_extract_pitch_ceiling_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1284"><a href="#extract_praat_parselmouth_features_from_audios-1284"><span class="linenos">1284</span></a>            <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1285"><a href="#extract_praat_parselmouth_features_from_audios-1285"><span class="linenos">1285</span></a>        <span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1286"><a href="#extract_praat_parselmouth_features_from_audios-1286"><span class="linenos">1286</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1287"><a href="#extract_praat_parselmouth_features_from_audios-1287"><span class="linenos">1287</span></a>    <span class="c1"># setting multiple workflow outputs</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1288"><a href="#extract_praat_parselmouth_features_from_audios-1288"><span class="linenos">1288</span></a>    <span class="n">output_connections</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;pitch_values_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_pitch_values_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">)]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1289"><a href="#extract_praat_parselmouth_features_from_audios-1289"><span class="linenos">1289</span></a>    <span class="k">if</span> <span class="n">speech_rate</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1290"><a href="#extract_praat_parselmouth_features_from_audios-1290"><span class="linenos">1290</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;speech_rate_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_speech_rate_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1291"><a href="#extract_praat_parselmouth_features_from_audios-1291"><span class="linenos">1291</span></a>    <span class="k">if</span> <span class="n">pitch</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1292"><a href="#extract_praat_parselmouth_features_from_audios-1292"><span class="linenos">1292</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;pitch_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_pitch_descriptors_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1293"><a href="#extract_praat_parselmouth_features_from_audios-1293"><span class="linenos">1293</span></a>    <span class="k">if</span> <span class="n">intensity_descriptors</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1294"><a href="#extract_praat_parselmouth_features_from_audios-1294"><span class="linenos">1294</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;intensity_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_intensity_descriptors_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1295"><a href="#extract_praat_parselmouth_features_from_audios-1295"><span class="linenos">1295</span></a>    <span class="k">if</span> <span class="n">harmonicity_descriptors</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1296"><a href="#extract_praat_parselmouth_features_from_audios-1296"><span class="linenos">1296</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;harmonicity_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_harmonicity_descriptors_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1297"><a href="#extract_praat_parselmouth_features_from_audios-1297"><span class="linenos">1297</span></a>    <span class="k">if</span> <span class="n">formants</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1298"><a href="#extract_praat_parselmouth_features_from_audios-1298"><span class="linenos">1298</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;formants_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">measure_f1f2_formants_bandwidths_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1299"><a href="#extract_praat_parselmouth_features_from_audios-1299"><span class="linenos">1299</span></a>    <span class="k">if</span> <span class="n">spectral_moments</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1300"><a href="#extract_praat_parselmouth_features_from_audios-1300"><span class="linenos">1300</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;spectral_moments_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_spectral_moments_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1301"><a href="#extract_praat_parselmouth_features_from_audios-1301"><span class="linenos">1301</span></a>    <span class="k">if</span> <span class="n">slope_tilt</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1302"><a href="#extract_praat_parselmouth_features_from_audios-1302"><span class="linenos">1302</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;slope_tilt_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_slope_tilt_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1303"><a href="#extract_praat_parselmouth_features_from_audios-1303"><span class="linenos">1303</span></a>    <span class="k">if</span> <span class="n">cpp_descriptors</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1304"><a href="#extract_praat_parselmouth_features_from_audios-1304"><span class="linenos">1304</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;cpp_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_cpp_descriptors_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1305"><a href="#extract_praat_parselmouth_features_from_audios-1305"><span class="linenos">1305</span></a>    <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1306"><a href="#extract_praat_parselmouth_features_from_audios-1306"><span class="linenos">1306</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;audio_duration&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_audio_duration_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1307"><a href="#extract_praat_parselmouth_features_from_audios-1307"><span class="linenos">1307</span></a>    <span class="k">if</span> <span class="n">jitter</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1308"><a href="#extract_praat_parselmouth_features_from_audios-1308"><span class="linenos">1308</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;jitter_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_jitter_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1309"><a href="#extract_praat_parselmouth_features_from_audios-1309"><span class="linenos">1309</span></a>    <span class="k">if</span> <span class="n">shimmer</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1310"><a href="#extract_praat_parselmouth_features_from_audios-1310"><span class="linenos">1310</span></a>        <span class="n">output_connections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;shimmer_out&quot;</span><span class="p">,</span> <span class="n">wf</span><span class="o">.</span><span class="n">extract_shimmer_pt</span><span class="o">.</span><span class="n">lzout</span><span class="o">.</span><span class="n">out</span><span class="p">))</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1311"><a href="#extract_praat_parselmouth_features_from_audios-1311"><span class="linenos">1311</span></a>    <span class="n">wf</span><span class="o">.</span><span class="n">set_output</span><span class="p">(</span><span class="n">output_connections</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1312"><a href="#extract_praat_parselmouth_features_from_audios-1312"><span class="linenos">1312</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1313"><a href="#extract_praat_parselmouth_features_from_audios-1313"><span class="linenos">1313</span></a>    <span class="k">with</span> <span class="n">pydra</span><span class="o">.</span><span class="n">Submitter</span><span class="p">(</span><span class="n">plugin</span><span class="o">=</span><span class="n">plugin</span><span class="p">,</span> <span class="o">**</span><span class="n">plugin_args</span><span class="p">)</span> <span class="k">as</span> <span class="n">sub</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1314"><a href="#extract_praat_parselmouth_features_from_audios-1314"><span class="linenos">1314</span></a>        <span class="n">sub</span><span class="p">(</span><span class="n">wf</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1315"><a href="#extract_praat_parselmouth_features_from_audios-1315"><span class="linenos">1315</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1316"><a href="#extract_praat_parselmouth_features_from_audios-1316"><span class="linenos">1316</span></a>    <span class="n">outputs</span> <span class="o">=</span> <span class="n">wf</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1317"><a href="#extract_praat_parselmouth_features_from_audios-1317"><span class="linenos">1317</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1318"><a href="#extract_praat_parselmouth_features_from_audios-1318"><span class="linenos">1318</span></a>    <span class="n">extracted_data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1319"><a href="#extract_praat_parselmouth_features_from_audios-1319"><span class="linenos">1319</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1320"><a href="#extract_praat_parselmouth_features_from_audios-1320"><span class="linenos">1320</span></a>    <span class="k">for</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">outputs</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1321"><a href="#extract_praat_parselmouth_features_from_audios-1321"><span class="linenos">1321</span></a>        <span class="n">feature_data</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1322"><a href="#extract_praat_parselmouth_features_from_audios-1322"><span class="linenos">1322</span></a>        <span class="c1"># Audio duration</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1323"><a href="#extract_praat_parselmouth_features_from_audios-1323"><span class="linenos">1323</span></a>        <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1324"><a href="#extract_praat_parselmouth_features_from_audios-1324"><span class="linenos">1324</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">audio_duration</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1325"><a href="#extract_praat_parselmouth_features_from_audios-1325"><span class="linenos">1325</span></a>        <span class="c1"># Timing and Pausing</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1326"><a href="#extract_praat_parselmouth_features_from_audios-1326"><span class="linenos">1326</span></a>        <span class="k">if</span> <span class="n">speech_rate</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1327"><a href="#extract_praat_parselmouth_features_from_audios-1327"><span class="linenos">1327</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;speaking_rate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">speech_rate_out</span><span class="p">[</span><span class="s2">&quot;speaking_rate&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1328"><a href="#extract_praat_parselmouth_features_from_audios-1328"><span class="linenos">1328</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;articulation_rate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">speech_rate_out</span><span class="p">[</span><span class="s2">&quot;articulation_rate&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1329"><a href="#extract_praat_parselmouth_features_from_audios-1329"><span class="linenos">1329</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;phonation_ratio&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">speech_rate_out</span><span class="p">[</span><span class="s2">&quot;phonation_ratio&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1330"><a href="#extract_praat_parselmouth_features_from_audios-1330"><span class="linenos">1330</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;pause_rate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">speech_rate_out</span><span class="p">[</span><span class="s2">&quot;pause_rate&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1331"><a href="#extract_praat_parselmouth_features_from_audios-1331"><span class="linenos">1331</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_pause_duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">speech_rate_out</span><span class="p">[</span><span class="s2">&quot;mean_pause_dur&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1332"><a href="#extract_praat_parselmouth_features_from_audios-1332"><span class="linenos">1332</span></a>        <span class="c1"># Pitch and Intensity:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1333"><a href="#extract_praat_parselmouth_features_from_audios-1333"><span class="linenos">1333</span></a>        <span class="k">if</span> <span class="n">pitch</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1334"><a href="#extract_praat_parselmouth_features_from_audios-1334"><span class="linenos">1334</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;mean_f0_</span><span class="si">{</span><span class="n">pitch_unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">pitch_out</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;mean_f0_</span><span class="si">{</span><span class="n">pitch_unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1335"><a href="#extract_praat_parselmouth_features_from_audios-1335"><span class="linenos">1335</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;std_f0_</span><span class="si">{</span><span class="n">pitch_unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">pitch_out</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;stdev_f0_</span><span class="si">{</span><span class="n">pitch_unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1336"><a href="#extract_praat_parselmouth_features_from_audios-1336"><span class="linenos">1336</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_intensity_db&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">intensity_out</span><span class="p">[</span><span class="s2">&quot;mean_db&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1337"><a href="#extract_praat_parselmouth_features_from_audios-1337"><span class="linenos">1337</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_intensity_db&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">intensity_out</span><span class="p">[</span><span class="s2">&quot;std_db&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1338"><a href="#extract_praat_parselmouth_features_from_audios-1338"><span class="linenos">1338</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;range_ratio_intensity_db&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">intensity_out</span><span class="p">[</span><span class="s2">&quot;range_db_ratio&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1339"><a href="#extract_praat_parselmouth_features_from_audios-1339"><span class="linenos">1339</span></a>            <span class="c1"># feature_data[&quot;pitch_floor&quot;] = output.output.pitch_values_out[&quot;pitch_floor&quot;]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1340"><a href="#extract_praat_parselmouth_features_from_audios-1340"><span class="linenos">1340</span></a>            <span class="c1"># feature_data[&quot;pitch_ceiling&quot;] = output.output.pitch_values_out[&quot;pitch_ceiling&quot;]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1341"><a href="#extract_praat_parselmouth_features_from_audios-1341"><span class="linenos">1341</span></a>        <span class="c1"># Quality Features:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1342"><a href="#extract_praat_parselmouth_features_from_audios-1342"><span class="linenos">1342</span></a>        <span class="k">if</span> <span class="n">harmonicity_descriptors</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1343"><a href="#extract_praat_parselmouth_features_from_audios-1343"><span class="linenos">1343</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_hnr_db&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">harmonicity_out</span><span class="p">[</span><span class="s2">&quot;hnr_db_mean&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1344"><a href="#extract_praat_parselmouth_features_from_audios-1344"><span class="linenos">1344</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_hnr_db&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">harmonicity_out</span><span class="p">[</span><span class="s2">&quot;hnr_db_std_dev&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1345"><a href="#extract_praat_parselmouth_features_from_audios-1345"><span class="linenos">1345</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_slope&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">slope_tilt_out</span><span class="p">[</span><span class="s2">&quot;spectral_slope&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1346"><a href="#extract_praat_parselmouth_features_from_audios-1346"><span class="linenos">1346</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_tilt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">slope_tilt_out</span><span class="p">[</span><span class="s2">&quot;spectral_tilt&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1347"><a href="#extract_praat_parselmouth_features_from_audios-1347"><span class="linenos">1347</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;cepstral_peak_prominence_mean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">cpp_out</span><span class="p">[</span><span class="s2">&quot;mean_cpp&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1348"><a href="#extract_praat_parselmouth_features_from_audios-1348"><span class="linenos">1348</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;cepstral_peak_prominence_std&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">cpp_out</span><span class="p">[</span><span class="s2">&quot;std_dev_cpp&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1349"><a href="#extract_praat_parselmouth_features_from_audios-1349"><span class="linenos">1349</span></a>        <span class="c1"># Formant (F1, F2):</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1350"><a href="#extract_praat_parselmouth_features_from_audios-1350"><span class="linenos">1350</span></a>        <span class="k">if</span> <span class="n">formants</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1351"><a href="#extract_praat_parselmouth_features_from_audios-1351"><span class="linenos">1351</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_f1_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;f1_mean&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1352"><a href="#extract_praat_parselmouth_features_from_audios-1352"><span class="linenos">1352</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_f1_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;f1_std&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1353"><a href="#extract_praat_parselmouth_features_from_audios-1353"><span class="linenos">1353</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_b1_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;b1_mean&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1354"><a href="#extract_praat_parselmouth_features_from_audios-1354"><span class="linenos">1354</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_b1_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;b1_std&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1355"><a href="#extract_praat_parselmouth_features_from_audios-1355"><span class="linenos">1355</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_f2_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;f2_mean&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1356"><a href="#extract_praat_parselmouth_features_from_audios-1356"><span class="linenos">1356</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_f2_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;f2_std&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1357"><a href="#extract_praat_parselmouth_features_from_audios-1357"><span class="linenos">1357</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;mean_b2_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;b2_mean&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1358"><a href="#extract_praat_parselmouth_features_from_audios-1358"><span class="linenos">1358</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;std_b2_loc&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">formants_out</span><span class="p">[</span><span class="s2">&quot;b2_std&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1359"><a href="#extract_praat_parselmouth_features_from_audios-1359"><span class="linenos">1359</span></a>        <span class="c1"># Spectral Moments:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1360"><a href="#extract_praat_parselmouth_features_from_audios-1360"><span class="linenos">1360</span></a>        <span class="k">if</span> <span class="n">spectral_moments</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1361"><a href="#extract_praat_parselmouth_features_from_audios-1361"><span class="linenos">1361</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_gravity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">spectral_moments_out</span><span class="p">[</span><span class="s2">&quot;spectral_gravity&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1362"><a href="#extract_praat_parselmouth_features_from_audios-1362"><span class="linenos">1362</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_std_dev&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">spectral_moments_out</span><span class="p">[</span><span class="s2">&quot;spectral_std_dev&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1363"><a href="#extract_praat_parselmouth_features_from_audios-1363"><span class="linenos">1363</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_skewness&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">spectral_moments_out</span><span class="p">[</span><span class="s2">&quot;spectral_skewness&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1364"><a href="#extract_praat_parselmouth_features_from_audios-1364"><span class="linenos">1364</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;spectral_kurtosis&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">spectral_moments_out</span><span class="p">[</span><span class="s2">&quot;spectral_kurtosis&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1365"><a href="#extract_praat_parselmouth_features_from_audios-1365"><span class="linenos">1365</span></a>        <span class="c1"># Jitter Descriptors:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1366"><a href="#extract_praat_parselmouth_features_from_audios-1366"><span class="linenos">1366</span></a>        <span class="k">if</span> <span class="n">jitter</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1367"><a href="#extract_praat_parselmouth_features_from_audios-1367"><span class="linenos">1367</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;local_jitter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">jitter_out</span><span class="p">[</span><span class="s2">&quot;local_jitter&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1368"><a href="#extract_praat_parselmouth_features_from_audios-1368"><span class="linenos">1368</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;localabsolute_jitter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">jitter_out</span><span class="p">[</span><span class="s2">&quot;localabsolute_jitter&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1369"><a href="#extract_praat_parselmouth_features_from_audios-1369"><span class="linenos">1369</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;rap_jitter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">jitter_out</span><span class="p">[</span><span class="s2">&quot;rap_jitter&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1370"><a href="#extract_praat_parselmouth_features_from_audios-1370"><span class="linenos">1370</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;ppq5_jitter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">jitter_out</span><span class="p">[</span><span class="s2">&quot;ppq5_jitter&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1371"><a href="#extract_praat_parselmouth_features_from_audios-1371"><span class="linenos">1371</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;ddp_jitter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">jitter_out</span><span class="p">[</span><span class="s2">&quot;ddp_jitter&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1372"><a href="#extract_praat_parselmouth_features_from_audios-1372"><span class="linenos">1372</span></a>        <span class="c1"># Shimmer Descriptors:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1373"><a href="#extract_praat_parselmouth_features_from_audios-1373"><span class="linenos">1373</span></a>        <span class="k">if</span> <span class="n">shimmer</span><span class="p">:</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1374"><a href="#extract_praat_parselmouth_features_from_audios-1374"><span class="linenos">1374</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;local_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;local_shimmer&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1375"><a href="#extract_praat_parselmouth_features_from_audios-1375"><span class="linenos">1375</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;localDB_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;localDB_shimmer&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1376"><a href="#extract_praat_parselmouth_features_from_audios-1376"><span class="linenos">1376</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;apq3_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;apq3_shimmer&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1377"><a href="#extract_praat_parselmouth_features_from_audios-1377"><span class="linenos">1377</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;apq5_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;apq5_shimmer&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1378"><a href="#extract_praat_parselmouth_features_from_audios-1378"><span class="linenos">1378</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;apq11_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;apq11_shimmer&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1379"><a href="#extract_praat_parselmouth_features_from_audios-1379"><span class="linenos">1379</span></a>            <span class="n">feature_data</span><span class="p">[</span><span class="s2">&quot;dda_shimmer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">shimmer_out</span><span class="p">[</span><span class="s2">&quot;dda_shimmer&quot;</span><span class="p">]</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1380"><a href="#extract_praat_parselmouth_features_from_audios-1380"><span class="linenos">1380</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1381"><a href="#extract_praat_parselmouth_features_from_audios-1381"><span class="linenos">1381</span></a>        <span class="n">extracted_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature_data</span><span class="p">)</span>
</span><span id="extract_praat_parselmouth_features_from_audios-1382"><a href="#extract_praat_parselmouth_features_from_audios-1382"><span class="linenos">1382</span></a>
</span><span id="extract_praat_parselmouth_features_from_audios-1383"><a href="#extract_praat_parselmouth_features_from_audios-1383"><span class="linenos">1383</span></a>    <span class="k">return</span> <span class="n">extracted_data</span>
</span></pre></div>


            <div class="docstring"><p>Extract features from a list of Audio objects and return a JSON-like dictionary.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>audios (list):</strong>  List of Audio objects to extract features from.</li>
<li><strong>pitch_unit (str):</strong>  Unit for pitch measurements. Defaults to "Hertz".</li>
<li><strong>time_step (float):</strong>  Time rate at which to extract features. Defaults to 0.005.</li>
<li><strong>window_length (float):</strong>  Window length in seconds for spectral features. Defaults to 0.025.</li>
<li><strong>cache_dir (Optional[str]):</strong>  Directory to use for caching by pydra. Defaults to None.</li>
<li><strong>speech_rate (bool):</strong>  Whether to extract speech rate. Defaults to True.</li>
<li><strong>intensity_descriptors (bool):</strong>  Whether to extract intensity descriptors. Defaults to True.</li>
<li><strong>harmonicity_descriptors (bool):</strong>  Whether to extract harmonic descriptors. Defaults to True.</li>
<li><strong>formants (bool):</strong>  Whether to extract formants. Defaults to True.</li>
<li><strong>spectral_moments (bool):</strong>  Whether to extract spectral moments. Defaults to True.</li>
<li><strong>pitch (bool):</strong>  Whether to extract pitch. Defaults to True.</li>
<li><strong>slope_tilt (bool):</strong>  Whether to extract slope and tilt. Defaults to True.</li>
<li><strong>cpp_descriptors (bool):</strong>  Whether to extract CPP descriptors. Defaults to True.</li>
<li><strong>duration (bool):</strong>  Whether to extract duration. Defaults to True.</li>
<li><strong>jitter (bool):</strong>  Whether to extract jitter. Defaults to True.</li>
<li><strong>shimmer (bool):</strong>  Whether to extract shimmer. Defaults to True.</li>
<li><strong>plugin (str):</strong>  Plugin to use for feature extraction. Defaults to "serial".</li>
<li><strong>plugin_args (Optional[Dict[str, Any]]):</strong>  Arguments for the pydra plugin. Defaults to {}.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>dict: A JSON-like dictionary with extracted features structured under "praat_parselmouth".</p>
</blockquote>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>